<template>
  <template if:true={ScreenLoaded}>
    <c-dbu_page-loader></c-dbu_page-loader>
  </template>
  <div class="slds-container_x-large slds-container_center orderPage ">

    <h1 class="slds-col_padded">
      <!-- Review Order -->
      {label.dbu_reviewPage_reviewOrder}

    </h1>

    <div class="slds-grid slds-wrap">
      <div class="slds-col slds-size_1-of-1 slds-large-size_8-of-12 slds-col_padded">
        <div class="slds-grid reviewShip">

          <div class="slds-col reviewAdj ">
            <div class="content">
              <template if:true={addressData}>

                <template for:each={addressData} for:item="address">
                  <template if:true={address.billingAddressList}>
                    <div key={address.id} class="title">

                      <h4>{label.dbu_reviewPage_billingAddress}</h4>
                      <!-- <a onclick={handleClickgoToCheckoutURL}>{label.dbu_reviewPage_change}</a> -->

                    </div>
                    <template for:each={address.billingAddressList} for:item="addData">
                      <ul key={addData.id}>
                      <!--
                        <li>
                          <strong> {addData.firstName}
                      
                            {addData.lastName}</strong>
                        </li>
                      -->
                        <li>
                          {addData.addressFirstline}</li>
                      
                        <li> {addData.addressSecondline}</li>
                      
                      
                        <li> {addData.city}, {addData.state}, {addData.postalCode}</li>
                        <li> {addData.country}</li>
                      
                      </ul>

                    </template>

                  </template>
                </template>
              </template>
            </div>
          </div>  

          
          <!--
          <div class="slds-col  reviewAdj">
            <div class="content">
            </div>
          </div>
          -->
        

        </div>

          <c-dbu_shipand-pickup-products cart-id= {cartId} ></c-dbu_shipand-pickup-products>
          <!--
        <div class="orderReviewItems">
          <h4>{label.dbu_reviewPage_items}</h4>
        </div>
      -->
          <div class="mainRelCart">
        <!--
          <template if:false={cartDetails}>
            <h4>
             {label.dbu_reviewPage_CartEmpty_Message}
            </h4>
          </template>
        -->
          <!--
          <template if:true={cartDetails}>
            <div class="slds-grid slds-wrap cartTitHeader">
              <div class="slds-col slds-size_6-of-12 slds-col_padded">
                
                {label.dbu_reviewPage_product}   
              </div>
              <div class="slds-col slds-size_2-of-12 slds-col_padded qtyLabel">
                
                {label.dbu_reviewPage_quantity}  
                
              </div>
              <div class="slds-col slds-size_2-of-12 slds-col_padded">
                
                {label.dbu_reviewPage_unitPrice}  
                
              </div>
              <div class="slds-col slds-size_2-of-12 slds-col_padded">
                
                {label.dbu_reviewPage_subTotal}
              </div>

            </div>
          </template>
        -->
          <!--
        <template for:each={cartDetails} for:item="cart">
            <div key={cart.ccrz__CartId__c}>
              <template for:each={cart.lstCartItem} for:item="cartItem">
                <div key={cartItem.Id} class="slds-grid slds-wrap cartItemRow">
                  <div class="slds-col slds-size_6-of-12 slds-col_padded slds-grid slds-wrap itemInfo">
                    <div class="slds-col slds-size_3-of-12 slds-col_padded">
       
                      <template if:true ={cartItem.cartItemProductDetailWrapper.URI}>
                        <c-dbu_image-Generator imageurl={cartItem.cartItemProductDetailWrapper.URI}></c-dbu_image-Generator>
                        </template>
                    </div>
                    <div class="slds-col slds-size_9-of-12">
                       <span onclick={navigateToProductPage}
                      data-id={cartItem.cartItemProductDetailWrapper.sfid} data-name={cartItem.cartItemProductDetailWrapper.sfdcName}>{cartItem.cartItemProductDetailWrapper.sfdcName}</span> 
                      

                      <template if:true= {cartItem.cartItemProductDetailWrapper.isCoreProduct}><div>{coreChargeAvailabilityMsg}</div></template>
                    </div>

                  </div>
                  <div class="slds-col slds-size_2-of-12 slds-col_padded qty">
                    {cartItem.cartItem.ccrz__Quantity__c}
                  </div>

                  <div class="slds-col slds-size_2-of-12 slds-col_padded amt" data-id={cartItem.sfid}>
                    {cartItem.formatedUnitPrice} 
                  </div>
                  <div class="slds-col slds-size_2-of-12 slds-col_padded amt" data-id={cartItem.sfid}>
                    {cartItem.formatedSubTotal} 
                  </div>

                </div>
              </template>

            </div>
          </template>
        -->
          <div class="slds-col slds-size_1-of-1 slds-large-size_4-of-12 slds-col_padded ">


          </div>
          </div>
      </div>
      <div class="slds-col slds-size_1-of-1 slds-large-size_4-of-12 slds-col_padded stickyElement">
        <template for:each={cartDetails} for:item="cart">
          <div key={cart.ccrz__CartId__c}>
            <div class="orderSummary">
              <h5><strong>{label.dbu_reviewPage_orderSummary}</strong></h5>
              <ul>
                <li>
                  <span>{label.dbu_reviewPage_items}: </span><span>{cartOriginalAmount}</span>
                </li>
                <li>
                  <span>{label.dbu_reviewPage_Discount}:</span> <span>{cartDiscountAmount}</span>
                </li>
                <li>
                  <span>{label.dbu_reviewOrder_Subtotal}:</span> <span>{cartSubtotalAmount}</span>
                </li>
                <li>
                  <!-- <span>Tax:</span><span>${cart.taxAmount}</span> -->
                  <span>{label.dbu_reviewPage_Tax}:</span><span>{cartTaxAmount}</span>
                </li>
                <li>
                  <!-- <span>Shipping Cost:</span><span>{shipAmount}</span> -->
                  <span>{label.dbu_reviewPage_shippingCost}:</span><span>{cartShipAmount}</span>

                </li>
                <li>
                  <strong> {label.dbu_reviewPage_total}:
                  </strong><strong>{cartTotalAmount}</strong>
                </li>
              </ul>

            </div>
          </div>
        </template>
      </div>


    </div>

    <div class="slds-grid slds-wrap">
      <div class=" bottomBtns slds-large-size_8-of-12 slds-col_padded">
        <a onclick={handleClickgoToCheckoutURL} class="slds-button slds-button_outline-brand ">{label.dbu_reviewPage_Return_to_Shipping}
        </a>
        <!-- <a href={goToPaymentURL} class="slds-button slds-button_brand w-100">Proceed to
          Payment
        </a> -->
      <!--INC2628005 CTS CHANGES-->
      <template if:false={isVertexCallError}>
        <a onclick={handleClickGoToPayment} class="slds-button slds-button_brand ">{label.dbu_reviewPage_Proceed_to_Payment}
        </a>
      </template> 

      <template if:true={isVertexCallError}>
        <a class="slds-button slds-button_brand " disabled="">{label.dbu_reviewPage_Proceed_to_Payment}
         </a>
      </template>

      </div>
       
      <template if:true={isVertexCallErrorMsg}>
        <lightning-formatted-rich-text value={label.taxFailMsg}></lightning-formatted-rich-text>
      </template>
      <!--INC2628005 CTS CHANGES-->     
    </div>

  </div>

</template>