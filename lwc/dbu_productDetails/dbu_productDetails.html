<template>
    <div class="slds-container_x-large slds-container_center product_Details">
        <!--<lightning-card title="Parts Details" icon-name="custom:custom30">-->

        <!-- <lightning-record-view-form
                record-id={recordId}
                object-api-name="ccrz__E_Product__c">
        <div class="slds-m-around_medium">
                <lightning-output-field field-name="Name"></lightning-output-field>
                <lightning-output-field field-name="ccrz__Quantityperunit__c"></lightning-output-field>
        </div>
    </lightning-record-view-form>
        <lightning-button variant="brand" label="Add to Cart" title="Add to Cart" onclick={handlePayClick1} class="slds-m-left_x-small"></lightning-button>  
        <lightning-button variant="brand" label="Check Out" title="Check Out" onclick={handlePayClick1} class="slds-m-left_x-small"></lightning-button>   -->



        <!-- </lightning-card>  -->


        <template if:true={ScreenLoaded}>
            <c-dbu_page-loader></c-dbu_page-loader>
        </template>

        <template for:each={productDetails} for:item="product">

            <div key={product.sfid} class="prodContTop">

                <h1 class="mWindow">{product.sfdcName}</h1>
            </div>
        </template>

        <div class="slds-grid slds-wrap">
            <template if:true={initialLoad}>
                <div
                    class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_5-of-12 prodImageBlock stickyElement">
                    <a class="zoomPopupLink" onclick={zoomPopup}><i class="icon-zoom"></i></a>
                    <c-dbu_product-detail-image></c-dbu_product-detail-image>
                    <c-dbu_product-detail-images></c-dbu_product-detail-images>

                    <template if:true={zoomPopupWindow}>
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-02" aria-modal="true"
                            aria-describedby="modal-content-id-2"
                            class="slds-modal slds-fade-in-open slds-modal_medium zoomPopupWindow headerModal">
                            <div class="slds-modal__container">
                                <header class="slds-modal__header">
                                    <button
                                        class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                        title="Close" onclick={zoomPopup}>
                                        <lightning-icon icon-name="utility:close" alternative-text="close"
                                            variant="inverse" size="small"></lightning-icon>
                                        <span class="slds-assistive-text">{allLabels.dbu_Close}</span>
                                    </button>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
                                    <c-dbu_product-detail-image></c-dbu_product-detail-image>
                                    <c-dbu_product-detail-images></c-dbu_product-detail-images>
                                </div>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                </div>
            </template>


            <div class="slds-col  slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_7-of-12 ">
                <div class="column img_pointer prod_ShareIcon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="svg_clr">;
                        <use xlink:href={shareIcon}></use>
                    </svg>
                </div>
                <template for:each={productDetails} for:item="product">

                    <div key={product.sfid} class="prodContTop">

                        <h1 class="dWindow">{product.sfdcName}</h1>
                        <!--Added by shriram on 20aug20-->
                        <!-- <div>
                            <a href = {baseURL}>Go to new product</a>
                        </div> -->
                        <!--ended here-->
                        <!--<div class="rating slds-grid slds-wrap slds-grid_vertical-align-start rating_wrap">
                           <div class="rate slds-col">
                                <div class={calculatedStarRating}>
                                    <div class="fill-ratingsThree-PFour">
                                        <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span>
                                    </div>
                                    <div class="empty-ratings">
                                        <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span>
                                    </div>
                                </div>
                            </div>
                            <div class="prod_review slds-col"><a class="rating_link">{product.numberOfReviews} Ratings</a></div>
                        </div>-->


                        <!-- <template for:each={productPrice} for:item="price"> -->
                        <div class="priceSection">
                            
                            <div class="prodPrice">
                                <template if:true={promotionCategory}>
                                    <span class="sale-tag"> 
                                        <img alt = "clearance sale" src={clearanceImg}/>{promotionCategory}
                                    </span>
                                </template> 
                                <template if:true={isOriginalPrice}> 
                                    <!-- As part of CECI-1098 PDP optimization changed label to allLabels everywhere-->
                                    <label class="pricelabel">{allLabels.dbu_miniCart_price}:</label>                   
                                    <div class="priceDetail">                                      
                                        <template if:true={product.hasCoreCharge}>{sumCoreProductPrice}</template>
                                        <template if:false={product.hasCoreCharge}>{formatedprice} </template>
                                        <span class="originalPrice">{originalPrice}</span>
                                        <span class="discPrice">({discPercent}{allLabels.dbu_percentOff})</span>
                                    </div>
                                    <!-- Core Icon and Tooltip for core products Sasikanth CECI 1081 Start-->
                                    <div class="d-flex pt-10">
                                        <span class="online-price">{allLabels.dbu_OnlinePriceOnly} </span>
                                        <template if:true={adjDisc}>
                                            <div class="core-container" onmouseover={handlemouseover}>
                                                <div class="align-core">
                                                    <div>
                                                        <span class="info-tag" aria-describedby="help" aria-hidden="true"> 
                                                            <img alt="info-tag" src={infoImg}/>
                                                        </span>
                                                        <span class="ad-disc">{allLabels.dbu_adjusted_disc}</span>
                                                    </div>
                                                    <section if:true={isShowModal} aria-describedby="dialog-body-id-110" aria-label="Dialog Title" class="slds-popover slds-nubbin_left discount-tooltip" role="dialog">
                                                          <span class="slds-assistive-text">Close dialog</span>
                                                        <!-- <lightning-button-icon icon-name="utility:close"  alternative-text="Close Icon" title="Settings"></lightning-button-icon> -->
                                                            <div class="slds-popover__body " data-target-id="dialog-body-id-110">
                                                                <div class="slds-media">
                                                                    <div class="slds-media__body">
                                                                        {allLabels.dbu_disc_tooltip}
                                                                            <span class="close-tag" onclick={closePopover}>
                                                                                <img alt ="close-tag" src={closeImg}/> 
                                                                            </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                      </section>
                                                      <!-- <div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left discount-tooltip" role="tooltip" data-id="help">
                                                        <div class="slds-popover__body">{allLabels.dbu_disc_tooltip}
                                                            <span class="close-tag">
                                                                <img alt ="close-tag" src={closeImg}/> 
                                                            </span>
                                                        </div>
                                                    </div> -->
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                    <!-- Core Icon and Tooltip for core products Sasikanth CECI 1081 End-->
                                </template>
                                <template if:false={isOriginalPrice}>
                                    <label class="pricelabel">{allLabels.dbu_miniCart_price}:</label>
                                    <div class="priceDetail">
                                        <template if:true={product.hasCoreCharge}>{sumCoreProductPrice}</template>
                                        <template if:false={product.hasCoreCharge}>{formatedprice} </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        <!-- </template> -->
                        <!--11-11-2020 Refundable Core Chareg-->
                        <template if:true={product.hasCoreCharge}>
                            <div class="coreChargeSec">
                                <strong> {allLabels.coreChargeLbl}: {formatedCoreCharge} </strong>
                                <span>{allLabels.dbu_see} <a href={corePolicyURL} target="_blank" >{allLabels.dbu_home_footer_corePolicy}</a> {allLabels.dbu_For_detail}.
                                </span>
                            </div>
                        </template>
                        <!-- Ended here core charge -->
                        <!-- -->





                        <template if:true={productInvWrapper}>


                            <template for:each={productInvWrapper} for:item="inv">



                                <div key={inv.sfid} class="tr_prod">
                                    <div>
                                        <!-- <template if:false={inv.notifyStock}> -->
                                        <template if:true={productInStock}>
                                            <div class="dropdown_instock">
                                                <template if:false={inputQuantity}>
                                                    <template if:false={hasCoreChild}>
                                                        <lightning-combobox name="progress" value={valueDrpdwn}
                                                            placeholder={valueDrpdwn} options={options} label="Quantity"
                                                            onchange={handleChangeQuantity} data-currentproductname={product.sfdcName}
                                                            class="productDetail_Combo qtyDropdown">
                                                        </lightning-combobox>
                                                    </template>
                                                    <!-- <template if:false={inv.lowStock}> -->
                                                    <span class="span_instock">{inv.invStockData}</span>
                                                    <!-- </template> -->
                                                </template>
                                                <template if:true={inputQuantity}>
                                                    <lightning-input type="text"
                                                        class="instock_input inputAlign productDetail_Combo  "
                                                        value={valueDrpdwn} onchange={handleChangeInputQuantity} onblur={handleChangeAddToCart}
                                                        data-currentproductname={product.sfdcName} label="Quantity">
                                                    </lightning-input>
                                                    <!-- <template if:false={inv.lowStock}> -->
                                                    <span class="span_instock">{inv.invStockData}</span>
                                                    <!-- </template> -->
                                                </template>
                                                <!--Aakriti CECI-693-->
                                            <div if:true={hasQtyValidationError} class="qtyNotify">
                                                {allLabels.dbu_maximum_quantity} {maxAllowedQty}
                                            </div>
                                            </div>
                                            <!--Aakriti CECI-693-->
                                            <div if:true={showQtyExceedError} class="qtyError">
                                                {allLabels.dbu_PDP_max_quantity} {maxAllowedQty}{allLabels.dbu_PDP_max_quantity_2}
                                            </div>

                                        </template>



                                        <div class="productFlex">
                                            <template if:false={productInStock}>
                                                <template for:each={productInvWrapper} for:item="prodInvStatus">
                                                    <div class="productAlignment" key={prodInvStatus.id}>
                                                        <span class="label_txt pt_5 labelRClr"
                                                            data-val={prodInvStatus.invStockData}>{prodInvStatus.invStockData}</span>
                                                        <span class="label_txt pt_5 labelRClr productLabel">-</span>
                                                    </div>
                                                </template>
                                                <div class="slds-theme_default productAlignment">

                                                    <a onclick={openmodalNotify} class=" labelBCLr">
                                                        {allLabels.dbu_NotifyMSG}</a>

                                                    <template if:true={openmodelNotify}>

                                                        <div class="demo-only productDetail_Height ">
                                                            <section role="dialog" tabindex="-1"
                                                                aria-labelledby="modal-heading-01" aria-modal="true"
                                                                aria-describedby="modal-content-id-1"
                                                                class="slds-modal slds-fade-in-open">
                                                                <div class="slds-modal__container">
                                                                    <div>
                                                                        <div
                                                                            class="slds-modal__content slds-p-around_medium popup_image">
                                                                            <!-- <img src={notifymePopupImg} > -->
                                                                            <template if:true={showNotifyPopup}>
                                                                                <button
                                                                                    class="slds-button slds-button_icon  cross_btn slds-button_icon-inverse nofityMeBtn"
                                                                                    title="Close"
                                                                                    onclick={closeModalNotify}>
                                                                                    <lightning-icon
                                                                                        icon-name="utility:close"
                                                                                        size="medium">
                                                                                    </lightning-icon>
                                                                                    <span
                                                                                        class="slds-assistive-text">Close</span>
                                                                                </button>

                                                                                <div class="center_align">
                                                                                    <h3 class="part_avail">
                                                                                        {allLabels.dbu_Part_Availbility}
                                                                                    </h3>
                                                                                    <p>
                                                                                        {allLabels.dbu_product_notify}
                                                                                        <br />
                                                                                        {product.sfdcName} <br />
                                                                                        {allLabels.dbu_isBackInStock}
                                                                                    </p>

                                                                                </div>

                                                                            </template>
                                                                            <template if:false={showNotifyPopup}>

                                                                                <button
                                                                                    class="slds-button slds-button_icon  cross_btn slds-button_icon-inverse"
                                                                                    title="Close"
                                                                                    onclick={closeModalNotify}>
                                                                                    <lightning-icon
                                                                                        icon-name="utility:close"
                                                                                        size="medium">
                                                                                    </lightning-icon>
                                                                                    <span
                                                                                        class="slds-assistive-text">Close</span>
                                                                                </button>

                                                                                <center class="notify_label">
                                                                                    <h1>{allLabels.dbu_product_bakcinstock}
                                                                                    </h1>
                                                                                </center>

                                                                            </template>

                                                                            <template if:true={showNotifyPopup}>

                                                                                <div class="partAvailInput">
                                                                                    <div class="full-input">

                                                                                        <input type="text"
                                                                                            class="popup_text notifyEmail"
                                                                                            placeholder="Email Address">
                                                                                    </div>
                                                                                    <template
                                                                                        if:true={openmodelNotifyError}>
                                                                                        <span class='error'>Please Enter
                                                                                            Email Address</span>
                                                                                    </template>
                                                                                    <template
                                                                                        if:true={openmodelNotifyInValidEmailError}>
                                                                                        <span class='error'>Please Enter
                                                                                            Valid Email Address</span>
                                                                                    </template>  	                                                                                    
                                                                                    <button type="button"
                                                                                        class="btn_notify slds-button slds-button_destructive"
                                                                                        onclick={handleNotifyMe}>Notify
                                                                                        Me!</button>

                                                                                </div>
                                                                            </template>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </section>
                                                            <div class="slds-backdrop slds-backdrop_open"></div>
                                                        </div>
                                                    </template>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                    <template if:true={productInStock}>

                                        <template if:true={productcode}>
                                            <template if:false={Checkcreateengine}>
                                                <div class="esnSearchBlock">
                                                    <p>
                                                        {allLabels.dbu_ESNText}
                                                    </p>
                                                    <div class="slds-form-element__control">
                                                        <input type="text" value={ESNval} placeholder="ESN-XXXXXXXX"
                                                            class="slds-input input_align esnField"
                                                            onchange={handleESNchange} />
                                                    </div>

                                                    <template if:true={validesn}>
                                                        <span class="error"> {allLabels.dbu_Invalid_ESN}</span>
                                                    </template>
                                                    <div>
                                                        <a onclick={openESNModal}> How to find your ESN</a>
                                                    </div>
                                                </div>
                                                
                                            </template>
                                        </template>
                                    </template>


                                    <template if:true={Checkcreateengine}>


                                        <fieldset class="slds-form-element slds-form-element_compound">

                                            <div class="slds-form-element__control coForm esnCont">
                                                <h6 class="mb-15">
                                                    {allLabels.dbu_product_identification}
                                                </h6>
                                                <div class="slds-form-element__row slds-grid slds-wrap">
                                                    <div class="slds-size_1-of-1 slds-large-size_3-of-12">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label"
                                                                for="form-element-id-05">
                                                                {allLabels.dbu_VIN} <span class="slds-required"
                                                                    title="required">*
                                                                </span>
                                                            </label>
                                                            <div class="slds-form-element__control">
                                                                <input type="text" name="vin"
                                                                    onchange={handlecrateinput} value={inputVIN}
                                                                    class="slds-input input_align" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-size_1-of-1 slds-large-size_2-of-12">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label"
                                                                for="form-element-id-06">
                                                                {allLabels.dbu_Year} <span class="slds-required"
                                                                    title="required">*
                                                                </span> </label>
                                                            <div class="slds-form-element__control">
                                                                <input type="text" name="year"
                                                                    onchange={handlecrateinput} maxlength="4"
                                                                    value={inputYear} class="slds-input input_align" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-size_1-of-1 slds-large-size_3-of-12">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label"
                                                                for="form-element-id-06">
                                                                {allLabels.dbu_Make} <span class="slds-required"
                                                                    title="required">*
                                                                </span></label>
                                                            <div class="slds-form-element__control">
                                                                <input type="text" name="make"
                                                                    onchange={handlecrateinput} minlength="4"
                                                                    value={inputmake} class="slds-input input_align" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>



                                                <div class="slds-form-element__row slds-grid slds-wrap">
                                                    <div class="slds-size_1-of-1 slds-large-size_3-of-12">
                                                        <div class="slds-form-element">
                                                            <label class="slds-form-element__label"
                                                                for="form-element-id-05">
                                                                {allLabels.dbu_Model} <span class="slds-required"
                                                                    title="required">*
                                                                </span>
                                                            </label>
                                                            <div class="slds-form-element__control">
                                                                <input type="text" name="model"
                                                                    onchange={handlecrateinput} value={inputmodel}
                                                                    class="slds-input input_align" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- commented by komal-->
                                                    <div class="slds-size_1-of-1 slds-large-size_5-of-12">
                                                        <div>
                                                            <template if:true={stateUS}>
                                                                    
                                                                <template if:false={stateCA}>
                                                                    <lightning-combobox name="state" label="State"
                                                                        value={inputstate}
                                                                        options={statePicklistValuArray}
                                                                        onchange={handlecrateinput} placeholder=""
                                                                        required>
                                                                    </lightning-combobox>
                                                                    

                                                                </template>

                                                            </template>

                                                            <template if:true={stateCA}>
                                                                <template if:false={stateUS}>
                                                                    <lightning-combobox name="state" label="Province "
                                                                        value={inputstate}
                                                                        options={statePicklistValuArray}
                                                                        onchange={handlecrateinput} placeholder=""
                                                                        required>
                                                                    </lightning-combobox>
                                                                </template>

                                                            </template>

                                                        </div>
                                                    </div>
                                                    <!---sri CA Validation start -->
                                                    <div class="slds-size_1-of-1 slds-large-size_4-of-12">

                                                            <template if:true={isCAStateSelected}>
                                                                    <lightning-combobox name="Vehicle Powered" label="Vehicle Powered"
                                                                        value={vehiclePowered}
                                                                        options={vpPicklistValuArray}
                                                                        onchange={handleVPChange}
                                                                         placeholder=""
                                                                        required>
                                                                    </lightning-combobox>


                                                                </template>
                                                        </div>    <!---sri CA Validation end -->
                                                </div>

                                            </div>
                                        </fieldset>

                                        <div>
                                            <template if:true={invalidVIN}>	
                                                <div class="vinSearchBlock">	
                                                    <span class="error"> {allLabels.dbu_validate_vin}</span>	
                                                </div>	
                                            </template>	

                                            <template if:true={invalidstate}>
                                                <template if:true={stateUS}>
                                                    <div class="esnSearchBlock">
                                                        <span class="error"> {allLabels.dbu_product_crateUSError}</span>
                                                    </div>
                                                </template>

                                                <template if:true={stateCA}>
                                                    <div class="esnSearchBlock">
                                                        <span class="error"> {allLabels.dbu_product_crateCAError}</span>
                                                    </div>


                                                </template>


                                            </template>
                                            <template if:true={mandate}>
                                                <div class="esnSearchBlock">
                                                    <span class="error">{allLabels.dbu_CrateMandateText} </span>
                                                </div>
                                            </template>

                                        </div>

                                        <!--- California Validation Sri-->
                                        <template if:true={invalidYearforCA}>
                                                <div class="crateEngineError esnSearchBlock">
                                                        <lightning-formatted-rich-text class="error"
                                                        value={invalidYearforCAMsg}
                                                    ></lightning-formatted-rich-text>
                                                </div>
                                            </template>
                                            <!--- California Validation Sri end-->
                                              <!--- Canada Year Validation Sri-->
                                        <template if:true={invalidYearforCanada}>
                                                <div class="crateEngineError esnSearchBlock">
                                                        <lightning-formatted-rich-text class="error"
                                                        value={invalidYearforCanadaMsg}
                                                    ></lightning-formatted-rich-text>
                                                </div>
                                            </template>
                                            <!--- Canada Year Validation Sri end-->

                                            

                                        </br>
                                        <template if:true={stateCA}>
                                               
                                                <div class="crateEngineError">
                                                        <span class="CanadaDisclaimer">{allLabels.dbu_CrateEngineCanadadisclaimer} </span>
                                                    </div>
                                            </template>
                                            <!--- Canada Disclaimer Sri-->

                                        </br>
                                        
                                    </template>



                                    <!-- <div>   <a onclick={handlefindESN}>Find Your ESN</a></div> -->
                                    <template if:true={productInStock}>
                                        <template if:true={productcode}>
                                            <template if:false={Checkcreateengine}>
                                                <template if:false={ESNvalidated}>
                                                    <template if:false={isCartUpdatedLoader}>
                                                        <template if:false={hasCoreChild}>
                                                            <div class="cart_btn">
                                                                <button class="slds-button slds-button_destructive addToCartBtn" data-id={product.SKU}
                                                                    data-name={product.sfdcName}
                                                                    onclick={handleClickAddToCart} disabled={showQtyExceedError}>{allLabels.dbu_productDetail_addToCart}
                                                                </button><!--Aakriti CECI-693 added disabled-->
                                                                </div>
                                                        </template>
                                                    </template>
                                                </template>
                                            </template>
                                        </template>

                                    </template>
                                    <template if:true={productInStock}>
                                        <template if:true={Checkcreateengine}>
                                            <template if:false={hasCoreChild}>
                                                <button class="slds-button slds-button_destructive addToCartBtn"
                                                    onclick={openmodelCrate} disabled={showQtyExceedError}>{allLabels.dbu_productDetail_addToCart}
                                                </button><!--Aakriti CECI-693 added disabled-->
                                            </template>
                                        </template>
                                    </template>

                                    <template if:true={ESNvalidated}>
                                        <template if:false={hasCoreChild}>
                                            <div class="cart_btn">
                                                <button class="slds-button slds-button_destructive addToCartBtn"
                                                    data-id={product.SKU}
                                                    data-name={product.sfdcName}
                                                    onclick={handleClickAddToCart} disabled={showQtyExceedError}>{allLabels.dbu_productDetail_addToCart}</button>
                                            </div><!--Aakriti CECI-693 added disabled-->
                                        </template>
                                    </template>
                                    
                                    


                            <!--Saiomal CRATE-->

                            <template if:true={opencratemodel}>
                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01"
                                    aria-modal="true" aria-describedby="modal-content-id-1"
                                    class="slds-modal slds-backdrop slds-fade-in-open ">
                                    <template if:false={crateshowlongdesc}>
                                        <div class="slds-modal__container esnPopup">
                                            <header class="slds-modal__header">

                                                <h6 class="slds-modal__title slds-hyphenate">
                                                    <!-- <img src="/sfsites/c/resource/1596564194000/dbu_CumminsLogo" class="logo"> -->
                                                    <img src={whitelogoImg} class="logo">

                                                    <p>{allLabels.dbu_product_AcceptAgreement}</p>

                                                </h6>
                                            </header>


                                            <div class="slds-modal__content slds-p-around_medium">


                                                <template for:each={cratemetadata} for:item="crate">

                                                    <h4 key={crate.id}>{crate.MasterLabel}</h4>
                                                    <p key={crate.id}>{crate.dbu_AgreementShortDesc__c} </p>
                                                    <div key={crate.id} class="esnLink">

                                                        <div class="slds-checkbox billInfo">
                                                            <input type="checkbox" key={crate.id}
                                                                onclick={handlecratecheck} data-id={crate.MasterLabel}
                                                                id={crate.MasterLabel}>
                                                            <label class="slds-checkbox__label" for={crate.MasterLabel}>
                                                                <span class="slds-checkbox_faux"></span>
                                                                <span class="slds-form-element__label">
                                                                    <label class="agreeLabel">
                                                                        {allLabels.dbu_product_IAgree}</label><a
                                                                        key={crate.id} data-id={crate.MasterLabel}
                                                                        onclick={handlelongdes}>{crate.dbu_AgreementCheckBox__c}</a>
                                                                </span>
                                                            </label>
                                                        </div>

                                                    </div>
                                                </template>

                                            </div>
                                            <footer class="slds-modal__footer">
                                                <a class="slds-button slds-button_outline-brand"
                                                    onclick={closemodelCrate}>Cancel </a>
                                                <template if:true={acceptallagreements}>
                                                    <a class="slds-button slds-button_brand" data-id={product.SKU} data-name={product.sfdcName}
                                                        onclick={handleClickAddToCart}>I Accept </a>
                                                </template>


                                            </footer>
                                        </div>
                                    </template>
                                    <!--addenew-->
                                    <template if:true={crateshowlongdesc}>
                                        <div class="slds-modal__container longDesc">

                                            <!-- Modal/Popup Box LWC body starts here -->
                                            <div class="slds-modal__content slds-p-around_medium ">

                                                <template for:each={longdesc} for:item="longdes">
                                                    <div key={longdes.id}>
                                                        <h4>{longdes.MasterLabel}</h4>
                                                        <lightning-formatted-rich-text
                                                            value={longdes.dbu_AgreementLongDesc__c}>
                                                        </lightning-formatted-rich-text>
                                                    </div>


                                                </template>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <a class="slds-button slds-button_outline-brand"
                                                    onclick={handlelongdesc}>Back </a>
                                                <a class="slds-button slds-button_brand"
                                                    onclick={handlelongdescaccept}>I Accept </a>
                                            </footer>
                                        </div>
                                    </template>

                                </section>


                            </template>


                            <!-- <template if:false={inv.notifyStock}> -->
                            <template if:true={productInStock}>
                                <template if:false={ESNvalidated}>
                                    <template if:true={isCartUpdatedLoader}>
                                        <template if:false={hasCoreChild}>
                                            <div class="cart_btn">
                                                <button
                                                    class="slds-button slds-button_destructive addToCartBtn">{allLabels.dbu_productDetail_addToCart}
                                                    <i class="spinnerSmall"></i></button>
                                            </div>
                                        </template>
                                    </template>
                                </template>
                                <template if:false={cratecheckbox}>
                                    <template if:false={isCartUpdatedLoader}>
                                        <template if:false={validesn}>
                                            <template if:false={productcode}>
                                                <template if:false={hasCoreChild}>
                                                    <div class="cart_btn">
                                                        <button class="slds-button slds-button_destructive addToCartBtn"
                                                            data-id={product.SKU}
                                                            data-name={product.sfdcName}
                                                            onclick={handleClickAddToCart} disabled={showQtyExceedError}>{allLabels.dbu_productDetail_addToCart}</button>
                                                    </div><!--Aakriti CECI-693 added disabled-->
                                                </template>
                                            </template>


                                        </template>
                                    </template>
                                </template>

                            </template>

                            <template if:true={isCanadaStore}>
                                <div class="slds-p-top_large shippingHideaTag" style="margin-bottom: -9px;">
                                    <strong style="color: #DA291C;">{allLabels.dbu_free_shipping_info_Canada_PDP} (<a
                                            href={shippingPolicyURL} target="_blank"
                                            style="color: #DA291C;border-bottom: 2px solid;">{allLabels.dbu_restrictions_apply_link}</a></u>)</strong>
                                            
                                </div>
                            </template>
                            <template if:false={isCanadaStore}>
                                <div class="slds-p-top_large shippingHideaTag" style="margin-bottom: -9px;">
                                    <strong style="color: #DA291C;">{allLabels.dbu_free_shipping_info} (<a
                                            href={shippingPolicyURL} target="_blank"
                                            style="color: #DA291C;border-bottom: 2px solid;">{allLabels.dbu_restrictions_apply_link}</a></u>)</strong>
                                            
                                </div>	
                            </template>

                            <template if:true={Checkcreateengine}>
                                <div> </br>
                                    {allLabels.CrateShipping}
                                </div>

                                <template if:true={product.availableToShip}>
                                    <div> {allLabels.avialbleShipData}</div>
                                </template>
                                <!--25th Feb 2021-->
                                <!-- <template if:false={product.availableToShip}>
                                    <template if:false={product.pickUpOnly}>
                                        <div> {availableShipValue}</div>
                                    </template>
                                </template> -->
                                <!--End 25th Feb 2021-->
                                <template if:true={product.nonReturnable}>
                                    <div> {allLabels.nonReturnable}</div>
                                </template>

                            </template>
                            <template if:false={Checkcreateengine}>
                                <div class="avalible_msg">
                                    <template if:true={product.availableToShip}>
                                        <div> {allLabels.avialbleShipData}</div>
                                    </template>
                                    <template if:true={product.pickUpOnly}>
                                        <div> {allLabels.pickUpOnlyPrdct}</div>
                                    </template>
                                    <!--25th Feb 2021-->
                                    <template if:false={product.availableToShip}>
                                        <template if:false={product.pickUpOnly}>
                                            <div> {allLabels.avialbleShipData}</div>
                                        </template>
                                    </template>
                                    <!--End 25th Feb 2021-->
                                    <template if:true={product.nonReturnable}>
                                        <div> {allLabels.nonReturnable}</div>
                                    </template>
                                </div>
                            </template>


                            <!--<a onclick={wishlist}>{WishListText}</a>-->
                            <div class="slds-theme_default wishlist_hyperlink">
                                <a onclick={openwishlistmodal} class="wish_label">
                                    <i class={wishlistIcon}></i>
                                    {WishListText}
                                </a> <template if:true={spinnerWishlist}><i
                                        class="spinnerSmall wishlist"></i></template>



                                <template if:true={openmodelwishlist}>


                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01"
                                        aria-modal="true" aria-describedby="modal-content-id-1"
                                        class="slds-modal slds-fade-in-open signPopUp">
                                        <div class="slds-modal__container">

                                            <!-- Modal/Popup Box LWC body starts here -->
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <button
                                                    class="slds-button slds-button_icon  cross_btn slds-button_icon-inverse"
                                                    title="Close" onclick={closewishlistModal}>
                                                    <i class="icon-close"></i>
                                                </button>
                                                <h5>{allLabels.dbu_shopCart_youAreNotSigned}</h5>

                                                <a class="slds-button slds-button_destructive"
                                                href={navigateToSignInURL} onclick={handleToSignInLinkClick}>{allLabels.dbu_SignInCumminsAccount}</a>


                                                <!-- 
                                                        <p> In order to add to your wishlist please <br /><a
                                                                href={signInURL}>Sign in</a> or <a href={registerURL}
                                                                target="_blank">Register</a> </p> -->

                                                <p>{allLabels.dbu_shopCart_dontHaveAccount} <a href={registerURL}
                                                        target="_blank">{allLabels.dbu_createaccount}</a></p>
                                                <small>Or</small>
                                                <a onclick={closewishlistModal}
                                                    class="closeLink">{allLabels.dbu_shopCart_continueAsGuest}</a>
                                            </div>
                                            <!-- Modal/Popup Box LWC footer starts here -->
                                            <!-- <footer class="slds-modal__footer">
                                                        <a class="slds-button slds-button_outline-brand"
                                                            onclick={closewishlistModal}>No, Thanks. </a>

                                                    </footer> -->
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>


                                    <!-- <div class="demo-only productDetail_Height" >
                                                        <section role="dialog" tabindex="-1"
                                                            aria-labelledby="modal-heading-01" aria-modal="true"
                                                            aria-describedby="modal-content-id-1"
                                                            class="slds-modal slds-fade-in-open">
                                                            <div class="slds-modal__container">
                         
                                                                <div class="slds-modal__content slds-p-around_medium popup_sign">
                                                                 
                                                                        <button
                                                                        class="slds-button slds-button_icon slds-button_icon-inverse cross_btn"
                                                                        title="Close" onclick={closewishlistModal}>
                                                                        <lightning-icon icon-name="utility:close"
                                                                            size="medium">
                                                                        </lightning-icon>
                                                                        <span class="slds-assistive-text">Close</span>
                                                                    </button>
                                                                        <h2 class="popup_
                                                                        wishlist">In order to add to your wishlist please &nbsp;
                                                                        <a href={signInURL}>Signin</a> or <a href={registerURL} target="_blank">Register</a> </h2>

                                                                
                                                                </div>

                                                            </div>
                                                        </section>
                                                        <div class="slds-backdrop slds-backdrop_open"></div>
                                                    </div> -->
                                </template>
                            </div>

                    </div>
                </template>
</template>

<!-- commented by MT on 28th Dec 

<template if:true={product.inventoryExists}>


    <div class="tr_prod">
        <div>

            
            <div class="productFlex">
                
                <div class="productAlignment"> <span class="spanOutStock labelRClr">Out of
                        Stock</span>
                    <span class="label_txt labelRClr pt_5 productLabel">-</span>
                </div>
                <div class="slds-theme_default productAlignment">

                    <a onclick={openmodal} class=" labelBCLr"> Notify me when this item is
                        available</a>

                    <template if:true={openmodel}>

                        <div class="demo-only productDetail_Height">
                            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                                aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <div>

                                        <div class="slds-modal__content slds-p-around_medium popup_image">
                                            <template if:true={showNotifyPopup}>
                                                <button
                                                    class="slds-button slds-button_icon  cross_btn slds-button_icon-inverse nofityMeBtn"
                                                    title="Close" onclick={closeModal}>
                                                    <lightning-icon icon-name="utility:close" size="medium">
                                                    </lightning-icon>
                                                    <span class="slds-assistive-text">Close</span>
                                                </button>

                                                <div class="center_align">
                                                    <h3 class="part_avail">PART AVAILABILITY
                                                    </h3>
                                                    <p>
                                                        Please notify me when <br />
                                                        {product.sfdcName} <br />
                                                        is back in stock
                                                    </p>

                                                </div>
                                            </template>
                                            <template if:false={showNotifyPopup}>

                                                <button
                                                    class="slds-button slds-button_icon  cross_btn slds-button_icon-inverse"
                                                    title="Close" onclick={closeModal}>
                                                    <lightning-icon icon-name="utility:close" size="medium">
                                                    </lightning-icon>
                                                    <span class="slds-assistive-text">Close</span>
                                                </button>
                                                <center class="notify_label">
                                                    <h1>We will notify you when the part is
                                                        back in stock</h1>
                                                </center>

                                            </template>

                                            <template if:true={showNotifyPopup}>

                                                <center>
                                                  
                                                    <div class="full-input">

                                                        <input type="text" class="popup_text"
                                                            placeholder="Email Address">
                                                    </div>
                                                    <lightning-button label="Notify Me!" variant="destructive"
                                                        onclick={saveMethod}
                                                        class="btn_notify  slds-button slds-button_destructive">
                                                    </lightning-button>
                                                </center>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open"></div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
        <div>


        </div>
        <div>
            <div class="avalible_msg">
                <template for:each={productMessage} for:item="message">
                    <div key={message.id}>

                        <div class="pr_5">
                            {message.ccrz__AvailabilityMessage__c}
                            <span class="dot-align">.</span>
                        </div>

                    </div>

                </template>

                <div>{product.inventoryType}</div>

            </div>
            <div>
                <div class="slds-theme_default wishlist_hyperlink">

                    <a onclick={openwishlistmodal} class="wish_label">
                        <i class={wishlistIcon}></i>
                        {WishListText}
                    </a><template if:true={spinnerWishlist}><i class="spinnerSmall wishlist"></i></template>
                    <template if:true={openmodelwishlist}>

                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-04" aria-modal="true"
                            aria-describedby="modal-content-id-4" class="slds-modal slds-fade-in-open alertPopUp">
                            <div class="slds-modal__container">

                                <div class="slds-modal__content slds-p-around_medium">
                                    <h5>Hi, You are not signed in yet.</h5>
                                    <p> In order to add to your wishlist please <br /><a href={signInURL}>Sign in</a> or
                                        <a href={registerURL} target="_blank">Register</a>
                                    </p>
                                </div>
                                <footer class="slds-modal__footer">
                                    <a class="slds-button slds-button_outline-brand" onclick={closewishlistModal}>No,
                                        Thanks. </a>

                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>


                        
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>

commented by MT on 28th Dec  -->

<!--<template if:true={product.EProductMediasS}>
                                <template for:each={product.EProductMediasS} for:item="media">
                                    <div key={media.sfid} class="tr_prod" style="display: grid;">
                                        <div >
                                            <img src={media.URI}  style= "max-width:100%;" >
                                        </div>
                                    </div>

                                    </template>
                            </template>-->


<template if:true={doesSupersessionExist}>
    <div class="prodOverview" key={id}>
        <h5>{allLabels.dbu_Supersession}</h5>
        <div class="spec-section" key={id}>
            <!--<a href={supersessionURL} target="_self">{supersession}</a> -->	
            <template for:each={supersessionURLWrapper} for:item="sprod">
                <p key={sprod.Name}>
                    <a href={sprod.URL} target="_self">{sprod.Name}</a><!--Sandeep-->
                </p>
            </template>
        </div>
    </div>
</template>
<template if:true={product.showDesc}>
    <div class="prodOverview">
        <h5>{allLabels.dbu_productDetail_productOverview}</h5>
        <div class="poCont">
            <lightning-formatted-rich-text value={product.shortDesc}>
            </lightning-formatted-rich-text>
            <lightning-formatted-rich-text value={product.longDesc}>
            </lightning-formatted-rich-text>
        </div>
    </div>
</template>




<!-- <div>
                        
                       <div><lightning-button variant="brand" label="Add to Cart" onclick = {handleClickAddToCart} title="Add to Cart"  class="slds-m-left_x-small" data-id={product.Id}></lightning-button>  
                      <lightning-button variant="brand" label="ChandleClickAddToCartheck Out" title="Buy Now" class="slds-m-left_x-small" onclick={handleClick}  data-id= {product.Id}></lightning-button></div>  
                    </div> -->
<!--///////////Starting of the model Add to cart///////////-->

<!--Use template if:true to display/hide popup based on isModalOpen value-->
<template if:true={isAddToCartModalOpen}>
    <!-- Modal/Popup Box LWC starts here -->
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
        aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open headerModal">
        <div class="slds-modal__container modal_popupalign">
            <!-- Modal/Popup Box LWC header here -->
            <header class="slds-modal__header">
                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close"
                    onclick={closeAddToCartModal}>
                    <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small">
                    </lightning-icon>
                    <span class="slds-assistive-text">Close</span>
                </button>
                <h2 class="slds-text-heading_medium slds-hyphenate">Added to Cart</h2>
            </header>
            <!-- Modal/Popup Box LWC body starts here -->
            <div class="slds-modal__content">
                <!-- <c-dbu_cart-detail-page productcartdetails = {productVar}></c-dbu_cart-detail-page> -->
                <!-- <div class="product_header">{product.sfdcName}</div> -->
                <!--Cart Details-->

                <div class="wrap_popup ">
                    <div class="slds-grid slds-wrap wrapAlignment">
                        <div class="slds-col slds-size_9-of-12 itemNamePop  ">
                            <!--<img src={imgProdUrl}>-->
                            <!-- <template if:true={imgProdUrl}> -->
                            <c-dbu_image-Generator imageurl={imgProdUrl}></c-dbu_image-Generator>
                            <!-- </template> -->
                            <div>

                                <span class="modal_span">{product.sfdcName}</span>
                                <template if:true={cratecheckbox}>
                                    <template for:each={cratemetadata} for:item="meta">

                                        <div key={meta.id} class="slds-grid slds-grid_vertical">
                                            <div class="slds-col">
                                                <p> {meta.MasterLabel}: <strong>{allLabels.dbu_Agreed}</strong></p>
                                            </div>

                                        </div>
                                    </template>
                                </template>
                            </div>

                        </div>
                        <div class="slds-col slds-size_3-of-12 quantity_popup">
                            <!--Shriram 9 Oct 2020 Commenting the below code for new fixes-->

                            <!--9 Oct 20202 : Shriram New Logic for 9+ fixes-->
                            <div><!--Aakriti CECI-693 added enclosing div-->
                            <template if:false={isInputQuantityAddToCart}>
                                <lightning-combobox name="progress" value={valueDrpdwn} placeholder={valueDrpdwn}
                                    options={options} label="Quantity" class="productDetail_Combo qtyDropdown"
                                    data-currentproductname={product.sfdcName} onchange={handleChangeQuantityForCart1}>
                                </lightning-combobox>
                            </template>
                            <template if:true={isInputQuantityAddToCart}>
                                <lightning-input type="text" label="Quantity" class="instock_input productDetail_Combo "
                                    onblur={handleChangeAddToCartPopup} value={valueDrpdwn}
                                    data-currentproductname={product.sfdcName} onchange={handleChangeQuantityForCart}> </lightning-input>
                            </template>
                            
                            <!--Aakriti CECI-693-->
                            <div if:true={showQtyExceedError} class="qtyError">
                                {allLabels.dbu_maximum_quantity} {maxAllowedQty}
                            </div>
                            </div>
                            <!--Ended here-->
                            <div slot="actions" class="popup_pricelist">
                                <label>{allLabels.dbu_miniCart_price}</label>
                                <strong>{formatedTotalPrice}</strong>
                            </div>
                        </div>
                    </div>
                    <div>
                        <template if:true={hasCoreCharge}>
                            <div class=" slds-grid slds-wrap wrapAlignment">
                                <div class="slds-col slds-size_9-of-12 itemNamePop  ">
                                    <!--<img src={imgProdUrl}>-->
                                    <!-- <template if:true={imgProdUrl}> -->
                                    <c-dbu_image-Generator imageurl={imgProdUrl}></c-dbu_image-Generator>
                                    <!-- </template> -->
                                    <div>
                                        <span class="modal_span">{allLabels.dbu_Core_Charge}</span>
                                        <template if:true={cratecheckbox}>
                                            <template for:each={cratemetadata} for:item="meta">

                                                <div key={meta.id} class="slds-grid slds-grid_vertical">
                                                    <div class="slds-col">
                                                        <p> {meta.MasterLabel}: <strong>{allLabels.dbu_Agreed}</strong></p>
                                                    </div>

                                                </div>
                                            </template>
                                        </template>
                                    </div>

                                </div>
                                <div class="slds-col slds-size_3-of-12 quantity_popup coreQty">
                                    <span> {valueDrpdwn}</span>
                                    <div slot="actions" class="popup_pricelist">
                                        <strong> {formatedTotalCoreCharge}</strong>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
                <!-- core charge -->
                <!--Core Charge Product here -->
                <!-- <template if:true={hasCoreCharge}>
                                                <div class="wrap_popup slds-grid slds-wrap">
                                                    <div class="slds-col slds-size_9-of-12 itemNamePop  ">
                                                        <img src={imgProdUrl}>
                                                        <div >
                                                        <span class="modal_span">Core Charge</span>
                                                        <template if:true={cratecheckbox}>
                                                            <template for:each={cratemetadata} for:item="meta">

                                                                <div key ={meta.id} class="slds-grid slds-grid_vertical">
                                                                    <div class="slds-col">
                                                                    <p>   {meta.MasterLabel}: <strong>Aggreed</strong></p>
                                                                    </div>
                                                                
                                                                </div>
                                                            </template>
                                                        </template>
                                                    </div>
                                                        
                                                    </div>
                                                    <div class="slds-col slds-size_3-of-12 quantity_popup">
                                                            {valueDrpdwn}
                                                        <div slot="actions" class="popup_pricelist">
                                                            {formatedTotalCoreCharge}
                                                        </div>
                                                    </div>
                                                </div>
                                            </template> -->
                <!--End:Core Charge-->
                <!--End of core charge -->
                <div class="btn_popup">
                    <button class="slds-button slds-button_outline-brand"
                        onclick={closeAddToCartModal}>{allLabels.dbu_shopCart_continueShopping}</button>
                    <a if:true={showQtyExceedError} href={goToCartUrl} onclick={handleGotoCart} class="slds-button slds-button_brand" disabled>{allLabels.dbu_miniCart_proceedToCart}</a>
                    <a if:false={showQtyExceedError} href={goToCartUrl} onclick={handleGotoCart} class="slds-button slds-button_brand">{allLabels.dbu_miniCart_proceedToCart}</a>
                </div>
                <div class="slds-grid slds-wrap ">
                    <c-dbu_lst-cart-related-products></c-dbu_lst-cart-related-products>
                </div>
            </div>

            <!-- </div> 16Nov2020 -->


        </div>
        <!-- Modal/Popup Box LWC footer starts here -->

        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
</template>
<!--end of the model Add to cart/-->
<!--Shriram : 22-09-2020 Added this Model for the user if adding very fist Item in the cart-->

<!-- <template if:true={isOpenModelForGuestCart}> -->
<!-- <div class="demo-only productDetail_Height">
            <section role="dialog" tabindex="-1"
                aria-labelledby="modal-heading-01" aria-modal="true"
                aria-describedby="modal-content-id-1"
                class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">

                    <div class="slds-modal__content slds-p-around_medium popup_sign">
                        <center>
                            <button
                            class="slds-button slds-button_icon slds-button_icon-inverse cross_btn"
                            title="Close" onclick={closeModelForGuestCart}>
                            <lightning-icon icon-name="utility:close"
                                size="medium">
                            </lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                            </button>
                            <h2>In order to proceed please <a href="https://csodev-cumminscss.cs90.force.com/cw/IAM_Authorize?appid=a1a1F0000018d4x">Signin</a> or <a href="https://csodev-cumminscss.cs90.force.com/cw/IAM_Basic_Registration?appid=a1a1F0000018d4x">Register</a> </h2> 

                        </center>
                    </div>

                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </div> 

    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-03" aria-modal="true"
        aria-describedby="modal-content-id-3" class="slds-modal slds-fade-in-open signPopUp">
        <div class="slds-modal__container">

             Modal/Popup Box LWC body starts here 
            <div class="slds-modal__content slds-p-around_medium">
                <button
                class="slds-button slds-button_icon  cross_btn slds-button_icon-inverse"
                title="Close" onclick={closeModelForGuestCart}>
                <i class="icon-close"></i>
            </button>
                <h5>{label.dbu_shopCart_youAreNotSigned}</h5>
                <a class="slds-button slds-button_destructive" href={signInURL}>{label.dbu_SignInCumminsAccount}</a>
                    <p>{label.dbu_shopCart_dontHaveAccount}<a href={registerURL} target="_blank">{label.dbu_createaccount}</a></p>
                <small>Or</small>
                 <a onclick={closewishlistModal} class="closeLink">{label.dbu_shopCart_continueAsGuest}</a> 
                <a onclick={closeModelForGuestCart} class="closeLink">{label.dbu_shopCart_continueAsGuest}</a>
            </div> 
        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
</template>-->

<!--End here Shriram : 22-09-2020-->
</div>

<template if:true={product.productTypeKit}>
    <h5 key={id} class="prod_view_header">{allLabels.dbu_Inside_Kit}</h5>
    <template if:true={kitDetails}>
        <div class="spec-section slds-grid slds-wrap slds-grid_vertical-align-start" key={id}>
            <template for:each={kitDetails} for:item="kitItem">

                <div class="slds-col kit_wrap" key={kitItem.id}>
                    <span class="labelBCLr"><a> {kitItem.ccrz__Quantity__c} </a> </span>
                    &nbsp;&nbsp;
                    <!-- <strong> <a href="javascript:void(0)" title={kitItem.id}
                                                onclick={handleClickKit}  class={kitItem.id}
                                                data-id={kitItem.ccrz__Component__c} style="white-space: nowrap;color:rgb(0, 85, 135);">
                                                {kitItem.ccrz__Component__r.Name}</a></strong> -->
                    <strong class="kitItemLink"> <a href={kitItem.productUrl} title={kitItem.id} class={kitItem.id}
                            data-id={kitItem.ccrz__Component__r.id} style="color:rgb(0, 85, 135);">
                            {kitItem.ccrz__Component__r.Name}</a>
                    </strong>
                </div>
            </template>
        </div>
    </template>

</template>
<!--<template if:true={supersessionURLWrapper}>	
    <div class="prodOverview" key={id}>	
        <h5>{label.dbu_Supersession}</h5>	
        <div class="spec-section" key={id}>	
           <a href={supersessionURL} target="_self">{supersession}</a> 	
            <template for:each={supersessionURLWrapper} for:item="sprod">	
                <p key={sprod.Name}>	
                    <a href={sprod.URL} target="_self">{sprod.Name}</a>	
                    </p>	
            </template>	
        </div>	
    </div>	
</template>-->

<template if:false={product.productTypeKit}>
     <template if:true={specs}>
        <template if:true={productSpecs}>
            <h5 key={id}>{allLabels.dbu_productDetail_specifications}</h5>
            <div class="spec-section slds-grid slds-wrap slds-grid_vertical-align-start" key={id}>
                <template for:each={productSpecs} for:item="prodSpec">
                    <div class="slds-col" key={prodSpec.id}>
                        <span>{prodSpec.ccrz__Spec__r.Name}:&nbsp;&nbsp;&nbsp;</span>
                        <strong>{prodSpec.ccrz__SpecValue__c}</strong>
                    </div>
                </template>
            </div>
        </template>
    </template>
</template>

<template if:true={recondata}>
    <div class="prodOverview" key={id}>
        <h5>{allLabels.dbu_ReconEquivalentPartNumber}</h5>
        <div class="spec-section slds-grid slds-wrap slds-grid_vertical-align-start" key={id}>
            {recondata}
        </div>
    </div>
</template>



<!--<template if:true={Checkcreateengine}>
    <div key={id}>

        <h6 class="mb-15">{label.dbu_IncludeKit} </h6>
        <lightning-formatted-rich-text value={crateenginekit}>
        </lightning-formatted-rich-text>


    </div>

</template>-->


<!--Add to cart Model Display-->

<!--End of add to cart display-->
</template>

<!-- Commented by komal on 20th jan -->
<div if:false={ScreenLoaded}>
    <template if:true={modelspec}>
        <template if:false={Checkcreateengine}>
            <a onclick={openModal}> {allLabels.dbu_HowtoLocateSpec}</a>
            <!--
               <div>
                <div>

                    <template for:each={modelspec} for:item="spec">
                        <div key={spec.id}>
                            {spec.ccrz__SpecValue__c}
                        </div>

                    </template>
                </div>

            </div>
           -->
        </template>
    </template>
</div>
<!-- Commented by komal on 20th jan -->
<div if:false={ScreenLoaded}>
    <template if:true={showwarrentyinfo}>
        <template if:false={Checkcreateengine}>
            <div class="warrentBlock">
                <h6>{allLabels.dbu_productDetail_warranty}</h6>

                <span class="labelWClr">{allLabels.dbu_Warrentypart} <a href="https://shop.cummins.com"
                        target="_blank">shop.cummins.com</a> {allLabels.dbu_product_warrentykms}&nbsp;<a
                        href={warrantyinformationURL} target="_blank">
                        {allLabels.dbu_product_warrentycomplete}</a>&nbsp;
                    {allLabels.dbu_product_soldon} <a href="https://shop.cummins.com" target="_blank">shop.cummins.com</a>.
                </span>
                <template if:true={extrawarrenty}>
                    18-36 month free replacement warranty. Exceptions apply.
                </template>
            </div>
        </template>
    </template>



</div>

<div if:false={ScreenLoaded}>
    <template if:true={Checkcreateengine}>
        <div class="warrentBlock">
            <h6>{allLabels.dbu_productDetail_warranty}</h6>
            <p class="labelWClr">{allLabels.CrateWarrenty}</p>
            <p class="labelWClr">{allLabels.CrateLaws}</p>
            <p class="labelWClr">{allLabels.CrateRestrictUS}</p>
            <p class="labelWClr">{allLabels.CrateRestrictCA}</p>
            <p>
                <span class="labelWClr">{allLabels.CrateRegulations}</span>.<b>{allLabels.CrateRegulationsCA} </b>
                <a href="https://www.epa.gov/enforcement/interim-tampering-enforcement-policy-memo-1a-june-25-1974"
                    target="_blank"> U.S. EPA </a>
                <a href="https://ww3.arb.ca.gov/msprog/aftermkt/aftermkt.htm" target="_blank"> CARB </a>
            </p>
        </div>


    </template>


</div></br>
<template if:true={Checkcreateengine}>
    <div class="hyperLinks">
        <a href={gotopurchasepolicyUrl} onclick={navigateToPurchaseUrl} target="_blank">{allLabels.ClickHere}</a> {allLabels.dbu_crate_ViewAggreements}<br />
        <a href={gotoCrateQuickStartGuidepdf} onclick={navigateToCraitequickstartguide}  target="_blank"> {allLabels.ClickHere}</a> {allLabels.CrateQuickStartGuide} <br />
        <a href={gotocrateenginebroucher} onclick={navigateToCrateEngineBroucher} target="_blank"> {allLabels.ClickHere}</a> {allLabels.CrateBrochure} <br />
        <a href={gotocrateengineinstallationguide} onclick={navigateToCrateengineInstallationguide}  target="_blank">{allLabels.ClickHere}</a> {allLabels.CrateInstallation}
    </div>
</template>

<template if:true={dataFlag}>
    <div class="frequentBrought">
        <h5> {allLabels.dbu_Frequently_Bought_Together} </h5>
        <template for:each={relatedProductData} for:item="media">

            <div class="slds-form-element__control" key={media.id}>

                <div class="slds-checkbox fbList">
                    <!--<input type="checkbox" id={media.id} data-id={media.id} data-name={media.Name}
                        onclick={handleClickFreProduct} /> -->
 
                    <input class="fbcheckbox" type="checkbox" id={media.id} data-productname={media.Name} data-price={media.price} data-id={media.id}
                        data-checked='checked' onchange={handlePrice} />
                    <label class="slds-checkbox__label" for={media.id}>
                       <span class="slds-checkbox_faux"></span>
                        <span class="slds-form-element__label">
                            <!--<img src={media.URI} />-->
                            <!--<template if:true={media.URI}>-->
                            <c-dbu_image-Generator imageurl={media.URI}></c-dbu_image-Generator>
                            <!--</template>-->
                            <span>{media.Name}</span>
                        </span>

                    </label>

                </div>
            </div>
        </template>

        <div class="price">
            <label>{allLabels.dbu_Total_Price_for_all} {countProduct}:</label> <strong>{priceTotal}</strong>
        </div>
        <button type="button" onclick={handleAddFreqBoughtProductToCart} class="slds-button slds-button_outline-brand">Add all
            {countProduct} to cart</button>
    </div>
</template>
</div>
</div>

<!--<div class="slds-grid slds-wrap customer_wrap"  if:false={ScreenLoaded}>

            <div class="slds-col slds-size_5-of-12 customer_details "
                style=" width: 35%;margin-left: 120px;margin-right: 50px;">
                  <c-dbu_product-details-review details={productData}></c-dbu_product-details-review> 
                <c-dbu_product-details-review></c-dbu_product-details-review>
            </div>
            <div class="slds-col slds-size_5-of-12">
                <c-dbu_product-details-qa></c-dbu_product-details-qa>
            </div>

        </div>-->
</div>
<template if:true={isLocateModalOpen}>
    <!-- Modal/Popup Box LWC starts here -->
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
        aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open validatePopup locatePopup">
        <div class="slds-modal__container">
            <header class="slds-modal__header">
                <!-- <button
                class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                title="Close" onclick={closeModal}>
                <lightning-icon icon-name="utility:close" alternative-text="close"
                    variant="inverse" size="small"></lightning-icon>
                <span class="slds-assistive-text">{label.dbu_Close}</span>
            </button> -->
                <div class="slds-notify__close">
                    <i class="icon-close" onclick={closeModal}></i>
                </div>
                <h3 class="slds-modal__title slds-hyphenate validateTit">
                    {allLabels.dbu_checkoutPage_Select_Address}</h3>
                <h6 class="slds-modal__title slds-hyphenate headingSection">
                    <!-- <img src="/sfsites/c/resource/1596564194000/dbu_CumminsLogo" class="logo"> -->
                    <img src={whitelogoImg} class="logo">
                    <p>{allLabels.dbu_ESNMainHeader}</p>

                </h6>
            </header>
            <!-- Modal/Popup Box LWC body starts here -->
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                <h5>{allLabels.dbu_locateheader}</h5>

                <p>
                    {allLabels.dbu_locatecontent1}
                </p>
                <p>
                    {allLabels.dbu_locatecontent2}
                </p>
                <div class=locateImg>
                    <img src={generatorlogo}>
                </div>
                <p>
                    {allLabels.dbu_locateassit} <a href={contactUsURL} target="_blank">{allLabels.dbu_locatecontactus}</a>
                </p>
            </div>

        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
</template>

<template if:true={enableESNpopup}>
    <!-- Modal/Popup Box LWC starts here -->
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
        aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open validatePopup locatePopup">
        <div class="slds-modal__container">
            <header class="slds-modal__header">

                <div class="slds-notify__close">
                    <i class="icon-close" onclick={closeESNModal}></i>
                </div>
                <h3 class="slds-modal__title slds-hyphenate validateTit">
                    {allLabels.dbu_checkoutPage_Select_Address}</h3>
                <h6 class="slds-modal__title slds-hyphenate headingSection">
                    <img src={whitelogoImg} class="logo">
                    <p>How to find your Engine Serial Number</p>

                </h6>
            </header>
            <!-- Modal/Popup Box LWC body starts here -->
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-3">
               
                <div class=locateImg>
                    <img src={esnimage}>
                </div>
                
            </div>

        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
</template>

<template if:true={isFreqBgtModalOpen}>
    <!-- Modal/Popup Box LWC starts here -->
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open alertPopUp">
      <div class="slds-modal__container">
 
         <!-- Modal/Popup Box LWC body starts here -->
         <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-11">
          <!-- <h5>Success</h5> -->
          <p>{FreqBgtrecordUpdate}</p>
         </div>
         <!-- Modal/Popup Box LWC footer starts here -->
         <footer class="slds-modal__footer t-center">
         <a class="slds-button slds-button_outline-brand" onclick={closeFreqBgtModal}>{allLabels.dbu_shopCart_continueShopping}</a> 
         <template if:false={unDisplayProceedToCartbtn}>
            <a href={goToCartUrl} onclick={handleGotoCart} class="slds-button slds-button_brand">{allLabels.dbu_miniCart_proceedToCart}</a> 
         </template>         
        </footer>
      </div>
    </section>
  <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

</template>