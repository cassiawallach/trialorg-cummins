<!-- sldsValidatorIgnore -->
<template>

    <template if:true={ScreenLoaded}>
        <c-dbu_page-loader></c-dbu_page-loader>
    </template>

    <div class="slds-container_x-large slds-container_center checkoutPage">

        <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_1-of-1 slds-large-size_8-of-12 slds-col_padded">
                <h1>
                    {allLabels.dbu_checkoutPage_customerInfo}
                </h1>
                <fieldset class="slds-form-element slds-form-element_compound">

                    <div class="slds-form-element__control coForm">
                        <div class="slds-form-element__row">
                            <div class="slds-size_6-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-04">{allLabels.dbu_checkoutPage_Company_optional}</label>
                                    <div class="slds-form-element__control">
                                        <input name="cmnyName" type="text" value={cmpnameVal}
                                            class="slds-input input_align compNme" placeholder="Enter your company name"
                                            onchange={handleUsrChange} />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-form-element__row">
                            <div class="slds-size_6-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-05">{allLabels.dbu_checkoutPage_firstName}<span
                                            class="slds-required" title="required">* </span></label>
                                    <div class="slds-form-element__control firstnameError">
                                        <input name="fname" type="text" value={firstname} required
                                            class="slds-input input_align" onchange={handleUsrChange} />
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size_6-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-06">{allLabels.dbu_checkoutPage_lastName}<span
                                            class="slds-required" title="required">* </span></label>
                                    <div class="slds-form-element__control lastnameError">
                                        <input name="lname" type="text" value={lastname} required=""
                                            class="slds-input input_align" onchange={handleUsrChange} />
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="slds-form-element__row">
                            <div class="slds-size_6-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-05">{allLabels.dbu_checkoutPage_emailAddress}<span
                                            class="slds-required" title="required">* </span></label>
                                    <div class="slds-form-element__control emailValError">
                                        <input name="email" type="email" value={emailVal} required=""
                                            class="slds-input input_align" onchange={handleUsrChange} />
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size_6-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-06">{allLabels.dbu_checkoutPage_phoneNumber}<span
                                            class="slds-required" title="required">* </span></label>
                                    <div class="slds-form-element__control phoneValError">
                                        <input name="phnNum" type="phone" value={phoneVal}
                                            class="slds-input input_align" onchange={handleUsrChange}
                                            onkeyup={formatPhone} maxlength="17" />
                                        <small>{allLabels.dbu_checkout_phone}</small>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </fieldset>

                <template if:true={ShipSectionDisplayFlag}> 

                    <template if:true={shipSelected}>
                        <!-- Shipping information section starts here -->
                        {allLabels.dbu_checkoutPage_poMessage}    
                        <h4>
                            {allLabels.dbu_checkoutPage_shippingMethod}
                        </h4>
                        <h5> <strong>{allLabels.dbu_checkoutPage_shipToAddress}</strong>
                            <template if:true={showManageAddress}> <a title="OK" onclick={handleManageAddress}>
                                    <i class="icon-address-book"></i></a>
                            </template>
                        </h5>
                
                
                        <template if:true={showCCAddress}>
                            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                                aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open validatePopup addBook">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                            title="Close" onclick={closeShippingAddressPopup}>
                                            <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                                                size="small"></lightning-icon>
                                            <span class="slds-assistive-text">{allLabels.dbu_Close}</span>
                                        </button>
                                        <h3 class="slds-modal__title slds-hyphenate validateTit">
                                            {allLabels.dbu_checkoutPage_Select_Address}</h3>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <template for:each={ccAddressData} for:item="ccAddress">
                
                
                                            <!-- coomments -->
                                            <div class="slds-radio" key={ccAddress.id}>
                                                <input type="radio" name="myAddressShipping" id={ccAddress.sfid} value="true"
                                                    onchange={handleSelectedAddress} data-addressline1={ccAddress.addressFirstline}
                                                    data-addressline2={ccAddress.addressSecondline} data-addresscity={ccAddress.city}
                                                    data-addressstate={ccAddress.state} data-addresspostalcode={ccAddress.postalCode}
                                                    data-addresscountry={ccAddress.country} />
                
                                                <label for={ccAddress.sfid} class="slds-radio__label">
                                                    <span class="slds-radio_faux"></span>
                                                    <div class="addBookLabel">
                                                        <span class="slds-form-element__label labelAlign">
                                                            <strong>{ccAddress.firstName}
                                                                {ccAddress.lastName} </strong><br />
                                                            {ccAddress.addressFirstline},
                                                            {ccAddress.addressSecondline},
                                                            {ccAddress.city},
                                                            {ccAddress.state},
                                                            {ccAddress.postalCode},
                                                            {ccAddress.country}
                
                                                        </span>
                                                    </div>
                                                </label>
                                            </div>
                
                
                
                                        </template>
                                    </div>
                                    <footer class="slds-modal__footer text-center">
                                        <button class="slds-button slds-button_brand"
                                            onclick={closeShippingAddressPopup}>{allLabels.dbu_checkoutPage_Apply}</button>
                
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open"></div>
                        </template>
                
                        <fieldset class="slds-form-element slds-form-element_compound">
                
                            <div class="slds-form-element__control coForm">
                
                                <div class="slds-form-element__row">
                                    <div class="slds-size_6-of-12">
                                        
                                        <div class="posrel">
                                            <lightning-input name="add1" type="text" value={add1Val} required=""
                                                    class="add1 add1ValError lnginp" onblur={handleShippingChange} label={allLabels.dbu_checkoutPage_address1}
                                                    onkeyup={addressAutoComp} id={fnameID}></lightning-input>
                                            <!--<label class="slds-form-element__label" for="form-element-id-05">
                                                {label.dbu_checkoutPage_address1}<span class="slds-required" title="required">* </span>
                                            </label>
                                            <div class="slds-form-element__control add1ValError">
                                                <input name="add1" type="text" value={add1Val} required=""
                                                    class="slds-input input_align add1" onchange={handleShippingChange}
                                                    onkeypress={addressGetVal}
                                                    onkeyup={addressAutoComp} id={fnameID} />
                                            </div>-->
                                            <template if:true={shipTypeAddress}>
                                            <template if:true={addressResults}>
                                                <div class="addressList">
                                                    <template for:each={addressResults} for:item="adResult">
                                                        <div class="slds-grid slds-wrap 
                                                                    slds-dropdown_length-with-icon-7 
                                                                    slds-dropdown_fluid" key={adResult.PlaceId}>
                                                            <div class="slds-col slds-size_4-of-4 ">
                                                                <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                                                                    <li role="presentation" class="slds-listbox__item">
                                                                        <div class="slds-media slds-listbox__option 
                                                                                    slds-listbox__option_entity 
                                                                                    slds-listbox__option_has-meta" 
                                                                                    role="option"
                                                                                    onclick={addressSelected} 
                                                                                    data-plid={adResult.PlaceId}
                                                                                    data-desc={adResult.Description}
                                                                                    data-adtype='shipping'>
                                                                            <span class="slds-media__body">
                                                                                <span class="slds-listbox__option-text 
                                                                                            slds-listbox__option-text_entity">
                                                                                    {adResult.Description}
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </div>
                                            </template>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="slds-size_6-of-12">
                                        <lightning-input name="add2" type="text" value={add2Val}
                                                class="add2" onblur={handleShippingChange} label={allLabels.dbu_checkoutPage_address2}
                                                onkeyup={copySameShippingInBilling} data-add1={add2Val} onfocus={closeAddressResults}></lightning-input>
                                        <!-- <div class="slds-form-element">
                                            <label class="slds-form-element__label"
                                                for="form-element-id-06">{label.dbu_checkoutPage_address2}</label>
                                            <div class="slds-form-element__control">
                                                <input name="add2" type="text" value={add2Val} required=""
                                                    class="slds-input input_align add2" onchange={handleShippingChange}
                                                    onkeyup={copySameShippingInBilling} data-add1={add2Val} onfocus={closeAddressResults}/>
                                            </div>
                                        </div> -->
                                    </div>
                                </div>
                
                
                
                                <div class="slds-form-element__row">
                                    <div class="slds-size_6-of-12">
                                        <lightning-input name="city" type="text" value={cityVal} class="cityValError lnginp" label={allLabels.dbu_checkoutPage_city}
                                                onblur={handleShippingChange} required></lightning-input>
                                        <!-- <div class="slds-form-element">
                                            <label class="slds-form-element__label"
                                                for="form-element-id-05">{label.dbu_checkoutPage_city}
                                                <span class="slds-required" title="required">* </span>
                                            </label>
                                            <div class="slds-form-element__control cityValError">
                                                <input name="city" type="text" value={cityVal} class="slds-input input_align"
                                                    onchange={handleShippingChange} />
                                            </div>
                                        </div> -->
                                    </div>
                                    <div class="slds-size_6-of-12">
                                        <div class="slds-form-element__control cntryValError">
                                            <lightning-combobox name="country" value={cntryVal} placeholder="" options={countryItem}
                                                onblur={handleShippingChange} label="Country" required>
                                            </lightning-combobox>
                                        </div>
                                    </div>
                
                
                
                                </div>
                
                
                
                                <div class="slds-form-element__row">
                                    <div class="slds-size_6-of-12">
                                        <!-- <div class="slds-form-element"> -->
                                            <template if:true={usLoc}>
                                                <lightning-input name="zip" type="text" value={zipVal} class="zipValError lnginp" label={allLabels.dbu_checkoutPage_zipCode}
                                                    onblur={handleShippingChange} required=""></lightning-input>
                                                <!-- <label class="slds-form-element__label"
                                                    for="form-element-id-05">{label.dbu_checkoutPage_zipCode}
                                                    <span class="slds-required" title="required">* </span></label> -->
                                            </template>
                                            <template if:false={usLoc}>
                                                <lightning-input name="zip" type="text" value={zipVal} class="zipValError lnginp" label={allLabels.dbu_checkoutPage_postalCode}
                                                    onblur={handleShippingChange} required=""></lightning-input>
                                                <!-- <label class="slds-form-element__label"
                                                    for="form-element-id-05">{label.dbu_checkoutPage_postalCode}
                                                    <span class="slds-required" title="required">* </span></label> -->
                                            </template>
                
                                            <!-- <div class="slds-form-element__control zipValError">
                                                <input name="zip" type="text" value={zipVal} class="slds-input input_align"
                                                    onchange={handleShippingChange} />
                                            </div> -->
                                        <!-- </div> -->
                                    </div>
                                    <div class="slds-size_6-of-12">
                                        <div>
                                            <template if:false={usLoc}>
                                                <lightning-combobox name="state" class="stateValError lnginp" value={stateVal}
                                                    placeholder={valueDrpdwn} options={statePicklistValuArray}
                                                    onchange={handleShippingChange} label="Province" required>
                                                </lightning-combobox>
                                            </template>
                
                
                                            <template if:true={usLoc}>
                                                <lightning-combobox name="state" class="stateValError lnginp" value={stateVal}
                                                    placeholder={valueDrpdwn} options={statePicklistValuArray}
                                                    onchange={handleShippingChange} label="State" required>
                                                </lightning-combobox>
                                            </template>
                
                                        </div>
                                    </div>
                
                                </div>
                
                            </div>
                        </fieldset>
                    </template>
                </template>


                <fieldset class="slds-form-element slds-form-element_compound">

                    <div class="slds-form-element__control coForm">
                        <h5><strong>{allLabels.dbu_checkoutPage_enterbillingAddress}</strong>
                            <template if:true={showManageAddress}>
                                <a title="OK" onclick={handleManageBillingAddress}>
                                    <i class="icon-address-book"></i></a>
                            </template>
                        </h5>

                        <template if:true={showBillingCCAddress}>
                            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                                aria-describedby="modal-content-id-1"
                                class="slds-modal slds-fade-in-open validatePopup">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button
                                            class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                            title="Close" onclick={closeShippingAddressPopup}>
                                            <lightning-icon icon-name="utility:close" alternative-text="close"
                                                variant="inverse" size="small"></lightning-icon>
                                            <span class="slds-assistive-text">{allLabels.dbu_Close}</span>
                                        </button>
                                        <h3 class="slds-modal__title slds-hyphenate validateTit">
                                            {allLabels.dbu_checkoutPage_Select_Address}</h3>
                                    </header>
                                    <template for:each={ccAddressDataBilling} for:item="ccAddressBil">
                                        <div key={ccAddressBil.id}>
                                            <div class="slds-modal__content slds-p-around_medium">



                                                <div class="slds-radio">
                                                    <input type="radio" name="billingoptions" id={ccAddressBil.sfid}
                                                        value="true" onchange={handleSelectedAddressBilling}
                                                        data-addressline1bil={ccAddressBil.addressFirstline}
                                                        data-addressline2bil={ccAddressBil.addressSecondline}
                                                        data-addresscitybil={ccAddressBil.city}
                                                        data-addressstatebil={ccAddressBil.state}
                                                        data-addresspostalcodebil={ccAddressBil.postalCode}
                                                        data-addresscountrybil={ccAddressBil.country} />

                                                    <label for={ccAddressBil.sfid} class="slds-radio__label">
                                                        <span class="slds-radio_faux"></span>
                                                        <span class="slds-form-element__label">
                                                            <strong>{ccAddressBil.firstName}
                                                                {ccAddressBil.lastName} </strong><br />
                                                            {ccAddressBil.addressFirstline},
                                                            {ccAddressBil.addressSecondline},
                                                            {ccAddressBil.city},
                                                            {ccAddressBil.state},
                                                            {ccAddressBil.postalCode},
                                                            {ccAddressBil.country}

                                                        </span>
                                                    </label>
                                                </div>



                                            </div>
                                        </div>
                                    </template>
                                    <footer class="slds-modal__footer text-center">
                                        <button class="slds-button slds-button_brand"
                                            onclick={closeAddressPopup}>{allLabels.dbu_checkoutPage_Apply}</button>
                                    </footer>
                                </div>

                            </section>
                            <div class="slds-backdrop slds-backdrop_open"></div>
                        </template>

                        <template if:true={ShipSectionDisplayFlag}>
                            <template if:true={shipSelected}>
                        
                                <div class="slds-checkbox billInfo">
                                    <input type="checkbox" name="options" id="checkbox" value="true" onchange={sameShippingAddress}
                                        checked={sameShipAddSelected} />
                                    <label class="slds-checkbox__label" for="checkbox">
                                        <span class="slds-checkbox_faux"></span>
                                        <span class="slds-form-element__label">{allLabels.dbu_checkoutPage_sameAsShippingAddress}</span>
                                    </label>
                                </div>
                        
                            </template>
                        </template>

                        <div class="slds-form-element__row">
                            <div class="slds-size_6-of-12">
                                <div class="posrel">
                                    <lightning-input name="add1Bil" type="text" value={add1ValBil} required=""
                                            class="add1ValBilClass add1ValBilError lnginp" onkeyup={addressAutoComp} label={allLabels.dbu_checkoutPage_address1}
                                            onchange={handleBillingChange} ></lightning-input>
                                    <!-- <label class="slds-form-element__label"
                                        for="form-element-id-05">{label.dbu_checkoutPage_address1}
                                        <span class="slds-required" title="required">* </span>
                                    </label>
                                    <div class="slds-form-element__control add1ValBilError">
                                        <input name="add1Bil" type="text" value={add1ValBil} required=""
                                            class="slds-input input_align add1ValBilClass" onkeyup={addressAutoComp} 
                                            onchange={handleBillingChange} />
                                    </div> -->
                                    <template if:true={bilTypeAddress}>
                                    <template if:true={addressResults}>
                                        <div class="addressList">
                                            <template for:each={addressResults} for:item="adResult">
                                                <div class="slds-grid slds-wrap 
                                                            slds-dropdown_length-with-icon-7 
                                                            slds-dropdown_fluid" key={adResult.PlaceId}>
                                                    <div class="slds-col slds-size_4-of-4 ">
                                                        <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                                                            <li role="presentation" class="slds-listbox__item">
                                                                <div class="slds-media slds-listbox__option 
                                                                            slds-listbox__option_entity 
                                                                            slds-listbox__option_has-meta" 
                                                                            role="option"
                                                                            onclick={addressSelected} 
                                                                            data-plid={adResult.PlaceId}
                                                                            data-desc={adResult.Description}
                                                                            data-adtype='billing'>
                                                                    <span class="slds-media__body">
                                                                        <span class="slds-listbox__option-text 
                                                                                    slds-listbox__option-text_entity">
                                                                            {adResult.Description}
                                                                        </span>
                                                                    </span>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                    </template>
                                </div>
                            </div>
                            <div class="slds-size_6-of-12">
                                <lightning-input name="add2Bil" type="text" value={add2ValBil} label={allLabels.dbu_checkoutPage_address2}
                                            class="add2Bil" onchange={handleBillingChange} onfocus={closeAddressResults}></lightning-input>
                                <!-- <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-06">{label.dbu_checkoutPage_address2}</label>
                                    <div class="slds-form-element__control">
                                        <input name="add2Bil" type="text" value={add2ValBil} required=""
                                            class="slds-input input_align" onchange={handleBillingChange} onfocus={closeAddressResults}/>
                                    </div>
                                </div> -->
                            </div>
                        </div>


                        <div class="slds-form-element__row">
                            <div class="slds-size_6-of-12">
                                <lightning-input name="cityBil" type="text" value={cityValBil} label={allLabels.dbu_checkoutPage_city}
                                            class="cityValBilError lnginp" onchange={handleBillingChange} required=""></lightning-input>
                                <!-- <div class="slds-form-element">
                                    <label class="slds-form-element__label"
                                        for="form-element-id-05">{label.dbu_checkoutPage_city}
                                        <span class="slds-required" title="required">* </span>
                                    </label>
                                    <div class="slds-form-element__control cityValBilError">
                                        <input name="cityBil" type="text" value={cityValBil}
                                            class="slds-input input_align" onchange={handleBillingChange} />
                                    </div>
                                </div> -->
                            </div>

                            <div class="slds-size_6-of-12">
                                <div class="cntryValBilError">
                                    <lightning-combobox name="countryBil" value={cntryValBil} placeholder=""
                                        options={countryItem} onchange={handleBillingChange} label="Country" required>
                                    </lightning-combobox>
                                </div>

                            </div>

                        </div>

                        <div class="slds-form-element__row">
                            <div class="slds-size_6-of-12">
                                <!-- <div class="slds-form-element"> -->
                                    <template if:true={usLocBil}>
                                        <lightning-input name="zipBil" type="text" value={zipValBil} label={allLabels.dbu_checkoutPage_zipCode}
                                            class="zipValBilError lnginp" onchange={handleBillingChange} required=""></lightning-input>
                                        <!-- <label class="slds-form-element__label"
                                            for="form-element-id-06">{label.dbu_checkoutPage_zipCode}
                                            <span class="slds-required" title="required">* </span>
                                        </label> -->
                                    </template>
                                    <template if:false={usLocBil}>
                                        <lightning-input name="zipBil" type="text" value={zipValBil} label={allLabels.dbu_checkoutPage_postalCode}
                                            class="zipValBilError lnginp" onchange={handleBillingChange} required=""></lightning-input>
                                        <!-- <label class="slds-form-element__label"
                                            for="form-element-id-06">{label.dbu_checkoutPage_postalCode}
                                            <span class="slds-required" title="required">* </span>
                                        </label> -->
                                    </template>

                                    <!-- <div class="slds-form-element__control zipValBilError">
                                        <input name="zipBil" type="text" value={zipValBil}
                                            class="slds-input input_align" onchange={handleBillingChange} />
                                    </div> -->
                                <!-- </div> -->
                            </div>

                            <div class="slds-size_6-of-12">
                                <div>
                                    <template if:false={usLocBil}>
                                        <lightning-combobox name="stateBil" value={stateValBil} class="stateValBilError lnginp"
                                            placeholder={valueDrpdwnBil} options={statePicklistValuArrayBil}
                                            onchange={handleBillingChange} label="Province" required>
                                        </lightning-combobox>
                                    </template>


                                    <template if:true={usLocBil}>
                                        <lightning-combobox name="stateBil" value={stateValBil} class="stateValBilError lnginp"
                                            placeholder={valueDrpdwnBil} options={statePicklistValuArrayBil}
                                            onchange={handleBillingChange} label="State" required>
                                        </lightning-combobox>
                                    </template>
                                </div>
                            </div>
                        </div>

                    </div>
                </fieldset>

            <template if:true={ShipSectionDisplayFlag}>
                <template if:true={shipSelected}>
                    <div class="shipOption slds-size_12-of-12">
                        <h5><strong>{allLabels.dbu_checkoutPage_shippingOptions}</strong></h5>
                        <ul class="">



                            <li class=" ">


                                <span class="slds-radio">
                                    <input type="radio" name="shippingoptions" id="standardShipping" value="true"
                                        checked />
                                    <label class="slds-radio__label" for="standardShipping">
                                        <span class="slds-radio_faux"></span>
                                        <span
                                            class="slds-form-element__label">{allLabels.dbu_checkoutPage_standardShipping}</span>
                                    </label>
                                </span>


                                <span>
                                    <lightning-helptext content="(3-5 Business days)"></lightning-helptext>
                                </span>

                            </li>


                        </ul>
                    </div>
                </template>
            </template>

                <!-- Billing information section ends here -->

                <div class="buttons reviewBtn">
                    <div>
                        <template if:true={mandateFlag}>
                            <div class="labelRClr">
                                {allLabels.dbu_checkoutPage_MandatoryFields}
                            </div>
                
                        </template>
                    </div>
                    <div>
                        <template if:true={showPickupStoreNotSelectedMsg}>
                            <div class="labelRClr">
                                {showPickupselectedErrMsg}
                            </div>
                
                        </template>
                    </div>
                
                
                    <div class="rrPolicy">
                        <span>{allLabels.dbu_checkoutPage_ReadComplete} </span>
                        <a href={returnrefundurl} onclick={navigateToReturnRefundURLPage} target="_blank"> {allLabels.dbu_home_footer_returnAndRefundPolicy}</a>
                    </div>
                
                    <c-dbu_shipand-pickup-products cart-id= {cartId} ></c-dbu_shipand-pickup-products>
                
                    <div class="slds-grid slds-wrap dWindow reviewBtn">
                        <div class=" slds-large-size_12-of-12">
                            <a href={goToCartUrl} onclick={navigatetoCartpgURL} class="slds-button slds-button_outline-brand">
                                {allLabels.dbu_checkoutPage_Cancel}
                            </a>
                            <button class="slds-button slds-button_brand" title="OK" onclick={handleClickPaymentProceed}>
                                {allLabels.dbu_checkoutPage_Proceed_Order_Review}</button>
                        </div>
                
                    </div>
                
                
                </div>

            </div>
            <!---order summary starts here -->


            <div class="slds-col slds-size_1-of-1 slds-large-size_4-of-12 slds-col_padded stickyElement">


                <div>

                    <template for:each={cartDetails} for:item="cart">
                        <div key={cart.ccrz__CartId__c}>
                            <div class="orderSummary">
                                <h5><strong>{allLabels.dbu_checkoutPage_orderSummary}</strong></h5>
                                <ul>
                                    <li>
                                        <span>{allLabels.dbu_checkoutPage_items}: </span><span>{cartOriginalAmount}</span>
                                    </li>
                                    <li>
                                        <span>{allLabels.dbu_checkoutPage_discount}:</span>
                                        <span>{cartDiscountAmount}</span>
                                    </li>
                                    <li>
                                        <span>{allLabels.dbu_reviewOrder_Subtotal}:</span> <span>{cartSubtotalAmount}</span>
                                    </li>
                                    <li>
                                        <span>{allLabels.dbu_checkoutPage_Tax}:</span><span>{allLabels.dbu_checkoutPage_calculatedAtCheckout}</span>
                                    </li>
                                    <li>
                                        <span>{allLabels.dbu_checkoutPage_shippingCost}: </span>
                                        <span>{EstimatedShippingAmount}</span>
                                    </li>

                                    <li>
                                        <strong>{allLabels.dbu_checkoutPage_total}:</strong><strong>{cartTotalAmount}</strong>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </template>




                </div>
                <div class="footerBtns">
                <button class="slds-button slds-button_brand mWindow m-auto" title="OK"
                    onclick={handleClickPaymentProceed}>
                    {allLabels.dbu_checkoutPage_Proceed_Order_Review}</button>
                    <a href={goToCartUrl} onclick={navigatetoCartpgURL} class="slds-button slds-button_outline-brand mWindow m-auto">
                        {allLabels.dbu_checkoutPage_Cancel}
                    </a>
                </div>
            </div>

            <!---order summary end here -->

            <!--Address validation starts here-->
            <div>
                <template if:true={addressPopup}>
                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                        aria-describedby="modal-content-id-1"
                        class="slds-modal slds-fade-in-open validatePopup slds-modal_medium validateAddress">
                        <div class="slds-modal__container">
                            <!-- <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                            title="Close" onclick={closeAddressPopup}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                                size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button> -->
                            <header class="slds-modal__header ">
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                    title="Close" onclick={closeAddressPopup}>
                                    <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                                        size="small"></lightning-icon>
                                    <span class="slds-assistive-text">{allLabels.dbu_Close}</span>
                                </button>
                                <!-- <h3 id="modal-heading-01" class="slds-modal__title slds-hyphenate validateTit">Validate
                                    Address</h3> -->
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                <template if:true={shipSelected}>
                                    <p id="modal-heading-01" class="slds-modal__title slds-hyphenate validateTit ">
                                        {allLabels.dbu_checkoutPage_validateAddress}</p>
                                    <div class="slds-grid slds-wrap slds-m-bottom_large">

                                        <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12 validateCont">
                                            <h5>{allLabels.dbu_checkoutPage_Original_Shipping_Address}</h5>
                                            <ul>
                                                <li><span><strong>{allLabels.dbu_checkoutPage_address1} </strong></span> :
                                                   <p> {add1Val} </p></li>
                                                <li><span><strong>{allLabels.dbu_checkoutPage_address2Label}
                                                        </strong></span> :
                                                  <p>  {add2Val}</p> </li>
                                                <li><span><strong>{allLabels.dbu_checkoutPage_city} </strong> </span> :
                                                  <p>  {cityVal} </p></li>
                                                <li><span><strong>{allLabels.dbu_checkoutPage_state} </strong></span> :
                                                   <p> {stateVal} </p> </li>
                                                <li><span><strong>{allLabels.dbu_checkoutPage_zipCode} </strong></span> :
                                                    <p>{zipVal} </p></li>
                                                <li><span><strong>{allLabels.dbu_checkoutPage_country} </strong></span> :
                                                    <p>{cntryVal}</p> </li>
                                            </ul>
                                        </div>
                                        <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12 suggestBilling">
                                            <h5>{allLabels.dbu_checkoutPage_Suggested_Shipping_Address}</h5>
                                            <template if:false={errorFlagYes}>
                                                <template if:true={showSuggestedChkbox}>
                                                    <div class="slds-checkbox chckBox">
                                                        <input type="checkbox" name="options" id="checkbox-1" value="true" onclick={handleClickValidate}
                                                            onchange={addressRadioChecked} />
                                                        <label class="slds-checkbox__label" for="checkbox-1">
                                                            <span class="slds-checkbox_faux"></span>
                                                
                                                        </label>
                                                    </div>
                                                </template>

                                                <ul>
                                                    <li>
                                                        {AddressLine1txtRes}
                                                    </li>
                                                    <li> {AddressLine2txtRes} </li>
                                                    <li> {CityIDRes} </li>
                                                    <li>{StateIDRes} </li>
                                                    <li> {ZipCodeIDRes}</li>
                                                    <li> {CountryIDRes} </li>
                                                </ul>
                                            </template>
                                            <template if:true={errorFlagYes}>
                                                <strong>{allLabels.dbu_checkoutPage_ErrorDesc}:</strong> {errorDescRes}

                                            </template>
                                        </div>

                                    </div>
                                </template>

                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12 validateCont">
                                        <h5> {allLabels.dbu_checkoutPage_Original_Billing_Address} </h5>
                                        <ul>
                                            <li><span><strong>{allLabels.dbu_checkoutPage_address1} </strong></span> :
                                                <p>{add1ValBil}</p> </li>
                                            <li><span><strong>{allLabels.dbu_checkoutPage_address2Label} </strong></span> :
                                                <p>{add2ValBil} </p></li>
                                            <li><span><strong> {allLabels.dbu_checkoutPage_city} </strong></span> :
                                                <p>{cityValBil} </p></li>
                                            <li><span><strong>{allLabels.dbu_checkoutPage_state} </strong></span> :
                                                <p>{stateValBil} </p></li>
                                            <li> <span><strong>{allLabels.dbu_checkoutPage_zipCode} </strong></span> :
                                                <p>{zipValBil}</p></li>
                                            <li><span><strong>{allLabels.dbu_checkoutPage_country} </strong></span> :
                                              <p>  {cntryValBil}</p> </li>
                                        </ul>
                                    </div>
                                    <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12 suggestBilling">
                                        <h5>{allLabels.dbu_checkoutPage_Suggested_Billing_Address}</h5>
                                        <template if:false={errorFlagBillingYes}>
                                            <template if:true={showSuggestedChkbox}>
                                                <div class="slds-checkbox chckBox">
                                                    <input type="checkbox" name="options" id="checkbox-2" value="true" onclick={handleClickValidateBilling}
                                                        onchange={addressRadioCheckedBilling} />
                                                    <label class="slds-checkbox__label" for="checkbox-2">
                                                        <span class="slds-checkbox_faux"></span>
                                            
                                                    </label>
                                                </div>
                                            </template>
                                            <ul>
                                                <li>

                                                    {AddressLine1txtResBil} </li>
                                                <li> {AddressLine2txtResBil} </li>
                                                <li>{CityIDResBil} </li>
                                                <li>{StateIDResBil} </li>
                                                <li> {ZipCodeIDResBil}</li>
                                                <li> {CountryIDResBil} </li>
                                            </ul>

                                        </template>
                                        <template if:true={errorFlagBillingYes}>
                                            <strong>{allLabels.dbu_checkoutPage_ErrorDesc}:</strong> {errorDescResBil}

                                        </template>
                                    </div>
                                </div>
                            </div>
                            <footer class="slds-modal__footer text-center">
                                <button class="slds-button slds-button_outline-brand"
                                    onclick={navigateToReviewOrder}>{allLabels.dbu_checkoutPage_Continue_with_Original_Address}</button>
                                <template if:true={addressBtnSelected}>
                                    <template if:true={addressBtnSelectedBilling}>
                                        <button class="slds-button slds-button_brand" onclick={navigateToReviewOrder}
                                            disabled>{allLabels.dbu_checkoutPage_Apply_Suggested_Address}</button>
                                    </template>
                                </template>
                                <template if:false={addressBtnSelected}>
                                    <template if:true={addressBtnSelectedBilling}>

                                        <button class="slds-button slds-button_brand"
                                            onclick={navigateToReviewOrder}>{allLabels.dbu_checkoutPage_Apply_Suggested_Address}</button>
                                    </template>
                                </template>
                                <template if:false={addressBtnSelectedBilling}>
                                    <button class="slds-button slds-button_brand"
                                        onclick={navigateToReviewOrder}>{allLabels.dbu_checkoutPage_Apply_Suggested_Address}</button>
                                </template>
                            </footer>
                        </div>
                    </section>
                    <div class="slds-backdrop slds-backdrop_open"></div>
                </template>

            </div>

            <!--Address validation ends here-->

        </div>
    </div>

</template>