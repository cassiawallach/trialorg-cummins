@istest
public class CG_SL_QSOL_Test {
    static testMethod void CG_SL_QSOLService(){
        list<CSS_Integration_Details__c> recs= new list<CSS_Integration_Details__c>();
        CSS_Integration_Details__c condetails = new CSS_Integration_Details__c();
        condetails.name='QSOL Auth Token';
        condetails.ApplicationName__c='QSOL Soft';
        condetails.AuthEnv__c='QSOL Auth Tokens';
        condetails.End_Point__c='https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/auth/token';
        condetails.grant_type__c='Refresh_full';
        condetails.IsActive__c=true;
        condetails.Key__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL172LYrK6URZB3zKLO45503MD61NA8STQCRvGn7Qroo3CkG7RRlFe9Bw==';
        condetails.Logging__c='BOTH';
        condetails.Method_Type__c='POST';
        condetails.Passcode__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL172LYrK6URZB3zKLO45503MD61NA8LSTQCRvGn7Qroo3CkG7RRlFe9Bw==';
        condetails.Timeout__c=120;
        condetails.Username__c='wQPYUk3iFjCz7sofEcwrXu+voqsIza/dbcO5QlGuxTVNg/ly+0Sy1nWe57U01ngfRWq9ogg3q6LfncwdAZmBg==';
        recs.add(condetails);
        CSS_Integration_Details__c condetails1 = new CSS_Integration_Details__c();
        condetails1.name='GetWattantyDocsforQsolREST';
        condetails1.ApplicationName__c='QSOL Soft';
        condetails1.AuthEnv__c='QSOL Auth Token';
        condetails1.End_Point__c='https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data';
        condetails1.grant_type__c='Refresh_full';
        condetails1.IsActive__c=true;
        condetails1.Key__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL171LYrK6URZB3zKLO45503MD61NA8LTSTQCRvGn5Qroo3CkG7RRlFe9Bw==';
        condetails1.Logging__c='BOTH';
        condetails1.Method_Type__c='POST';
        condetails1.Passcode__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL171LYrK6URZB3zKLO45503MD61NA8LTSTQCRvGn5Qroo3CkG7RRlFe9Bw==';
        condetails1.Timeout__c=120;
        condetails1.Username__c='wQPYUk3iFjCz7sofEcwrXu+voqsIza/dbcO3QlGuxTVNg/ly+0Sy1nWe59U01nRfRW/q9ogg4q6LfncwdAZmBg==';
        recs.add(condetails1);
        insert recs; 
        string json ='{"apiToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkN0ZlFDOExlLThOc0M3b0MyelFrWnBjcmZPYyIsImtpZCI6IkN0ZlFDOExlLThOc0M3b0MyelFrWnBjcmZPYyJ9.eyJhdWQiOiJodHRwczovL2Fw","ResponseCode":"200"}';
       string json1  ='[{ "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"TSB","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"}, { "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"TRP","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"},{ "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"ATC","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"},{"documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"CAMPAIGN","language":"en","status":"OPEN", "documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html" }]';
        CG_CL_HttpRequestMock mock1 = new CG_CL_HttpRequestMock(200,'Complete',json,null);
        CG_CL_HttpRequestMock mock2 = new CG_CL_HttpRequestMock(200,'Complete',json1,null);
         CG_CL_HttpRequestMock mock3 = new CG_CL_HttpRequestMock(202,'Complete',json1,null);
        Map<String, HttpCalloutMock> endpointsResponse =new Map<String,HttpCalloutMock>();
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/auth/token',mock1);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TSB&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TRP&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=ATC&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=CAMPAIGN&language=en',mock2);
        HttpCalloutMock multiCalloutMock =  new CG_CL_HTTPMultiRequestMock(endpointsResponse);
        Test.setMock(HttpCalloutMock.class, multiCalloutMock);
        test.startTest();
        CG_SL_QSOL.getQSOLWarrantyDocs('a0529000004V3BYAA0',null, '79664889', 'en', new list<string> {'TSB','ATC','TRP','CAMPAIGN'});
        endpointsResponse.clear();
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/auth/token',mock1);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data',mock3);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TSB&language=en',mock3);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TRP&language=en',mock3);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=ATC&language=en',mock3);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=CAMPAIGN&language=en',mock3);
        HttpCalloutMock multiCalloutMock1 =  new CG_CL_HTTPMultiRequestMock(endpointsResponse);
        Test.setMock(HttpCalloutMock.class, multiCalloutMock1);
        CG_SL_QSOL.getQSOLWarrantyDocs('a0529000004V3BYAA0',null, '79664889', 'en', new list<string> {'TSB','ATC','TRP','CAMPAIGN'});
       CSS_Job_Order__c JO = NEW CSS_Job_Order__c();
        JO.Customer_Name__c = 'CumminsTnD';
        JO.ESN__c = '79464646';
        JO.Mileage_Measure__c='19';
        JO.Qsol_Engine_Family_Code__c='IN';
        insert JO;
        CSS_QuickServe.getQsolDocSave(JO.id,'79664889','en');
        CSS_Claims__c claim1=new CSS_Claims__c();
        claim1.CSS_Job__c=JO.id;
        insert claim1;
        CSS_QuickServe.getQsolDocSaveforClaims(claim1.id,'79664889','en');
        
        test.stopTest();
    }
    static testMethod void CG_SL_QSOLService2(){
        list<CSS_Integration_Details__c> recs= new list<CSS_Integration_Details__c>();
        CSS_Integration_Details__c condetails = new CSS_Integration_Details__c();
        condetails.name='QSOL Auth Token';
        condetails.ApplicationName__c='QSOL Soft';
        condetails.AuthEnv__c='QSOL Auth Tokens';
        condetails.End_Point__c='https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/auth/token';
        condetails.grant_type__c='Refresh_full';
        condetails.IsActive__c=true;
        condetails.Key__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL172LYrK6URZB3zKLO45503MD61NA8STQCRvGn7Qroo3CkG7RRlFe9Bw==';
        condetails.Logging__c='BOTH';
        condetails.Method_Type__c='POST';
        condetails.Passcode__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL172LYrK6URZB3zKLO45503MD61NA8LSTQCRvGn7Qroo3CkG7RRlFe9Bw==';
        condetails.Timeout__c=120;
        condetails.Username__c='wQPYUk3iFjCz7sofEcwrXu+voqsIza/dbcO5QlGuxTVNg/ly+0Sy1nWe57U01ngfRWq9ogg3q6LfncwdAZmBg==';
        recs.add(condetails);
        CSS_Integration_Details__c condetails1 = new CSS_Integration_Details__c();
        condetails1.name='GetWattantyDocsforQsolREST';
        condetails1.ApplicationName__c='QSOL Soft';
        condetails1.AuthEnv__c='QSOL Auth Token';
        condetails1.End_Point__c='https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data';
        condetails1.grant_type__c='Refresh_full';
        condetails1.IsActive__c=true;
        condetails1.Key__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL171LYrK6URZB3zKLO45503MD61NA8LTSTQCRvGn5Qroo3CkG7RRlFe9Bw==';
        condetails1.Logging__c='BOTH';
        condetails1.Method_Type__c='POST';
        condetails1.Passcode__c='7r7F6tyJlMmmC6JHSUMqK6dEUPvhL171LYrK6URZB3zKLO45503MD61NA8LTSTQCRvGn5Qroo3CkG7RRlFe9Bw==';
        condetails1.Timeout__c=120;
        condetails1.Username__c='wQPYUk3iFjCz7sofEcwrXu+voqsIza/dbcO3QlGuxTVNg/ly+0Sy1nWe59U01nRfRW/q9ogg4q6LfncwdAZmBg==';
        recs.add(condetails1);
        insert recs; 
        string json1 ='{"apiToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkN0ZlFDOExlLThOc0M3b0MyelFrWnBjcmZPYyIsImtpZCI6IkN0ZlFDOExlLThOc0M3b0MyelFrWnBjcmZPYyJ9.eyJhdWQiOiJodHRwczovL2Fw","ResponseCode":"200"}';
       string json  ='[{ "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"TSB","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"}, { "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"TRP","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"},{ "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"ATC","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"},{"documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"CAMPAIGN","language":"en","status":"OPEN", "documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html" }]';
        CG_CL_HttpRequestMock mock1 = new CG_CL_HttpRequestMock(200,'Complete',json,null);
        CG_CL_HttpRequestMock mock2 = new CG_CL_HttpRequestMock(200,'Complete',json1,null);
        Map<String, HttpCalloutMock> endpointsResponse =new Map<String,HttpCalloutMock>();
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/auth/token',mock1);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TSB&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TRP&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=ATC&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=CAMPAIGN&language=en',mock2);
        HttpCalloutMock multiCalloutMock =  new CG_CL_HTTPMultiRequestMock(endpointsResponse);
        Test.setMock(HttpCalloutMock.class, multiCalloutMock);
        test.startTest();
        CG_SL_QSOL.getQSOLWarrantyDocs('a0529000004V3BYAA0',null, '79664889', 'en', new list<string> {'TSB','ATC','TRP','CAMPAIGN'});
        CG_IP_OAGWrapper reqWrapper = new CG_IP_OAGWrapper();
        reqWrapper.serviceName='GetEngineDataPlateQSOLREST';
        CG_WS_QSOL.calloutGeneric(reqWrapper);
        CG_IP_OAGWrapper reqWrapper1 = new CG_IP_OAGWrapper();
        reqWrapper.serviceName='GetFaultCodeOverviewQsolREST';
        CG_WS_QSOL.calloutGeneric(reqWrapper1);
        CG_IP_OAGWrapper reqWrapper2= new CG_IP_OAGWrapper();
        reqWrapper.serviceName='GetLinkMgmtQsolREST';
        CG_WS_QSOL.calloutGeneric(reqWrapper2);
        CG_WS_QSOL.getAccessToken('a0529000004V3BYAA0');
        CSS_Job_Order__c JO = NEW CSS_Job_Order__c();
        JO.Customer_Name__c = 'CumminsTnD';
        JO.ESN__c = '79464646';
        JO.Mileage_Measure__c='19';
        JO.Qsol_Engine_Family_Code__c='IN';
        insert JO;
        CSS_QuickServe.getQsolDocSave(JO.id,'79664889','en');
        CSS_Claims__c claim1=new CSS_Claims__c();
        claim1.CSS_Job__c=JO.id;
        insert claim1;
        CSS_QuickServe.getQsolDocSaveforClaims(claim1.id,'79664889','en');
        test.stopTest();
    }
    static testMethod void CG_SL_QSOLService1(){
        string json ='{"apiToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkN0ZlFDOExlLThOc0M3b0MyelFrWnBjcmZPYyIsImtpZCI6IkN0ZlFDOExlLThOc0M3b0MyelFrWnBjcmZPYyJ9.eyJhdWQiOiJodHRwczovL2Fw","ResponseCode":"200"}';
        string json1  ='[{ "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"TSB","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"}, { "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"TRP","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"},{ "documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"ATC","language":"en","status":"OPEN","documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html"},{"documentNum":"ATC1943", "documentDesc":"ISX15 CM2350 FUEL PUMP TAPPET ATC FOR RYDER","type":"CAMPAIGN","language":"en","status":"OPEN", "documentLink":"https://qs-stg.cummins.com/qs3/pubsys2/xml/en/atc/2019/atc1943.html" }]';
        CG_CL_HttpRequestMock mock1 = new CG_CL_HttpRequestMock(200,'Complete',json,null);
        CG_CL_HttpRequestMock mock2 = new CG_CL_HttpRequestMock(200,'Complete',json1,null);
        Map<String, HttpCalloutMock> endpointsResponse =new Map<String,HttpCalloutMock>();
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/auth/token',mock1);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TSB&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=TRP&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=ATC&language=en',mock2);
        endpointsResponse.put('https://api-ue-devnf-aw-ex.cummins.com/api/core-security-api/v1/send/data79664889&documentType=CAMPAIGN&language=en',mock2);
        HttpCalloutMock multiCalloutMock =  new CG_CL_HTTPMultiRequestMock(endpointsResponse);
        Test.setMock(HttpCalloutMock.class, multiCalloutMock);
        test.startTest();
        CG_SL_QSOL.getQSOLWarrantyDocs('a0529000004V3BYAA0',null, '79664889', 'en', new list<string> {'TSB','ATC','TRP','CAMPAIGN'});
         CSS_Job_Order__c JO = NEW CSS_Job_Order__c();
        JO.Customer_Name__c = 'CumminsTnD';
        JO.ESN__c = '79464646';
        JO.Mileage_Measure__c='19';
        JO.Qsol_Engine_Family_Code__c='IN';
        insert JO;
        CSS_QuickServe.getQsolDocSave(JO.id,'79664889','en');
        CSS_Claims__c claim1=new CSS_Claims__c();
        claim1.CSS_Job__c=JO.id;
        insert claim1;
        CSS_QuickServe.getQsolDocSaveforClaims(claim1.id,'79664889','en');
        test.stopTest();
    }
}