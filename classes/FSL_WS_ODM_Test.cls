/**********************************************************************
Name:FSL_WS_ODM_Test
Copyright Â© 2022  Cummins
======================================================
======================================================
Purpose:                                                            
-------  
This is the Test Class for FSL_WS_ODM
======================================================
======================================================
History                                                            
-------                                                            
VERSION  AUTHOR            DATE                DETAIL                                 
1.0 - Rajender M      04/14/2022      INITIAL DEVELOPMENT                    
***********************************************************************/
@isTest
global class FSL_WS_ODM_Test
{
    
    public static Testmethod void FSL_WS_ODM_Method(){
        String responseBody;
        Integer responseStatus;
        
        test.startTest();
        Test.setMock(HttpCalloutMock.class, new FSL_MockHttpResponseGenerator_NC('{"Response":{"claim":{"serviceModelName":"ISX CM871 E","claimSubSource":"Draft","possessionFlag":"N","multiESNFlag":"N","ecmCalibBefore":"","paccarPaymentRoutingFlag":"Y","approverName":"Y","warrantyStartDate":"2018-02-26T00:00:00Z","paccarFlag":"N","claimReceivedDate":"2018-02-26T00:00:00Z","failureMeasure":"Kilometers","totalClaimAmt":150,"manualAdjudicationFlag":"N","level":2,"failureDate":"2018-02-26T00:00:00Z","roNumber":"","groupName":"A","ComplaintCode":{"code":89},"failure":[{"accountCode":245,"approvalCode":86,"totalSRTHours":54,"totalTowingAmt":678,"totalLaborAmt":23,"policyFlag":"N","acctCodeInfo":{"accountCodeWarrantyFlag":"","accountCodeType":"","multiESNFlag":"","chryslerFlag":""},"travelCoveredFlag":"Y","GSQID":124,"coverageType":"POL-Policy adjustment","authorizationNumber":235,"overrideFlag":"N","failMode":21,"failCode":"CHCA","campaign":{"engineComponentCode":"","cmpEngineStatusCode":"","accountCode":"","campaignType":"","campaignId":"","completeIndicator":"","multiFlag":"","expiryDateIntl":"","systemCode":"","failMode":"","effectiveDate":"","expiryDateNA":"","status":""},"inShopCampaignFlag":"Y","lineNumber":1,"payCode":643,"programID":123,"accountCodeDesp":23,"status":"T"}],"cmiServiceProviderCode":40711,"engineApplicationCode":130,"serviceProvider":{"paccarChecked":"","serviceModelName":"SX234","outfileAllClaimsFlag":"Y","channelOfDistribution":101,"spState":534,"spWarrantyTrainingStatus":"Y","spCountry":201,"ltaChecked":"N","oemCode":123,"spCertificationEndDate":"2015-06-23T00:00:00Z","spSCMDollarAmt":2833,"spServiceLevel":2,"claimAllowedDays":23,"channelDescription":"Draft","regionCode":701,"groupName":"Draft","engineEffectiveDate":"2015-06-23T00:00:00Z","inactiveDate":"2015-06-23T00:00:00Z","spSCMDeductiblePct":"","region":"MEXICO","engineExpirationdate":"2015-06-23T00:00:00Z","territory":201,"status":"T"},"claimStatus":"Draft","status":"SUCCESS","claimSource":"Guidanz","claimSubmittedDate":"2018-02-26T00:00:00Z","penalty":123,"claimCreatedDate":"2018-02-26T00:00:00Z","srtList":[{"hours":345,"code":232,"quantity":234,"srtAllowedFlag":"Y","description":"Draft","lineNumber":1,"offsiteCheck":"Y"}],"distributorCode":102,"engineFamily":10,"serviceProviderName":"MEXICO","manufacturer":"ODM","button":"Y","modelSeries":"XD123","ownerName":"","engine":{"engineFamilyCode":101,"serviceModel":"","marineFlag":"Y","etoConversionDate":"2015-06-23T00:00:00Z","oemCode":243,"buildDate":"2015-06-23T00:00:00Z","billToCode":124,"warrantyIndicatorFlag":"Y","productApplicationDesp":"Draft","designPhaseCode":3453},"countryCode":231,"historyClaimFlag":"N","bisFlag":"N","claimNumber":"Draft","applicationName":"Draft","thresholdAmount":25,"newPartsWarrantyFlag":"Y","cmiEngineSerialNumber":79774878,"paccarCertifiedLocationFlag":"Y","thresholdHrs":10,"productApplicationCode":1232,"certificationFlag":"N","travels":[{"hours":24,"mealsCharges":13,"towingCharges":34,"travelDistance":1234,"lineNumber":1}],"ecmCalibAfter":"","failurePoint":234223,"roadRelayWarrantyFlag":"Y","reconPartsWarrantyFlag":"N"},"DecisionID":"2022-06-03T08:24:47.743-05:00"},"Header":{"Sender":{"ServiceName":"ODMSRTValidation","SenderID":"CSS"},"Target":{"TargetID":"ODM"}}}'));
        string json='{ "Header": { "Target": { "TargetID": "Mock_Target" }, "Sender": { "SenderID": "oh559", "ServiceName": "Mock_Service" } }, "Request": { "claim": { "Engine": { "billToCode": "oh559", "warrantyIndicatorFlag": "oh559", "marineFlag": "oh559", "buildDate": "oh559", "productApplicationDesp": "oh559", "oemCode": "oh559", "designPhaseCode": "oh559", "engineFamilyCode": "oh559", "serviceModel": "oh559", "etoConversionDate": "oh559" }, "HeaderCampaign": { "campaignId": "oh559", "campaignType": "oh559", "expiryDateNA": "oh559", "expiryDateIntl": "oh559", "effectiveDate": "oh559", "status": "oh559", "completeIndicator": "oh559", "multiFlag": "oh559", "cmpEngineStatusCode": "oh559" }, "ServiceProvider": { "channelOfDistribution": "oh559", "region": "oh559", "claimAllowedDays": "oh559", "territory": "oh559", "outfileAllClaimsFlag": "oh559", "regionCode": "oh559", "inactiveDate": "oh559", "status": "oh559", "groupName": "oh559", "channelDescription": "oh559", "paccarChecked": "oh559", "ltaChecked": "oh559", "engineEffectiveDate": "oh559", "engineExpirationdate": "oh559", "serviceModelName": "oh559", "oemCode": "oh559", "spState": "oh559", "spCountry": "oh559", "spServiceLevel": "oh559", "spWarrantyTrainingStatus": "oh559", "spCertificationEndDate": "oh559", "spSCMDollarAmt": "oh559", "spSCMDeductiblePct": "oh559" }, "AdditionalESN": [ { "ESN": "oh559" } ], "ComplaintCode": [ { "code": "oh559" } ], "Parts": [ { "lineNumber": "oh559", "partId": "oh559", "partPrice": "oh559", "partName": "oh559", "reconPartFlag": "oh559", "priceBook": "oh559", "exceptionPriceBook": "oh559", "channelCode": "oh559", "standardPriceBook": "oh559", "pricingRegion": "oh559", "partAllowedFlag": "oh559", "partReturnFlag": "oh559", "qtyApproved": "oh559", "adjPartPercentage": "oh559", "MCEPSelectionFlag": "N", "NXpartId": "", "NXpartPrice": "", "NXpriceBookName": "", "RXpartId": "", "RXpartPrice": "", "RXpriceBookName": "" } ], "Failure": [ { "acctCodeInfo": { "accountCodeType": "oh559", "chryslerFlag": "oh559", "multiESNFlag": "oh559", "accountCodeWarrantyFlag": "oh559" }, "campaign": { "accountCode": "oh559", "campaignId": "oh559", "campaignType": "oh559", "completeIndicator": "oh559", "effectiveDate": "oh559", "engineComponentCode": "oh559", "expiryDateIntl": "oh559", "expiryDateNA": "oh559", "failMode": "oh559", "multiFlag": "oh559", "status": "oh559", "systemCode": "oh559", "cmpEngineStatusCode": "oh559" }, "lineNumber": "oh559", "failCode": "oh559", "failMode": "oh559", "accountCode": "oh559", "payCode": "oh559", "status": "oh559", "authorizationNumber": "oh559", "approvalCode": "oh559", "campaignId": "oh559", "coverageType": "oh559", "totalLaborAmt": "oh559", "totalSRTHours": "oh559", "totalTowingAmt": "oh559", "accountCodeDesp": "oh559", "policyFlag": "oh559", "programID": "oh559", "overrideFlag": "oh559", "inShopCampaignFlag": "oh559", "travelCoveredFlag": "oh559", "GSQID": "oh559" } ], "otherClaimables": [ { "lineNumber": "oh559", "Item": "oh559", "details": "oh559", "amount": "oh559" } ], "Travels": [ { "lineNumber": "oh559", "hours": "oh559", "mealsCharges": "oh559", "towingCharges": "oh559", "travelDistance": "oh559" } ], "SrtList": [ { "lineNumber": "oh559", "code": "oh559", "hours": "oh559", "offsiteCheck": "oh559", "description": "oh559", "quantity": "oh559", "srtAllowedFlag": "oh559" } ], "Number": "oh559", "Status": "oh559", "Source": "oh559", "cmiServiceProviderCode": "oh559", "serviceModelName": "oh559", "cmiEngineSerialNumber": "oh559", "productApplicationCode": "oh559", "warrantyStartDate": "oh559", "failureDate": "oh559", "CreatedDate": "oh559", "SubmittedDate": "oh559", "ReceivedDate": "oh559", "engineFamily": "oh559", "failurePoint": "oh559", "bisFlag": "oh559", "multiESNFlag": "oh559", "failureMeasure": "oh559", "reconPartsWarrantyFlag": "oh559", "manualAdjudicationFlag": "oh559", "roNumber": "oh559", "engineApplicationCode": "oh559", "serviceProviderName": "oh559", "distributorCode": "oh559", "totalAmt": "oh559", "groupName": "oh559", "thresholdAmount": "oh559", "thresholdHrs": "oh559", "approverName": "oh559", "level": "oh559", "button": "oh559", "newPartsWarrantyFlag": "oh559", "possessionFlag": "oh559", "ecmCalibBefore": "oh559", "ecmCalibAfter": "oh559", "manufacturer": "oh559", "paccarFlag": "oh559", "paccarCertifiedLocationFlag": "oh559", "paccarPaymentRoutingFlag": "oh559", "countryCode": "oh559", "ownerName": "oh559", "penalty": "oh559", "certificationFlag": "oh559", "roadRelayWarrantyFlag": "oh559", "headerCampaignId": "oh559", "modelSeries": "oh559", "applicationName": "oh559", "SubSource": "oh559", "MCEPFlag": "NW792" }, "DecisionID": "DecisionID" } }';
        
        CG_ODM_ReqJSONParser odm1 = CG_ODM_ReqJSONParser.parse(json);
        System.debug('odm1>>>> '+odm1);
        
        string presubmitJson='{"Header":{"Sender":{"ServiceName":"Mock_Service","SenderID":"oh559"},"Target":{"TargetID":"Mock_Target"}},"Request":{"DecisionID":"oh559","claim":{"bisFlag":"oh559","claimCreatedDate":"oh559","claimNumber":"oh559","claimReceivedDate":"oh559","claimSource":"oh559","claimStatus":"oh559","claimSubmittedDate":"oh559","claimTotal":"oh559","cmiEngineSerialNumber":"oh559","cmiServiceProviderCode":"oh559","engine":{"billToCode":"oh559","buildDate":"oh559","etoConversionDate":"oh559","marineFlag":"oh559","warrantyIndicatorFlag":"oh559","productApplicationDesp":"oh559","oemCode":"oh559","designPhaseCode":"oh559","engineFamilyCode":"oh559","serviceModel":"oh559"},"engineApplicationCode":"oh559","engineFamily":"oh559","failureDate":"oh559","failureMeasure":"oh559","failurePoint":"oh559","AdditionalESN":{"ESN":"oh559"},"failures":[{"accountCode":"oh559","acctCodeInfo":{"accountCodeType":"oh559","chryslerFlag":"oh559","multiESNFlag":"oh559","accountCodeWarrantyFlag":"oh559"},"approvalCode":"oh559","authorizationNumber":"oh559","campaign":{"accountCode":"oh559","campaignId":"oh559","campaignType":"oh559","completeIndicator":"oh559","effectiveDate":"oh559","engineComponentCode":"oh559","expiryDateIntl":"oh559","expiryDateNA":"oh559","failMode":"oh559","multiFlag":"oh559","status":"oh559","systemCode":"oh559","cmpEngineStatusCode":"oh559"},"coverageType":"oh559","failCode":"oh559","failMode":"oh559","totalLaborAmt":"oh559","totalSRTHours":"oh559","totalTowingAmt":"oh559","accountCodeDesp":"oh559","policyFlag":"oh559","lineNumber":"oh559","otherClaimables":[{"item":"oh559","lineNumber":"oh559","details":"oh559","amount":"oh559"}],"parts":[{"lineNumber":"oh559","partId":"oh559","partPrice":"oh559","priceBook":"oh559","partName":"oh559","reconPartFlag":"oh559","exceptionPriceBook":"oh559","channelCode":"oh559","standardPriceBook":"oh559","pricingRegion":"oh559","partAllowedFlag":"oh559","partReturnFlag":"oh559","qtyApproved":"oh559","adjPartPercentage":"oh559"}],"payCode":"oh559","srtList":[{"code":"oh559","hours":"oh559","lineNumber":"oh559","offsiteCheck":"oh559","description":"oh559","quantity":"oh559","srtAllowedFlag":"oh559"}],"status":"oh559","travels":[{"hours":"oh559","lineNumber":"oh559","mealsCharges":"oh559","towingCharges":"oh559","travelDistance":"oh559"}],"programID":"oh559","overrideFlag":"oh559","inShopCampaignFlag":"oh559","travelCoveredFlag":"oh559","GSQID":"oh559"}],"historyClaimFlag":"oh559","manualAdjudicationFlag":"oh559","messages":{"code":"oh559","description":"oh559","type":"oh559"},"multiESNFlag":"oh559","productApplicationCode":"oh559","reconPartsWarrantyFlag":"oh559","serviceModelName":"oh559","serviceProvider":{"channelOfDistribution":"oh559","claimAllowedDays":"oh559","region":"oh559","territory":"oh559","outfileAllClaimsFlag":"oh559","regionCode":"oh559","inactiveDate":"oh559","status":"oh559","groupName":"oh559","channelDescription":"oh559","paccarChecked":"oh559","ltaChecked":"oh559","engineEffectiveDate":"oh559","engineExpirationdate":"oh559","serviceModelName":"oh559","oemCode":"oh559","spState":"oh559","spCountry":"oh559","spServiceLevel":"oh559","spWarrantyTrainingStatus":"oh559","spCertificationEndDate":"oh559","spSCMDollarAmt":"oh559","spSCMDeductiblePct":"oh559"},"status":"oh559","roNumber":"oh559","serviceProviderName":"oh559","distributorCode":"oh559","totalClaimAmt":"oh559","groupName":"oh559","thresholdAmount":"oh559","thresholdHrs":"oh559","ownerName":"oh559","warrantyStartDate":"oh559","approverName":"oh559","level":"oh559","button":"oh559","newPartsWarrantyFlag":"oh559","possessionFlag":"oh559","ecmCalibBefore":"oh559","ecmCalibAfter":"oh559","manufacturer":"oh559","paccarFlag":"oh559","paccarCertifiedLocationFlag":"oh559","paccarPaymentRoutingFlag":"oh559","countryCode":"oh559","penalty":0,"certificationFlag":"oh559","roadRelayWarrantyFlag":"oh559","modelSeries":"oh559","applicationName":"oh559","claimSubSource":"oh559","ComplaintCode":{"code":"oh559"}}}}';
        
        CG_ODM_PreSubmit_ReqJSONParser presubmit = CG_ODM_PreSubmit_ReqJSONParser.parse(presubmitJson);
        System.debug('presubmit>>>> '+presubmit);
        //CG_ODM_PreSubmit_ReqJSONParser presubmit=new CG_ODM_PreSubmit_ReqJSONParser();
        CG_OP_OAGWrapper oag1=FSL_WS_ODM.callODMHeaderService(odm1);
        
        CG_OP_OAGWrapper oag2=FSL_WS_ODM.callODMPartsService(odm1);
        CG_OP_OAGWrapper oag3=FSL_WS_ODM.callODMFailureService(odm1);
        CG_OP_OAGWrapper oag4=FSL_WS_ODM.callODMTravelService(odm1);
        CG_OP_OAGWrapper oag7=FSL_WS_ODM.callODMOtherClaimableService(odm1);
        
        CG_OP_OAGWrapper oag5=FSL_WS_ODM.callODMPreSubmitService(presubmit); 
        responseBody = oag5.response.getbody();
        responseStatus = oag5.response.getStatusCode();
        System.assert(responsebody.contains('SUCCESS'));
        System.assertEquals(200,responseStatus);
        
        CG_OP_OAGWrapper oag6=FSL_WS_ODM.callODMSRTService(odm1);
        
        test.stopTest();
    }
    
    public static Testmethod void someTestmethodFailure(){
        Integer responseStatus;
        string json='{ "Header": { "Target": { "TargetID": "Mock_Target" }, "Sender": { "SenderID": "oh559", "ServiceName": "Mock_Service" } }, "Request": { "claim": { "Engine": { "billToCode": "oh559", "warrantyIndicatorFlag": "oh559", "marineFlag": "oh559", "buildDate": "oh559", "productApplicationDesp": "oh559", "oemCode": "oh559", "designPhaseCode": "oh559", "engineFamilyCode": "oh559", "serviceModel": "oh559", "etoConversionDate": "oh559" }, "HeaderCampaign": { "campaignId": "oh559", "campaignType": "oh559", "expiryDateNA": "oh559", "expiryDateIntl": "oh559", "effectiveDate": "oh559", "status": "oh559", "completeIndicator": "oh559", "multiFlag": "oh559", "cmpEngineStatusCode": "oh559" }, "ServiceProvider": { "channelOfDistribution": "oh559", "region": "oh559", "claimAllowedDays": "oh559", "territory": "oh559", "outfileAllClaimsFlag": "oh559", "regionCode": "oh559", "inactiveDate": "oh559", "status": "oh559", "groupName": "oh559", "channelDescription": "oh559", "paccarChecked": "oh559", "ltaChecked": "oh559", "engineEffectiveDate": "oh559", "engineExpirationdate": "oh559", "serviceModelName": "oh559", "oemCode": "oh559", "spState": "oh559", "spCountry": "oh559", "spServiceLevel": "oh559", "spWarrantyTrainingStatus": "oh559", "spCertificationEndDate": "oh559", "spSCMDollarAmt": "oh559", "spSCMDeductiblePct": "oh559" }, "AdditionalESN": [ { "ESN": "oh559" } ], "ComplaintCode": [ { "code": "oh559" } ], "Parts": [ { "lineNumber": "oh559", "partId": "oh559", "partPrice": "oh559", "partName": "oh559", "reconPartFlag": "oh559", "priceBook": "oh559", "exceptionPriceBook": "oh559", "channelCode": "oh559", "standardPriceBook": "oh559", "pricingRegion": "oh559", "partAllowedFlag": "oh559", "partReturnFlag": "oh559", "qtyApproved": "oh559", "adjPartPercentage": "oh559", "MCEPSelectionFlag": "N", "NXpartId": "", "NXpartPrice": "", "NXpriceBookName": "", "RXpartId": "", "RXpartPrice": "", "RXpriceBookName": "" } ], "Failure": [ { "acctCodeInfo": { "accountCodeType": "oh559", "chryslerFlag": "oh559", "multiESNFlag": "oh559", "accountCodeWarrantyFlag": "oh559" }, "campaign": { "accountCode": "oh559", "campaignId": "oh559", "campaignType": "oh559", "completeIndicator": "oh559", "effectiveDate": "oh559", "engineComponentCode": "oh559", "expiryDateIntl": "oh559", "expiryDateNA": "oh559", "failMode": "oh559", "multiFlag": "oh559", "status": "oh559", "systemCode": "oh559", "cmpEngineStatusCode": "oh559" }, "lineNumber": "oh559", "failCode": "oh559", "failMode": "oh559", "accountCode": "oh559", "payCode": "oh559", "status": "oh559", "authorizationNumber": "oh559", "approvalCode": "oh559", "campaignId": "oh559", "coverageType": "oh559", "totalLaborAmt": "oh559", "totalSRTHours": "oh559", "totalTowingAmt": "oh559", "accountCodeDesp": "oh559", "policyFlag": "oh559", "programID": "oh559", "overrideFlag": "oh559", "inShopCampaignFlag": "oh559", "travelCoveredFlag": "oh559", "GSQID": "oh559" } ], "otherClaimables": [ { "lineNumber": "oh559", "Item": "oh559", "details": "oh559", "amount": "oh559" } ], "Travels": [ { "lineNumber": "oh559", "hours": "oh559", "mealsCharges": "oh559", "towingCharges": "oh559", "travelDistance": "oh559" } ], "SrtList": [ { "lineNumber": "oh559", "code": "oh559", "hours": "oh559", "offsiteCheck": "oh559", "description": "oh559", "quantity": "oh559", "srtAllowedFlag": "oh559" } ], "Number": "oh559", "Status": "oh559", "Source": "oh559", "cmiServiceProviderCode": "oh559", "serviceModelName": "oh559", "cmiEngineSerialNumber": "oh559", "productApplicationCode": "oh559", "warrantyStartDate": "oh559", "failureDate": "oh559", "CreatedDate": "oh559", "SubmittedDate": "oh559", "ReceivedDate": "oh559", "engineFamily": "oh559", "failurePoint": "oh559", "bisFlag": "oh559", "multiESNFlag": "oh559", "failureMeasure": "oh559", "reconPartsWarrantyFlag": "oh559", "manualAdjudicationFlag": "oh559", "roNumber": "oh559", "engineApplicationCode": "oh559", "serviceProviderName": "oh559", "distributorCode": "oh559", "totalAmt": "oh559", "groupName": "oh559", "thresholdAmount": "oh559", "thresholdHrs": "oh559", "approverName": "oh559", "level": "oh559", "button": "oh559", "newPartsWarrantyFlag": "oh559", "possessionFlag": "oh559", "ecmCalibBefore": "oh559", "ecmCalibAfter": "oh559", "manufacturer": "oh559", "paccarFlag": "oh559", "paccarCertifiedLocationFlag": "oh559", "paccarPaymentRoutingFlag": "oh559", "countryCode": "oh559", "ownerName": "oh559", "penalty": "oh559", "certificationFlag": "oh559", "roadRelayWarrantyFlag": "oh559", "headerCampaignId": "oh559", "modelSeries": "oh559", "applicationName": "oh559", "SubSource": "oh559", "MCEPFlag": "NW792" }, "DecisionID": "DecisionID" } }';
        CG_ODM_ReqJSONParser odm1 = CG_ODM_ReqJSONParser.parse(json);
        
        string presubmitJson='{"Header":{"Sender":{"ServiceName":"Mock_Service","SenderID":"oh559"},"Target":{"TargetID":"Mock_Target"}},"Request":{"DecisionID":"oh559","claim":{"bisFlag":"oh559","claimCreatedDate":"oh559","claimNumber":"oh559","claimReceivedDate":"oh559","claimSource":"oh559","claimStatus":"oh559","claimSubmittedDate":"oh559","claimTotal":"oh559","cmiEngineSerialNumber":"oh559","cmiServiceProviderCode":"oh559","engine":{"billToCode":"oh559","buildDate":"oh559","etoConversionDate":"oh559","marineFlag":"oh559","warrantyIndicatorFlag":"oh559","productApplicationDesp":"oh559","oemCode":"oh559","designPhaseCode":"oh559","engineFamilyCode":"oh559","serviceModel":"oh559"},"engineApplicationCode":"oh559","engineFamily":"oh559","failureDate":"oh559","failureMeasure":"oh559","failurePoint":"oh559","AdditionalESN":{"ESN":"oh559"},"failures":[{"accountCode":"oh559","acctCodeInfo":{"accountCodeType":"oh559","chryslerFlag":"oh559","multiESNFlag":"oh559","accountCodeWarrantyFlag":"oh559"},"approvalCode":"oh559","authorizationNumber":"oh559","campaign":{"accountCode":"oh559","campaignId":"oh559","campaignType":"oh559","completeIndicator":"oh559","effectiveDate":"oh559","engineComponentCode":"oh559","expiryDateIntl":"oh559","expiryDateNA":"oh559","failMode":"oh559","multiFlag":"oh559","status":"oh559","systemCode":"oh559","cmpEngineStatusCode":"oh559"},"coverageType":"oh559","failCode":"oh559","failMode":"oh559","totalLaborAmt":"oh559","totalSRTHours":"oh559","totalTowingAmt":"oh559","accountCodeDesp":"oh559","policyFlag":"oh559","lineNumber":"oh559","otherClaimables":[{"item":"oh559","lineNumber":"oh559","details":"oh559","amount":"oh559"}],"parts":[{"lineNumber":"oh559","partId":"oh559","partPrice":"oh559","priceBook":"oh559","partName":"oh559","reconPartFlag":"oh559","exceptionPriceBook":"oh559","channelCode":"oh559","standardPriceBook":"oh559","pricingRegion":"oh559","partAllowedFlag":"oh559","partReturnFlag":"oh559","qtyApproved":"oh559","adjPartPercentage":"oh559"}],"payCode":"oh559","srtList":[{"code":"oh559","hours":"oh559","lineNumber":"oh559","offsiteCheck":"oh559","description":"oh559","quantity":"oh559","srtAllowedFlag":"oh559"}],"status":"oh559","travels":[{"hours":"oh559","lineNumber":"oh559","mealsCharges":"oh559","towingCharges":"oh559","travelDistance":"oh559"}],"programID":"oh559","overrideFlag":"oh559","inShopCampaignFlag":"oh559","travelCoveredFlag":"oh559","GSQID":"oh559"}],"historyClaimFlag":"oh559","manualAdjudicationFlag":"oh559","messages":{"code":"oh559","description":"oh559","type":"oh559"},"multiESNFlag":"oh559","productApplicationCode":"oh559","reconPartsWarrantyFlag":"oh559","serviceModelName":"oh559","serviceProvider":{"channelOfDistribution":"oh559","claimAllowedDays":"oh559","region":"oh559","territory":"oh559","outfileAllClaimsFlag":"oh559","regionCode":"oh559","inactiveDate":"oh559","status":"oh559","groupName":"oh559","channelDescription":"oh559","paccarChecked":"oh559","ltaChecked":"oh559","engineEffectiveDate":"oh559","engineExpirationdate":"oh559","serviceModelName":"oh559","oemCode":"oh559","spState":"oh559","spCountry":"oh559","spServiceLevel":"oh559","spWarrantyTrainingStatus":"oh559","spCertificationEndDate":"oh559","spSCMDollarAmt":"oh559","spSCMDeductiblePct":"oh559"},"status":"oh559","roNumber":"oh559","serviceProviderName":"oh559","distributorCode":"oh559","totalClaimAmt":"oh559","groupName":"oh559","thresholdAmount":"oh559","thresholdHrs":"oh559","ownerName":"oh559","warrantyStartDate":"oh559","approverName":"oh559","level":"oh559","button":"oh559","newPartsWarrantyFlag":"oh559","possessionFlag":"oh559","ecmCalibBefore":"oh559","ecmCalibAfter":"oh559","manufacturer":"oh559","paccarFlag":"oh559","paccarCertifiedLocationFlag":"oh559","paccarPaymentRoutingFlag":"oh559","countryCode":"oh559","penalty":0,"certificationFlag":"oh559","roadRelayWarrantyFlag":"oh559","modelSeries":"oh559","applicationName":"oh559","claimSubSource":"oh559","ComplaintCode":{"code":"oh559"}}}}';
        CG_ODM_PreSubmit_ReqJSONParser presubmit = CG_ODM_PreSubmit_ReqJSONParser.parse(presubmitJson);
        
        Test.startTest();
        
        Test.setMock(HttpCalloutMock.class, new MyMockFail());  // mock with response = 400
        
        
        CG_OP_OAGWrapper oag1 = FSL_WS_ODM.callODMHeaderService(null);
        
        
        CG_OP_OAGWrapper oag2 = FSL_WS_ODM.callODMPartsService(null);
        
        
        CG_OP_OAGWrapper oag3 = FSL_WS_ODM.callODMFailureService(null);
        
        
        CG_OP_OAGWrapper oag4 = FSL_WS_ODM.callODMTravelService(null);
        
        
        CG_OP_OAGWrapper oag5 = FSL_WS_ODM.callODMOtherClaimableService(null);
        
        
        CG_OP_OAGWrapper oag6 = FSL_WS_ODM.callODMPreSubmitService(presubmit);
        responseStatus = oag6.response.getStatusCode();
        System.assertEquals(400,responseStatus);
        Boolean resExceptionFlag = oag6.exceptionFlag;
        System.assertEquals(true,resExceptionFlag);
        CG_OP_OAGWrapper oag7 = FSL_WS_ODM.callODMSRTService(null);
        test.stopTest();     
    } 
    
    global class MyMockFail implements HttpCalloutMock {
        
        global HTTPResponse respond(HTTPRequest req) {
            HttpResponse resp = new HttpResponse();
            resp.setStatusCode(400);
            resp.setBody('');
            resp.setStatus('Bad request');
            return resp;
        }
    }    
}