<apex:page id="reppages" Controller="css_repair_job" extensions="CG_CL_NestedRepair,CSS_VerificationHistory"  showHeader="false" standardStylesheets="false">
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content=""/>
    <meta name="author" content="Cummins Inc."/>
    <meta name="copyright" content="(C)2015 Cummins Inc., Box 3005, Columbus, IN 47202-3005 U.S.A."/> 
    <title>{!$Label.css_cummins_service_system} | Repair</title>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <!--  <c:css_styles /> -->
    <c:CSS_Standard_IntakeStyles />
    <c:css_ExtraStyles />
    <script>
        $(document).ready(function(){  

            $('.collapse').on('shown.bs.collapse', function(){
                $(this).parent().find(".glyphicon-plus").removeClass("glyphicon-plus").addClass("glyphicon-minus");
                console.log("shown testing");
            }).on('hidden.bs.collapse', function(){
                $(this).parent().find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus");
            });

            $('.cmi_generic-accordion')
                .on('show.bs.collapse', function(e) {
                $(e.target).prev('.panel-heading').addClass('active');
            })
                .on('hide.bs.collapse', function(e) {
                $(e.target).prev('.panel-heading').removeClass('active');
            });

            $('#expandAll').on('click', function(){
                var span = $(this).find('span'), div = $(this).find('div'), acc = $('#expandAllAccordion');

                if(span.hasClass('glyphicon-plus')){
                    span.removeClass('glyphicon-plus').addClass('glyphicon-minus');
                    div.text('Expand All');
                    acc.find('.panel-heading').removeClass('active');
                    acc.find('span.glyphicon').removeClass('glyphicon-minus').addClass('glyphicon-plus');
                    acc.find('div.panel-collapse').removeClass('in').attr('area-expanded', 'false').css('height','0');
                    acc.find('.collapseAll').toggle();

                } 
                else {                           
                    span.removeClass('glyphicon-minus').addClass('glyphicon-plus');
                    div.text('Collapse All');
                    acc.find('.panel-heading').addClass('active');
                    acc.find('span.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
                    acc.find('div.panel-collapse').addClass('in').attr('area-expanded', 'true').removeAttr('style');
                    acc.find('.collapseAll').toggle();   
                }
            });   

            $('.collapseAll').on('click',function(e){
                e.preventDefault();
                $('#expandAllAccordion').css("display", "none");
                $('.titleOne').text('Expand All');
                collapseAllShow();

                function collapseAllShow(){
                    $('#expandAll').on('click',function(){
                        $('#expandAllAccordion').css("display", "block");
                    })
                }
            })
        });

    </script>
    <style>
        
        tr.DTT:nth-of-type(even) td {
            background: #fff !important;
        }
        
        tbody.DTT {
         display:table-row-group;
        }

        .table-bordered.repairParts > thead > tr > th, .table-bordered.repairParts > tbody > tr > td {
            border: 2px solid #ddd;       
        }


        .table-bordered.repairParts > thead  {
            display:table-header-group;


        }
        .table-bordered.repairParts > tbody{
            display:table-header-group;

        }





        .col-sm-8 {
            width: 66.66666667%;
        }
        .circle-open {
            margin: 10px 7px 10px 7px;
        }
        .gsym_Textarea{
            height:150px;
        }
        .css_ipfiel_size{
            max-width: 155px;     
            max-height: 20px;
        }


        @media (min-width: 992px){
            .btn-intake {

                padding: 0px 20px 6px 15px !important;
                margin: 0px 28px 10px 0px !important;
            }
        }
        .exit-btn-desk-padding{
            padding-left: 11px;
        }
        .close-btn-desk-padding{
            padding-left: 0px;
            margin-right: 50px;
        }


        .custPopup{
            background-color: white;
            border-width: 1px;
            border-style: solid;
            z-index: 99999;

            position: absolute;
            left: 20%;



        }
        @media (min-width: 751px){
            .modal-dialog {

                margin-top: 225px !important;

            } }

        .popupBackground{
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 9998;
        }

        .cross_butten{
            background: url("{!URLFOR($Resource.CSS_Standard_UI, '/Cummins_New1_UI/Cummins_New1_UI/assets/img/CMI-WebIcon-Sprite.png')}") no-repeat -70px -20px rgba(0, 0, 0, 0);
            display: inline; 
            width: 20px;
            height: 20px;
            border: 0px;
            border-radius: 3px;
            position: relative; 
            float: right;
            zoom: 1.1;
        }


        .modal-header {    
            padding: 2px 5px 0px 5px !important;

            background-color: #000000;
            min-height: 25px;
        }
        .CMI-HomeTableMobile{
            border-bottom: none !important;

        }

        .cmi_accessbilityChecklistColor{ 
            text-decoration:underline;
            font-weight:bold;
        }

        .cmi_success-icon {
            background: url({!URLFOR($Resource.CSS_Standard_UI, '/Cummins_New1_UI/Cummins_New1_UI/assets/img/CMI-WebIcon-Sprite.png')}) no-repeat -185px -4192px;
        width: 72px;
        height: 90px;
        position: relative;
        margin: auto;
        zoom:1.6;
        }
        .CMI-HomeTable tbody {
            overflow-x:hidden;
        }

        .CMI-HomeTable thead, tbody {
            display:block;
        }
    </style>



    <!---------Santosh script end----->
    <script type="text/javascript">
        window.onload=function(){
            populateOnLoad(); 
            partsOnLoad();
            counterpart();
            document.getElementById('counter_desc1').value= 100-document.getElementById('reviewHistory:Intakefrm:uPopup:popInnerOutputPnl1:description_upl1').value.length;
            document.getElementById('counter_desc2').value= 100-document.getElementById('reviewHistory:Intakefrm:uPopup:popInnerOutputPnl1:description_upl2').value.length;
            document.getElementById('counter_desc3').value= 100-document.getElementById('reviewHistory:Intakefrm:uPopup:popInnerOutputPnl1:description_upl3').value.length;
            document.getElementById('edit_desc1').value= 100-document.getElementById('reviewHistory:Intakefrm:EditPopup:popInnerOutputPn5:edit_desc1_textarea').value.length;

        }

        function qtyPress(e){

            if((e.which > 47 && e.which <=57) || e.which == 8)
            {
            } 
            else {
                return false;
            }

        }

        function counterpart(){

            var sol = '{!Nsoln.Repair_Notes__c}';
            var sollength =sol.length;
            document.getElementById('counter').value = (4000 - sollength);

        } 

        function partsOnLoad(){

            var sol = '{!Nsoln.Repair_Response__c }';
            //alert('sol2'+sol);
            if((sol != ''  && sol=='Repair Successful.') || (sol != ''  && sol=='Repair Successful with additional parts/procedures.') || (sol != ''  && sol=='Repair performed but did not resolve the root cause.')){
                selectSolClick1(sol);
            }else{
                selectSolClick2(sol);
            }  

        }  







        function populateOnChangeNSol(NsolnsId){

            var selFeedBack = document.getElementsByName('rbtn-icons');
            sforce.connection.sessionId = "{!$Api.Session_ID}";
            var query = "select id,Repair_Response__c from CSS_Solutions__c where id ='" + NsolnsId + "'"; 
            var result = sforce.connection.query(query); 
            var records = result.getArray("records");
            //var records1 = records.getArray('records'); 
            var sol = records[0].Repair_Response__c;
            if(sol != '' && sol != null){
                for(var x=0; x<selFeedBack.length;x++){

                    var n = (selFeedBack[x].value.indexOf(sol) > -1);
                    if(n == true){
                        selFeedBack[x].checked = true;
                    }
                    else{
                        selFeedBack[x].checked = false;
                    }
                }
            } 
            if((sol != '' && sol != null && sol=='Repair Successful.') || (sol != ''  && sol != null && sol=='Repair Successful with additional parts/procedures.') || (sol != ''  && sol != null && sol=='Repair performed but did not resolve the root cause.')){
                selectSolClick1(sol);
            }else{
                selectSolClick2(sol);
            }  

        }   

        function populateOnLoad(){

            var selFeedBack = document.getElementsByName('rbtn-icons');
            var sol = '{!Nsoln.Repair_Response__c }';

            if(sol != ''){
                for(var x=0; x<selFeedBack.length;x++){

                    var n = (selFeedBack[x].value.indexOf(sol) > -1);
                    if(n == true){
                        selFeedBack[x].checked = true;
                    }
                    else{
                        selFeedBack[x].checked = false;
                    }
                }
            } 

        }


        function selectedFeedBack(ch){ 
            var selFeedBack = document.getElementsByName('rbtn-icons');

            if((ch != ''  && ch=='Repair Successful.') || (ch != ''  && ch=='Repair Successful with additional parts/procedures.') || (ch != ''  && ch=='Repair performed but did not resolve the root cause.')){
                //alert('If'+ch);
                selectSolClick1(ch);
            }else{
                //alert('else'+sol);
                selectSolClick2(ch);
            }
            if(ch != ''){
                for(var x=0; x<selFeedBack.length;x++){
                    var n = (selFeedBack[x].value.indexOf(ch) > -1);
                    if(n == true){
                        selFeedBack[x].checked = true;
                    }
                    else{
                        selFeedBack[x].checked = false;
                    }
                } 
            }
            submitFeedBack(ch);
            //alert('Hello');
        }

        function viewMore(){
            document.getElementById("vmore2").classList.toggle('cmi_viewmore-show');
            document.getElementById("vmore1").classList.toggle('cmi_viewmore-icon-open');
            return false;
        }
    </script>

    <script type="text/javascript">


        <!-------------------attachmnets related code -------------------------------------------->
            function myPopup2() {
                window.open( "/apex/Css_AuditTrail?id={!workJob.Id}", "myWindow", "status = 1, height = 800, width = 800, resizable = 1,scrollbars=yes" );
            }
        function abc()
        {

            window.confirm('Are you sure?', DeleteFile('{!jobAttach}.Id}'));
            //DeleteFile('{!jobAttach}.Id}');
        }
        function accWinNested(url){
            window.open( url, "myWindow", "status = 1, height = 800, width = 830,scrollbars=yes,resizable=1" );
        }  

        /*     
    window.onload=function(){
        document.getElementById('counter_desc1').value= 100-document.getElementById('reviewHistory:Intakefrm:uPopup:popInnerOutputPnl1:description_upl1').value.length;
        document.getElementById('counter_desc2').value= 100-document.getElementById('reviewHistory:Intakefrm:uPopup:popInnerOutputPnl1:description_upl2').value.length;
        document.getElementById('counter_desc3').value= 100-document.getElementById('reviewHistory:Intakefrm:uPopup:popInnerOutputPnl1:description_upl3').value.length;
        document.getElementById('edit_desc1').value= 100-document.getElementById('reviewHistory:Intakefrm:EditPopup:popInnerOutputPn5:edit_desc1_textarea').value.length;

    } */
        function switchMenu(obj,obj1,obj2,obj3) 
        {
            var el = document.getElementById(obj);                                       
            if ( el.style.display != 'none' ) {
                el.style.display = 'none';
            }
            else {
                el.style.display = '';
            }
            var e2 = document.getElementById(obj1);                                       
            if ( e2.style.display != 'none' ) {
                e2.style.display = 'none';
            }
            else {
                e2.style.display = '';
            }
            var e3 = document.getElementById(obj2);                                       
            if ( e2.style.display != 'none' ) {
                e3.style.display = 'none';
            }
            else {
                e3.style.display = '';
            }
            var e4 = document.getElementById(obj3);                                       
            if ( e4.style.display != 'none' ) {
                e4.style.display = 'none';
            }
            else {
                e4.style.display = '';
            }
        }
        function textCounter(field,field2,maxlimit)
        {
            var countfield = document.getElementById(field2);
            if ( field.value.length > maxlimit ) 
            {
                field.value = field.value.substring( 0, maxlimit );
                return false;
            } else 
            {
                countfield.value = maxlimit - field.value.length;
            }
        }

        var newWin=null; 
        function openLookupPopup(name,id)
        {                    
            var url="/apex/css_attach?namefield=" + name + "&idfield=" + id;
            newWin=window.open(url, 'Popup','height=600,width=700,left=100,top=100,resizable=no,scrollbars=yes,toolbar=no,status=no,location=no');
            if (window.focus)                                        
                newWin.focus();                                                               
            return false;
        }      
        //Defect fix 61124 start
        function DisableButton1()
        {
            document.getElementById("reppages:Repfrm:attachRj").disabled=true;
            processup();
            return false; 
        }
        //Defect fix 61124 end

        function closeLookupPopup()
        {
            if (null!=newWin)                                      
                newWin.close();                                        
        }
        function firstSearch(ev){
            if (window.event && window.event.keyCode == 13 || ev.which == 13) {
                callFirstSearch();
            }
        }
        function secondSearch(ev){
            if (window.event && window.event.keyCode == 13 || ev.which == 13) {
                callsecondSearch();
            }
        }
        function thirdSearch(ev){
            if (window.event && window.event.keyCode == 13 || ev.which == 13) {
                callthirdSearch();
            }
        }
        function callTND() {
            window.open("/apex/CSS_JobTnDJo?id={!workJob.Id}", '_self');
        }
        function callJobPlan(){ window.open( "/apex/CSS_JobPlan?id={!workjob.Id}", '_self');}
        function callJobInvoice(){ window.open( "/apex/CSS_JobInvoice?id={!workjob.Id}", '_self');}
        function dateChange(){
            var d= new Date();
            var thisyear = d.getFullYear();
            var select = document.getElementById('calYearPicker');
        }
        function fnSubmit(){
            //alert("Hello");
            document.getElementById('IntCust').submit();
            document.getElementById('IntUE').submit();
        }
        function showqmarkpopup(){
            QMark();
        }
        function showqmarkpopup2(){
            QMark2();
        }
        function showqmarkpopup3(){
            QMark3();
        }
    </script> 
    <script>
        function parentCheckBoxLogic(parentId,a){
            var isClaimEnabledDlr = '{!isClaimEnabledDealer}';  //GSSC-453
            var parentCheckBoxValue = document.getElementById(parentId).firstChild.checked;
            var i;
            var myList = new Array();
            if(isClaimEnabledDlr == 'false'){ //GSSC-453
                if(a != '') {
                    a = a.slice(1, -1);
                    myList = a.split(',');            
                    for(i=0;i<myList.length;i++){
                        var childId = myList[i].trim();
                        document.getElementById(childId).firstChild.checked=parentCheckBoxValue;
                    }
                }
            } //GSSC-453 - START
            else{
                if(parentCheckBoxValue == true){
                    if(a != '') {
                        a = a.slice(1, -1);
                        myList = a.split(',');            
                        for(i=0;i<myList.length;i++){
                            var childId = myList[i].trim();
                            document.getElementById(childId).firstChild.disabled=false;
                        }
                    }
                }
                else{
                    if(a != '') {
                        a = a.slice(1, -1);
                        myList = a.split(',');            
                        for(i=0;i<myList.length;i++){
                            var childId = myList[i].trim();
                            document.getElementById(childId).firstChild.checked=parentCheckBoxValue;
                            document.getElementById(childId).firstChild.disabled=true;
                        }
                    }
                }
            }
            //GSSC-453 - END
        }
    </script>
    <script>
        function childCheckBoxLogic(parentId,lstChildId,partId){
            var partIdValue = document.getElementById(partId).firstChild.checked;
            var i;
            var myList = new Array();
            lstChildId = lstChildId.slice(1, -1);
            myList = lstChildId.split(',');
            var isClaimEnabledDlrChild = '{!isClaimEnabledDealer}';  //GSSC-453
            if(isClaimEnabledDlrChild == 'false'){  //GSSC-453
                for(i=0;i<myList.length;i++){
                    var childId = myList[i].trim();
                    var childIdVal = document.getElementById(childId).firstChild.checked;
                    if(childIdVal == true){
                        document.getElementById(parentId).firstChild.checked =childIdVal;
                        break;
                    }
                    document.getElementById(parentId).firstChild.checked = false;
                }
            }  //GSSC-453
        }
    </script>
    <c:CSS_JavaScript /> 
    <div class="container-fluid1">
        <apex:composition template="CSS_STDTemplate" />
        <apex:define name="body">
            <apex:form id="Repfrm">
                <apex:inputHidden value="{!atthId}" id="myHiddenValue"/>
                <apex:actionRegion >
                    <apex:actionFunction name="showPopup5del" action="{!showPopup5}" rendered=""/>
                    <apex:actionFunction name="processup" action="{!processUpload}" /> <!-----61124 attchments Defect fix ---->
                    <apex:actionFunction name="selectSolClick2" action="{!refreshPartsList}" rerender="outerpartspanelview" status="callSRTPartsStatus">
                        <apex:param name="firstParam" assignTo="{!selSolution}" value=""/>
                    </apex:actionFunction>
                    <apex:actionFunction action="{!getPartsList}" name="selectSolClick1"  rerender="outerpartspanelview" status="callSRTPartsStatus">
                        <apex:param name="firstParam" assignTo="{!selSolution}" value=""/>
                    </apex:actionFunction> 
                    <apex:actionFunction name="assignNIdValue" action="{!onClickOfNSolns}" oncomplete="populateOnChangeNSol('{!onChangeId}');" rerender="soltabs">
                        <apex:param name="firstParam" assignTo="{!onChangeId}" value=""/>
                    </apex:actionFunction>
                    <apex:actionStatus startText="requesting..." id="callSRTPartsStatus">
                        <apex:facet name="start">Loading... <img src="/img/loading.gif" /></apex:facet>
                        <apex:facet name="stop"></apex:facet>
                    </apex:actionStatus>
                </apex:actionRegion>
                <div class="" >
                    <div class="">
                        <apex:outputpanel id="DisplayChevs1" rendered="{!IF(workjob.id ==null , false , true)}">
                            <div class="">
                                <ul class="nav nav-tabs desk-tabs" id="JobDetailTab" style="background-color: #eee;">
                                    <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=INT" data-toggle="tab">Intake</a></li> -->
                                    <li><a href="" style="color:#888;" class="not-active">{!$Label.css_Intake}</a></li>
                                    <li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=DET" onClick ="callTND()" data-toggle="tab">{!$Label.css_Triage} &amp; {!$Label.css_Diagnosis}</a></li>
                                    <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=PLN" data-toggle="tab">Job Plan</a></li>-->
                                    <li><a href="#" class="not-active" onClick="callJobPlan()">{!$Label.css_Job_Plan}</a></li>
                                    <li class="active"><a href="#rpr" data-toggle="tab">{!$Label.css_Repair}</a></li>
                                    <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=WAR" data-toggle="tab">Warranty Claim</a></li>-->
                                    <li><a href="" style="color:#888;" class="not-active">{!$Label.css_Warramnty_Claim}</a></li>
                                    <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=INV" data-toggle="tab">Invoice</a></li>-->
                                    <li><a href="#" style="{!IF($Setup.css_header_nav__c.CG_Invoice_Check__c = true,'','color:#888;')}" class="{!IF($Setup.css_header_nav__c.CG_Invoice_Check__c = true,'active','not-active')}" onclick="{!IF($Setup.css_header_nav__c.CG_Invoice_Check__c = true,'callJobInvoice();','')}" >{!$Label.css_Invoice}</a></li>
                                </ul>
                                <ul class="nav nav-tabs mob-tabs" id="JobDetailTab" style="background-color: #eee;">
                                    <li class="active"><a href="#rpr" data-toggle="tab">{!$Label.css_Triage} &amp; {!$Label.css_Diagnose}</a></li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane active" id="rpr">
                                        <div class="panel panel-default">
                                            <div class="intakechevs" style="padding-top:0px;">

                                                <!--   <apex:form > -->
                                                <ul class="desk-ulist">
                                                    <li class="first-child">
                                                        <apex:commandLink action="{!repair_jo}" styleclass="sopen" id="cusave" >
                                                            <span class="chev_cu_img_open"/>
                                                            <span class="chev_text_open">{!$label.css_job1} <br /> {!$Label.css_jo_label} </span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li>
                                                        <apex:commandLink action="{!repair_vh}" styleclass="sopen" id="uesave"  >
                                                            <span class="{!vh_btn_cls}"/>
                                                            <span class="{!vh_txt_sts}"> {!$Label.css_view} <br /> {!$Label.css_History} </span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li>
                                                        <apex:commandLink action="{!repair_vi}" styleclass="{!vi_chv_sts}" id="visave1" >
                                                            <span class="{!vi_btn_cls}"/>
                                                            <span class="{!vi_txt_sts}"> {!$Label.css_Visual} <br /> {!$Label.css_Inspection} </span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li>
                                                        <apex:commandLink action="{!repair_rm}" styleclass="sactive" id="vhsave" >
                                                            <span class="chev_rmb_img_active"/>
                                                            <span class="chev_text_active"> Repair or <br /> Maintenance </span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li class="last-child">
                                                        <apex:commandLink action="{!repair_rj}" styleclass="sopen" id="rwsave" >
                                                            <span class="chev_rj_img_open"/>
                                                            <span class="chev_text_open"> {!$Label.css_Review} <br /> {!$label.css_job1} </span>
                                                        </apex:commandLink>
                                                    </li>
                                                </ul>
                                                <ul class="mob-ulist">
                                                    <li class="first-child">
                                                        <apex:commandLink action="{!repair_jo}" styleclass="{!jo_chv_sts}" id="cusave_m">
                                                            <div class="circle-active">1</div>
                                                            <span class="{!jo_txt_sts}">{!jo_txt_val}</span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li>
                                                        <apex:commandLink action="{!repair_vh}" styleclass="{!vh_chv_sts}" id="uesave_m">
                                                            <div class="pull-right circle-open">2</div>
                                                            <span class="{!vh_txt_sts}">{!vh_txt_val}</span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li>
                                                        <apex:commandLink action="{!repair_vi}" styleclass="{!vi_chv_sts}" id="ccsave_m">
                                                            <div class="pull-right circle-open">3</div>
                                                            <span class="{!vi_txt_sts}">{!vi_txt_val}</span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li>
                                                        <apex:commandLink action="{!repair_rm}" styleclass="{!ts_chv_sts}" id="visave_m">

                                                            <span class="{!ts_txt_sts}">{!ts_txt_val}</span>
                                                        </apex:commandLink>
                                                    </li>
                                                    <li class="last-child">
                                                        <apex:commandLink action="{!repair_rj}" styleclass="{!rj_chv_sts}" id="rjsave_m">
                                                            <div class="circle-open">5</div>
                                                            <span class="{!rj_txt_sts}"> {!rj_txt_val}</span>
                                                        </apex:commandLink>
                                                    </li>
                                                </ul>
                                            </div>  
                                            <div class="">
                                                <!-- ******* BEGIN TD - JOB OVERVIEW **** -->
                                                <apex:outputPanel id="joboverviewpnl" >
                                                    <apex:actionRegion >
                                                        <div class="col-md-12">
                                                            <div class="row">
                                                                <c:CSS_JobOverviewPanel CustName="{!workJob.Customer_Name__c}" JobOrdId="{!workJob.Id}" JobStatus="{!workJob.Status__c}" DateCreated="{!workJob.CreatedDate}" DateIn="{!workJob.Date_In__c}" jobOrdNumb="{!workJob.Name}" ShopWO="{!workJob.Shop_Work_Order__c}" LastSaved="{!workJob.LastModifiedDate}" JobESN="{!workJob.ESN__c}" ServModel="{!workJob.Service_Model__c}" RepRecent="{!workJob.Repeat_Or_Recent_Calc__c}" JobLoc="{!workJob.JobLocation__c}" pgName="INTAKE" paccarAuthReq="{!workJob.PACCAR_Auth_Required__c}"/>
                                                            </div>
                                                        </div>
                                                    </apex:actionRegion>
                                                </apex:outputPanel> 

                                                <!-- ******* END TD - JOB OVERVIEW **** -->



                                                <apex:outputPanel id="rprtshoot" rendered="true">
                                                    <!-- <apex:form >  -->
                                                    <div class="panel-body">

                                                        <apex:actionRegion >

                                                            <apex:outputpanel id="plusimageB">
                                                                <apex:outputpanel onclick="switchMenu('{!$Component.inlinetablesecB}','{!$Component.minusimageB}','{!$Component.plusimageB}','{!$Component.minusimageB1}')" title="Expand - View More">
                                                                    <a><i class="fa fa-caret-down fa-lg"/> {!$Label.css_View_more} </a>
                                                                </apex:outputpanel> 
                                                            </apex:outputpanel>
                                                            <apex:outputpanel id="minusimageB" style="display:none;">
                                                                <apex:outputpanel onclick="switchMenu('{!$Component.inlinetablesecB}','{!$Component.plusimageB}','{!$Component.minusimageB}','{!$Component.minusimageB1}')" title="Collapse - View More">
                                                                    <a><i class="fa fa-caret-down fa-lg"/> {!$Label.css_View_less}</a>
                                                                </apex:outputpanel>
                                                            </apex:outputpanel>
                                                            <!--  </apex:form>  -->
                                                            <apex:outputpanel id="inlinetablesecB" style="display:none;">        
                                                                <div class="panel-body">
                                                                    <div class="container-fluid">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="row">
                                                                                    <div class="col-md-6"> 

                                                                                        <!-- Assigned to   -->                                                    
                                                                                        <apex:outputpanel id="AssignedTopnl5" >
                                                                                            <fieldset class="cmi_field_set">
                                                                                                <legend class="fs_legend">{!$Label.css_assignto}</legend>
                                                                                                <c:css_asign_tech JoId="{!workjob.Id}" tech1="{!workjob.Assigned_to__r.Name}" tech2="{!workjob.Additional_Tech1__r.Name}" tech3="{!workjob.Additional_Tech2__r.Name}" tech4="{!workjob.Additional_Tech3__r.Name}" tech5="{!workjob.Additional_Tech4__r.Name}" tech6="{!workjob.Additional_Tech5__r.Name}"  tech7="{!workjob.Additional_Tech6__r.Name}" tech8="{!workjob.Additional_Tech7__r.Name}" tech9="{!workjob.Additional_Tech8__r.Name}" tech10="{!workjob.Additional_Tech9__r.Name}" JobLoc="{!workJob.JobLocation__c}"/>
                                                                                            </fieldset>
                                                                                        </apex:outputpanel>                                                               

                                                                                        <!--   <apex:form >  -->
                                                                                        <apex:outputpanel id="customerpnlB" rendered="true">
                                                                                            <fieldset class="cmi_field_set">
                                                                                                <legend class="fs_legend">{!$Label.css_customer} </legend>
                                                                                                <div class="form-horizontal" role="form">

                                                                                                    <label for="" class="col-sm-4 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Customer_Name__c.Label}<div class="cmi_asterisk">*</div></label>

                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Customer_Name__c}"/>
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Name.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Name}" />
                                                                                                        &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Shop_Work_Order__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Shop_Work_Order__c}" /> &nbsp;
                                                                                                    </div>

                                                                                                    <div class="clearfix"></div>
                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Date_In__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Date_In__c}" /> &nbsp;
                                                                                                    </div>

                                                                                                </div>
                                                                                            </fieldset>
                                                                                        </apex:outputpanel>
                                                                                        <!--   </apex:form>  -->
                                                                                        <!--   <apex:form >   -->
                                                                                        <!--Modified as per story# 79153-->
                                                                                        <!--apex:outputpanel id="unitengpnlB" rendered="{!IF(workJob.Unit_Number__c!=null || workJob.Application__c!=null || workJob.ESN__c!=null || workJob.Mileage__c!=null, true, false)}"--> 
                                                                                        <apex:outputpanel id="unitengpnlB" rendered="{!IF(workJob.Unit_Number__c!=null || workJob.Application_Desc__c!=null || workJob.ESN__c!=null || workJob.Mileage__c!=null, true, false)}"> 
                                                                                            <fieldset class="cmi_field_set">
                                                                                                <legend class="fs_legend">{!$Label.Unit_amp_Engine}&nbsp;&nbsp; </legend>
                                                                                                <div class="form-horizontal" role="form">
                                                                                                    <!--Modified as per story# 79153-->
                                                                                                    <!--<label for="" class="col-sm-4 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Application__c.Label}<div class="cmi_asterisk">*</div></label>-->
                                                                                                    <label for="" class="col-sm-4 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Application_Desc__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <!--Modified as per story# 79153-->
                                                                                                        <!--apex:OutputField value="{!workJob.Application__c}"-->
                                                                                                        <apex:OutputField value="{!workJob.Application_Desc__c}" />
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <apex:outputPanel rendered="{!IF(bmsEnabled==true,true,false)}">
                                                                                                        <div class="col-sm-4 cmi-tar">
                                                                                                            <apex:outputLabel value="{!$Label.CSS_Unit_Number}" /><div class="cmi_asterisk">*</div>
                                                                                                        </div>
                                                                                                        <div class="col-sm-8 col-xs-12">
                                                                                                            <apex:OutputField value="{!workJob.Unit_Number__c}" /> &nbsp;
                                                                                                        </div>
                                                                                                    </apex:outputPanel>
                                                                                                    <apex:outputPanel rendered="{!IF(bmsEnabled==false,true,false)}">
                                                                                                        <div class="col-sm-4 cmi-tar">
                                                                                                            <apex:outputLabel value="{!$Label.CSS_Unit_Number}" />
                                                                                                        </div>
                                                                                                        <div class="col-sm-8 col-xs-12">
                                                                                                            <apex:OutputField value="{!workJob.Unit_Number__c}" /> &nbsp;
                                                                                                        </div>
                                                                                                    </apex:outputPanel>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="ESN" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.ESN__c}" /> &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Service_Model__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Service_Model__c}" /> &nbsp;
                                                                                                    </div>

                                                                                                    <div class="clearfix"></div>
                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <label for="">{!$ObjectType.CSS_Job_Order__c.fields.Make__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Make__c}" /> &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <label for="">{!$ObjectType.CSS_Job_Order__c.fields.Model__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <!--Replace ESN_C with  model field API name  once it is created  --> <apex:OutputField value="{!workJob.ESN__c}" /> &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.VIN__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.VIN__c}" /> &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Failure_Date__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Failure_Date__c}" /> &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Warranty_Start_Date__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Warranty_Start_Date__c}" /> &nbsp;
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$Label.CSS_Mileage_Hours}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <!--<apex:OutputField value="{!workJob.Mileage__c}" /> &nbsp; {!workJob.Mileage_Measure__c}-->
                                                                                                        <apex:outputText value="{0, number, 0}" rendered="{!IF(isReadUser==true, true, false)}" id="cust10"> 
                                                                                                            <apex:param value="{!workJob.Mileage__c}" />
                                                                                                        </apex:outputText> &nbsp; {!workJob.Mileage_Measure__c}
                                                                                                    </div>


                                                                                                    <div class="clearfix"></div>     

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Failure_Point__c.Label}" />
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <apex:OutputField value="{!workJob.Failure_Point__c}" /> &nbsp;
                                                                                                    </div>

                                                                                                </div>             
                                                                                            </fieldset>
                                                                                        </apex:outputpanel>
                                                                                        <!-- </apex:form>   -->
                                                                                        <!--  <apex:form >   -->
                                                                                        <apex:outputpanel id="ccpnlB" rendered="{!IF(workJob.General_Symptoms__c!=null, true, false)}">
                                                                                            <fieldset class="cmi_field_set">
                                                                                                <legend class="fs_legend">{!$Label.CSS_Customer_Complaint}</legend>
                                                                                                <div class="form-horizontal" role="form">
                                                                                                    <label for="" class="col-sm-4 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.General_Symptoms__c.Label}</label> 

                                                                                                    <div class="col-sm-8 col-xs-12" Style="word-break: break-word;">
                                                                                                        <apex:OutputField value="{!workJob.General_Symptoms__c}" />
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>   

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <apex:outputLabel value="Category" /><div class="cmi_asterisk">*</div>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <!-- Modified as per story# 79153-->
                                                                                                        <!--apex:OutputField value="{!workJob.Category__c}" -->
                                                                                                        <apex:OutputField value="{!workJob.Category_Desc__c}" />
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>   

                                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                                        <!-- Modified as per story# 79153-->
                                                                                                        <!--apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type__c.Label}" -->
                                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type_Desc__c.Label}" /><div class="cmi_asterisk">*</div>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                                        <!-- Modified as per story# 79153-->
                                                                                                        <!--apex:OutputField value="{!workJob.Complaint_Type__c}" -->
                                                                                                        <apex:OutputField value="{!workJob.Complaint_Type_Desc__c}" />
                                                                                                    </div>

                                                                                                </div>      
                                                                                            </fieldset>
                                                                                        </apex:outputpanel>
                                                                                        <!--  </apex:form>  -->
                                                                                        <!-- <apex:form >  -->
                                                                                        <apex:outputpanel id="attachmentpnl1" rendered="true">  
                                                                                            <fieldset class="cmi_field_set">
                                                                                                <legend class="fs_legend">{!$Label.CSS_Attachments}</legend>
                                                                                                <div class="form-horizontal" role="form"> 

                                                                                                    <label class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Attachments}</label>
                                                                                                    <div class="col-sm-8 col-xs-12">

                                                                                                        <div data-target="#uPopup"
                                                                                                             data-toggle="modal" data-backdrop="static"  class="pull-right"
                                                                                                             style="font-weight: bold;">
                                                                                                            <apex:actionRegion > 
                                                                                                                <a><i class="upload-icon"></i></a> 
                                                                                                                <apex:commandLink value="{!$Label.css_Upload}" action="{!showPopup1}" rerender="uPopup" style="text-decoration:underline; margin-left: 5px; font-weight:bold;" rendered="{!IF(workJob.Id!=null, true, false)}"/>    
                                                                                                            </apex:actionRegion> 
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <apex:repeat value="{!jobAttach}" var="atth">
                                                                                                        <div class="clearfix"></div>

                                                                                                        <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Attachment}</label>
                                                                                                        <div class="col-sm-8 col-xs-12"> 

                                                                                                            <a href="/servlet/servlet.FileDownload?file={!atth.Id}" target="_blank" style="text-decoration:underline;">
                                                                                                                <i class="cmi_upload-document"></i> {!LEFT(atth.Name,40)}
                                                                                                            </a> 
                                                                                                            <br/>
                                                                                                            <apex:outputLabel value="{!atth.Description}" style="word-break:break-word; font-weight: normal"/>

                                                                                                            <div data-target="#DeletePopupNew"
                                                                                                                 data-toggle="modal" data-backdrop="static" class="pull-right"
                                                                                                                 style="font-weight: bold;">
                                                                                                                <apex:actionRegion >
                                                                                                                    <i class="cmi_delete-icon"></i>
                                                                                                                    <script>
                                                                                                                        function lnkClicked(parameter){
                                                                                                                            //alert(parameter);
                                                                                                                            jQuery('[id$=myHiddenValue]').val(parameter);
                                                                                                                        }
                                                                                                                        function editClicked(parameter){
                                                                                                                            //alert(parameter);
                                                                                                                            jQuery('[id$=myHiddenValue]').val(parameter);
                                                                                                                            showPopup5del();
                                                                                                                        }
                                                                                                                    </script>
                                                                                                                    <apex:commandlink value="{!$Label.CSS_Delete}" action="{!showPopup6}"  style="margin-right: -20px; font-weight:bold ;" rerender="DeletePopupNew" onclick="lnkClicked('{!atth.id}');">

                                                                                                                    </apex:commandlink>
                                                                                                                </apex:actionRegion>
                                                                                                            </div>
                                                                                                            <div class="clearfix"></div>  

                                                                                                            <div data-target="#EditPopupNew" data-toggle="modal" data-backdrop="static" class="pull-right" style="font-weight:bold;">
                                                                                                                <apex:actionRegion >
                                                                                                                    <i class="CMI-edit-icon"></i>

                                                                                                                    <apex:commandLink value="{!$Label.css_Edit}" rerender="EditPopupNew" style="font-weight:bold;  text-decoration:underline;"   onclick="editClicked('{!atth.id}');"> 

                                                                                                                    </apex:commandLink>
                                                                                                                </apex:actionRegion>
                                                                                                            </div>
                                                                                                        </div>   </apex:repeat></div>
                                                                                                <!-- End - Attachment Records -->                                        
                                                                                            </fieldset>
                                                                                        </apex:outputpanel>
                                                                                        <!--  </apex:form>  -->
                                                                                        <!--
<apex:outputpanel id="attachmentpnlC" rendered="true">
<c:css_multi_attach objId="{!$CurrentPage.Parameters.id}"/>
</apex:outputpanel> -->
                                                                                    </div>
                                                                                    <!--   <apex:form >  -->
                                                                                    <div class="col-md-6" height="100%">

                                                                                        <!-- Fault Codes Repairs -->                                                  
                                                                                        <apex:outputpanel id="faultcodes1a" rendered="true">
                                                                                            <fieldset class="cmi_field_set">
                                                                                                <legend class="fs_legend">{!$Label.css_Fault_Codes_Symptoms_Diagnostic_Solutions_Repairs}</legend>
                                                                                                <c:CSS_TnDFCSummary jobOrdId="{!workjob.Id}" jobOrdNumb="{!workjob.Name}" CustName="{!workjob.Customer_Name__c}" TechID="{!workjob.OwnerID}" RedirectPage1="/apex/CSS_JobTnDRj?id={!workJob.Id}&pgflag=rj#accordion1-heading-5" FCOverviewPage="/apex/CSS_JobTnDEds?id={!workJob.Id}" DisplayPrioritized="true" viewMod="shortView"/>

                                                                                                <div class="row intakerow">
                                                                                                    <div class="col-md-4 col-xs-12 fset-label">
                                                                                                        <apex:outputLabel value="DSID" /> </div>
                                                                                                    <div class="col-md-8 col-xs-12">
                                                                                                        <apex:outputText value="{!DSID}" id="dsid"/><br/>
                                                                                                    </div>      
                                                                                                </div>

                                                                                                <div class="clearfix"></div>
                                                                                                <div class="col-sm-4 cmi-tar">
                                                                                                    <apex:outputLabel value="{!$Label.CSS_Pulled_From_INSITE}" /> 
                                                                                                </div>
                                                                                                <div class="col-sm-8 col-xs-12">

                                                                                                    <apex:outputText value="{!insitetimestamp}" id="theValue2a"/><br/> 
                                                                                                </div>

                                                                                                <div class="clearfix"></div>
                                                                                                <div class="col-sm-4 cmi-tar">
                                                                                                    <apex:outputLabel value="{!$Label.CSS_Repairs}" /> </div>
                                                                                                <div class="col-sm-8 col-xs-12">
                                                                                                    <apex:outputText value="{!Repair}" id="repair3"/><br/>
                                                                                                </div>     

                                                                                            </fieldset>
                                                                                        </apex:outputpanel>  
                                                                                        <!-- SRT Component -->                                                                
                                                                                        <apex:outputpanel id="DiagSRTpnl1" rendered="true">
                                                                                            <c:CSS_SRTDiagComp decimalDiagTime="{!digTime}" decimalrepTime="{!repTime}" RedirectPage4="/apex/CSS_JobRepair?id={!workJob.Id}&pgflag=rj#accordion1-heading-4"/>
                                                                                        </apex:outputpanel>
                                                                                        <!-- SRT Component -->

                                                                                        <!-- Code for Intake and Triage & Diagnosis and Repair View / Edit Linka and sections - Start --->
                                                                                        <!-- Job Notes -->                                                            
                                                                                        <apex:outputpanel id="jobnotesNewpnl3" rendered="true">
                                                                                            <c:CSS_NotesDisplay sJobId="{!workjob.Id}" RedirectPage="/apex/CSS_JobRepair?id={!workJob.Id}&pgflag=rj#accordion1-heading-4"/>  
                                                                                        </apex:outputpanel>                                                                   
                                                                                        <!---        Code for Intake and Triage & Diagnosis and Repair Vie / Edit Linka and sections - End--> 

                                                                                        <apex:outputpanel id="auditpnlB2" rendered="true">
                                                                                            <c:css_vmore_audit jobordID="{!workjob.Id}" />
                                                                                        </apex:outputpanel>
                                                                                        <!--  <c:CSS_FutureAlerts /> -->
                                                                                    </div>
                                                                                    <!--  </apex:form>     -->
                                                                                </div>
                                                                            </div>
                                                                        </div></div></div>

                                                                <!-- <apex:form >  -->
                                                                <apex:outputpanel id="minusimageB1" style="display:none;">
                                                                    <apex:outputpanel onclick="switchMenu('{!$Component.inlinetablesecB}','{!$Component.plusimageB}','{!$Component.minusimageB}','{!$Component.minusimageB1}')" title="Collapse - View More">
                                                                        <a><i class="fa fa-caret-up fa-lg"/> {!$Label.css_View_less}</a>
                                                                    </apex:outputpanel>
                                                                </apex:outputpanel>
                                                            </apex:outputpanel>
                                                            <!--  </apex:form>   -->  
                                                            <hr/>

                                                            <div class="panel-body">
                                                                <div class="row">
                                                                    <div class="col-md-12" height="100%">   
                                                                        <apex:outputpanel id="viewrprpnlB" rendered="true">  
                                                                            <div class=" col-xs-12 col-sm-9">
                                                                                <div class="col-sm-12" >
                                                                                    <apex:outputPanel rendered="{!isfaultCodeView == false}" id="nonFCView">

                                                                                        <div class="col-sm-8 col-xs-12">                                            
                                                                                            <span style="font-size:18px;font-weight: bold"><p><b>Fault Codes:</b>{!selectedFaulcode}</p></span>
                                                                                            <p><b>{!$Label.CSS_Related_fault_code}:</b>{!selectedReltdFaulcode}</p>
                                                                                        </div> 
                                                                                        <div class="col-xs-12 col-sm-12" style="padding-right:0px;">
                                                                                            <div><a class="accordion-toggle" id="expandAll">
                                                                                                <span class="glyphicon glyphicon-minus"></span><div class="cmi_accordion-title" style="margin-bottom: 5px;">{!$Label.CSS_Expand_All}</div>
                                                                                                </a>
                                                                                            </div>
                                                                                            <div class="panel-group cmi_generic-accordion" id="expandAllAccordion">                                   


                                                                                                <div class="panel panel-default">
                                                                                                    <div class="panel-heading active" id="accordion1-overview1">
                                                                                                        <h4 class="panel-title">
                                                                                                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1-heading-3" data-target="#overview1" aria-expanded="true">
                                                                                                                <span class="glyphicon glyphicon-minus"></span><div class="cmi_accordion-title">{!$Label.css_jo_label}</div>
                                                                                                            </a>
                                                                                                        </h4>
                                                                                                    </div>
                                                                                                    <div id="overview1" class="panel-collapse collapse in" aria-expanded="true">                                    
                                                                                                        <div class="panel-body" id="accordion1-overview1">
                                                                                                            <!-------------------------------QSOL start ------------------------------------------>
                                                                                                            <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster != null),true,false)}"> 
                                                                                                                <!-- <div class="cmi_well">-->
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Fault_Code_Description__c!= null),true,false)}">     
                                                                                                                    <h5><b>{!$Label.css_Description}</b></h5>
                                                                                                                    <p>{!qsolRetrivedFCMaster.Fault_Code_Description__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Comp_Location__c != null),true,false)}">     
                                                                                                                    <p><b>{!$Label.css_Location}:</b>{!qsolRetrivedFCMaster.Comp_Location__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.SPN__c != null),true,false)}">     
                                                                                                                    <p><b>SPN:</b>{!qsolRetrivedFCMaster.SPN__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.FMI__c != null),true,false)}">     
                                                                                                                    <p><b>FMI:</b>{!qsolRetrivedFCMaster.FMI__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Lamp__c != null),true,false)}">     
                                                                                                                    <p><b>{!$Label.CSS_Lamp}:</b>{!qsolRetrivedFCMaster.Lamp__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Circuit_Description__c != null),true,false)}">     
                                                                                                                    <p><b>Fault Code Description:</b>{!qsolRetrivedFCMaster.Circuit_Description__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <!-- <p><b>File Name:</b>{!qsolRetrivedFCMaster.File_Name__c}</p>-->
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Engine__c != null),true,false)}">     
                                                                                                                    <p><b>{!$Label.css_Engine}:</b>{!qsolRetrivedFCMaster.Engine__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Reason__c != null),true,false)}">     
                                                                                                                    <b>{!$Label.CSS_Reason}:</b><p>{!qsolRetrivedFCMaster.Reason__c}</p>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.Effect__c != null),true,false)}">     
                                                                                                                    <b>{!$Label.CSS_Effect}:</b> <p>{!qsolRetrivedFCMaster.Effect__c}</p> 
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF((qsolRetrivedFCMaster.File_Name__c!= null),true,false)}">     
                                                                                                                    <b>{!$Label.css_Troubleshooting} Information:</b>
                                                                                                                    <apex:commandLink value="Click Here to see Complete FC Overview" action="{!qsolredirect}" target="_blank"/>
                                                                                                                    <!--   <a href="{!qsolRetrivedFCMaster.File_Name__c}" target="_blank">{!qsolRetrivedFCMaster.File_Name__c}<i class="icon-newwin"></i></a> -->
                                                                                                                    <!-- <apex:outputLink value="" id="theLink" target="_blank">{!qsolRetrivedFCMaster.File_Name__c}</apex:outputLink>  -->
                                                                                                                </apex:outputPanel>
                                                                                                                <br/>
                                                                                                            </apex:outputPanel>

                                                                                                            <!-------------------------------------QSOL End-------------------------------------------------->   
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="panel panel-default">
                                                                                                    <apex:actionRegion >
                                                                                                        <div class="panel-heading" id="accordion1-overview2">
                                                                                                            <h4 class="panel-title" data-toggle="collapse" data-parent="#accordion1-heading-3" data-target="#overview2">
                                                                                                                <a class="accordion-toggle">
                                                                                                                    <span class="glyphicon glyphicon-minus"></span><div class="cmi_accordion-title">{!$label.css_repair_steps}</div>
                                                                                                                </a>
                                                                                                            </h4>
                                                                                                        </div>
                                                                                                    </apex:actionRegion>
                                                                                                    <!-- UI Code -->

                                                                                                    <div class="jquery-script-clear"></div>
                                                                                                    <div id="overview2" class="panel-collapse collapse in">
                                                                                                        <div class="panel-body">
                                                                                                            <div class="col-md-12 col-sm-12">
                                                                                                                <apex:outputPanel id="soltabs">
                                                                                                                    <apex:actionRegion >
                                                                                                                        <div class="panel-body" id="accordion1-overview2">
                                                                                                                            <div class="cmi_viewmore-2" id="tabAcordion">
                                                                                                                                <div id="vmore1" class="cmi_viewmore-icon-2 cmi_viewmore-icon-open" onclick="viewMore();"></div><a href="" onclick="viewMore();"><span class="text">View List of All Solutions</span></a><br/> 
                                                                                                                                <br/>  
                                                                                                                                <div id="vmore2" class="cmi_viewmore-body-2 cmi_viewmore-show">

                                                                                                                                    <table class="table table-bordered">
                                                                                                                                        <tbody class="DTT">
                                                                                                                                            <tr class="DTT">
                                                                                                                                                <td style="border-right:0px;"><b>Nested Solutions Title</b></td>
                                                                                                                                                <td style="border-left:0px;"><b>Diagnostic Target Time</b></td>
                                                                                                                                            </tr>
                                                                   
                                                                                                                                        <!--div class="col-sm-6" style="text-align:center">Nested Solutions Title</div>
                                                                                                                                        <div class="col-sm-4" style="text-align:center">Diagnostic Target Time</div>
                                                                                                                                        <div class="clearfix"/-->
                                                                                                                                        <apex:repeat value="{!solsList}" var="solLst">
                                                                                                                                                <tr class="DTT">
                                                                                                                                                    <td style="border-right:0px;">
                                                                                                                                                    <apex:commandLink value="{!solLst.Nested_Rank__c} {!solLst.Solution_Title__c}" onclick="assignNIdValue('{!solLst.Id}');" rerender="none"></apex:commandLink>
                                                                                                                                                    </td>
                                                                                                                                                    <!-- Added below line #GSSC-156 -->
                                                                                                                                                    <td style="border-left:0px;">
                                                                                                                                                    <apex:outputText ><font color="black">{!IF((solLst.DiagTargetTime__c != null && solLst.DiagTargetTime__c != 0.0),  (TEXT(solLst.DiagTargetTime__c) + ' Hours'), IF(solLst.TargetMessage__c != null, solLst.TargetMessage__c, ''))} </font></apex:outputText>
                                                                                                                                                    <div class="clearfix"/>
                                                                                                                                                    </td>
                                                                                                                                                </tr>
                                                                                                                                            </apex:repeat>
                                                                                                                                        </tbody>
                                                                                                                                    </table>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <br/>  
                                                                                                                            <apex:outputPanel rendered="{!IF(isSolnExpired==false, true, false)}">

                                                                                                                                <h3 style="margin:0"><b><apex:outputText value="{!nestedSolution.solTitle}" escape="false"/></b>
                                                                                                                                </h3>

                                                                                                                                <span><b>{!$Label.CSS_Solution_ID}:</b>{!nestedSolution.solNum}</span> 
                                                                                                                            </apex:outputPanel>

                                                                                                                            <apex:outputPanel rendered="{!IF(isSolnExpired==true, true, false)}">
                                                                                                                                <h3 style="margin:0"><b><apex:outputText value="{!solutionTitle}" escape="false"/></b>
                                                                                                                                </h3>

                                                                                                                                <span><b>{!$Label.CSS_Solution_ID}:</b>{!solNum}</span> 
                                                                                                                            </apex:outputPanel>
                                                                                                                        </div>

                                                                                                                        <apex:outputPanel rendered="{!IF(isSolnExpired==false, true, false)}" >
                                                                                                                            <h5><b>{!$Label.CSS_Resolution}</b></h5>
                                                                                                                            <ul style="list-style-type: disc; margin-left: -24px;margin-bottom: 0;font-size:14px;border-left:0px;">
                                                                                                                                <apex:outputText value="{!nestedSolution.Resolution}" escape="false"/>  
                                                                                                                            </ul>  
                                                                                                                        </apex:outputPanel>
                                                                                                                        <br/>
                                                                                                                        <apex:outputPanel id="ResValues" rendered="{!IF(Nsoln.Diagnostic_Response__c != null && Nsoln.Diagnostic_Response__c == 'Most likely the solution',TRUE,FALSE)}">
                                                                                                                            <apex:outputPanel id="nestResValues" rendered="{!IF(Nsoln.Diagnostic_Response__c != null && Nsoln.Diagnostic_Response__c == 'Most likely the solution',TRUE,FALSE)}">
                                                                                                                                <div class="cmi_well"> 
                                                                                                                                    <span class="cmi_chev_wr_img_disable"></span>
                                                                                                                                    <span><b>{!$Label.CSS_ACCESSIBILITY_CHECKLIST_FOR_WARRANTY_NEEDS}</b><br/>{!$Label.CSS_Be_sure_to_complete_this_checklist_form}.<br/> </span> 
                                                                                                                                    <a class="cmi_accessbilityChecklistColor" onclick="accWinNested('/apex/css_srtAccessChecklist?JobOrderId={!rJobOrd.Id}&solutionId={!Nsoln.Id}&pgName=RepairEds')" href="" target="_blank">{!$Label.CSS_Open_the_Accessiblity_Checklist}</a>
                                                                                                                                    <br/>                                                                                               
                                                                                                                                </div> 
                                                                                                                            </apex:outputPanel>


                                                                                                                            <!-- Story - 65995 DS Read Only - start --> 
                                                                                                                            <apex:outputPanel rendered="{!IF(inddsid = true,true,false) && !IF(isSolnExpired = true,true,false)}" >
                                                                                                                                <span>*{!$Label.CSS_Required}</span>
                                                                                                                                <br/>
                                                                                                                                <span><b>{!$Label.CSS_IS_THIS_THE_RESOLUTION}?</b></span>
                                                                                                                                <apex:inputHidden value="{!NSoln.Repair_Response__c}" id="selectSolDigRespId" />
                                                                                                                                <ul id="rbtnIcons" style="list-style-type: none; margin-left: -45px;margin-bottom: 0;">
                                                                                                                                    <li style="padding-left: 22px;    margin-bottom: 5px;"> 
                                                                                                                                        <input type="radio" data-icon = "1" value="Repair Successful." name="rbtn-icons" onclick="selectedFeedBack(this.value)"/>
                                                                                                                                        <i class="cmi-icon icon-solidCorrect"></i> <b>{!$Label.css_Repair_Successful}.</b></li>

                                                                                                                                    <li style="padding-left: 22px;    margin-bottom: 5px;"> 
                                                                                                                                        <input type="radio" data-icon = "2" value="Repair Successful with additional parts/procedures." name="rbtn-icons" onclick="selectedFeedBack(this.value)"/>
                                                                                                                                        <i class="cmi-icon icon-correctplus"></i> <b>{!$Label.css_Repair_Successful_with_additional_parts_procedures}.</b></li>
                                                                                                                                    <li style="padding-left: 22px;    margin-bottom: 5px;"> 
                                                                                                                                        <input type="radio" data-icon = "3" value="Repair performed but did not resolve the root cause." name="rbtn-icons" onclick="selectedFeedBack(this.value)"/>
                                                                                                                                        <i class="cmi-icon icon-solidWrong"></i> <b>{!$Label.CSS_Repair_performed_but_didnot_resolve_the_root_cause}</b></li>
                                                                                                                                    <li style="padding-left: 22px;"> 
                                                                                                                                        <input type="radio" data-icon = "4" value="Repair not performed." name="rbtn-icons" onclick="selectedFeedBack(this.value)"/>
                                                                                                                                        <i class="cmi-icon icon-solidQtn"></i> <b>{!$Label.CSS_Repair_not_performed}.</b></li>
                                                                                                                                </ul>
                                                                                                                            </apex:outputPanel>  
                                                                                                                            <apex:outputPanel rendered="{!IF(inddsid = true,true,false) && !IF(isSolnExpired = false,true,false)}" >
                                                                                                                                <!--<span>*{!$Label.CSS_Required}</span>
<br/>-->
                                                                                                                                <span><b>{!$Label.CSS_IS_THIS_THE_RESOLUTION}?</b></span>
                                                                                                                                <apex:inputHidden value="{!NSoln.Repair_Response__c}" id="selectSolDigRespIdExp" />
                                                                                                                                <ul id="rbtnIcons" style="list-style-type: none; margin-left: -45px;margin-bottom: 0;">
                                                                                                                                    <li style="padding-left: 22px;    margin-bottom: 5px;"> 
                                                                                                                                        <input type="radio" data-icon = "1" value="Repair Successful." name="rbtn-icons" onclick="selectedFeedBack(this.value)" disabled="true"/>
                                                                                                                                        <i class="cmi-icon icon-solidCorrect"></i> <b>{!$Label.css_Repair_Successful}.</b></li>

                                                                                                                                    <li style="padding-left: 22px;    margin-bottom: 5px;"> 
                                                                                                                                        <input type="radio" data-icon = "2" value="Repair Successful with additional parts/procedures." name="rbtn-icons" onclick="selectedFeedBack(this.value)" disabled="true"/>
                                                                                                                                        <i class="cmi-icon icon-correctplus"></i> <b>{!$Label.css_Repair_Successful_with_additional_parts_procedures}.</b></li>
                                                                                                                                    <li style="padding-left: 22px;    margin-bottom: 5px;"> 
                                                                                                                                        <input type="radio" data-icon = "3" value="Repair performed but did not resolve the root cause." name="rbtn-icons" onclick="selectedFeedBack(this.value)" disabled="true"/>
                                                                                                                                        <i class="cmi-icon icon-solidWrong"></i> <b>{!$Label.CSS_Repair_performed_but_didnot_resolve_the_root_cause}</b></li>
                                                                                                                                    <li style="padding-left: 22px;"> 
                                                                                                                                        <input type="radio" data-icon = "4" value="Repair not performed." name="rbtn-icons" onclick="selectedFeedBack(this.value)" disabled="true"/>
                                                                                                                                        <i class="cmi-icon icon-solidQtn"></i> <b>{!$Label.CSS_Repair_not_performed}.</b></li>
                                                                                                                                </ul>
                                                                                                                            </apex:outputPanel>  

                                                                                                                            <apex:actionRegion >     

                                                                                                                                <apex:outputPanel id="outerpartspanelview">
                                                                                                                                    <apex:outputPanel id="opParts" rendered="{!IF((selSolution != ''  && selSolution=='Repair Successful.') || (selSolution != ''  && selSolution=='Repair Successful with additional parts/procedures.')|| (selSolution != ''  && selSolution=='Repair performed but did not resolve the root cause.') ,true,false)}">
                                                                                                                                        <!-- <apex:outputPanel rendered="{!listsrtCompWrapper.size>0}"> -->
                                                                                                                                        <div>

                                                                                                                                            <apex:outputPanel id="parentGSQPartId" rendered="true">
                                                                                                                                                <c:CSS_GSQParts jobId="{!workjob.Id}" solId="{!JobsolutionId}"/>
                                                                                                                                            </apex:outputPanel>

                                                                                                                                        </div>
                                                                                                                                        <br/><br/>
                                                                                                                                        <apex:outputPanel rendered="{!listsrtCompWrapper.size>0}">
                                                                                                                                            <div>
                                                                                                                                                <fieldset style ="border:2px solid #d3d3d3;">     

                                                                                                                                                    <!--  <apex:actionFunction name="childCheckBoxRender" action="{!childCheckBoxLogic}" rerender="outerpartspanelview">
<apex:param name="parentId" value="parentId" assignTo="{!parentId}"/>
</apex:actionFunction>-->
                                                                                                                                                    <span><b>{!$Label.CSS_Parts_Name_Identified_By_Technician}</b></span>
                                                                                                                                                    <apex:Repeat value="{!listsrtCompWrapper}" var="c">
                                                                                                                                   <div style="border:1px solid #ddd;height:30px;">
                                                                                                                                       <!--  <apex:outputPanel rendered="{!IF(!c.compParentCheckbox == false,true,false)}">
<input type="checkbox" name="parentCheckbox" id="{!c.CompIds}" onclick="parentCheckBoxLogic('{!c.CompIds}','{!c.childIds}');" value="{!c.compParentCheckbox}"  style="display:block;position:absolute;margin:8px;" checked="true"/>
</apex:outputPanel> -->

                                                                                                                                       <!--<apex:outputPanel rendered="{!IF(!c.compParentCheckbox == true,true,false)}">-->
                                                                                                                                       <div id="{!c.CompIds}">
                                                                                                                                           <apex:inputCheckbox onclick="parentCheckBoxLogic('{!c.CompIds}','{!c.childIds}');" value="{!c.compParentCheckbox}"  style="display:block;position:absolute;margin:8px;"/>
                                                                                                                                       </div>
                                                                                                                                       <!-- </apex:outputPanel>-->
                                                                                                                                       <p style="margin:3px 80px 10px;"><apex:outputText value="{!c.compName}"/></p>
                                                                                                                                   </div>

                                                                                                                                   <table class="col-sm-offset-1 mytable table table-bordered table-striped repairParts" style="width:91.7%;border-top:0px;margin-bottom:0px">
                                                                                                                                       <thead>

                                                                                                                                           <tr>
                                                                                                                                               <th style="text-align:center;width:1%;height:0px;">Select</th>
                                                                                                                                               <th style="text-align:center;height:0px;">Part Name</th>
                                                                                                                                               <th style="text-align:center;width:1%;height:0px;">Quantity</th>
                                                                                                                                               <th style="text-align:center;width:2%;height:0px;">{!$Label.CSS_Replacement_Repair_Reason}</th>
                                                                                                                                           </tr>
                                                                                                                                       </thead>
                                                                                                                                       <tbody>
                                                                                                                                           <apex:outputtext rendered="{!c.partWrapper = null}">
                                                                                                                                               <tr><td colspan="4"><b>{!$Label.CSS_No_Parts_Returned_from_GSQ}</b></td></tr>

                                                                                                                                           </apex:outputtext>
                                                                                                                                           <apex:Repeat value="{!c.partWrapper}" var="partscomp" >
                                                                                                                                               <tr>
                                                                                                                                                   <td style="text-align:center;">
                                                                                                                                                   <div id="{!partscomp.partIds}"><!-- added disabled="{!IF(c.compParentCheckbox == false && isClaimEnabledDealer == true, true, false)}" below as part of the story GSSC-453-->
                                                                                                                                                <apex:inputCheckbox disabled="{!IF(c.compParentCheckbox == false && isClaimEnabledDealer == true, true, false)}" onclick="childCheckBoxLogic('{!partscomp.compParentId}','{!c.childIds}','{!partscomp.partIds}')" value="{!partscomp.partChildCheckbox}"/>
                                                                                                                                                </div>
                                                                                                                                                   </td>

                                                                                                                                                   <td>

                                                                                                                                                <apex:outputtext value="{!partscomp.partName}"/>
                                                                                                                                                   </td>
                                                                                                                                                   <td style="text-align:center;">  
                                                                                                                                               <apex:inputtext value="{!partscomp.qty}" onkeypress="return qtyPress(event)" maxlength="4" style="width:70px;"/></td>

                                                                                                                                                   <td style="text-align:center;">
                                                                                                                                                <apex:selectList value="{!partscomp.replacementReason}" size="1" >
                                                                                                                                                    <apex:selectOptions value="{!replacementReasonOptions}"/>
                                                                                                                                                </apex:selectList>
                                                                                                                                                   </td>
                                                                                                                                               </tr>
                                                                                                                                           </apex:Repeat>

                                                                                                                                       </tbody>
                                                                                                                                   </table>
                                                                                                                                                    </apex:Repeat>

                                                                                                                                                </fieldset>
                                                                                                                                            </div>
                                                                                                                                        </apex:outputPanel>
                                                                                                                                    </apex:outputPanel>
                                                                                                                                </apex:outputPanel>

                                                                                                                            </apex:actionRegion>  
                                                                                                                            <!-- UI Table for story 98060 End --> 


                                                                                                                            <br/>
                                                                                                                            <apex:outputPanel rendered="{!IF(isSolnExpired==false, true, false)}" >
                                                                                                                                <br/>    <!-- reRender="SolDetId"-->
                                                                                                                                <!--   <a>{!$Label.CSS_View_Verification_History}</a> <br/><br/>-->
                                                                                                                                <span><a href="#" data-toggle="modal" data-target="#myModal">{!$Label.CSS_View_Verification_History}</a></span> <br/><br/>
                                                                                                                            </apex:outputPanel>
                                                                                                                            <apex:outputPanel id="respFailed90">
                                                                                                                                <apex:outputLabel rendered="{!nestFailDiagResp}">
                                                                                                                                    <div style="color:red">*{!$Label.CSS_Please_add_comments_to_complete}.</div>
                                                                                                                                </apex:outputLabel> 
                                                                                                                            </apex:outputPanel>

                                                                                                                            <!--     <apex:inputTextarea id="finding0" value="{!selectedSol.Repair_Notes__c}" style="min-height:200px" rows="1" cols="20" onkeyup="textCounter(this,'counter_desc1',4000);"/> <br/><br/> -->
                                                                                                                            <!-- <apex:inputTextArea styleClass="gsym_Textarea" onkeyup="textCounter(this,'counter',4000);" id="finding0" value="{!selectedSol.Repair_Notes__c}"/><br/><br/> -->
                                                                                                                            <!-- Story - 65995 DS Read Only - start --> 
                                                                                                                            <apex:outputPanel rendered="{!IF(inddsid = true,true,false) && !IF(isSolnExpired = true,true,false)}" >
                                                                                                                                <b>{!$Label.CSS_Your_Notes}</b> <br/> <br/>
                                                                                                                                <apex:inputTextarea styleClass="gsym_Textarea" onkeyup="textCounter(this,'counter',4000);"  value="{!NSoln.Repair_Notes__c}" /><br/><br/> 

                                                                                                                                <div class="col-md-12 ">


                                                                                                                                    {!$Label.css_Remaining_Characters}  <input disabled="true" value="{!remCharcounter}" id="counter" style="border:none; background: none;" /> <br/>
                                                                                                                                    <!--   Remaining characters:<span id="count"></span>  -->

                                                                                                                                    <br/></div>
                                                                                                                            </apex:outputPanel>
                                                                                                                            <apex:outputPanel rendered="{!IF(inddsid = true,true,false) && !IF(isSolnExpired = false,true,false)}" >
                                                                                                                                <b>{!$Label.CSS_Your_Notes}</b> <br/> <br/>
                                                                                                                                <apex:inputTextarea styleClass="gsym_Textarea" onkeyup="textCounter(this,'counter',4000);"  value="{!NSoln.Repair_Notes__c}" disabled="true"/><br/><br/> 

                                                                                                                                <div class="col-md-12 ">


                                                                                                                                    {!$Label.css_Remaining_Characters}  <input disabled="true"  value ="4000"   id="counter" style="border:none; background: none;" /> <br/>
                                                                                                                                    <!--   Remaining characters:<span id="count"></span>  -->

                                                                                                                                    <br/></div>
                                                                                                                            </apex:outputPanel>
                                                                                                                            <br/>

                                                                                                                            <apex:outputPanel rendered="{!IF(isSolnExpired==false, true, false)}" >
                                                                                                                                <a href="#" data-toggle="modal" data-target="#reportProblem">{!$Label.CSS_Report_a_Problem_with_this_Solution}</a>
                                                                                                                                <a data-target="#showRPpopup" data-toggle="modal" ><span class="cmi_intake_help" /></a> <br/>    
                                                                                                                                <div class="clearfix" id="MessageId"></div><br/>
                                                                                                                                <!--Rajesh  93023 -->
                                                                                                                                <apex:outputPanel id="reportMesId" >
                                                                                                                                    <apex:outputPanel rendered="{!reportMessage}">
                                                                                                                                        <div style="border:1px solid #2c2c2c;padding:10px;background-color:#ccffdd;" >
                                                                                                                                            <span class="cmi_success-icon"> &nbsp;  &nbsp;  &nbsp;  &nbsp;</span>
                                                                                                                                            <h5 style="display:inline;">
                                                                                                                                                <apex:outputLabel value="{!successMessage}"/>
                                                                                                                                            </h5>
                                                                                                                                        </div><br/> </apex:outputPanel>

                                                                                                                                </apex:outputPanel>

                                                                                                                                <br/>
                                                                                                                            </apex:outputPanel>
                                                                                                                            <br/>
                                                                                                                        </apex:outputPanel>
                                                                                                                        <div class="col-sm-offset-5 col-sm-4 col-xs-12">
                                                                                                                            <apex:commandlink value="{!$Label.css_save_btn}" action="{!UpdateSolNotes}"  reRender="respFailed90" styleclass="btn-intake saveButton btn-intake-footer m-btn-width"/>

                                                                                                                            <apex:actionFunction action="{!updateFeedBackForSol}" name="submitFeedBack" reRender=""><!--onComplete="selectedFeedBack()-->
                                                                                                                                <apex:param name="firstParam" assignTo="{!FeedBackVal}" value=""/>
                                                                                                                                <apex:param name="secondParam" assignTo="{!selSolution}" value=""/>
                                                                                                                            </apex:actionFunction>
                                                                                                                        </div>
                                                                                                                        <div class="col-md-3 col-xs-12">
                                                                                                                            <apex:commandButton value="{!$Label.CG_Return_to_Parent_Solution}" action="{!returnToParentSolution}" reRender="respFailed90" styleclass="btn-intake saveButton btn-intake-footer m-btn-width"/>
                                                                                                                            <span class="mob-only"> &nbsp; </span>
                                                                                                                        </div>  
                                                                                                                    </apex:actionRegion>
                                                                                                                </apex:outputPanel>        

                                                                                                            </div>                                                            
                                                                                                        </div>
                                                                                                    </div>  
                                                                                                    <!-----------------------------------------------End of EDS & QSOL--------------------------------------------------------------------->

                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </apex:outputPanel>  </div>


                                                                            </div>   

                                                                        </apex:outputpanel>
                                                                        <!--   </apex:form>  -->
                                                                    </div>
                                                                </div>
                                                                <hr/>

                                                                <div class="panel-body ">
                                                                    <div class="row pull-right desk-ulist">
                                                                        <div class="col-md-2 col-sm-2 col-xs-12" >
                                                                            <apex:commandLink action="{!returnToRepairView}" styleclass="btn-intake saveButton m-btn-width" id="tssavebottom9" >                                                                    
                                                                                <span> {!$Label.CSS_Return_to_Repair_Overview}</span>                                                                    
                                                                            </apex:commandLink>                                                                
                                                                        </div> 
                                                                    </div>                                                        
                                                                </div>
                                                                <!-- <apex:form >  -->
                                                                <div class="pull-left btncrumbslft">
                                                                    <ul class="desk-ulist">
                                                                        <li>
                                                                            &nbsp;
                                                                        </li>
                                                                        <li>
                                                                            <apex:commandLink action="{!repair_vh}" styleclass="{!vh_chv_sts}" id="vhsavebottom2">
                                                                                <span class="{!vh_btn_cls}"/>
                                                                                <span class="{!vh_txt_sts}"> {!$Label.css_view} <br/> {!$Label.css_History} </span>
                                                                            </apex:commandLink>
                                                                        </li>
                                                                        <li>
                                                                            &nbsp;
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                                <div class="pull-right btncrumbs">
                                                                    <ul class="desk-ulist">
                                                                        <li>
                                                                            &nbsp;
                                                                        </li>
                                                                        <li>
                                                                            <apex:commandLink action="{!repair_rj}" styleclass="sopen" id="rjsavebottom1">
                                                                                <span class="chev_rj_img_open"/>
                                                                                <span class="chev_text_open"> {!$Label.css_Review}  <br/>  {!$Label.css_job1} </span>
                                                                            </apex:commandLink>
                                                                        </li>
                                                                        <li>
                                                                            &nbsp;
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                                <div class="col-xs-12 mob-ulist">
                                                                    <apex:commandLink action="{!repair_rj}" styleclass="btn-intake m-btn-footer-r m-btn-width" value="{!$Label.css_Continue_to_Review_Job}" />
                                                                    <span class="mob-only"> &nbsp; </span>
                                                                </div>
                                                                <div class="col-md-2 col-xs-12 mob-ulist">
                                                                    <apex:commandLink action="{!repair_vh}" value="{!$Label.css_Back_to_View_History}" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                                    <span class="mob-only"> &nbsp; </span>
                                                                </div>
                                                                <div class="col-md-2 col-xs-12 mob-ulist">
                                                                    <apex:commandLink action="{!showPopup}" rerender="popup" value="{!$Label.css_exit_btn}" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                                    <span class="mob-only"> &nbsp; </span>
                                                                </div>
                                                                <div class="col-md-4 col-xs-12 mob-ulist">
                                                                    <!----- 49624 defect fix ---------> 
                                                                    <apex:CommandButton action="{!closeSession}"  value="{!$Label.css_save_close_btn}"  styleclass="btn-intake btn-intake-footer m-btn-width"  rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
                                                                    <!----- 49624 defect fix ---------> 
                                                                    <span class="mob-only"> &nbsp; </span>
                                                                </div>
                                                                <!--  </apex:form> -->

                                                            </div>
                                                        </apex:actionRegion>
                                                    </div></apex:outputPanel> 

                                                <!-- ******* END - TROUBLESHOOTING **** -->

                                                <!--         <apex:form >   -->
                                                <div class="panel-body">
                                                    <div class="row pull-right desk-ulist">

                                                        <div class="col-md-2 col-xs-12">
                                                            <apex:commandLink action="{!pgSave}" value="{!$Label.css_save_btn}" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                            <span class="mob-only"> &nbsp; </span>
                                                        </div> <div class="col-md-1 col-xs-12"></div>
                                                        <div class="col-md-2 col-xs-12">
                                                            <apex:commandLink action="{!showPopup}" rerender="popup" value="{!$Label.css_exit_btn} " styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                            <span class="mob-only"> &nbsp; </span>
                                                        </div> <div class="col-md-1 col-xs-12"></div>
                                                        <div class="col-md-4 col-xs-12">
                                                            <!----- 49624 defect fix ---------> 
                                                            <!--   <c:CSS_JobCloseComponent sJobId="{!workjob.Id}"/> -->
                                                            <apex:CommandButton action="{!closeSession}"  value="{!$Label.css_save_close_btn}"  styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
                                                            <!----- 49624 defect fix ---------> 
                                                            <span class="mob-only"> &nbsp; </span>
                                                        </div>

                                                        <!----Cancel Button Popup 86713 code start------->
                                                        <div class="col-md-1 col-xs-12">
                                                            <apex:outputPanel rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}">
                                                                <a data-target="#cancelModelPopup" data-toggle="modal" class="btn-intake btn-intake-footer m-btn-width">{!$Label.css_cancel_btn}</a>
                                                                <span class="mob-only"> &nbsp; </span>
                                                            </apex:outputPanel>

                                                        </div> 
                                                        <!----Cancel Button Popup 86713 code end------->
                                                    </div>
                                                </div>

                                            </div></div></div>
                                </div></div>
                        </apex:outputpanel>
                        <!----Cancel Button Popup 86713 code start------->
                        <apex:outputPanel id="cancelModelPopup">
                            <div class="modal fade" id="cancelModelPopup"  role="dialog">
                                <apex:outputPanel id="cancelModeShow" styleClass="popupAttachBg" layout="block">                  
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">  
                                                <apex:commandButton title="Close the popup" html-data-dismiss="modal" styleClass="cross_butten"/>
                                                <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.css_cummins_service_system} </h4>
                                            </div>
                                            <div class="modal-body">
                                                <b>{!$Label.CSS_Cancel_Popup_Message}</b>
                                            </div>
                                            <div class="modal-footer">
                                                <div class="col-sm-8 col-xs-4 cmi-tar"> 
                                                    <apex:commandButton value="{!$Label.CSS_FAQs_Working_A7}" action="{!cancel}" styleClass="saveButton"/>
                                                    &nbsp; &nbsp;
                                                    <apex:commandButton value="{!$Label.CSS_No}" html-data-dismiss="modal" styleClass="cancelButton"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                            </div>
                        </apex:outputPanel>
                        <!----Cancel Button Popup 86713 end------->
                        <apex:outputpanel id="DisplayChevs2" rendered="{!IF(workjob.id ==null , true , false)}">
                            <div class="panel panel-default">
                                <div class="panel-heading"> Service Job Not Found </div>
                                <div class="panel-body">
                                    You may have selected this page without any reference to Service Job. Please select a Service Job from Home Page. 
                                </div>
                            </div>
                        </apex:outputpanel>



                        <!--  <apex:form >   -->
                        <apex:outputPanel id="popup">
                            <apex:outputPanel id="popInnerOutputPnl" styleClass="customPopup" layout="block" rendered="{!displayPopUp}">                  
                                <table style="width:100%" align="centre" background-color="">
                                    <tr>
                                        <td><font face="Helvetica neue" size="5px">Cummins Service System</font>
                                            <apex:commandButton image="{!URLFOR($Resource.CSS_Cross_Button)}" title="Close the popup" action="{!closePopup}" styleClass="closeButton" rerender="popup"></apex:commandButton>
                                        </td>
                                    </tr>
                                    <tr><td>  <br/>{!$Label.css_Do_you_want_to_Exit}</td> </tr><br/>
                                    <tr><td> <br/>
                                        <div class="col-md-12" align="center" draggable="false" >

                                            <apex:commandButton value="{!$Label.CSS_FAQs_Working_A7}" action="{!redirectPopup}" styleClass="saveButton" rerender="popup" />
                                            <button type="button" class="cancelButton" data-dismiss="modal">{!$Label.css_Cancel}</button>
                                        </div> 
                                        </td></tr>
                                </table>
                            </apex:outputPanel> 
                        </apex:outputPanel>
                        <!-- Report Problem -->
                        <apex:outputPanel > 
                            <apex:actionRegion >  
                                <div class="container">  
                                    <div class="modal fade" id="reportProblem" role="dialog">
                                        <div class="modal-dialog">
                                            <div class="modal-content"> 
                                                <div class="modal-header">  
                                                    <Button title="Close the popup" class="cross_butten" data-dismiss="modal" />
                                                    <h4 class="modal-title" style="color: #FFFFFF;"> {!$Label.CSS_Fault_Code_Solution} -  {!$Label.css_Cummins_Service_System} </h4>
                                                </div>
                                                <div class="modal-body">

                                                    <div class="form-horizontal" role="form">

                                                        <div class="col-sm-11 col-xs-12" >

                                                            <h4>{!$Label.CSS_Report_a_Problem_with_this_Solution} </h4> 

                                                            {!$Label.CSS_Report_Problem_Content} <hr />

                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="col-sm-11 col-xs-12" >

                                                            <apex:inputTextarea id="repProb" style="min-height:150px; overflow-x:hidden; overflow-y:scroll; resize: none; border-style: groove;" value="{!Nsoln.Report_Comments__c}" onkeyup="textCounter(this,'repcounter',4000);" rows="1" cols="20" />

                                                        </div>
                                                    </div>
                                                    <apex:outputPanel id="nestRemChar">
                                                        <div align="center">
                                                            {!$Label.css_Remaining_Characters}
                                                            <!--<input type="text" value="4000" readonly="readonly" maxlength="3" size="3"  id="repcounter" style="border:none;" />    -->
                                                            <input disabled="true"  value="{!remCharcounter}"  id="repcounter" style="border:none; background: none;" />
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="clearfix"></div>
                                                    <hr/>

                                                    <div align="center" draggable="false" >
                                                        <div class="col-sm-5 col-xs-4 cmi-tar">

                                                            <!--<apex:commandButton value="Submit" action="{!reportProblemComments}" styleClass="saveButton" reRender="" html-data-dismiss="modal"></apex:commandButton> -->
                                                            <input type="button" value="{!$Label.CSS_Submit}" onclick="doReport();" Class="saveButton" data-dismiss="modal"/> 
                                                            <apex:actionFunction name="doReport" action="{!reportProblemComments}" rerender="PanelId,reportMesId"/>  

                                                        </div>


                                                        <div class="col-sm-5 col-xs-4 cmi-tar">
                                                            <button type="button" class="cancelButton" data-dismiss="modal">{!$Label.css_Cancel}</button>
                                                        </div> 
                                                    </div> <br/>
                                                    <div class="clearfix"></div>
                                                    <div class="clearfix"></div>
                                                </div></div></div></div></div>
                            </apex:actionRegion>
                        </apex:outputPanel> 


                        <!-- Report Problem -->

                        <apex:outputPanel id="uPopupp">
                            <div class="container">
                                <div class="modal fade" id="uPopup" role="dialog">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <!-- <apex:outputPanel id="popInnerOutputPnl1" styleClass="uploadAttachmentPopupStyle" layout="block" rendered="{!displayPopup1}">--> 

                                            <div class="modal-header">
                                                <form class="form-horizontal" role="form">
                                                    <div class="form-group">
                                                        <!--<apex:commandButton title="Close the popup" action="{!closePopup1}" styleClass="cross_butten"  />-->
                                                        <Button title="Close the popup" class="cross_butten"
                                                                data-dismiss="modal" />
                                                        <h4 class="modal-title" style="color: #FFFFFF;">Triage &amp; Diagnosis - Cummins Service System </h4>
                                                    </div>
                                                </form>
                                            </div>

                                            <div class="clearfix"></div>

                                            <div class="col-md-12 col-xs-12 modal-title"> 
                                                <apex:outputLabel value="File : Select the file you would like to upload" for="file_File"/>
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputFile id="file_File_1" value="{!fileBody}" filename="{!fileName}" />
                                            </div>


                                            <div class="col-md-12 col-xs-12 modal-title" >    
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/> 
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputTextarea id="description_upl1" value="{!description}" rows="2" cols="20" onkeyup="textCounter(this,'counter_desc1',100);"/>
                                            </div> 
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12"> 
                                                {!$Label.css_Remaining_Characters} <input type="disabled" value ="100" maxlength="3" size="3"  id="counter_desc1" style="border:none;" />
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">
                                                <apex:outputLabel value="File : Select the file you would like to upload" for="file_File"/>
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputFile id="file_File_2" value="{!fileBody2}" filename="{!fileName2}" style="height:30px;"/>
                                            </div>

                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">  
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/> 
                                            </div>
                                            <div class="col-md-12 col-xs-12">  
                                                <apex:inputTextarea id="description_upl2" value="{!description2}" rows="2" cols="20" onkeyup="textCounter(this,'counter_desc2',100);"/>
                                            </div>



                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">  
                                                Remaining Characters: <input type="disabled" value ="100" maxlength="3" size="3"  id="counter_desc2" style="border:none;" />
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">
                                                <apex:outputLabel value="File : Select the file you would like to upload" for="file_File"/>
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputFile id="file_File_3" value="{!fileBody3}" filename="{!fileName3}" style="height:30px;"/>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">    
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/> 
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputTextarea id="description_upl3" value="{!description3}" rows="2" cols="20" onkeyup="textCounter(this,'counter_desc3',100);"/>
                                            </div>


                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12"> 
                                                {!$Label.css_Remaining_Characters}  <input type="disabled" value ="100" maxlength="3" size="3"  id="counter_desc3" style="border:none;" />
                                            </div>
                                            <div class="clearfix"></div>
                                            <hr/> 
                                            <div style="margin-bottom:15px;">
                                                <div class="col-sm-5 col-xs-4 cmi-tar">    
                                                    <!---   <apex:commandButton value="{!$Label.css_save_btn}" action="{!processUpload}" styleClass="saveButton" ></apex:commandButton>

--->  
                                                    <apex:actionRegion >
                                                        <apex:commandButton value="{!$Label.css_save_btn}" styleClass="saveButton" onclick="return DisableButton1();"  id="attachRj" /> <!--Defect fix 61124 ---> 
                                                    </apex:actionRegion>
                                                </div>
                                                <div class="col-sm-5 col-xs-4 cmi-tar">
                                                    <!--<apex:commandButton value="{!$Label.css_Cancel}" action="{!closePopup1}" styleClass="cancelButton" ></apex:commandButton>-->
                                                    <button type="button" class="cancelButton" data-dismiss="modal">Cancel</button>

                                                </div>
                                                <br/>
                                            </div>



                                            <!-- <c:css_multi_attach objId="{!$CurrentPage.Parameters.id}"/> -->
                                            <!-- </apex:outputPanel> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>




                        <apex:outputPanel id="EditPopupNew1">
                            <div class="container">  
                                <div class="modal fade" id="EditPopupNew"  role="dialog">
                                    <div class="modal-dialog">
                                        <div class="modal-content"> 
                                            <div class="modal-header">  
                                                <Button title="Close the popup" class="cross_butten" data-dismiss="modal" />
                                                <h4 class="modal-title" style="color: #FFFFFF;">Intake View History - Cummins Service System</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form class="form-horizontal" role="form">   
                                                    <div class="form-group">
                                                        <div class="col-sm-12 col-xs-12">


                                                            <div>  Modify attachment for -  </div>
                                                            <!--   <apex:outputLabel value="JOB NOTES " /> -->

                                                        </div>
                                                    </div>
                                                </form>
                                                <div class="clearfix"></div>
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/>
                                                <div class="clearfix"></div>
                                                <apex:inputTextarea id="edit_desc1_textarea" value="{!description}" rows="2" cols="20" onkeyup="textCounter(this,'edit_desc1',100);"/>
                                                <div class="clearfix"></div>
                                                <hr/>
                                                <div>{!$Label.css_Remaining_Characters}  <input type="disabled" maxlength="3" size="3" id="edit_desc1"  /> </div>      


                                                <hr/>
                                                <div class="col-sm-5 col-xs-4 cmi-tar">  
                                                    <apex:actionRegion >                                            
                                                        <apex:commandButton value="Save" action="{!editAttachment}" styleClass="saveButton"  /> 
                                                    </apex:actionRegion>
                                                </div>
                                                <div class="col-sm-5 col-xs-4 cmi-tar">
                                                    <button type="button" class="cancelButton" data-dismiss="modal">Cancel</button>
                                                </div> 
                                                <br/></div></div></div></div></div>
                        </apex:outputPanel>

                        <apex:outputPanel id="DeletePopupNew1">    
                            <div class="container">
                                <div class="modal fade" id="DeletePopupNew" role="dialog">
                                    <div class="modal-dialog">
                                        <div class="modal-content">                 
                                            <!--<apex:outputPanel id="popInnerOutputPn6" styleClass="DeletepopupStyle" layout="block" rendered="{!displayPopup6}"> -->                    

                                            <div class="modal-header">

                                                <!-- <apex:commandButton title="Close the popup" action="{!closePopup6}" styleClass="cross_butten" ></apex:commandButton> -->
                                                <Button title="Close the popup" class="cross_butten"
                                                        data-dismiss="modal" />                            

                                                <h4 class="modal-title" style="color: #FFFFFF;">Triage &amp; Diagnosis - Cummins Service System </h4>
                                            </div>

                                            <div class="clearfix"></div>

                                            <form class="form-horizontal" role="form">
                                                <div class="form-group">
                                                    <div class="col-sm-12 col-xs-12">

                                                        <font size="4px" weight="bold">Please confirm delete.</font>  

                                                        <!--   <apex:outputLabel value="JOB NOTES " /> -->

                                                    </div>
                                                </div>
                                            </form>

                                            <div class="clearfix"></div>
                                            <hr/>
                                            <div class="col-sm-5 col-xs-4 cmi-tar">    
                                                <!-- Modified as ROD:86567 -->
                                                <apex:actionRegion >
                                                    <apex:commandButton value="{!$Label.CSS_Delete}" action="{!delAttachment}" styleClass="saveButton"   />
                                                </apex:actionRegion>
                                            </div>
                                            <div class="col-sm-5 col-xs-4 cmi-tar">
                                                <button type="button" class="cancelButton" data-dismiss="modal">Cancel</button>
                                            </div> 
                                            <br/>


                                            <!-- </apex:outputPanel>-->
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </apex:outputPanel>

                        <!-- 56604  Start Code for Job Closure panel content --->
                        <apex:actionRegion >
                            <apex:outputPanel id="jobClosePanel">
                                <apex:outputPanel id="JobCloseInnerPanel" rendered="{!displayClosePopup}" styleclass="popupAttachBg" layout="block" >
                                    <apex:outputPanel styleClass="custPopupAttach" layout="block">
                                        <div role="dialog">
                                            <div class="modal-header">  
                                                <apex:commandButton title="Close the popup" action="{!closeSession_close}" styleClass="cross_butten" rerender="jobClosePanel" ></apex:commandButton>  
                                                <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.CSS_Job3}- {!workjob.Customer_Name__c}</h4>
                                            </div>
                                            <div class="modal-body" style="max-height:500px;overflow:auto;">
                                                <!-- Begin Code for Warning Message with CAMPAIGNS, TSB's TRP's incomplete  as-->
                                                <apex:outputPanel id="NoCampTSBsTRPs" rendered="{!nocamptsbtrps}">
                                                    <div>
                                                        Please check off required Campaigns/TRPs/TSBs/ or provide comments
                                                    </div>
                                                </apex:outputPanel>
                                                <!-- End Code for Warning Message with CAMPAIGNS, TSB's TRP's incomplete -->

                                                <!-- Begin Code for  Job Close with Resolution and Feed Back Fields -->
                                                <apex:outputPanel rendered="{!showResolution}">
                                                    <apex:pageMessages />
                                                    <div>
                                                        You are about to close the Job.
                                                    </div><br/>
                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <b><apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Resolution__c.Label}"/></b>
                                                            <apex:selectRadio value="{!workJob.CSS_Resolution__c}" layout="pageDirection">
                                                                <apex:selectOptions value="{!resolutionOptions}" />
                                                            </apex:selectRadio>

                                                            <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Feedback_Comments__c.Label}"/>
                                                            <div style="padding-left:15px;border-bottom:1px solid #000000">       
                                                                <apex:inputTextarea value="{!workjob.CSS_Feedback_Comments__c}" style="min-height:100px; overflow-x:hidden; overflow-y:scroll; resize: none; border-style: groove;" onkeyup="textCounter(this,'counter',2000);" rows="1" cols="20" />
                                                                {!$Label.css_Remaining_Characters} <input type="text" value="2000" readonly="readonly" maxlength="3" size="3"  id="counter" style="border:none;" />    
                                                            </div><br/>
                                                            <div class="row" style="padding-left:15px">
                                                                <div class="col-sm-offset-2 col-sm-4 col-xs-12">    
                                                                    <apex:commandButton value="Close Job" action="{!saveAndCloseJob}" styleClass="saveButton" ></apex:commandButton>
                                                                </div>
                                                                <div class="col-sm-6 col-xs-12">
                                                                    <!--   <button type="button" class="cancelButton" data-dismiss="modal">Cancel</button> -->
                                                                    <apex:commandButton value="Cancel" action="{!closeSession_close}" styleClass="cancelButton" rerender="jobClosePanel"/>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <!-- End Code for Job Close with Resolution and Feed Back Fields -->

                                                <!-- Begin Code for Job Close with Verified Solutions with out Repairs -->
                                                <apex:outputPanel id="repairsPan" rendered="{!showRepairs}">
                                                    <apex:outputText rendered="{!showRepairErrorMessage}" value="Please select repair response for the below solutions" style="color:red; font-weight:bold"/>
                                                    <div>
                                                        You are about to close the Job.
                                                    </div><br/>
                                                    <div><b>Please provide the repair information for the cases.</b><br/>
                                                        <div><br/>
                                                            <apex:selectOptions value="{!responseOptions}"/>
                                                            <apex:repeat var="qa" value="{!responseValues}">
                                                                {!qa.Case_Name__c} - {!qa.Solution_Title__c}
                                                                <apex:selectRadio value="{!qa.Repair_Response__c}" layout="pageDirection">
                                                                    <apex:selectOptions value="{!responseOptions}"/>
                                                                </apex:selectRadio> 
                                                            </apex:repeat>
                                                            <apex:selectRadio value="{!workJob.CSS_Resolution__c}" layout="pageDirection" rendered="{!showResolutionWithRepair}">
                                                                <apex:selectOptions value="{!resolutionOptions}" />
                                                            </apex:selectRadio>
                                                            <apex:outputpanel rendered="{!showResolutionWithRepair}">
                                                                <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Feedback_Comments__c.Label}"/>
                                                                <apex:inputTextarea value="{!workjob.CSS_Feedback_Comments__c}" style="min-height:100px; overflow-x:hidden; overflow-y:scroll; resize: none; border-style: groove;" onkeyup="textCounter(this,'counter',2000);" rows="1" cols="20" />
                                                                {!$Label.css_Remaining_Characters} <input type="text" value="2000" readonly="readonly" maxlength="3" size="3"  id="counter" style="border:none;" />    
                                                            </apex:outputpanel> <br/>
                                                            <div class="row" style="padding-left:15px">
                                                                <div class="col-sm-offset-2 col-sm-4 col-xs-12">    
                                                                    <apex:commandButton value="Close Job" action="{!saveAndCloseJob}" styleClass="saveButton" ></apex:commandButton>
                                                                </div>
                                                                <div class="col-sm-6 col-xs-12">
                                                                    <apex:commandButton value="Cancel" action="{!closeSession_close}" styleClass="cancelButton" rerender="jobClosePanel"/><br/>
                                                                </div><br/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <!-- End Code for Resoluiton inclduing negative repair Reponse -->

                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:actionRegion>
                        <!-- 56604  EndCode for Job Closure panel content --->    
                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" 
                             aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <apex:actionRegion > 
                                            <apex:commandButton title="Close the popup" html-data-dismiss="modal" styleClass="cross_butten"  ></apex:commandButton>
                                        </apex:actionRegion>
                                        <h4 class="modal-title" style="color: #FFFFFF;">Repair - {!$Label.css_Cummins_Service_System} </h4>
                                    </div>

                                    <!-- Modal Body Desktop-->

                                    <div class="modal-body hidden-xs" style="max-height: 400px; overflow-y: scroll;" > 

                                        <div class="row">
                                            <div class="col-md-12">
                                                <span style="font-size:18px"><b>Verification {!$Label.css_History}</b></span><br/>
                                                <span><b>Last Saved</b> {!verificationHistoryDateTime} </span>
                                                <apex:repeat value="{!SolutionHistory}" var="sH" id="sol"  >

                                                    <table class="table cmi_customer-approved-table">
                                                        <tbody style="border-top:2px solid #ddd">
                                                            <tr>
                                                                <th width="25%">&nbsp;</th>
                                                                <th width="25%">&nbsp;</th>
                                                                <th width="25%"><b>Solutions</b></th>
                                                                <th width="25%"><b>Repair Made</b></th> 
                                                            </tr>

                                                            <tr>
                                                                <td><apex:outputText value="{!sH.userName}"/></td>
                                                                <td><apex:outputText value="{!sH.dateChange}"/> </td>
                                                                <!----Defect 62849---->
                                                                <!--  <div class="cmi_correct-icon"></div> -->
                                                                <td align="left" bgcolor="#f2f2f2">                                                                    
                                                                    <apex:outputPanel rendered="{!IF(sH.fieldName == 'Diagnostic_Response__c', true, false)}">
                                                                        <apex:outputpanel > 
                                                                            <span style="margin-bottom:10px;">
                                                                                <i class="{!IF(sH.newValue == 'Most likely the solution', 'cmi-icon icon-correct',
                                                                                          IF(sH.newValue == 'Not the solution', 'cmi-icon icon-wrong','cmi-icon icon-qtn'))}"></i>
                                                                            </span> {!sH.caseName}<br/>
                                                                            <div class="clearfix"></div>
                                                                        </apex:outputpanel>
                                                                        <apex:outputText value="{!sH.solTitle}"/>                                                                        
                                                                    </apex:outputPanel>
                                                                </td>

                                                                <br/>


                                                                <td align="center" bgcolor="#f2f2f2">
                                                                    <apex:outputPanel rendered="{!IF(sH.fieldName == 'Repair_Response__c', true, false)}">

                                                                        <apex:outputText value="{!sH.caseName}"/><br/>
                                                                        <!--     <i class="cmi-icon {!IF(sH.newValue == 'Repair Successful', 'icon-correct',
IF(sH.newValue == 'Repair Successful with additional parts/procedures', 'icon-correctplus',
IF(sH.newValue == 'Repair not performed', 'icon-wrong','icon-qtn')))}"></i> -->
                                                                        <apex:outputText value="{!sH.solTitle}"/><br/>
                                                                        <apex:outputText value="{!sH.newValue}"/>
                                                                        <apex:repeat value="{!sH.csolComp}" var="solCo">
                                                                            <td>
                                                                                <apex:outputText value="{!solCo.Name}"/><br/>                                                                        
                                                                            </td>
                                                                        </apex:repeat>
                                                                    </apex:outputPanel>
                                                                </td>


                                                            </tr>


                                                        </tbody>

                                                    </table></apex:repeat>
                                            </div>
                                        </div>
                                    </div>



                                    <!-- Modal Body mobile -->
                                    <div class="col-xs-12 hidden-sm hidden-md hidden-lg" style="min-height: 200px">


                                        <span style="font-size:18px"><b>Verification {!$Label.css_History}</b></span><br/>
                                        <span><b>Last Saved</b> {!verificationHistoryDateTime} </span><br/><br/>

                                        <span>xx000 (User ID)</span> <br/>
                                        <span><b>00 MAY 2015</b> 00:00PM EST </span>

                                        <table class="cmi_srtaccordian-table-xs">                                           
                                            <tbody>
                                                <tr>
                                                    <td><b>Solutions</b></td>                              
                                                    <td>
                                                        <div>
                                                            <div class="cmi_correct-icon"></div> 
                                                            <span style="font-size: 12px;"><b> 193-fc5049</b></span> <br/>
                                                            <span> Engine crankshaft speed/position sensor damaged</span>

                                                        </div>
                                                    </td>

                                                </tr>

                                                <tr>
                                                    <td><b>Repairs</b></td>                              
                                                    <td>
                                                    </td>
                                                </tr>  

                                            </tbody>
                                        </table>

                                        <span><b>00 MAY 2015</b> 00:00PM EST </span>

                                        <table class="cmi_srtaccordian-table-xs">                                           
                                            <tbody>
                                                <tr>
                                                    <td><b>Solutions</b></td>                              
                                                    <td>
                                                        <div>
                                                            <div class="cmi_correct-icon"></div> 
                                                            <span style="font-size: 12px;"><b> 193-fc5049</b></span> <br/>
                                                            <span> Engine crankshaft speed/position sensor damaged</span>

                                                        </div>
                                                    </td>

                                                </tr>

                                                <tr>
                                                    <td><b>Repairs</b></td>                              
                                                    <td>
                                                    </td>
                                                </tr>  

                                            </tbody>
                                        </table>

                                        <span><b>00 MAY 2015</b> 00:00PM EST </span>

                                        <table class="cmi_srtaccordian-table-xs">                                           
                                            <tbody>
                                                <tr>
                                                    <td><b>Solutions</b></td>                              
                                                    <td>

                                                    </td>

                                                </tr>

                                                <tr>
                                                    <td><b>Repairs</b></td>                              
                                                    <td>
                                                        <div>
                                                            <div class="cmi_wrong-icon"></div> 
                                                            <span style="font-size: 12px;"><b> 193-fc5049</b></span> <br/>
                                                            <span> Engine crankshaft speed/position sensor damaged</span>

                                                        </div>
                                                    </td>
                                                </tr>  

                                            </tbody>
                                        </table>



                                    </div>

                                    <div class="clearfix"></div>

                                    <!-- Modal Footer -->

                                    <div class="modal-footer"  style="margin-top:10px; text-align:center;">               
                                        <input class="CMI-primary-button" style="padding: 0px 30px" type="button" value="close" data-dismiss="modal" />

                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- <c:css_delattach_popup jobID="{!workjob.Id}" /> -->
                        <!--<c:css_tndnotes_popup jobordID="{!workjob.Id}" UProfile="{!$Profile.Name}" VPage="Triage" /> ----->

                    </div></div>
            </apex:form>
        </apex:define>
    </div>

    <!--Story# 87080:Report Problem Popup:Start--->
    <apex:outputPanel id="showRPpopup">
        <div class="container">  
            <div class="modal fade" id="showRPpopup"  role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content"> 
                        <div class="modal-header">  
                            <Button title="Close the popup" class="cross_butten" data-dismiss="modal" />
                            <h4 class="modal-title" style="color: #FFFFFF;"> {!$Label.css_cummins_service_system} </h4>
                        </div>
                        <div class="modal-body">
                            <!--<form class="form-horizontal" role="form">--->
                            <div class="form-group">
                                <div class="col-sm-12 col-xs-12">
                                    <div class="intake_help1 intake_help-popup"></div>
                                    <div class="col-sm-11 col-xs-12" >
                                        <b> {!$Label.CSS_Report_a_Problem_with_this_Solution} </b> <br /> {!$Label.CSS_Report_Problem_Content}
                                    </div>
                                </div>
                            </div>
                            <!--</form>-->
                            <div class="clearfix"></div>
                            <hr/>
                            <div class="col-sm-12" align="center" draggable="false" >
                                <button type="button"  class="cancelButton" data-dismiss="modal">{!$Label.css_Ok}</button>
                            </div> <br/>
                            <div class="clearfix"></div>
                            <div class="clearfix"></div>
                        </div></div></div></div></div>
    </apex:outputPanel>
    <!--Story# 87080:Report Problem Popup:END--->
</apex:page>