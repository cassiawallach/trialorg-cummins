<apex:page id="tndpages" Controller="css_tnd_job" showHeader="false" standardStylesheets="false" action="{!updateNotes}" >
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content=""/>
<meta name="author" content="Cummins Inc."/>
<meta name="copyright" content="(C)2016 Cummins Inc., Box 3005, Columbus, IN 47202-3005 U.S.A."/> 
<title>{!$Label.css_cummins_service_system} | Triage &amp; Diagnosis  </title>
<!--  <c:css_styles /> -->
<c:CSS_Standard_IntakeStyles />
<c:css_ExtraStyles />

<script type="text/javascript">

function showCampaignATCPopup(CampaignPopup,e){
    //alert('Hello');
    //alert(CampaignPopup);            
    if(CampaignPopup == 'true'){
        // alert('Inside IF');
        $('#showCampaignPopuponsave').modal(
            {backdrop: 'static',
             keyboard: false,
             show:true
            });
    }
    else{
        // alert('Inside Else');
    }
}


function DisableSaveButton1(comId){
    comId.disabled=true;
}
function showattacheditPopup(){
          $('#EditPopupNew').modal({backdrop: 'static',keyboard: false,show:true});
        }
</script>

<style>
@media (max-width: 1200px) and (min-width: 700px){    
    .srtPopupAttach {
        width:600px !important;
    }
}
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default{
    background-color:#007c7c;
    color:white
}
/*    .customPopup1 {
background-color: white;
border-style: solid;
border-width: 2px;
left: 37%;
padding: 10px;
position: absolute;
z-index: 9999;
width: 325px;
top: 40%;
}  */
.holder{        
    width:100%;
    display:block;
}

.popup{
    width:800px;
    border-radius: 7px;
    position:absolute;
    left: 50%;
    top: 20%;
    <!--  margin-left: -200px;
    background:#6b6a63;
    margin:30px auto 0;
    padding:6px;
    margin-top: -40px; /* This should be half of the total height of your div */ -->
}

 .showRedBorder{
    border: 2px solid red !important;
}
</style>
<script>
//written by venkat
function stopDoubleClick(){ 
    countDown=waitTime+1;
    if(clickAllowed==true){
        clickAllowed=false;
        runCountDown(); 
        return true;
    }
    else{ return false; } 
}
function runCountDown(){ 
    countDown--;
    if(countDown<=0){ 
        clickAllowed=true; 
    }
    else{
        window.setTimeout(runCountDown,1000);
    } 
}
</script>
<script>

function qtyPressTnDrj(e,compId){
    var technicianTimeVal= document.getElementById(compId.id).value;
    if(((e.which > 47 && e.which <=57) || e.which == 8 || e.which == 46 || e.which == 37 || e.which == 39 || (e.which > 95 && e.which <=105)) || ((e.which == 190 || e.which == 110) && !(technicianTimeVal.includes('.'))))
    {
    } 
    else 
    {
        return false;
    }     
}

function validateActtt(compId){
    var technicianTime= document.getElementById(compId.id).value;
    var techTimelength=document.getElementById(compId.id).value.length;
    var techTimesplit = [];

    if(technicianTime.includes('.')){
        techTimesplit = technicianTime.split(".");
        var declength = techTimesplit[1].length;
        if(declength > 1){                
            var newStr = technicianTime.substring(0, technicianTime.length-1);
            document.getElementById(compId.id).value = newStr;
            return false;    
        }
    }
    else {
        if(techTimelength == 5)
        {
            var newStr1 = technicianTime.substring(0, technicianTime.length-1);
            var newStr2 = newStr1/10;
            document.getElementById(compId.id).value = newStr2;
        }
    }
    if(techTimelength == 4 && !technicianTime.includes('.')){
        var result = Number(document.getElementById(compId.id).value)/10;
        document.getElementById(compId.id).value=result;
    }
}
</script>

<script>

/*function isAlphanumeric(evt) {

evt = (evt) ? evt : window.event;
var charCode = (evt.which) ? evt.which : evt.keyCode;
if (charCode == 45 || (charCode>47 && charCode<58 )|| (charCode >64 && charCode<91) ||(charCode >96 && charCode<123)) {
return true; 
} else {
    return false;
}

    }*/
    

/*function isAlphanumeric(e,compId){
    if(e.which==45 || (e.which>47 && e.which<58) || (e.which>64 && e.which<91) || (e.which>96 && e.which<123))
    {
        
    }
    else
    {                
        return false;
    }
}      Commented as part of GSSC-259*/   

</script>


<script>
function DisableSavenSendAssignButton(){
    document.getElementById("tndpages:TnDRjfrm:SavenAssignButton").disabled=true;
    console.log('Disable assign button'); 
    SaveAssignbtn();
    console.log('Called Action Method Anirudh');
    return false;
}
</script>
<!-- 97304 changes start -->
<!--  97403 changes end --> 
<script>
function phoneNumberFormat(e){
    var phoneNumber = document.getElementById("tndpages:TnDRjfrm:phoneNumber");
    $(phoneNumber).keypress(function(e){
        if (this.value.length === 0 && (e.which == 48 || e.which == 49)){
            return false;
        }

        if( e.which == 48 || e.which == 49 || e.which == 50 || e.which == 51 || e.which == 52 || e.which == 53 || e.which == 54 || e.which == 55 || e.which == 56 || e.which == 57 || e.which == 8)
        {
        } 
        else {
            return false;
        }

    }) 
}
</script>
<script>
function customerPhoneNumberFormat(e){
    var customerContactPhn = document.getElementById("tndpages:TnDRjfrm:custContactPhn");
    $(customerContactPhn).keypress(function(e){
        if (this.value.length === 0 && (e.which == 48 || e.which == 49)){
            return false;
        }

        if( e.which == 48 || e.which == 49 || e.which == 50 || e.which == 51 || e.which == 52 || e.which == 53 || e.which == 54 || e.which == 55 || e.which == 56 || e.which == 57 || e.which == 8)
        {
        } 
        else {
            return false;
        }

    })       
}

// added by karthik G
       function blockSpecialCharactersActtt(e,compId){
            if((e.which > 47 && e.which <=57) || e.which == 9 || e.which == 11 ||  e.which == 0 || e.which == 8 || e.which == 46 ) 
            {
            } 
            else 
            {
                return false;
            }  
            
        }
function checkEmailAddressonLoad(){ 

    var EmailAddressElem = $(document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}'));
    var emailaddr = EmailAddressElem.val();
    if(emailaddr == 'declined'){
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').disabled=true; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').disabled=true; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').value = 'declined';
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').value = 'cummins.com'; 
    }
    else{
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').disabled=false; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').disabled=false; 
        //document.getElementById('{!$Component.Intakefrm.txtEmailAddress}').value = '';
        //document.getElementById('{!$Component.Intakefrm.txtEmailAddress1}').value = ''; 
    }
}
</script>

<script>
$(window).load(function(){
    //  spyGlassCustomerName();
    //  spyGlassCustomerCode();
    selectedSubStatus();
    //To show substatus popup on load        
    var subStatusPop = '{!ShowSubStatuspopup}';
    console.log('subStatusPop>>>>>>'+subStatusPop);
    if(subStatusPop!=null && subStatusPop!='' ){
        if(subStatusPop == 'true'){
            //alert($('#subStatusPop'));
            $('#subStatusPop').modal('show');

        }
    }
    console.log(subStatusPop);            
    document.getElementById('counter_desc1').value= 100-document.getElementById('tndpages:TnDRjfrm:description_upl1').value.length;
    document.getElementById('counter_desc2').value= 100-document.getElementById('tndpages:TnDRjfrm:description_upl2').value.length;
    document.getElementById('counter_desc3').value= 100-document.getElementById('tndpages:TnDRjfrm:description_upl3').value.length;
    //document.getElementById('edit_desc1').value= 100-document.getElementById('reviewHistory:Intakefrm:EditPopup:popInnerOutputPn5:edit_desc1_textarea').value.length;        
});
function closeSubStatusPopup(){
    console.log('Here>>>>>>>>>>>>.');
    closeSSPopup();
}
function selectedSubStatus(){
    var selectedVal = '{!selectedSubStatusVal}';   
    console.log('>>>>'+selectedVal);
    var selsubStatusRadios = document.getElementsByName('rdoResult'); 
    console.log('<<<<<'+selsubStatusRadios);
    if( selectedVal != '' && selectedVal != 'None' && selectedVal != 'none' && selectedVal != null){
        for(var x=0; x<selsubStatusRadios.length;x++){
            console.log('<><><>'+selsubStatusRadios[x].value);
            if(selsubStatusRadios[x].value == selectedVal){
                selsubStatusRadios[x].checked = true;
            }
            else{
                selsubStatusRadios[x].checked = false;
            }
        }
    }else if(selectedVal == 'None' || selectedVal == 'none' || selectedVal == '' || selectedVal == null){
        for(var x=0; x<selsubStatusRadios.length;x++){
            console.log('<><><>'+selsubStatusRadios[x].value);
            if(selsubStatusRadios[x].value == 'none'){
                selsubStatusRadios[x].checked = true;
            }
            else{
                selsubStatusRadios[x].checked = false;
            }
        }
    }
    console.log('completed');
}
//Defect 61124 start
function disableButton1()
{
    // alert("tndpages:TnDRjfrm:attach123")
    document.getElementById("tndpages:TnDRjfrm:Attach1").disabled=true;
    processup();
    return false; 
}
//Defect 61124 end

<!--Modified as ROD:86567-->
    function disableDeleteButton(){
        document.getElementById("tndpages:TnDRjfrm:theDeleteButton").disabled=true;
    }      

//InsiteImage file download
function downloadFile1(endPointStr, tokenStr, attachId) {
    //alert('entered download into downloadFile function...tokenStr>>>:'+tokenStr+' endPointStr>>:'+endPointStr);
    try {
        var statusEle = document.getElementById('{!$Component.TnDRjfrm.statusCodeId}');
        var statusStr = statusEle.value;
        //alert('status code>>>>>:'+statusStr);
        if(statusStr !=200){
            window.open('/apex/CSS_InsiteImageError?errorCode='+statusStr, 'target');             
        }else{
            var tokenElement = document.getElementById('{!$Component.TnDRjfrm.attId}');
            var attIdStr = tokenElement.value;
            //alert('attIdStr>>>>>:'+attIdStr);
            window.open('/servlet/servlet.FileDownload?file='+attIdStr, 'target');
        }

    } catch(err) {
        alert(err.message);
        console.log('Error message>>>:'+err.message);
    }
}



</script>
<script type="text/javascript">

/*    $(document).ready(function(){               
               $('.modal-content').draggable();

                        $('#myModal').on('show.bs.modal', function () {
                            $(this).find('.modal-body').css({
                               // 'max-height':'100%'
                            });
                        });

                    });*/
/* $(document).ready(function(){
    $('#divMileageId').keypress(function(e){
        //alert('keycode:'+e.which);
        if(e.which == 48 || e.which == 49 || e.which == 50 || e.which == 51 || e.which == 52 || e.which == 53 || e.which == 54 || e.which == 55 || e.which == 56 || e.which == 57 || e.which == 8){

        } else {
            return false;
        }
    });
});*/
function mileagePress(e){
    $('#divMileageId').keypress(function(e){
        //alert('keycode:'+e.which);
        if(e.which == 48 || e.which == 49 || e.which == 50 || e.which == 51 || e.which == 52 || e.which == 53 || e.which == 54 || e.which == 55 || e.which == 56 || e.which == 57 || e.which == 8){

        } else {
            return false;
        }
    });
}

function hoursPressBMS(e){
    $('#divHoursId').keypress(function(e){
        //alert('keycode:'+e.which);
        if(e.which == 48 || e.which == 49 || e.which == 50 || e.which == 51 || e.which == 52 || e.which == 53 || e.which == 54 || e.which == 55 || e.which == 56 || e.which == 57 || e.which == 8 )
        {

        } else {
            return false;
        }
    });

}
</script>

<script type="text/javascript">    
//function callRepair(){ window.open( "/apex/CSS_Job_Detail?id={!workjob.Id}&nto=DET", '_self');}
function callRepair(){ window.open( "/apex/CSS_JobRepair?id={!workjob.Id}&nto=DET", '_self');}
function callJobPlan(){ window.open( "/apex/CSS_JobPlan?id={!workjob.Id}&status={!workjob.Status__c}", '_self');}
function callJobInvoice(){ window.open( "/apex/CSS_JobInvoice?id={!workjob.Id}", '_self');}
<!-- *****   62579 defect fix  *******  -->
    function myPopup2() {
    window.open( "/apex/Css_AuditTrail?id={!workJob.Id}", "myWindow", "status = 1, height = 600, width = 800, resizable = 1,scrollbars=yes" );
}
    <!-- *****   62579 defect fix  *******  -->
</script>   

<script type="text/javascript">
j$ = jQuery.noConflict();
j$(document).ready(function() {
    j$('#open').click(function(){
        j$('#grpopup').fadeIn();
        return false;
    });
    j$('#close').click(function(){
        j$('#grpopup').fadeOut();
        return false;
    });   
    j$('#delcancel').click(function(){
        j$('#grpopup').fadeOut();
        return false;
    });  


});

<!-------------------attachmnets related code -------------------------------------------->


    function abc()
{

    window.confirm('Are you sure?', DeleteFile('{!jobAttach}.Id}'));
    //DeleteFile('{!jobAttach}.Id}');
}
function switchMenu(obj,obj1,obj2,obj3) 
{
    var el = document.getElementById(obj);                                       
    if ( el.style.display != 'none' ) {
        el.style.display = 'none';
    }
    else {
        el.style.display = '';
    }
    var e2 = document.getElementById(obj1);                                       
    if ( e2.style.display != 'none' ) {
        e2.style.display = 'none';
    }
    else {
        e2.style.display = '';
    }
    var e3 = document.getElementById(obj2);                                       
    if ( e2.style.display != 'none' ) {
        e3.style.display = 'none';
    }
    else {
        e3.style.display = '';
    }
    var e4 = document.getElementById(obj3);                                       
    if ( e4.style.display != 'none' ) {
        e4.style.display = 'none';
    }
    else {
        e4.style.display = '';
    }
}
function textCounter(field,field2,maxlimit)
{
    var countfield = document.getElementById(field2);
    if ( field.value.length > maxlimit ) 
    {
        field.value = field.value.substring( 0, maxlimit );
        return false;
    } else 
    {
        countfield.value = maxlimit - field.value.length;
    }
}

var newWin=null; 
function openLookupPopup(name,id)
{                    
    var url="/apex/css_attach?namefield=" + name + "&idfield=" + id;
    newWin=window.open(url, 'Popup','height=600,width=700,left=100,top=100,resizable=no,scrollbars=yes,toolbar=no,status=no,location=no');
    if (window.focus)                                        
        newWin.focus();                                                               
    return false;
}                             
function closeLookupPopup()
{
    if (null!=newWin)                                      
        newWin.close();                                        
}
function firstSearch(ev){
    if (window.event && window.event.keyCode == 13 || ev.which == 13) {
        callFirstSearch();
    }
}
function secondSearch(ev){
    if (window.event && window.event.keyCode == 13 || ev.which == 13) {
        callsecondSearch();
    }
}
function thirdSearch(ev){
    if (window.event && window.event.keyCode == 13 || ev.which == 13) {
        callthirdSearch();
    }
}
function callIntake(){ window.open( "/apex/CSS_JobIntake?id={!workjob.Id}&status={!workjob.Status__c}", '_self');}


$(document).ready(function() {

    function toggleChevron(e) {
        $(e.target)
            .prev('.panel-heading')
            .find("i.indicator")
        console.log("tndshowhode");
        .toggleClass('fa-caret-right fa-caret-down');
    }
    $('#accordion').on('hidden.bs.collapse', toggleChevron);
    $('#accordion').on('shown.bs.collapse', toggleChevron);
});
function textCounter(field,field2,maxlimit)
{
    var countfield = document.getElementById(field2);
    if ( field.value.length > maxlimit ) 
    {
        field.value = field.value.substring( 0, maxlimit );
        return false;
    } else 
    {
        countfield.value = maxlimit - field.value.length;
    }
}

var newWin=null; 
});
</script> 
<script type="text/javascript">    
jq = jQuery.noConflict(true);
/* jq.fn.dataTable.ext.order['dom-text'] = function  ( settings, col )
    {
        return this.api().column( col, {order:'index'} ).nodes().map( function ( td, i ) {
            return $('input', td).val();
        } );
    }     
    /* jq.fn.dataTableExt.afnSortData['dom-checkbox'] = function  ( oSettings, iColumn )
    {
        var aData = [];
        jq( 'td:eq('+iColumn+') input', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
            aData.push( this.checked==true ? "1" : "0" );
        } );
        return aData;
    } */   
/* Initialise the table with the required column sorting data types */    

jq('#contentsContainer').DataTable({
    "aoColumns": [
        {"sType": "html","bSortable": false, "orderable": false, "visible": true},
        { "sSortDataType": "dom-text", type: 'string'  },
        { "sSortDataType": "dom-text", type: 'string'  },
        { "sSortDataType": "dom-text", type: 'string' },
        { "sSortDataType": "dom-text", type: 'string' },
        { "sSortDataType": "dom-text", type: 'string' },
        { "sSortDataType": "dom-text", type: 'string' }
    ],
    "bFilter": false,
    "bPaginate": false,
    "bInfo": false,
    "columnDefs": [
        { targets: 'no-sort', orderable: false }
    ]            
});         
function activateSort() {        
    console.log('Sort invoked 1');                   
    console.log('Sort invoked 2');
    jq('#contentsContainer').dataTable({
        "aoColumns": [
            {"sType": "html","bSortable": false, "orderable": false, "visible": true},
            { "sSortDataType": "dom-text", type: 'string'  },
            { "sSortDataType": "dom-text", type: 'string'  },
            { "sSortDataType": "dom-text", type: 'string' },
            { "sSortDataType": "dom-text", type: 'string' },
            { "sSortDataType": "dom-text", type: 'string' },
            { "sSortDataType": "dom-text", type: 'string' }
        ],
        "bFilter": false,
        "bPaginate": false,
        "bInfo": false,
        "columnDefs": [
            { targets: 'no-sort', orderable: false }
        ]            
    });        
    console.log('Sort invoked 3');
}
jq = jQuery.noConflict(true);
/* jq.fn.dataTable.ext.order['dom-text'] = function  ( settings, col )
    {
        return this.api().column( col, {order:'index'} ).nodes().map( function ( td, i ) {
            return $('input', td).val();
        } );
    }     
    /* jq.fn.dataTableExt.afnSortData['dom-checkbox'] = function  ( oSettings, iColumn )
    {
        var aData = [];
        jq( 'td:eq('+iColumn+') input', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
            aData.push( this.checked==true ? "1" : "0" );
        } );
        return aData;
    } */   
/* Initialise the table with the required column sorting data types */    

jq('#contentsContainerContact').DataTable({
    "aoColumns": [
        {"sType": "html","bSortable": false, "orderable": false, "visible": true},
        { "sSortDataType": "dom-text", type: 'string'  },
        { "sSortDataType": "dom-text", type: 'string'  },
        { "sSortDataType": "dom-text", type: 'string' },
    ],
    "bFilter": false,
    "bPaginate": false,
    "bInfo": false,
    "columnDefs": [
        { targets: 'no-sort', orderable: false }
    ]            
});         
function activateSortCon() {        
    console.log('Sort invoked 1');                   
    console.log('Sort invoked 2');
    jq('#contentsContainerContact').dataTable({
        "aoColumns": [
            {"sType": "html","bSortable": false, "orderable": false, "visible": true},
            { "sSortDataType": "dom-text", type: 'string'  },
            { "sSortDataType": "dom-text", type: 'string'  },
            { "sSortDataType": "dom-text", type: 'string' },
        ],
        "bFilter": false,
        "bPaginate": false,
        "bInfo": false,
        "columnDefs": [
            { targets: 'no-sort', orderable: false }
        ]            
    });        
    console.log('Sort invoked 3');
}    
</script>

<script type="text/javascript">
window.onload = function() {
    spyGlassCustomerName();
    spyGlassCustomerCode();
    checkEmailAddressonLoad();
};

function inputFieldlength(field){
    var lengthField = document.getElementById(field).value.length;
    console.log('lenght of the field11111>>>>'+lengthField);
    if(lengthField < 3){
        console.log('lenght of the field22222>>>>'+lengthField);
        return false;
    }
    console.log('lenght of the field33333>>>>'+lengthField);
    inputfieldlen();
    return false;
}
function custCodelength(field){
    var lengthField = document.getElementById(field).value.length;
    if(lengthField < 3){
        return false;
    }
    custCodelen();
    return true;
}
function spyGlassCustomerName(){
    var lengthField = $(document.getElementById('{!$Component.TnDRjfrm.CustomerName}'));
    //alert('lengthField >>>'+lengthField.value);
    if(lengthField != 'undefined' && lengthField != null && lengthField.val().length < 3){
        $("#spyGlassCusName").removeClass("searchheaderteal").addClass("searchheaderDisabled");
        return false;
    }
    $("#spyGlassCusName").removeClass("searchheaderDisabled").addClass("searchheaderteal");
    return false; 
}
function spyGlassCustomerCode(){
    var lengthField = $(document.getElementById('{!$Component.TnDRjfrm.CustomerCode}'));
    if(lengthField.val().length < 3){
        $("#spyGlassCusCode").removeClass("searchheaderteal").addClass("searchheaderDisabled");
        return false;
    }
    $("#spyGlassCusCode").removeClass("searchheaderDisabled").addClass("searchheaderteal");
    return false; 
}
//email validation starts

function ValidateEmail()
{
    var EmailIdElem = $(document.getElementById('{!$Component.TnDRjfrm.Emailid}'))[0].value;
    alert('*******MyValue****'+ EmailIdElem);
    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

    var EmailIdAddr= false;

    if (reg.test(EmailIdElem) == false) 
    {
        EmailIdAddr=true;
        alert('Invalid Email Address');
        EmailIdElem.removeClass("valid").addClass("invalid");

        $("span", EmailIdElem.parent()).removeClass("error").addClass("error_show");

        return false;
    }
    else{

        alert('valid Email Address');
        EmailIdElem.removeClass("invalid").addClass("valid");

        $("span", EmailIdElem.parent()).removeClass("error_show").addClass("error");
        return true;
    }

}
//email validation ends
// email read only added by venkat
function checkEmailAddress(){ 

    if(document.getElementById('{!$Component.TnDRjfrm.chkEmail}').checked == true){
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').disabled=true; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').disabled=true; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').value = 'declined';
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').value = 'cummins.com'; 
    }
    else{
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').disabled=false; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').disabled=false; 
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress}').value = '';
        document.getElementById('{!$Component.TnDRjfrm.txtEmailAddress1}').value = ''; 
    }
}
</script>
<script>
var fileAttachSaveBtn = true;
var fileAttachSaveBtn12 = true;
var fileAttachSaveBtn13 = true;
function checkFileSize()
{
if ($("[id$='file_File_1']")[0].files.length > 0) {

var uploadFileSize = $("[id$='file_File_1']")[0].files[0].size;
if (uploadFileSize > 10485760) {
// alert('File uploads must be less than 10mb in size. Your file is: '+(Math.round(uploadFileSize/1024)) + 'k');
var x=document.getElementById('tndpages:TnDRjfrm:error12');
             x.style.display = "";
var y=document.getElementById('tndpages:TnDRjfrm:Attach1');
             y.style.display = "none";
var z=document.getElementById('tndpages:TnDRjfrm:disableAttach1');
             z.style.display = "";
fileAttachSaveBtn = false;
}
else {
//   alert('Else is calling for save method');
var x=document.getElementById('tndpages:TnDRjfrm:error12');
             x.style.display = "none";
fileAttachSaveBtn = true;
if(fileAttachSaveBtn == true && fileAttachSaveBtn12 == true && fileAttachSaveBtn13 == true){
var y=document.getElementById('tndpages:TnDRjfrm:Attach1');
             y.style.display = "";
var z=document.getElementById('tndpages:TnDRjfrm:disableAttach1');
             z.style.display = "none";  
    }
}
}
 else {
//  alert('Else is calling for save method');
var x=document.getElementById('tndpages:TnDRjfrm:error12');
             x.style.display = "none";
}
}
</script>
<script>



function checkFileSize12()
{
if ($("[id$='file_File_2']")[0].files.length > 0) {

var uploadFileSize = $("[id$='file_File_2']")[0].files[0].size;
if (uploadFileSize > 10485760) {
// alert('File uploads must be less than 10mb in size. Your file is: '+(Math.round(uploadFileSize/1024)) + 'k');
var x=document.getElementById('tndpages:TnDRjfrm:error11');
             x.style.display = "";
var y=document.getElementById('tndpages:TnDRjfrm:Attach1');
             y.style.display = "none";
var z=document.getElementById('tndpages:TnDRjfrm:disableAttach1');
             z.style.display = "";
fileAttachSaveBtn12 = false;
}
else {
// alert('Else is calling for save method');
var x=document.getElementById('tndpages:TnDRjfrm:error11');
             x.style.display = "none";
fileAttachSaveBtn12 = true;
if(fileAttachSaveBtn == true && fileAttachSaveBtn12 == true && fileAttachSaveBtn13 == true){
var y=document.getElementById('tndpages:TnDRjfrm:Attach1');
             y.style.display = "";
var z=document.getElementById('tndpages:TnDRjfrm:disableAttach1');
             z.style.display = "none";  
    }
}
}
else {
// alert('Else is calling for save method');
var x=document.getElementById('tndpages:TnDRjfrm:error11');
             x.style.display = "none";
}
}

</script>
<script>
function checkFileSize13()
{
if ($("[id$='file_File_3']")[0].files.length > 0) {

var uploadFileSize = $("[id$='file_File_3']")[0].files[0].size;
if (uploadFileSize > 10485760) {
// alert('File uploads must be less than 500k in size. Your file is: '+(Math.round(uploadFileSize/1024)) + 'k');
var x=document.getElementById('tndpages:TnDRjfrm:error13');
             x.style.display = "";
var y=document.getElementById('tndpages:TnDRjfrm:Attach1');
             y.style.display = "none";
var z=document.getElementById('tndpages:TnDRjfrm:disableAttach1');
             z.style.display = "";
fileAttachSaveBtn13 = false;
}
else {
// alert('Else is calling for save method');
var x=document.getElementById('tndpages:TnDRjfrm:error13');
             x.style.display = "none";
 fileAttachSaveBtn13 = true;
if(fileAttachSaveBtn == true && fileAttachSaveBtn12 == true && fileAttachSaveBtn13 == true){
var y=document.getElementById('tndpages:TnDRjfrm:Attach1');
             y.style.display = "";
var z=document.getElementById('tndpages:TnDRjfrm:disableAttach1');
             z.style.display = "none";  
    }
}
}
else {
// alert('Else is calling for save method');
var x=document.getElementById('tndpages:TnDRjfrm:error13');
             x.style.display = "none";
}
}
</script>

<apex:outputPanel id="exeReload" >
<script>
    function redirectPage(){
        //alert('hello');
        var bool = '{!cancelSJWrapperObj1.errorFlag}';
        //alert(bool);
        if(bool=='false'){
            //alert('hi');
            document.location.href = '/apex/CSS_Job_Detail?nto=HOME';
        }
    }

    function ClearErrorMessage(){
        document.getElementById('CancelErrorId').innerHTML = '';
    }
    function CloseErrorMessage(){
        document.getElementById('closeErrorId').innerHTML = '';
        document.getElementById('closeErrorId1').innerHTML = '';
    }
</script>
</apex:outputPanel>
<c:CSS_JavaScript />

<div class="container-fluid1">
<apex:composition template="CSS_STDTemplate" />
<apex:define name="body">    

    <apex:form id="TnDRjfrm" html-novalidate="True">
        <apex:actionFunction name="processup" action="{!processUpload}" /> <!--61124 attchments Defect fix -->
        <div class="">
            <apex:outputpanel id="DisplayChevs5" rendered="{!IF(workjob.id ==null , false , true)}">
                <div class="">
                    <ul class="nav nav-tabs desk-tabs" id="JobDetailTab" style="background-color: #eee;">
                        <!-- <li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=INT" data-toggle="tab">Intake</a></li> -->
                        <li><a href="" style="color:#888;" class="not-active">{!$Label.css_Intake}</a></li>
                        <li class="active"><a href="#tnd" data-toggle="tab">{!$Label.css_Triage} &amp; {!$Label.css_Diagnosis}</a></li>
                        <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=PLN" data-toggle="tab">Job Plan</a></li>-->
                        <!--<li><a href="#" class="not-active" onClick="callJobPlan()">{!$Label.css_Job_Plan}</a></li> --> 
                        <li><a href="#" style="{!IF(showJobPlanBoolean = true,'','color:#888;')}" class="{!IF(showJobPlanBoolean = true,'active','not-active')}" onClick="{!IF(showJobPlanBoolean = true,'callJobPlan();','')}">{!$Label.css_Job_Plan}</a></li>
                        <li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=REP" onClick="callRepair()" data-toggle="tab">{!$Label.css_Repair}</a></li>
                        <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=REP" onClick="callRepair()" data-toggle="tab">Repair</a></li>-->
                        <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=WAR" data-toggle="tab">Warranty Claim</a></li> -->
                        <li><a href="" style="color:#888;" class="not-active">{!$Label.css_Warramnty_Claim}</a></li>
                        <!--<li><a href="/apex/CSS_Job_Detail?id={!workjob.Id}&nto=INV" data-toggle="tab">Invoice</a></li>-->
                        <li><a href="#" style="{!IF($Setup.css_header_nav__c.CG_Invoice_Check__c = true,'','color:#888;')}" class="{!IF($Setup.css_header_nav__c.CG_Invoice_Check__c = true,'active','not-active')}" onclick="{!IF($Setup.css_header_nav__c.CG_Invoice_Check__c = true,'callJobInvoice();','')}">{!$Label.css_Invoice}</a></li>
                    </ul>
                    <ul class="nav nav-tabs mob-tabs" id="JobDetailTab" style="background-color: #eee;">
                        <li class="active"><a href="#tnd" data-toggle="tab">{!$Label.css_Triage} &amp; {!$Label.css_Diagnosis}</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tnd">
                            <div class="panel panel-default">
                                <div class="panel-body intakechevs" style="padding-top:0px;">
                                    <div class="col-md-12" align="left">

                                        <ul class="desk-ulist">
                                            <li class="first-child">
                                                <apex:commandLink action="{!tnd_jo}" styleclass="sopen" id="cusave" > 
                                                    <span class="chev_cu_img_open"/>
                                                    <span class="chev_text_open">{!$Label.css_job1}<br /> {!$Label.css_jo_label} </span>
                                                </apex:commandLink>
                                                <!--   <a href="/apex/CSS_JobTnDJo?id={!workjob.Id}" class="sopen" id="cusave"> 
<span class="chev_cu_img_open"/>
<span class="chev_text_open">Job <br /> Overview </span>
</a>--->
                                            </li>
                                            <li>
                                                <apex:commandLink action="{!tnd_vh}"   styleclass="sopen" id="uesave">
                                                    <span class="chev_vh_img_open"/>
                                                    <span class="chev_text_open"> {!$Label.css_view} <br /> {!$Label.css_History} </span>
                                                </apex:commandLink>
                                                <!--    <a href="/apex/CSS_JobTnDVh?id={!workjob.Id}" class="sopen" id="uesave">
<span class="chev_vh_img_open"/>
<span class="chev_text_open"> View <br /> History </span>
</a> -->
                                            </li>


                                            <li>
                                                <apex:commandLink action="{!tnd_vi}" styleclass="{!vi_chv_sts}" id="visave">
                                                    <span class="{!vi_btn_cls}"/>
                                                    <span class="{!vi_txt_sts}">  {!$Label.css_Visual} <br /> {!$Label.css_Inspection} </span>
                                                </apex:commandLink>
                                            </li>
                                            <!--
<li>
<a href="/apex/CSS_JobTnDTs?id={!workjob.Id}" class="sopen" id="tssave">
<span class="chev_ts_img_open"/>
<span class="chev_text_open"> Troubleshooting</span>
</a>
</li>
-->
                                            <li>
                                                <apex:commandLink action="{!createDSID}" styleclass="sopen" id="vhsave">
                                                    <span class="chev_ts_img_open"/>
                                                    <span class="chev_text_open"> {!$Label.css_Troubleshooting}</span>
                                                </apex:commandLink>
                                            </li> 
                                            <li class="last-child">
                                                <apex:commandLink action="{!tnd_rj}" styleclass="sactive" id="rwsave">
                                                    <!--  <a href="/apex/CSS_JobTnDRj?id={!workjob.Id}" class="sactive" id="rwsave">---->
                                                    <span class="chev_rj_img_active"/>
                                                    <span class="chev_text_active"> {!$Label.css_Review} <br /> {!$Label.css_job1} </span>
                                                </apex:commandLink>
                                            </li>
                                        </ul>
                                        <ul class="mob-ulist">
                                            <li class="first-child">
                                                <apex:commandLink action="{!tnd_jo}" styleclass="{!jo_chv_sts}" id="cusave_m">
                                                    <div class="circle-active">1</div>
                                                    <span class="{!jo_txt_sts}">{!jo_txt_val}</span>
                                                </apex:commandLink>
                                            </li>
                                            <li>
                                                <apex:commandLink action="{!tnd_vh}" styleclass="{!vh_chv_sts}" id="uesave_m">
                                                    <div class="pull-right circle-open">2</div>
                                                    <span class="{!vh_txt_sts}">{!vh_txt_val}</span>
                                                </apex:commandLink>
                                            </li>
                                            <li>
                                                <apex:commandLink action="{!tnd_vi}" styleclass="{!vi_chv_sts}" id="ccsave_m">
                                                    <div class="pull-right circle-open">3</div>
                                                    <span class="{!vi_txt_sts}">{!vi_txt_val}</span>
                                                </apex:commandLink>
                                            </li>
                                            <li>
                                                <apex:commandLink action="{!tnd_ts}" styleclass="{!ts_chv_sts}" id="visave_m">
                                                    <div class="pull-right circle-open">4</div>
                                                    <span class="{!ts_txt_sts}">{!ts_txt_val}</span>
                                                </apex:commandLink>
                                            </li>
                                            <li class="last-child">
                                                <apex:commandLink action="{!tnd_rj}" styleclass="{!rj_chv_sts}" id="rjsave_m">
                                                    <div class="circle-open">5</div>
                                                    <span class="{!rj_txt_sts}"> {!rj_txt_val}</span>
                                                </apex:commandLink>
                                            </li>
                                        </ul>
                                        <!---       </apex:form> --->
                                    </div>
                                    <!--         <div class="col-sm-2" align="left">
<apex:image url="{!$Resource.printicon}" width="20" height="20"/>
<a href="/apex/CSS_StdHeaderFooter" class="none">Print<i class="fa fa-caret-right"></i></a><br/>
<apex:image url="{!$Resource.emailicon}" width="20" height="20"/>
<a href="/apex/CSS_StdHeaderFooter" class="none">Email<i class="fa fa-caret-right"></i></a>
</div> -->
                                </div>  

                                <div class="panel-body">
                                    <!-- ******* BEGIN TD - JOB OVERVIEW **** -->
                                    <!---Chnages made for Defect 58562 to addd paramter in CSS_JobOverviewPanel--->
                                    <apex:outputPanel id="joboverviewpnl" >
                                        <div class="col-md-12">
                                            <div class="row">
                                                <c:CSS_JobOverviewPanel CustName="{!workJob.Customer_Name__c}" JobStatus="{!workJob.Status__c}" DateCreated="{!workJob.CreatedDate}" DateIn="{!workJob.Date_In__c}" jobOrdNumb="{!workJob.Name}" ShopWO="{!workJob.Shop_Work_Order__c}" LastSaved="{!workJob.LastModifiedDate}" JobESN="{!workJob.ESN__c}" ServModel="{!workJob.Service_Model__c}" RepRecent="{!workJob.Repeat_Or_Recent_Calc__c}" 
                                                                        JobLoc="{!workJob.JobLocation__c}" JobOrdId="{!workJob.Id}" pgName="TND" ControlNo="{!workJob.RPVControlNumber__c}"  paccarAuthReq="{!workJob.PACCAR_Auth_Required__c}"/> 
                                            </div>
                                        </div>
                                    </apex:outputPanel> 
                                    <!--story#183077-->
                                  <div>
                                      <apex:outputPanel id="PSNErrFlag" >
                                     <b><apex:outputText style="color:red;" value="{!$Label.CG_PSN_FLAG}"  rendered="{!PSNFlag}"></apex:outputText></b> 
                                     </apex:outputPanel>
                                  </div>
                                  <div>
                                      <apex:outputPanel id="FieldActionWebServiceResult" >
                                                              <b><apex:outputText style="color:red;" value="{!$Label.CG_FA_FLAG}"  rendered="{!IF(CONTAINS(workJob.FieldActionWebServiceResult__c,'Error'),true,false)}"/></b>
                                         </apex:outputPanel>
                                    </div>
                                  
                                   
                                       <div class="col-md-12">
                                                       <apex:outputPanel style="color:red;font-size:16px;" id="SPDataWebserviceResult" >
                                                              <b><apex:outputText value="{!$Label.GetSPDataService_Message}"  rendered="{!workJob.SPDataWebserviceResult__c=='Error'}"/></b>
                                         </apex:outputPanel>
                                       </div>
                                       <div> <!--GSSC-86 display error, when the WO service is failed-->
                                               <apex:outputpanel id="ShopWOErrMsg"  rendered="{!IF(workJob.isWOServiceFailure__c==true,true,false)}">
                                        <apex:outputLabel value="{!$Label.CSS_ShoWOErrorMsg}" style="color:red"/>
                                    </apex:outputpanel>
                                    </div>
                                    <!--end-->
                                    
                                    <!--  <apex:outputPanel id="tndrevjob" rendered="{!show_rj_pnl}">  -->
                                    <apex:outputPanel id="tndrevjob"> 
                                        <div class="panel-body">
                                            <div class="panel-body">
                                                <div class="container-fluid">
                                                    
                                                    <div class="col-md-12">
                                                        <apex:outputPanel style="color:red;font-size:16px;">
                                                            <b><apex:outputText value="{!$Label.CSS_Required_information_missing}" rendered="{!allFieldsValidate}"/></b>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <!----Story 75790 Start--->
                                                    <apex:outputpanel id="esnChangedPnl" rendered="{!IF(CONTAINS(workjob.BMSStatus__c,'esnChanged'), true, false)}">
                                                        <fieldset class="cmi_field_set">
                                                            <apex:outputLabel id="esnChangedLbl"><span style="color:red">{!$Label.CSS_esnChanged_ChkWarranty}</span></apex:outputLabel> 
                                                        </fieldset>
                                                    </apex:outputpanel>
                                                    <!----Story 75790 End--->
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="row">
                                                                <div class="col-md-12">                                                                            

                                                                    <!-- Assigned to   -->      
                                                                    <apex:actionRegion >
                                                                    <apex:outputpanel id="AssignedTopnl5" >
                                                                        <fieldset class="cmi_field_set">
                                                                            <legend class="fs_legend">{!$Label.css_assignto}</legend>
                                                                            <c:css_asign_tech JobLoc="{!workJob.JobLocation__c}" JoId="{!workjob.Id}" tech1="{!workjob.Assigned_to__r.Name}" tech2="{!workjob.Additional_Tech1__r.Name}" tech3="{!workjob.Additional_Tech2__r.Name}" tech4="{!workjob.Additional_Tech3__r.Name}" tech5="{!workjob.Additional_Tech4__r.Name}" tech6="{!workjob.Additional_Tech5__r.Name}"  tech7="{!workjob.Additional_Tech6__r.Name}" tech8="{!workjob.Additional_Tech7__r.Name}" tech9="{!workjob.Additional_Tech8__r.Name}" tech10="{!workjob.Additional_Tech9__r.Name}" /> 
                                                                        </fieldset>
                                                                    </apex:outputpanel>                                                               
                                                                    </apex:actionRegion>
                                                                    <!--         <apex:form > --->


                                                                    <apex:actionRegion >
                                                            
                                                                    <apex:outputpanel id="pgCustpnl" rendered="{!$Setup.css_header_nav__c.pnlCustomerEdit__c}">
                                                                        <fieldset class="cmi_field_set">
                                                                            <legend class="fs_legend">{!$Label.css_customer} &nbsp;&nbsp;</legend>
                                                                            <div class="form-horizontal" role="form">
                                                                                <apex:outputPanel rendered="{!IF(bmsEnabled==true, false,true)}">
                                                                                    <label for="" class="col-sm-4 cmi-tar">{!$Label.css_customer}<div class="cmi_asterisk">*</div></label>

                                                                                    <div class="col-sm-6 col-xs-12 " >
                                                                                        <!--<apex:inputField value="{!workJob.Customer_Name__c}" styleClass="css_ipfiel_size" />-->
                                                                                        <apex:inputField value="{!workJob.Customer_Name__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust1"/>
                                                                                        <apex:outputText value="{!workJob.Customer_Name__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser = true, true, false)}" id="cust2"/>

                                                                                        <apex:outputLabel rendered="{!reqBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                    </div>
                                                                                    <div class="clearfix"></div>




                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                        <apex:outputLabel value="{!$Label.css_job1}" />
                                                                                    </div>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <apex:inputField value="{!workJob.Name}" />
                                                                                        &nbsp;
                                                                                    </div>
                                                                                    <div class="clearfix"></div>


                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                        <apex:outputLabel value="{!$Label.css_shop_work_order}" />
                                                                                        <apex:outputPanel rendered="{!IF(($Setup.css_header_nav__c.RSWButtonEnable__c == true),false,true)}" />
                                                                                        <div class="cmi_asterisk">*</div>
                                                                                    </div>

                                                                                    <div class="col-sm-4 col-xs-12 " >
                                                                                        <!--<apex:inputField value="{!workJob.Shop_Work_Order__c}" styleClass="css_ipfiel_size" /> &nbsp;-->
                                                                                        <!--<apex:inputField value="{!workJob.Shop_Work_Order__c}" html-maxlength="8" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust09" onkeypress="return isAlphanumeric(event,this);"/>-->
                                                                                        <apex:inputField value="{!workJob.Shop_Work_Order__c}"  styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust09"/> <!--onkeypress="return isAlphanumeric(event,this);"/> --added html-maxlength as 9 and commented onkeypress to accept all characters for story GSSC-259-->  <!--html-maxlength="9" karthik G commented as part of GSSC-706-->
                                                                                        <apex:outputText value="{!workJob.Shop_Work_Order__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser = true, true, false)}" id="cust29"/>
                                                                                       
                                                                                       
                                                                                   </div>  
                                                                                     <div class="col-sm-4">
                                                                                        <apex:outputLabel rendered="{!reqShopBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                         </div>
                                                                                    <div class="clearfix"></div>
                                                                                    <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                        <apex:outputlabel value="{!$Label.CSS_jobCreated}"/>
                                                                                    </div>
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:outputField value="{!workjob.createdDate}" />&nbsp;
                                                                                    </div>

                                                                                </apex:outputPanel>  
                                                                                <!--BMS User Screen-->
                                                                                <apex:actionRegion >
                                                                                <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}" id="bmsCustScreen">
                                                                                    <!--ESN Locked False Start -->
                                                                                    <apex:outputPanel rendered="{!$Setup.css_header_nav__c.BMSSearchPopFlag__c}">

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value=" {!$Label.CSS_Customer_Company} " /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.Customer_Name__c}" id="CustomerName" onkeyup="spyGlassCustomerName()"/>&nbsp;
                                                                                            <!--story 86427-->
                                                                                            <apex:commandLink onclick="inputFieldlength('{!$Component.CustomerName}');"  rerender="BMSCustomerSearch" immediate="false" oncomplete="activateSort(); return false;">
                                                                                                <span id="spyGlassCusName" class="searchheaderteal"/>

                                                                                                <apex:actionStatus startText="(fetching additional values...)" id="getCustDetls" />
                                                                                                <!--<a data-toggle="modal" data-target="#BMSCustomerSearch">
<span class="searchheaderteal"></span>
</a>-->
                                                                                            </apex:commandLink>
                                                                                            <apex:outputLabel rendered="{!reqBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                            <apex:actionFunction name="inputfieldlen" action="{!getBMSCustDetails}" rerender="BMSCustomerSearch,pgUIpnl" status="getCustDetls" oncomplete="activateSort()">
                                                                                                <apex:param id="custParam" name="custNameParam" value="CustomerParam" />
                                                                                            </apex:actionFunction>

                                                                                            <!--story 86427-->
                                                                                        </div>  
                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.JobLocation__c.Label}"  />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <!--<apex:outputText value="{!Locations}"/>&nbsp; -->
                                                                                            <!-- Modified as per story# 76192 -->
                                                                                            <apex:outputText value="{!workjob.JobLocation__c}"/>&nbsp;
                                                                                        </div>  

                                                                                        <!--- testing for location code-->
                                                                                        <div class="clearfix"></div> 
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Location_code}" />
                                                                                        </div>
                                                                                        <div class="col-sm-6 col-xs-12" >
                                                                                            <!--   <div class="form-control-static">-->
                                                                                            <apex:outputText value="{!LocCode}"  />
                                                                                            <!-- Modified as per story# 76192 -->
                                                                                            <!--<apex:outputText value="{!Workjob.CSS_Job_Location_Code__c}"  />-->
                                                                                        </div>

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Customer_Code}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.Customer_Code__c}" id="CustomerCode" onkeyup="spyGlassCustomerCode()">
                                                                                                <apex:actionsupport event="onchange" action="{!blankUnitonCustCodeChange}" reRender="pgUIpnl"/>
                                                                                            </apex:inputField>&nbsp;
                                                                                            <!--   <apex:inputField value="{!workJob.Customer_Code__c}" id="CustomerCode" onkeyup="showSpyGlass('{!$Component.CustomerCode}')"/>&nbsp;  -->
                                                                                            <!--story 86427-->
                                                                                            <!--<apex:commandLink action="{!getBMSCustDetails}" status="getCustDetls2" rerender="BMSCustomerSearch" immediate="false" oncomplete="activateSort()">-->
                                                                                            <apex:commandLink onclick="custCodelength('{!$Component.CustomerCode}');"  rerender="BMSCustomerSearch" immediate="false" oncomplete="activateSort(); return false;">
                                                                                                <span  id="spyGlassCusCode" class="searchheaderteal"/>

                                                                                                <apex:actionStatus startText="(fetching additional values...)" id="getCustCode" />
                                                                                            </apex:commandLink>
                                                                                            <apex:actionFunction name="custCodelen" action="{!getBMSCustDetails}" rerender="BMSCustomerSearch,pgUIpnl" status="getCustCode"  oncomplete="activateSort(); "/>

                                                                                            <!--story 86427-->
                                                                                            <apex:outputLabel rendered="{!reqCusNumBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Phone_Number}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.Phone_Number__c}"  styleClass="css_ipfiel_size" id="phoneNumber"  html-placeholder="(###) ### - ####" html-maxlength="10" onkeydown="phoneNumberFormat(event)"/> &nbsp; 
                                                                                        </div> 
                                                                                        <apex:outputLabel rendered="{!reqPhnnoBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel> 
                                                                                        <apex:outputLabel rendered="{!reqPhnnototalchar}" style="color:red">{!$Label.css_10_Digit_Phone_Number}</apex:outputLabel>

                                                                                        <!--     <div class="clearfix"></div>                                                
<div class="col-sm-4 col-xs-12 cmi-tar">
<apex:outputLabel value="{!$Label.CSS_Contact_Name}"  /><div class="cmi_asterisk">*</div>
</div>
<div class="col-sm-8 col-xs-12 ">
<apex:inputField value="{!workJob.Contact_Name__c}"/>&nbsp;
</div> -->
                                                                                        <!----test for first name--->
                                                                                        <div class="clearfix"></div> 
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_First_Name}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.First_Name__c}"/>&nbsp;
                                                                                            <!--story 86427-->
                                                                                            <apex:commandLink action="{!ContactLookup}" status="getContDetls" rerender="BMSContactSearch" immediate="false" oncomplete="activateSortCon()" >
                                                                                                <span class="searchheaderteal"/>
                                                                                                <apex:actionStatus startText="(fetching Contact details...)" id="getContDetls" /> 
                                                                                            </apex:commandLink>
                                                                                            <!--story 86427-->
                                                                                            <apex:outputLabel rendered="{!reqFrstNamBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel> 
                                                                                        </div> 
                                                                                        <div>

                                                                                        </div>
                                                                                        <div class="clearfix"></div>
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Last_Name}"  /><div class="cmi_asterisk">*</div>

                                                                                        </div>
                                                                                        <div class="col-sm-4 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.BMS_Last_Name__c}"/>&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqLastNamBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel> 
                                                                                        </div> 
                                                                                        <!--- end--->

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Customer_Contact_Phone}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.Cstmr_Contacts_Phone__c}"  styleClass="css_ipfiel_size" id="custContactPhn" html-placeholder="(###) ### - ####" html-maxlength="10" onkeydown="customerPhoneNumberFormat(event)"/> &nbsp;
                                                                                            <apex:outputLabel rendered="{!reqCstmrContactPhnBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel> 
                                                                                            <apex:outputLabel rendered="{!reqCstmrContactPhntotalchar}" style="color:red">{!$Label.css_10_Digit_Phone_Number}</apex:outputLabel> 
                                                                                        </div>
                                                                                        <!--  as per story #109319 added Email Address field   -->  
                                                                                        <div class="clearfix"></div>   
                                                                                        <div class="row intakerow">
                                                                                            <label class="col-sm-4 col-xs-12 cmi-tar">{!$Label.css_Email_Address}<span class="cmi_asterisk">*</span></label>
                                                                                            <div class="col-md-8 col-xs-12">
                                                                                                <apex:inputText value="{!EmailAddress}"  maxlength="40" styleClass="css_ipfiel_size" id="txtEmailAddress"/> @ &nbsp;
                                                                                                <apex:inputText value="{!EmailAddress1}" maxlength="40" styleClass="css_ipfiel_size" id="txtEmailAddress1"/> &nbsp;
                                                                                                <!-- added by venkat for defect 126387-->
                                                                                                <apex:inputCheckbox value="{!workJob.Email_check_box__c}" onclick="checkEmailAddress()" id="chkEmail"/>
                                                                                            </div><apex:outputLabel rendered="{!reqEmailBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel>
                                                                                            <apex:outputLabel rendered="{!reqEmailInvalidBoolean}" style="color:red">Invalid Email Address</apex:outputLabel>
                                                                                        </div>

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Address}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.Address__c}"/>&nbsp;
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_City}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.City__c}"/>&nbsp;
                                                                                        </div> 
                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <label>{!$Label.css_State}<div class="cmi_asterisk">*</div></label>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.CSS_State__c}"/>&nbsp;
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Zipcode}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.ZipCode__c}"/>&nbsp;
                                                                                        </div> 
                                                                                        <div class="clearfix"></div>   
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Application}"  />
                                                                                        </div>   <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:inputField value="{!workJob.Application_Desc__c}"/>&nbsp;
                                                                                        </div>                                                                              


                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Country}"/><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:inputField value="{!workJob.Country__c}"/>&nbsp;
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Payment_Type_Intake}"  />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:OutputLabel value="{!workJob.CSS_Charge_Account_Status__c}"/>&nbsp;
                                                                                        </div> 

                                                                                    </apex:outputPanel>
                                                                                    <!-- ESN Locked False End -->

                                                                                    <!--ESN Locked True Start -->
                                                                                    <apex:outputPanel rendered="{!NOT($Setup.css_header_nav__c.BMSSearchPopFlag__c)}">
                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value=" {!$Label.CSS_Customer_Company} " />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputField value="{!workJob.Customer_Name__c}" />&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                        </div>  
                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.JobLocation__c.Label}"  />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!Locations}"/>&nbsp;
                                                                                        </div>  

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Customer_Code}"  />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.Customer_Code__c}"/>&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqCusNumBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Phone_Number}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.Phone_Number__c}"/>&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqPhnnoBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel> 
                                                                                            <apex:outputLabel rendered="{!reqPhnnototalchar}" style="color:red">{!$Label.css_10_Digit_Phone_Number}</apex:outputLabel>
                                                                                        </div> 


                                                                                        <!--- <div class="clearfix"></div>                                                
<div class="col-sm-4 col-xs-12 cmi-tar">
<apex:outputLabel value="{!$Label.CSS_Contact_Name}"  /><div class="cmi_asterisk">*</div>
</div>
<div class="col-sm-8 col-xs-12 ">
<apex:outputText value="{!workJob.Contact_Name__c}"/>&nbsp;
</div> --->

                                                                                        <!----test for first name--->
                                                                                        <div class="clearfix"></div> 
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_First_Name}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.First_Name__c}"/>&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqFrstNamBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                        </div> 
                                                                                        <div>

                                                                                        </div>
                                                                                        <div class="clearfix"></div>
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Last_Name}"  /><div class="cmi_asterisk">*</div>

                                                                                        </div>
                                                                                        <div class="col-sm-4 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.BMS_Last_Name__c}"/>&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqLastNamBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                        </div> 
                                                                                        <!--- end--->
                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Customer_Contact_Phone}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.Cstmr_Contacts_Phone__c}"/>&nbsp;
                                                                                            <apex:outputLabel rendered="{!reqCstmrContactPhnBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                            <apex:outputLabel rendered="{!reqCstmrContactPhntotalchar}" style="color:red">{!$Label.css_10_Digit_Phone_Number}</apex:outputLabel> 
                                                                                        </div> 
                                                                                        <div class="clearfix"></div>                                                

                                                                                        <label class="col-sm-4 col-xs-12 cmi-tar">{!$Label.css_Email_Address}<span class="cmi_asterisk">*</span></label>
                                                                                        <div class="col-md-8 col-xs-12">
                                                                                            <apex:outputText value="{!EmailAddress}"   styleClass="css_ipfiel_size" />@
                                                                                            <apex:outputText value="{!EmailAddress1}"  styleClass="css_ipfiel_size" /> 
                                                                                        </div>

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Address}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.Address__c}"/>&nbsp;
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_City}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.City__c}"/>&nbsp;
                                                                                        </div> 
                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <label>{!$Label.CSS_State}<div class="cmi_asterisk">*</div></label>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.CSS_State__c}"/>&nbsp;
                                                                                        </div> 

                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Zipcode}"  /><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.ZipCode__c}"/>&nbsp;
                                                                                        </div> 
                                                                                        <div class="clearfix"></div>   
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Application}"  />
                                                                                        </div>   <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:outputText value="{!workJob.Application_Desc__c}"/>&nbsp;
                                                                                        </div>                                                                              


                                                                                        <div class="clearfix"></div>                                                
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Country}"/><div class="cmi_asterisk">*</div>
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.Country__c}"/>&nbsp;
                                                                                        </div> 
                                                                                        <!---defect fix 80181 start --->   
                                                                                        <div class="clearfix"></div> 
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.css_shop_work_order}" />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <!--  <apex:inputField value="{!workJob.Shop_Work_Order__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust091"/>
<apex:outputText value="{!workJob.Shop_Work_Order__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser = true, true, false)}" id="cust291"/>
---><apex:outputText value="{!workJob.Shop_Work_Order__c}"/>
                                                                                            <a data-target="#showqmarkpopup" data-toggle="modal" ><span class="cmi_intake_help" /></a>
                                                                                            <!-- <apex:commandLink rerender="showqmarkpopup" style="text-decoration:underline" />  -->
                                                                                        </div> 
                                                                                        <div class="clearfix"></div>     <!---defect fix 80181 end --->
                                                                                        <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                            <apex:outputLabel value="{!$Label.CSS_Payment_Type_Intake}"  />
                                                                                        </div>
                                                                                        <div class="col-sm-8 col-xs-12 ">
                                                                                            <apex:outputText value="{!workJob.CSS_Charge_Account_Status__c}"/>&nbsp;
                                                                                        </div> 
                                                                                    </apex:outputPanel>
                                                                                    <!-- ESN Locked True End --> 


                                                                                    <!-- story 86427 customer/company popup start-->
                                                                                    <!---- BMS Popup--->
                                                                                    <apex:outputPanel id="BMSCustomerSearch">

                                                                                        <apex:outputPanel id="BMSCustomerSearchInnerPnl1" styleClass="popupAttachBg"  layout="block" rendered="{!BMSCustSearchPopup}" >
                                                                                            <div class="holder">     
                                                                                                <div id="popup1" class="popup"> 
                                                                                                    <apex:outputPanel styleClass="srtPopupAttach">
                                                                                                        <div class="cmi_cu-popupwidth">
                                                                                                            <div class="modal-content">
                                                                                                                <!-- Modal Header -->
                                                                                                                <div class="modal-header cmi_modal-header">
                                                                                                                    <apex:commandButton title="Close the popup" html-data-dismiss="modal" action="{!closeBMSCustDetails}" styleClass="cross_butten" reRender="BMSCustomerSearch" onComplete="return false;"/>
                                                                                                                    <p style="margin-top:8px color:white">
                                                                                                                        <font color="white">
                                                                                                                            <b> Customer Lookup/Selection</b>
                                                                                                                        </font>
                                                                                                                    </p>
                                                                                                                </div>

                                                                                                                <!-- Modal Body -->

                                                                                                                <div class="modal-body"> 

                                                                                                                    <div class="row" style="max-height:400px;overflow:auto;">
                                                                                                                        <div class="col-md-12">
                                                                                                                            <table class="table cmi_customerpopup" id="contentsContainer">                                                                           

                                                                                                                                <thead>
                                                                                                                                    <tr>
                                                                                                                                        <th class="no-sort">Sel</th> 
                                                                                                                                        <th>Country </th>
                                                                                                                                        <th>Zipcode </th>
                                                                                                                                        <th>Customer name </th>
                                                                                                                                        <th>Customer code</th>
                                                                                                                                        <th>Address</th>
                                                                                                                                        <th>City</th>
                                                                                                                                    </tr>
                                                                                                                                </thead>
                                                                                                                                <tbody>
                                                                                                                                    <apex:repeat value="{!paginatedCustDetails}" var="cust" rows="999">
                                                                                                                                        <tr>                                                                                 
                                                                                                                                            <td>


                                                                                                                                        <input type="radio" id="{!cust.CustomerCode}" name="myChk"  onclick="callBMSCust('{!cust.CustomerCode}');"/>                                                                                           

                                                                                                                                        <!--   </apex:actionsupport> -->

                                                                                                                                            </td>
                                                                                                                                            <td>{!cust.Country}</td>
                                                                                                                                            <td>{!cust.Postalcode1}</td>
                                                                                                                                            <td>{!cust.CustomerName}</td>
                                                                                                                                            <td>{!cust.CustomerCode}</td>
                                                                                                                                            <td>{!cust.LocationAddressline1}</td>
                                                                                                                                            <td>{!cust.City}</td>
                                                                                                                                        </tr>        
                                                                                                                                    </apex:repeat> 

                                                                                                                                </tbody>
                                                                                                                            </table>

                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <font color="red">
                                                                                                                        <apex:outputLabel value="{!bmscustErrorMessage}" rendered="{!showOutageError}"/> </font>
                                                                                                                    <!--        </form> -->
                                                                                                                    <apex:actionFunction name="callBMSCust" action="{!selectedBMSCustCode}" reRender="none" status="callBMSCustStatus">
                                                                                                                        <apex:param name="BMSCustCode" value="BMSCustCode" assignTo="{!selectedCustCode}">
                                                                                                                        </apex:param>
                                                                                                                    </apex:actionFunction>
                                                                                                                    <div align="center">
                                                                                                                        <apex:actionStatus startText="requesting..." id="callBMSCustStatus">
                                                                                                                            <apex:facet name="start">Requesting... <img src="/img/loading.gif" /></apex:facet>
                                                                                                                            <apex:facet name="stop"><apex:commandButton value="Select" styleclass="CMI-primary-button" action="{!selectedCustDetails}" reRender="BMSCustomerSearch,bmsCustScreen,pgUIpnl"/></apex:facet>                                                                                
                                                                                                                        </apex:actionStatus>

                                                                                                                    </div>
                                                                                                                    <table class="CMI-HomeTableMobile">
                                                                                                                        <tr>
                                                                                                                            <th>sel</th>
                                                                                                                            <td><input type="checkbox"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>country</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>zipcode</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>customer name</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>customer code</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>address</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>city</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                    </table>        
                                                                                                                </div>
                                                                                                                <div class="clearfix"></div>


                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <!--</div>-->
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </apex:outputPanel>

                                                                                    </apex:outputPanel>
                                                                                    <!--BMS Popup End -->
                                                                                    <!-- story 86427 customer/company popup end -->
                                                                                    <!-- story 86427 Contact Look up Popup Start -->
                                                                                    <!---- BMS Contact Lookup Popup--->
                                                                                    <apex:outputPanel id="BMSContactSearch">                                                                                                
                                                                                        <apex:outputPanel id="BMSContactSearchInnerPnl1" styleClass="popupAttachBg"  layout="block" rendered="{!BMSContactSearchPopup}" >
                                                                                            <div class="holder">     
                                                                                                <div id="popup2" class="popup"> 
                                                                                                    <apex:outputPanel styleClass="srtPopupAttach">

                                                                                                        <div class="cmi_cu-popupwidth">
                                                                                                            <div class="modal-content">
                                                                                                                <!-- Modal Header -->
                                                                                                                <div class="modal-header cmi_modal-header">
                                                                                                                    <apex:commandButton title="Close the popup" html-data-dismiss="modal" action="{!closeBMSContDetails}" styleClass="cross_butten" reRender="BMSContactSearch" oncomplete="return false;"/>
                                                                                                                    <p style="margin-top:8px color:white">
                                                                                                                        <font color="white">
                                                                                                                            <b> Customer Contact Lookup/Selection</b>
                                                                                                                        </font>
                                                                                                                    </p>
                                                                                                                </div>

                                                                                                                <!-- Modal Body -->

                                                                                                                <div class="modal-body"> 

                                                                                                                    <div class="row" style="max-height:400px;overflow:auto;">
                                                                                                                        <div class="col-md-12">
                                                                                                                            <table class="table cmi_customerpopup" id="contentsContainerContact">                                                                           

                                                                                                                                <thead>
                                                                                                                                    <tr>
                                                                                                                                        <th class="no-sort">Sel</th> 
                                                                                                                                        <th>FirstName </th>
                                                                                                                                        <th>LastName </th>
                                                                                                                                        <th>Phone number </th>
                                                                                                                                    </tr>
                                                                                                                                </thead>
                                                                                                                                <tbody>
                                                                                                                                    <apex:repeat value="{!CustomerContactDetails.DataArea}" var="cont" rows="999">
                                                                                                                                        <tr>                                                                                 
                                                                                                                                            <td>


                                                                                                                                        <input type="radio" id="{!cont.ContactID}" name="myChk"  onclick="callBMSCont('{!cont.ContactID}');"/>                                                                                           



                                                                                                                                            </td>
                                                                                                                                            <td>{!cont.FirstName}</td>
                                                                                                                                            <td>{!cont.LastName}</td>
                                                                                                                                            <td>{!cont.PhoneAreaCode}-{!cont.PhoneNumber}</td>
                                                                                                                                        </tr>        
                                                                                                                                    </apex:repeat> 

                                                                                                                                </tbody>
                                                                                                                            </table>

                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <apex:outputText value="{!bmsContacterrorMessage}" rendered="{!contactshowOutageError}" escape="false"/>
                                                                                                                    <!--        </form> -->
                                                                                                                    <apex:actionFunction name="callBMSCont" action="{!selectedBMSCustCode}" reRender="none" status="callBMSContactStatus">
                                                                                                                        <apex:param name="BMSContId" value="BMSContId" assignTo="{!selectedContactID}">
                                                                                                                        </apex:param>
                                                                                                                    </apex:actionFunction>
                                                                                                                    <div align="center">
                                                                                                                        <apex:actionStatus startText="requesting..." id="callBMSContactStatus">
                                                                                                                            <apex:facet name="start">Requesting... <img src="/img/loading.gif" /></apex:facet>
                                                                                                                            <apex:facet name="stop"><apex:commandButton value="Select" styleclass="CMI-primary-button" action="{!selectedContactDetails}" reRender="BMSCustomerSearch,bmsCustScreen"/></apex:facet>                                                                                
                                                                                                                        </apex:actionStatus>

                                                                                                                    </div>
                                                                                                                    <table class="CMI-HomeTableMobile">
                                                                                                                        <tr>
                                                                                                                            <th>sel</th>
                                                                                                                            <td><input type="checkbox"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>FirstName</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>LastName</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <th>Phone Number</th>
                                                                                                                            <td><input type="text"/></td>
                                                                                                                        </tr>

                                                                                                                    </table>        
                                                                                                                </div>
                                                                                                                <div class="clearfix"></div>


                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <!--</div>-->
                                                                                                    </apex:outputPanel>
                                                                                                </div>
                                                                                            </div>
                                                                                        </apex:outputPanel>

                                                                                    </apex:outputPanel>
                                                                                    <!--BMS Contact Lookup Popup End -->
                                                                                    <!-- story 86427 Contact Look up Popup End -->
                                                                                </apex:outputPanel>
                                                                                </apex:actionRegion>

                                                                            </div>
                                                                            <br/>
                                                                            <hr/>

                                                                            <div class="row" >
                                                                                <div class="col-md-2" ></div>
                                                                                <div class="col-md-4 col-xs-5">                                   
                                                                                    <apex:commandButton value="{!$Label.css_save_btn}" action="{!pgCustSave}" styleClass="saveButton" rerender="tndrevjob"/>
                                                                                </div>
                                                                                <div class="col-md-4 col-xs-5">
                                                                                    <apex:commandButton value="{!$Label.css_Reset}" onclick="this.form.reset();   return false;" styleClass="cancelButton" rerender="pgCustpnl,pgUIpnl"/>
                                                                                </div>
                                                                                <div class="col-md-2 "></div>
                                                                            </div>       


                                                                        </fieldset>
                                                                    </apex:outputpanel> </apex:actionRegion>
                                                                    <!---       </apex:form> --->

                                                                    <!-- Unit Engine -->
                                                                    <!---     <apex:Form >    --->
                                                                     <apex:actionRegion >
                                                                    <apex:outputpanel id="pgUIpnl" rendered="true">
                                                                        <fieldset class="cmi_field_set">
                                                                            <legend class="fs_legend">{!$Label.Unit_amp_Engine}&nbsp;&nbsp; </legend>
                                                                            <div class="form-horizontal" role="form">
                                                                                <!--  <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.css_Product_Serial_Number}</label>
<div class="col-sm-6 col-xs-12 ">
<apex:outputField value="{!workJob.ESN__c}" styleClass="css_ipfiel_size" id="ESN"> 
<a data-target="#ueESNQMarkPopup" data-toggle="modal" ><span class="cmi_intake_help" /></a> 
<apex:actionSupport event="onchange" action="{!startRequest}" status="updating_esn_status1" rerender="pgUIpnl,servModelPopup,servModelPopup1" immediate="false"/> 
</apex:outputField>
&nbsp;
<apex:outputLabel rendered="{!reqESNBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}</apex:outputLabel>

</div> -->
                                                                                <!----story code 63538 fix starts------->
                                                                                <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                    <!-- <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.ESN__c.Label}" /> -->
                                                                                    <apex:outputLabel value="{!$Label.css_Product_Serial_Number}" />
                                                                                </div>
                                                                                <div class="col-sm-6 col-xs-12 ">
                                                                                    <!-- Sai : Added rendered condition for ESN and action support for inputfield -->
                                                                                    <apex:inputField value="{!workJob.ESN__c}" styleClass="css_ipfiel_size" rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}" id="cust155">                                                                                                                                                            
                                                                                        <apex:actionSupport event="onchange" action="{!startRequestBMS}" status="updating_esn_status" rerender="tndpages:TnDRjfrm:PSNErrFlag,tndpages:TnDRjfrm:SPDataWebserviceResult,pgUIpnl,servModelPopup,servModelPopup1,Displayappcodeerror,psnerrflag,tndpages:TnDRjfrm:FieldActionWebServiceResult" immediate="false"/>
                                                                                        <a data-target="#ueESNQMarkPopup" data-toggle="modal" ><span class="cmi_intake_help" /></a> 
                                                                                    </apex:inputField>

                                                                                    <apex:actionStatus startText="(fetching additional values...)" id="updating_esn_status"/>
                                                                                    <apex:outputField value="{!workJob.ESN__c}" styleClass="css_ipfiel_size" rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}" id="ESN"> 

                                                                                        <apex:actionSupport event="onchange" action="{!startRequestBMS}" status="updating_esn_status1" rerender="pgUIpnl,servModelPopup,servModelPopup1,Displayappcodeerror" immediate="false"/> 
                                                                                        <a data-target="#ueESNQMarkPopup" data-toggle="modal" ><span class="cmi_intake_help" /></a>
                                                                                    </apex:outputField>
                                                                                    &nbsp;
                                                                                    <apex:outputLabel rendered="{!reqESNBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}</apex:outputLabel>
                                                                                    <font color="red">                                                                                      
                                                                                        <apex:outputLabel value="{!errorMessage}" rendered="{!showOutageError}" />  
                                                                                        <!--added for ROD Defect 111715 & 111716 by Venkat -->
                                                                                        <apex:outputLabel value="{!$Label.CSS_Recon_Engine}" rendered="{!showOutageError1}" />
                                                                                    </font>
                                                                                    <apex:outputPanel rendered="{!IF(bmsEnabled=true,true,false)}">
                                                                                        <font color="red">
                                                                                            <!--<apex:outputLabel value="{!$Label.CSS_UnitOutbound_NoData}" rendered="{!Contains(workJob.BMSStatus__c,'UI0') && !IF(workJob.Unit_Number__c != null,true,false)}"/>-->
                                                                                            <apex:outputLabel value="{!$Label.CSS_UnitOutbound_NoData}" rendered="{!IF(NoUnitNumberResponse==true && workJob.Unit_Number__c == null, true, false)}"/>
                                                                                        </font>
                                                                                    </apex:outputPanel>
                                                                                </div> 
                                                                                <!----story code 63538 fix ends------->
                                                                                <div class="clearfix"></div>
                                                                                <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}">
                                                                                    <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                        <!--<apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Unit_Number__c.Label}" />-->
                                                                                        <apex:outputLabel value="{!$Label.CSS_Unit_Number}" /> <div class="cmi_asterisk">*</div>                                                                                           
                                                                                    </div>
                                                                                    <!-- 94341 spyGlass START CODE  -->
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:inputField value="{!workJob.Unit_Number__c}" id="UnitNum" />&nbsp;
                                                                                        <apex:actionStatus startText="requesting..." id="updateBMSUnitnESNDetails">
                                                                                            <apex:facet name="start">Requesting... <img src="/img/loading.gif"/></apex:facet>
                                                                                            <apex:facet name="stop"></apex:facet>
                                                                                        </apex:actionStatus>
                                                                                        <apex:outputPanel rendered="{!IF(workjob.Customer_Code__c != '' && workjob.Customer_Code__c != null ,true,false )}">
                                                                                            <apex:commandLink action="{!getBMSUnitDetailsfromUnitNumber}" oncomplete="showUnitModalPop();" styleclass="searchheaderteal" id="unitLookupSearchglass" status="update_unit_lookup"/>
                                                                                            <apex:actionStatus startText="(fetching additional values...)" onstart="DisableUnitLookup()" onstop="DisableStopUnitLookup()" id="update_unit_lookup"/>
                                                                                            <apex:actionFunction name="rerenderUnitDetails" reRender="modCont" status="rerenderUnitDetailsStatus"/>
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel rendered="{!IF(workjob.Customer_Code__c != '' && workjob.Customer_Code__c != null ,false,true )}">
                                                                                            <span  id="spyGlassunitnum" class="searchheaderDisabled"/> 
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                    <!--94341 END CODE  -->
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel rendered="{!IF(bmsEnabled==false, true,false)}">
                                                                                    <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                        <!--<apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Unit_Number__c.Label}" />-->
                                                                                        <apex:outputLabel value="{!$Label.CSS_Unit_Number}" />                                                                                            
                                                                                    </div>
                                                                                </apex:outputPanel> 
                                                                                <div class="col-sm-8 col-xs-12">
                                                                                    <apex:outputPanel rendered="{!IF(bmsEnabled==false, true,false)}">
                                                                                        <apex:inputField value="{!workJob.Unit_Number__c}" styleClass="css_ipfiel_size" />
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}">
                                                                                        <!--     <apex:inputField value="{!workJob.Unit_Number__c}" styleClass="css_ipfiel_size" rendered="{!IF(isUnitInboundStatusEnabled==false, true, false)}" id="cust3">
<apex:actionSupport event="OnChange" reRender="pgUIpnl" immediate="true"/>
</apex:inputField> -->
                                                                                        <apex:outputText value="{!workJob.Unit_Number__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isUnitInboundStatusEnabled==true, true, false)}" id="cust4"/>

                                                                                    </apex:outputPanel>
                                                                                    <apex:outputLabel rendered="{!reqUNumBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}</apex:outputLabel>
                                                                                </div>

                                                                                <div class="clearfix"></div>

                                                                                <!----story code 63538 fix starts------->
                                                                                <!-- <label for="" class="col-sm-4 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Application__c.Label}<div class="cmi_asterisk">*</div></label>-->
                                                                                <label for="" class="col-sm-4 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Application_Desc__c.Label}<span class="cmi_asterisk">*</span></label> 
                                                                               
                                                                                <div class="col-sm-8 col-xs-12">
                                                                                    <apex:actionFunction name="callmarketappcode" action="{!updateproductappcode}" reRender="Displayappcodeerror,MakeModelPanelBMSId" status="Actstatusidkk"></apex:actionFunction>
                                                                                    <!--<apex:inputField value="{!workJob.Application__c}" styleClass="css_ipfiel_size" rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}" id="cust1087"/>-->
                                                                                    <apex:selectList value="{!filterApplication}" size="1" styleClass="css_ipfiel_size" rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}"  id="cust1087" onchange="callmarketappcode();"  >
                                                                                        <!--apex:actionSupport event="onchange" reRender="MakeModelPanelBMSId" /-->
                                                                                        <apex:selectOptions value="{!Application}"></apex:selectOptions>
                                                                                    </apex:selectList>
                                                                                     <apex:actionStatus id="Actstatusidkk">
                                                                                        <apex:facet name="start">
                                                                                            <img src = "/img/loading.gif"/>
                                                                                        </apex:facet>
                                                                                </apex:actionStatus>
                                                                              <apex:outputText value="{!workJob.Application_Desc__c}" styleClass="css_ipfiel_size"  rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}" id="cust207"/>   
                                                                              <apex:outputPanel id="Displayappcodeerror" >
                                                                                 <apex:outputLabel rendered="{!IF(prodcodeErrormessage == true || workJob.ProductAppcodeErrorflag__c == true,true,false)}" style="color:red"> <b>{!$Label.CSS_Application_code_Error_flag} </b> </apex:outputLabel>
                                                                                 </apex:outputPanel> 
                                                                                 
                                                                                <!--<apex:outputText value="{!workJob.Application__c}" styleClass="css_ipfiel_size"  rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}" id="cust207"/>-->
                                                                               <!-- <apex:outputText value="{!workJob.Application_Desc__c}" styleClass="css_ipfiel_size"  rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}" id="cust207"/>-->
                                                                                <apex:outputLabel rendered="{!reqAppBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                            </div>
                                                                               
                                                                               <!--siva ganesh added for story GSSC-55-->
                
                                                                          <div class="clearfix"></div>
                                                                          <div class="col-sm-4 cmi-tar">
                                                                                <label for="">{!$ObjectType.CSS_Job_Order__c.fields.License_Plate__c.Label}</label>
                                                                          </div>
                                                                           <div class="col-sm-8 col-xs-12 ">
                                                                               <!--apex:outputText value="{!mainContr.workJob.License_Plate__c}"/-->
                                                                               <apex:selectList value="{!licensePlate}" size="1">
                                                                                <apex:selectOptions value="{!licensePlateList}"></apex:selectOptions>
                                                                              </apex:selectList>
                                                                              </div>
 
                                                                            <!--siva ganesh end -->
                                                                               
                                                                            <!----story code 63538 fix ends------->


                                                                            <div class="clearfix"></div>
                                                                            <div class="col-sm-4 cmi-tar">
                                                                                <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Service_Model__c.Label}" />
                                                                            </div>
                                                                                <div class="col-sm-8 col-xs-12 ">
                                                                                    <apex:OutputField value="{!workJob.Service_Model__c}" styleClass="css_ipfiel_size" /> &nbsp;
                                                                                </div>
                                                                                <div class="clearfix"></div>
                                                                                <div class="col-sm-4 cmi-tar" id="Model">
                                                                                    <label for="">{!$ObjectType.CSS_Job_Order__c.fields.Make__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                </div>
                                                                                <apex:outputPanel id="MakeModelPanelBMSId" >
                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                        <apex:selectList value="{!filterMake}"  size="1" rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}">
                                                                                            <apex:actionSupport action="{!searchConfigUnit}" event="onchange" reRender="abc1,abc2"/>
                                                                                            <apex:selectOptions value="{!Make}"></apex:selectOptions>
                                                                                        </apex:selectList> 
                                                                                        <apex:outputText value="{!workJob.Make__c}" styleClass="css_ipfiel_size"  rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}"/> 
                                                                                        <apex:outputLabel rendered="{!reqMakeBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                    </div>
                                                                                    <div class="clearfix"></div>
                                                                                    <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                        <label for="">{!$ObjectType.CSS_Job_Order__c.fields.Model__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                    </div>
                                                                                    <apex:outputPanel id="abc1" >
                                                                                        <div class="col-sm-8 col-xs-12">
                                                                                            <apex:selectList value="{!filterModel}" size="1" rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}">
                                                                                                <apex:actionSupport action="{!searchConfigUnit}" event="onchange" reRender="abc2"/>
                                                                                                <apex:selectOptions value="{!Model}"></apex:selectOptions>
                                                                                            </apex:selectList> 
                                                                                            <apex:outputText value="{!workJob.Model__c}" styleClass="css_ipfiel_size"  rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}"/>
                                                                                            <apex:outputLabel rendered="{!reqMdlBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <!-- added for story 106354 start -->
                                                                                <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}">

                                                                                    <div class="clearfix"></div>

                                                                                    <div class="col-sm-4 cmi-tar" style="word-wrap: break-word;">
                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Unit_Type__c.Label}" />
                                                                                    </div>

                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <!--<apex:selectList value="{!filterUnitType}"  size="1">
<apex:selectOptions value="{!UnitType}"></apex:selectOptions>
</apex:selectList>
<apex:outputLabel rendered="{!reqUTBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>-->
                                                                                        <apex:outputPanel id="abc2" >
                                                                                            <apex:outputPanel rendered="{!IF((filterMake != '' && filterModel != ''),true,false)}">
                                                                                                <apex:outputText value="{!workJob.Unit_Type__c}"/>
                                                                                            </apex:outputPanel>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <!-- added for story 106354 end -->
                                                                                <div class="clearfix"></div>

                                                                                <div class="col-sm-4 cmi-tar">
                                                                                    <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.VIN__c.Label} " />
                                                                                </div>
                                                                                <apex:outputPanel rendered="{!IF(workJob.VIN_Flag__c == false, true,false)}"> 
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:OutputField value="{!workJob.VIN__c}" styleClass="css_ipfiel_size" /> &nbsp;
                                                                                    </div>
                                                                                </apex:outputPanel>                                                                                        
                                                                                <apex:outputPanel rendered="{!IF(workJob.VIN_Flag__c == true, true,false)}"> 
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:inputText value="{!workJob.VIN__c}" styleClass="css_ipfiel_size" maxlength="30"/> &nbsp;
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <div class="clearfix"></div>
                                                                                <apex:outputPanel id="WarDt">
                                                                                    <div class="col-sm-4 cmi-tar">
                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Warranty_Start_Date__c.Label} " />
                                                                                        <apex:outputPanel rendered="{!IF((workJob.Warranty_Start_Date__c == null && workJob.Before_In_Service__c==false && workJob.ESN__c == '')|| (workJob.ESN__c != '' && workJob.Before_In_Service__c==false), true,false)}">
                                                                                            <div class="cmi_asterisk">*</div>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                    <!------Stroy77328 Start----->
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <apex:outputPanel rendered="{!IF((workJob.Warranty_Start_Date__c == null && workJob.ESN__c != '' && ReadonlyWSD== false && workJob.Before_In_Service__c==false)|| higherdateErrFlag== true || (workJob.Warranty_Start_Date__c != null && workJob.Warranty_Start_Date__c > TODAY()),true,false)}" id="repairWarranty">
                                                                                        <div class="input-group date" id="warrantyDate" data-provide="datepicker" data-date-format="{!datebyLocaleValue}">
                                                                                            
                                                                                                <apex:inputField value="{!workJob.Warranty_Start_Date__c}" styleClass="css_ipfiel_size" showDatePicker="false" onchange="CompareDatesfun(this.value)" html-placeholder="mm/dd/yyyy"> &nbsp;
                                                                                                    <div class="input-group-addon" style="width:100px; border: 0px; background: none;">
                                                                                                        <span class="calendar"></span> 
                                                                                                    </div>
                                                                                                </apex:inputField>
                                                                                        </div>
                                                                                            </apex:outputPanel>
                                                                                        <!----Story 14884 start--->
                                                                                        <apex:actionFunction name="CompareDatesfun" action="{!CompareDates}" reRender="repairWarranty,DateErr,readOnlyBIS,InputBIS,BISChk">
                                                                                            <apex:param name="WarrantyDate" value="" assignTo="{!warrantyDate}"></apex:param>
                                                                                        </apex:actionFunction>
                                                                                        <!-- <b><apex:outputText value="{!$Label.CSS_Failure_Date_cannot_be_greater_than_today}" rendered="{!higherdateErrFlag}" style="color: red ; display: block;"/></b> -->
                                                                                        <!----Story 14884 end--->
                                                                                        <apex:outputField value="{!workJob.Warranty_Start_Date__c}" id="readOnlyWSD" rendered="{!IF((workJob.Warranty_Start_Date__c != null  && workJob.Warranty_Start_Date__c <= TODAY()) || ReadonlyWSD==true ||(workJob.Warranty_Start_Date__c == null && workJob.ESN__c != '' && ReadonlyWSD== false && workJob.Before_In_Service__c==true),true,false)}" styleClass="css_ipfiel_size"/> &nbsp;
                                                                                        <apex:outputPanel id="DateErr">
                                                                                            <b><apex:outputText value="{!$Label.CSS_Warranty_Start_Date_should_be_less_than_or_equal_to_current_date}" rendered="{!IF(higherdateErrFlag==true || (workJob.Warranty_Start_Date__c != null && workJob.Warranty_Start_Date__c > TODAY()),true,false)}" style="color: red ; display: block;" /></b>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <!------Stroy77328 Start----->
                                                                                <div class="clearfix"></div>
                                                                                <apex:actionFunction name="QMark3" action="{!showPopup7}" reRender="failDateqmarkpopup"/> 
                                                                                <div class="clearfix"></div>
                                                                                
                                                                                <apex:outputPanel id="BISChk">
                                                                                    <div class="col-sm-4 cmi-tar" style="word-wrap: break-word;">
                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Before_In_Service__c.Label}" />
                                                                                    </div>
                                                                                    <div class="col-sm-2 col-xs-12 ">
                                                                                        <apex:outputPanel id="readOnlyBIS" rendered="{!IF(workJob.Warranty_Start_Date__c!= null || ReadonlyBIS==true || workJob.ESN__c ==null,true,false)}">
                                                                                            <apex:outputField value="{!workJob.Before_In_Service__c}" styleClass="css_ipfiel_size"/> &nbsp;
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel id="InputBIS" rendered="{!IF(workJob.Warranty_Start_Date__c==null && ReadonlyBIS==false && workJob.ESN__c!=null,true,false)}">
                                                                                            <apex:InputCheckbox value="{!workJob.Before_In_Service__c}" style="width:16px;margin-bottom:19px;" styleClass="css_ipfiel_size" id="bisChkbx"><!--</apex:InputCheckbox> onclick="disableWSD(this.value);">  rendered="{!IF(mainContr.workJob.Warranty_Start_Date__c == NULL , true, false)} "/> -->&nbsp;
                                                                                            <apex:actionSupport event="onchange" action="{!onChangeBIS}" reRender="WarDt,repairWarranty,readOnlyWSD"/>
                                                                                           </apex:InputCheckbox>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                
                                                                                <div class="clearfix"></div>
                                                                                <div class="col-sm-4 cmi-tar">
                                                                                    <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.Failure_Date__c.Label}" />
                                                                                </div>
                                                                                <div class="col-sm-8 col-xs-12 ">
                                                                                    <!--  <div class="input-group date" id="failureDate" data-provide="datepicker">  -->
                                                                                    <!----<input type='text' class="form-control cmi-cal"/>---->
                                                                                    <!--<apex:inputField value="{!workJob.Failure_Date__c}" styleclass="form-control cmi-cal css_ipfiel_size" showDatePicker="false" /> &nbsp;-->
                                                                                    <!--Rupesh 147384-->
                                                                             <apex:outputPanel id="checkFailureDateerror">  
                                                                                    <div class="input-group date" id="failureDate" data-provide="datepicker" data-date-format="{!datebyLocaleValue}">   
                                                                                        
                                                                          <apex:inputField value="{!workJob.Failure_Date__c}" styleClass="{!IF((faildtwsdtflag||faildtshdtflag),'showRedBorder','')}" showDatePicker="false" rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}" id="cust7">
                                                                                    <apex:actionSupport event="onchange" action="{!getCampaignDetails}" status="updating_esn_status" rerender="checkFailureDateerror,tndpages:TnDRjfrm:SPDataWebserviceResult,pgUIpnl"/>

                                                                                  </apex:inputField> 
                                                                                       <apex:outputPanel rendered="{!IF(workJob.ESN_Locked__c= false,IF(isReadUser = false,true,false),false)}"> 
                                                                                      <div class="input-group-addon" style="width:100px; border: 0px; background: none;">
                                                                                   <span class="calendar"></span>
                                                                                   <a data-target="#failDateqmarkpopup" data-toggle="modal" ></a>
                                                                               </div>       
                                                                                        </apex:outputPanel>
                                                                                       </div>    
                                                                                                                                               
                                                                                         
                                                                                        <apex:outputPanel rendered="{!faildtwsdtflag}"  >
                            <span style="color:red"><b>{!$Label.CG_Failure_Date_Validation}</b></span> 
                                                                           </apex:outputPanel> <br></br>    
                                                                                
                                                                            <apex:outputPanel rendered="{!faildtshdtflag}"  >
                                                                                        <span style="color:red"><b>{!$Label.CSS_Failure_Date_should_be_after_the_Ship_Date}&nbsp;&nbsp;  
                                                                                            <!--  <apex:outputtext value="{!workJob.ShipDate__c}"/> -->
                                                                                            <apex:outputText value="{0,date,yyyy/MM/dd}">
                                                                                                <apex:param value="{!workJob.ShipDate__c}" />
                                                                                            </apex:outputText>
                                                                                        </b>
                                                                                        </span>
                        </apex:outputPanel>
                                                                           </apex:outputPanel> 
                                                                                <apex:outputText value="{!FailureDate}" styleClass="css_ipfiel_size" rendered="{!IF(workJob.ESN_Locked__c= true, true, false)}" id="cust8"/>
                                                                                </div>

                                                                                <div class="clearfix"></div>
                                                                                <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                    <apex:outputLabel value="{!$Label.CSS_Product_Mileage_Hours}" />
                                                                                    <!-- <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$Label.css_Mileage} </label> -->
                                                                                </div>
                                                                                <div id="divMileageId" class="col-sm-8 col-xs-12">
                                                                                    <!--<apex:inputField value="{!workJob.Mileage__c}" styleClass="css_ipfiel_size"/> &nbsp;-->
                                                                                    <apex:inputText value="{!workJob.Mileage__c}" styleClass="css_ipfiel_size" maxlength="8" rendered="{!IF(isReadUser==false, true, false)}" id="cust9" onKeyPress="mileagePress(event);"/>
                                                                                    <!-- <apex:outputText value="{!workJob.Mileage__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser==true, true, false)}" id="cust10"/>-->
                                                                                    <apex:outputText value="{0, number, 0}" rendered="{!IF(isReadUser==true, true, false)}" id="cust10"> 
                                                                                        <apex:param value="{!workJob.Mileage__c}" />
                                                                                    </apex:outputText> &nbsp; {!workJob.Mileage_Measure__c}
                                                                                </div>
                                                                                <div class="clearfix"></div>
                                                                                <div class="col-sm-4 cmi-tar"></div>   
                                                                                <div class="col-sm-5 col-xs-5 "> 
                                                                                    <apex:selectRadio layout="lineDirection"  styleClass="cmi-td" value="{!mil_measure}" rendered="{!IF(isReadUser==false, true, false)}">
                                                                                        <apex:selectOptions value="{!items}"/>
                                                                                    </apex:selectRadio> 
                                                                                    <apex:selectRadio layout="lineDirection"  styleClass="cmi-td" value="{!mil_measure}"  disabled="{!IF(isReadUser==true, true, false)}" rendered="{!IF(isReadUser==true, true, false)}">
                                                                                        <apex:selectOptions value="{!items}"/>
                                                                                    </apex:selectRadio> 
                                                                                </div>

                                                                                <div class="clearfix"></div>
                                                                                <div class="clearfix"></div>


                                                                                <div class="clearfix"></div>



                                                                                <div class="clearfix"></div>
                                                                                <!-- <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$Label.CSS_Failure_point} </label> -->
                                                                                <!--  <div class="col-sm-8 col-xs-12 "> -->
                                                                                <!--<apex:inputField value="{!workJob.Failure_Point__c}" styleClass="css_ipfiel_size"/>-->
                                                                                <!--  <apex:inputField value="{!workJob.Failure_Point__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust11"/>
<apex:outputText value="{!workJob.Failure_Point__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser = true, true, false)}" id="cust12"/>
</div> -->
                                                                                <!--  <div class="col-sm-4 cmi-tar"></div>   
<div class="col-sm-5 col-xs-5 "> 
<apex:selectRadio layout="lineDirection"  styleClass="cmi-td" value="{!fail_measure}" rendered="{!IF(isReadUser = false, true, false) }">
<apex:selectOptions value="{!items}"/>
</apex:selectRadio> 
<apex:selectRadio layout="lineDirection"  styleClass="cmi-td" value="{!fail_measure}"  disabled="{!IF(isReadUser = true, true, false) }" rendered="{!IF(isReadUser = true, true, false)}">
<apex:selectOptions value="{!items}"/>
</apex:selectRadio> 

</div> -->                                                                                    <!-----Hours text box added------>      
                                                                                <div class="clearfix"></div>
                                                                                <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                    <apex:outputLabel value="{!$Label.CSS_Product_Hours}" />
                                                                                    <!-- <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$Label.css_Mileage} </label> -->
                                                                                </div>
                                                                                <div id="divHoursId" class="col-sm-8 col-xs-12">

                                                                                    <apex:inputText value="{!workJob.CSS_Hours__c}" styleClass="css_ipfiel_size" maxlength="8" rendered="{!IF(isReadUser==false, true, false)}" id="cust91" onKeyPress="hoursPressBMS(event);"/> <!-- Sai:03/20: Changed the field to Product Hours -->

                                                                                    <apex:outputText value="{0, number, 0}" rendered="{!IF(isReadUser==true, true, false)}" id="cust11"> 
                                                                                        <apex:param value="{!workJob.CSS_Hours__c}" />
                                                                                    </apex:outputText> 
                                                                                </div>
                                                                                <!-----Hours text box added------>
                                                                                <!---------------------Mission Disabling start------------------------------------>
                                                                                <apex:outputPanel rendered="{!IF(isClaimEnabled == true,true,false)}">
                                                                                    <div class="clearfix"></div>

                                                                                    <div class="clearfix"></div>
                                                                                    <div class="col-sm-4 cmi-tar" style="word-wrap: break-word;">
                                                                                        <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.fields.CSS_Mission_Disabling__c.Label}" />
                                                                                    </div>
                                                                                    <div class="col-sm-2 col-xs-12 ">
                                                                                        <apex:outputField value="{!workJob.CSS_Mission_Disabling__c}" styleClass="css_ipfiel_size"/> &nbsp;
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <!---------------------Mission Disabling End-------------------------------------->
                                                                                <div class="clearfix"></div>
                                                                                <div class="clearfix"></div>  
                                                                                <div class="clearfix"></div>
                                                                                <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Warranty_Authorization_Flag__c.Label} </label>
                                                                                <!---Defect 78503 Start---->
                                                                                <div class="col-sm-8 col-xs-12 ">
                                                                                    <apex:OutputText value="{!IF(workJob.Warranty_Authorization_Flag__c == 'Certified', '<font color=green>Certified</font>', IF(workJob.Warranty_Authorization_Flag__c == 'Not Certified', '<font color=red>Not Certified</font>', 'Not Applicable')) }" escape="false" /> &nbsp;
                                                                                        <i class="{!IF(workJob.Warranty_Authorization_Flag__c == 'Certified', 'cmi-icon icon-correct', IF(workJob.Warranty_Authorization_Flag__c == 'Not Certified', 'cmi-icon icon-wrong', ''))}"></i>
                                                                                        <!--defect#77654 -->
                                                                                        <font color="red">
                                                                                            <apex:OutputText value="{!IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'G', $Label.CSS_Warranty_Cert_Msg, IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'Y', $Label.CSS_Warranty_Cert_Msg, IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'R', $Label.CSS_Warranty_NotCert_Msg, ''))) }" escape="false" /> 
                                                                                        </font>
                                                                                    <!--apex:OutputText value="{!IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'G', '<font color=green>Certified</font>', IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'Y', '<font color=green>Certified</font>', IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'R', '<font color=red>Not Certified</font>', 'Not Applicable'))) }" escape="false" /> &nbsp;
                                                                                    <i class="{!IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'G', 'cmi-icon icon-correct', IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'Y', 'cmi-icon icon-correct', IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'R', 'cmi-icon icon-wrong', ''))) }"></i>
                                                                                    <!--defect#77654 -->
                                                                                    <!--font color="red">
                                                                                        <apex:OutputText value="{!IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'G', $Label.CSS_Warranty_Cert_Msg, IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'Y', $Label.CSS_Warranty_Cert_Msg, IF(LEFT(workJob.Warranty_Authorization_Flag__c,1) == 'R', $Label.CSS_Warranty_NotCert_Msg, ''))) }" escape="false" /> 
                                                                                    </font-->
                                                                                </div>
                                                                                <!---Defect 78503 Start---->

                                                                                <div class="clearfix"></div>

                                                                                <div class="col-sm-4 cmi-tar">
                                                                                    <apex:outputLabel value="{!$Label.CSS_Location_Certification}" />
                                                                                </div>
                                                                                <div class="col-sm-8 col-xs-12 ">
                                                                                    <apex:OutputText value="{!IF(workJob.Location_Certification__c == 'Certified', '<font color=green>Certified</font>', IF(workJob.Location_Certification__c == 'NotCert', '<font color=red>Not Certified</font>', IF(workJob.Location_Certification__c == 'NotAppble', 'Not Applicable', ''))) }" escape="false" /> &nbsp;
                                                                                    <i class="{!IF(workJob.Location_Certification__c == 'Certified', 'cmi-icon icon-correct', IF(workJob.Location_Certification__c == 'NotCert', 'cmi-icon icon-wrong', IF(workJob.Location_Certification__c == 'NotAppble', '', ''))) }"></i>
                                                                                </div> 




                                                                                <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}">
                                                                                    <!-- Commented for story 106354 start -->
                                                                                    <!-- <div class="clearfix"></div>

<div class="col-sm-4 cmi-tar" style="word-wrap: break-word;">
<apex:outputLabel value=" {!$Label.css_unit_type}" />
</div>

<div class="col-sm-6 col-xs-12 ">
<apex:selectList value="{!filterUnitType}"  size="1">
<apex:selectOptions value="{!UnitType}"></apex:selectOptions>
</apex:selectList>
<apex:outputLabel rendered="{!reqUTBoolean}" style="color:red"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>
</div>-->
                                                                                    <!-- commented for story 106354 end -->
                                                                                    <div class="clearfix"></div>
                                                                                    <div class="col-sm-4 cmi-tar" style="word-wrap: break-word;">
                                                                                        <apex:outputLabel value=" {!$Label.css_Repair_Location} " />
                                                                                    </div>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <apex:outputField value="{!workJob.Repair_Location__c}"   styleClass="css_ipfiel_size"/> &nbsp;
                                                                                    </div>
                                                                                    <div class="clearfix"></div>
                                                                                    <div class="col-sm-4 cmi-tar" style="word-wrap: break-word;">
                                                                                        <apex:outputLabel value=" {!$Label.Css_Sub_Type} " /><div class="cmi_asterisk">*</div>
                                                                                    </div>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <apex:selectList value="{!filterSubType}"  size="1" styleClass="css_ipfiel_size"><!-- defect fix by venkat -- 133554-->
                                                                                            <apex:selectOptions value="{!SubType}"></apex:selectOptions>
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </apex:outputPanel>


                                                                            </div>

                                                                            <hr/>
                                                                            <div class="row">
                                                                                <div class="col-md-2 " >
                                                                                </div>
                                                                                <div class="col-md-4 col-xs-5" >
                                                                                    <!--apex:actionRegion -->
                                                                                    <apex:commandButton value="{!$Label.css_save_btn}" action="{!pgUISave}" styleClass="saveButton" rerender="tndrevjob"/>
                                                                                    <!--/apex:actionRegion-->
                                                                                </div>
                                                                                <div class="col-md-4 col-xs-5" >
                                                                                    <apex:commandButton value="{!$Label.css_Reset}" onclick="this.form.reset();   return false;" styleClass="cancelButton" rerender="pgUIpnl"/>
                                                                                </div>
                                                                            </div>
                                                                        </fieldset>
                                                                        <!--- Unit Lookup Popup---->
                                                                        <apex:actionRegion >
                                                                        <apex:outputPanel id="UnitLookupSearch">
                                                                            <apex:outputPanel id="BMSUnitSearchInnerPnl2" styleClass="popupAttachBg"  layout="block" rendered="{!UnitLookUpPopup}" >                                    
                                                                                <div class="holder">     
                                                                                    <div id="popup3" class="popup"> 
                                                                                        <apex:outputPanel styleClass="srtPopupAttach" style="top:600px;width:700px;"> 
                                                                                            <div class="cmi_cu-popupwidth1" >
                                                                                                <div class="modal-content">
                                                                                                    <!-- Modal Header -->
                                                                                                    <div class="modal-header cmi_modal-header">
                                                                                                        <apex:commandButton title="Close the popup" html-data-dismiss="modal" action="{!closeBMSUnitDetails}" styleClass="cross_butten"/>
                                                                                                        <p style="margin-top:8px color:white">
                                                                                                            <font color="white">
                                                                                                                <b> {!$Label.css_Unit_Lookup_Selection}</b>
                                                                                                            </font>
                                                                                                        </p>
                                                                                                    </div>

                                                                                                    <!-- Modal Body -->

                                                                                                    <div class="modal-body"> 

                                                                                                        <div class="row" style="max-height:400px;overflow:auto;">
                                                                                                            <div class="col-md-12">
                                                                                                                <table class="table cmi_customerpopup">                                                                           
                                                                                                                    <thead>
                                                                                                                        <tr>
                                                                                                                            <th>Sel</th>
                                                                                                                            <th>{!$Label.css_Unit_Number} </th>

                                                                                                                        </tr>
                                                                                                                    </thead>
                                                                                                                    <tbody>
                                                                                                                        <apex:repeat value="{!UnitOutboundDetails.DataArea}" var="unit">
                                                                                                                            <tr>                                                                                 
                                                                                                                                <td>
                                                                                                                                    <!--<apex:commandLink action="{!selectedCustDetails}" value="Select" status="getCustDetls"> 
<apex:param name="CustomerCode" value="{!cust.CustomerCode}" assignTo="{!selectedCustCode}" />
</apex:commandLink> -->

                                                                                                                                    <!--<apex:actionsupport action="{!selectedBMSCustCode}" event="onclick" rerender=""> -->

                                                                                                                                    <input type="radio" id="{!unit.UnitNumber}" name="myChk"  onclick="callUnitNumber('{!unit.UnitNumber}');"/>                                                                                           

                                                                                                                                    <!--   </apex:actionsupport> -->

                                                                                                                                </td>
                                                                                                                                <td>{!unit.UnitNumber}</td>
                                                                                                                            </tr>        
                                                                                                                        </apex:repeat> 
                                                                                                                    </tbody>
                                                                                                                </table>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <!--        </form> -->
                                                                                                        <apex:actionFunction name="callUnitNumber" action="{!selectedBMSUnitNumber}" reRender="none" status="callBMSUnitStatus">
                                                                                                            <apex:param name="BMSUnitNumber" id="BMSUnitNumber" value="" assignTo="{!selectedUnitNumber}">
                                                                                                            </apex:param>
                                                                                                        </apex:actionFunction>
                                                                                                        <!-- <div align="center">
<apex:commandButton value="Select" styleclass="CMI-primary-button" action="{!selectedUnitDetails}" /><reRender="BMSCustomerSearch,bmsCustScreen"/>      
</div> -->
                                                                                                        <div align="center">
                                                                                                            <apex:actionStatus startText="requesting..." id="callBMSUnitStatus">
                                                                                                                <apex:facet name="start">{!$Label.css_Requesting}... <img src="/img/loading.gif" /></apex:facet>
                                                                                                                <apex:facet name="stop"><apex:commandButton value="Select" styleclass="CMI-primary-button" action="{!selectedUnitDetails}" reRender="pgUIpnl,UnitLookupSearch" /></apex:facet>                                                                                
                                                                                                            </apex:actionStatus>                                                                            

                                                                                                        </div>
                                                                                                        <table class="CMI-HomeTableMobile">
                                                                                                            <tr>
                                                                                                                <th>sel</th>
                                                                                                                <td><input type="checkbox"/></td>
                                                                                                            </tr>
                                                                                                            <tr>
                                                                                                                <th>{!$Label.css_Unit_Number}</th>
                                                                                                                <td><input type="text"/></td>
                                                                                                            </tr>

                                                                                                        </table>        
                                                                                                    </div>
                                                                                                    <div class="clearfix"></div>

                                                                                                    <!-- Modal Footer -->
                                                                                                    <!--
<div class="modal-footer cmi_modal-header">
<form class="form-horizontal" role="form">
<div class="form-group">
<div class="col-sm-2 col-xs-4">
<apex:commandButton action="{!closeBMSCustDetails}" value="select" styleClass="btn-intake btn-intake-footer" style="margin-top: 3px;margin-bottom: -11px;" reRender="BMSCustomerSearch,bmsCustScreen">
</apex:commandButton>
</div>    
</div>
</form>
</div>
-->
                                                                                                </div>
                                                                                            </div>
                                                                                            <!--</div>-->
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                        </apex:actionRegion>
                                                                        <!-- BMS Unit Lookup Pop up End -->

                                                                    </apex:outputpanel> </apex:actionRegion>
                                                                    <!---         </apex:Form>      ---> 

                                                                    <!-- Customer Complaint -->                                                       


                                                                    <!---         <apex:form >   --->
                                                                    <apex:actionRegion >
                                                                    <apex:outputpanel id="pgComppnl" rendered="true">                                                
                                                                        <fieldset class="cmi_field_set">
                                                                            <legend class="fs_legend">{!$Label.CSS_Customer_Complaint} &nbsp;&nbsp;</legend>
                                                                            <div class="form-horizontal" role="form">

                                                                                <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                    <apex:outputLabel value="{!$Label.CSS_general_Symptoms}" />
                                                                                </div>
                                                                                <div class="col-sm-8 col-xs-12" Style="word-break: break-word;">
                                                                                    <!--<apex:inputTextarea styleClass="gsym_Textarea" onkeyup="textCounter(this,'counter',4000);" value="{!workJob.General_Symptoms__c}" />-->
                                                                                    <apex:inputField value="{!workJob.General_Symptoms__c}" styleClass="gsym_Textarea" id="cust13"/>

                                                                                    <!--   <apex:inputField value="{!workJob.General_Symptoms__c}" styleClass="gsym_Textarea" rendered="{!IF(isReadUser = false, true, false) }" id="cust13"/>
<apex:outputText value="{!workJob.General_Symptoms__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser = true, true, false)}" id="cust14"/> -->
                                                                                </div>
                                                                                <div class="row intakerow">
                                                                                    <div class="col-sm-4 col-xs-12 cmi-tar">
                                                                                        &nbsp;
                                                                                    </div>
                                                                                    <!---- test 74278---->

                                                                                    <!---  <div class="col-sm-8 col-xs-12">
{!$Label.css_Remaining_Characters} <input disabled="true"  value ="4000"   id="counter" style="border:none; background: none;" />
</div>---->
                                                                                    <!---- test 74278--->
                                                                                </div>
                                                                                <div class="clearfix"></div>

                                                                                <!--<label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category__c.Label}</label>-->
                                                                                <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category_Desc__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                <div class="col-sm-6 col-xs-12 ">
                                                                                    <!--<apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size"/>-->
                                                                                    <!-- <apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size" id="cust15"/>-->
                                                                                    <apex:selectList value="{!filterCategory}" size="1" styleClass="css_ipfiel_size" id="cust15">
                                                                                        <apex:selectOptions value="{!CategoryList}"></apex:selectOptions>
                                                                                        <apex:actionSupport event="onchange" reRender="opComplaint" />
                                                                                    </apex:selectList>

                                                                                    <!--  <apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust15"/>
<apex:outputText value="{!workJob.Category__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser = true, true, false)}" id="cust16"/> -->
                                                                                    <apex:outputLabel rendered="{!reqCatBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel>
                                                                                </div>

                                                                                <div class="clearfix"></div>
                                                                                <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type__c.Label}<div class="cmi_asterisk">*</div> </label>
                                                                                <div class="col-sm-8 col-xs-12 ">
                                                                                    <!--<apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size"/>-->
                                                                                    <!--<apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size" id="cust17"/>-->
                                                                                    <apex:outputPanel id="opComplaint">
                                                                                        <apex:selectList value="{!filterComplaintType}" size="1" styleClass="css_ipfiel_size" id="cust17">
                                                                                            <apex:selectOptions value="{!ComplaintTypeList}"></apex:selectOptions>
                                                                                        </apex:selectList>
                                                                                    </apex:outputPanel>
                                                                                    <!--  <apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = false, true, false) }" id="cust17"/>
<apex:outputText value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser = true, true, false)}" id="cust18"/> -->
                                                                                    <apex:outputLabel rendered="{!reqComtypBoolean}" style="color:red">{!$Label.css_You_must_enter_value}</apex:outputLabel>
                                                                                </div>
                                                                                <!------Test Begins--->
                                                                                <div class="clearfix"></div>


                                                                                <!--<apex:outputPanel rendered="{!IF(workJob.Category2__c ==null,false,true)}">-->
                                                                                <apex:outputPanel rendered="{!IF(workJob.Category2_Desc__c==null || workJob.Category2_Desc__c=='' || workJob.Category2_Desc__c == '----None----', false,true)}">


                                                                                    <!--<label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category__c.Label}</label>-->
                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category_Desc__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Category2__c}" styleClass="css_ipfiel_size" id="category2"/>-->
                                                                                        <apex:selectList value="{!filterCategory2}" size="1" styleClass="css_ipfiel_size" id="category2">
                                                                                            <apex:selectOptions value="{!CategoryList}"></apex:selectOptions>
                                                                                            <apex:actionSupport event="onchange" reRender="opComplaint2" />
                                                                                        </apex:selectList>
                                                                                        <!--  <apex:inputField value="{!workJob.Category2__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser ==false, true, false) }" id="category2"/>
<apex:outputText value="{!workJob.Category2__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser == true, true, false)}" id="category3"/> -->
                                                                                    </div>

                                                                                    <div class="clearfix"></div>

                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type__c.Label}<div class="cmi_asterisk">*</div> </label>
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Complaint_Type2__c}" styleClass="css_ipfiel_size" id="complaints2"/>-->
                                                                                        <apex:outputPanel id="opComplaint2">
                                                                                            <apex:selectList value="{!filterComplaintType2}" size="1" styleClass="css_ipfiel_size" id="complaints2">
                                                                                                <apex:selectOptions value="{!ComplaintTypeList2}"></apex:selectOptions>
                                                                                            </apex:selectList>
                                                                                        </apex:outputPanel>
                                                                                        <!--   <apex:inputField value="{!workJob.Complaint_Type2__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser ==false, true, false) }" id="complaints2"/>
<apex:outputText value="{!workJob.Complaint_Type2__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser ==true, true, false)}" id="complaints3"/> -->

                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <div class="clearfix"></div>
                                                                                <!--<apex:outputPanel rendered="{!IF(workJob.Category3__c==null, false,true)}">-->
                                                                                <apex:outputPanel rendered="{!IF(workJob.Category3_Desc__c==null || workJob.Category3_Desc__c=='' || workJob.Category3_Desc__c == '----None----', false,true)}">

                                                                                    <!--<label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category__c.Label}</label>-->
                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category_Desc__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Category3__c}" styleClass="css_ipfiel_size" id="category4"/>-->
                                                                                        <apex:selectList value="{!filterCategory3}" size="1" styleClass="css_ipfiel_size" id="category4">
                                                                                            <apex:selectOptions value="{!CategoryList}"></apex:selectOptions>
                                                                                            <apex:actionSupport event="onchange" reRender="opComplaint3" />
                                                                                        </apex:selectList>
                                                                                        <!-- <apex:inputField value="{!workJob.Category3__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == false, true, false) }" id="category4"/>
<apex:outputField value="{!workJob.Category3__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser == true, true, false)}" id="category5"/> -->
                                                                                    </div>

                                                                                    <div class="clearfix"></div>

                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type__c.Label}<div class="cmi_asterisk">*</div> </label>
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Complaint_Type3__c}" styleClass="css_ipfiel_size" id="complaints4"/>-->
                                                                                        <apex:outputPanel id="opComplaint3">
                                                                                            <apex:selectList value="{!filterComplaintType3}" size="1" styleClass="css_ipfiel_size" id="complaints4">
                                                                                                <apex:selectOptions value="{!ComplaintTypeList3}"></apex:selectOptions>
                                                                                            </apex:selectList>
                                                                                        </apex:outputPanel>
                                                                                        <!-- <apex:inputField value="{!workJob.Complaint_Type3__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == false, true, false) }" id="complaints4"/>
<apex:outputField value="{!workJob.Complaint_Type3__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == true, true, false)}" id="complaints5"/> -->

                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <div class="clearfix"></div>
                                                                                <!-- <apex:outputPanel rendered="{!IF(workJob.Category4__c==null, false,true)}">-->
                                                                                <apex:outputPanel rendered="{!IF(workJob.Category4_Desc__c==null || workJob.Category4_Desc__c=='' || workJob.Category4_Desc__c == '----None----', false,true)}">

                                                                                    <!--<label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category__c.Label}</label>-->
                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category_Desc__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <div>
                                                                                            <!-- <apex:inputField value="{!workJob.Category4__c}" styleClass="css_ipfiel_size" id="category6"/>-->
                                                                                            <apex:selectList value="{!filterCategory4}" size="1" styleClass="css_ipfiel_size" id="category6">
                                                                                                <apex:selectOptions value="{!CategoryList}"></apex:selectOptions>
                                                                                                <apex:actionSupport event="onchange" reRender="opComplaint4" />
                                                                                            </apex:selectList>
                                                                                            <!-- <apex:inputField value="{!workJob.Category4__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == false, true, false) }" id="category6"/>
<apex:outputText value="{!workJob.Category4__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser == true, true, false)}" id="category7"/> -->
                                                                                        </div>
                                                                                    </div>

                                                                                    <div class="clearfix"></div>

                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type__c.Label}<div class="cmi_asterisk">*</div> </label>
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Complaint_Type4__c}" styleClass="css_ipfiel_size" id="complaints6"/>-->
                                                                                        <apex:outputPanel id="opComplaint4">
                                                                                            <apex:selectList value="{!filterComplaintType4}" size="1" styleClass="css_ipfiel_size" id="complaints6">
                                                                                                <apex:selectOptions value="{!ComplaintTypeList4}"></apex:selectOptions>
                                                                                            </apex:selectList>
                                                                                        </apex:outputPanel>
                                                                                        <!--  <apex:inputField value="{!workJob.Complaint_Type4__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == false, true, false) }" id="complaints6"/>
<apex:outputText value="{!workJob.Complaint_Type4__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == true, true, false)}" id="complaints7"/> -->

                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <div class="clearfix"></div>
                                                                                <!--  <apex:outputPanel rendered="{!IF(workJob.Category5__c==null, false,true)}">-->
                                                                                <apex:outputPanel rendered="{!IF(workJob.Category5_Desc__c==null || workJob.Category5_Desc__c=='' || workJob.Category5_Desc__c == '----None----', false,true)}">

                                                                                    <!-- <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category__c.Label}</label>-->
                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar"> {!$ObjectType.CSS_Job_Order__c.fields.Category_Desc__c.Label}<div class="cmi_asterisk">*</div></label>
                                                                                    <div class="col-sm-6 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Category__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Category5__c}" styleClass="css_ipfiel_size" id="category8"/>-->
                                                                                        <apex:selectList value="{!filterCategory5}" size="1" styleClass="css_ipfiel_size" id="category8">
                                                                                            <apex:selectOptions value="{!CategoryList}"></apex:selectOptions>
                                                                                            <apex:actionSupport event="onchange" reRender="opComplaint5" />
                                                                                        </apex:selectList>
                                                                                        <!--  <apex:inputField value="{!workJob.Category5__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == false, true, false) }" id="category8"/>
<apex:outputText value="{!workJob.Category5__c}" styleClass="css_ipfiel_size"  rendered="{!IF(isReadUser == true, true, false)}" id="category9"/> -->
                                                                                    </div>

                                                                                    <div class="clearfix"></div>

                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$ObjectType.CSS_Job_Order__c.fields.Complaint_Type__c.Label}<div class="cmi_asterisk">*</div> </label>
                                                                                    <div class="col-sm-8 col-xs-12 ">
                                                                                        <!--<apex:inputField value="{!workJob.Complaint_Type__c}" styleClass="css_ipfiel_size"/>-->
                                                                                        <!-- <apex:inputField value="{!workJob.Complaint_Type5__c}" styleClass="css_ipfiel_size" id="complaints8"/>-->
                                                                                        <apex:outputPanel id="opComplaint5">
                                                                                            <apex:selectList value="{!filterComplaintType5}" size="1" styleClass="css_ipfiel_size" id="complaints8">
                                                                                                <apex:selectOptions value="{!ComplaintTypeList5}"></apex:selectOptions>
                                                                                            </apex:selectList>
                                                                                        </apex:outputPanel>
                                                                                        <!--  <apex:inputField value="{!workJob.Complaint_Type5__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == false, true, false) }" id="complaints8"/>
<apex:outputText value="{!workJob.Complaint_Type5__c}" styleClass="css_ipfiel_size" rendered="{!IF(isReadUser == true, true, false)}" id="complaints9"/> -->

                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <!----- Test Ends----->
                                                                                <div class="clearfix"></div>
                                                                                <div class="col-md-4 col-xs-12 fset-label">
                                                                                    <label for="">{!$ObjectType.CSS_Job_Order__c.fields.Preventive_Maintenance__c.Label}</label>
                                                                                </div>
                                                                                <div class="col-md-8 col-xs-12">
                                                                                    <apex:inputField value="{!workJob.Preventive_Maintenance__c}"  styleClass="css_ipfiel_size" />
                                                                                </div>
                                                                                <div class="clearfix"></div>
                                                                                <div class="col-md-4 col-xs-12 fset-label">
                                                                                    <label for="">{!$ObjectType.CSS_Job_Order__c.fields.Expedited_Service__c.Label}</label>
                                                                                </div>
                                                                                <div class="col-md-8 col-xs-12">
                                                                                    <apex:inputField value="{!workJob.Expedited_Service__c}"  styleClass="css_ipfiel_size" />
                                                                                </div>

                                                                                <hr/>
                                                                                <div class="row" >
                                                                                    <div class="col-md-2 ">
                                                                                    </div>
                                                                                

                                                                                <!-- <apex:outputpanel id="AssignedTopnl3" rendered="{!IF(CONTAINS($Profile.Name,'Writer') || CONTAINS($Profile.Name,'Admin') || CONTAINS($Profile.Name,'Supervisor'), true, false)}"/>  -->
                                                                                
                                                                                <div class="col-md-4 col-xs-5" >
                                                                                    <apex:commandButton value="{!$Label.css_save_btn}" action="{!pgCompSave}" styleClass="saveButton" rerender="intakerj"/>
                                                                                </div>
                                                                                <div class="col-md-4 col-xs-5" >
                                                                                    <apex:commandButton value="{!$Label.css_Reset}" onclick="this.form.reset(); return false;" styleClass="cancelButton" rerender="pgComppnl"/> 
                                                                                </div>
                                                                                </div>
                                                                            </div>                                          
                                                                        </fieldset>
                                                                    </apex:outputpanel>
                                                                    </apex:actionRegion>
                                                                    <!---         </apex:form> --->


                                                                    <!-- Attachements -->
                                                                    <!--       <apex:form > --->
                                                                    <!-- Attachments --> 
                                                                    <apex:actionRegion >
                                                                    <apex:outputpanel id="attachmentpnlB" rendered="true">  
                                                                        <fieldset class="cmi_field_set">
                                                                            <legend class="fs_legend">{!$Label.CSS_Attachments}</legend>
                                                                            <div class="form-horizontal" role="form"> 

                                                                                <label class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Attachments}</label>
                                                                                <div class="col-sm-8 col-xs-12">
                                                                                   <!-- <apex:actionRegion >-->
                                                                                        <a><i class="upload-icon"></i></a> 
                                                                                        <apex:commandLink value="{!$Label.css_Upload}" action="{!showPopup1}" style="text-decoration:underline; margin-left: 5px; font-weight:bold;" rendered="{!IF(workJob.Id!=null, true, false)}"/>    
                                                                                  <!-- </apex:actionRegion> -->
                                                                                </div>

                                                                                <!--Story Number : 78936 Implemented by Ekta  --->
                                                                                <!--INSITE Image links to be visible in the CSS Job User Interface   -->
                                                                                <a id="hhhId" />
                                                                                <apex:inputHidden id="tokenId" value="{!sEncryptToken}"/>
                                                                                <apex:inputHidden id="fileNameId" value="{!sFileName}"/>
                                                                                <apex:inputHidden id="attId" value="{!attachId}"/>
                                                                                <apex:inputHidden id="statusCodeId" value="{!statusCode}"/>
                                                                                <!--<apex:actionRegion >-->
                                                                                <apex:outputPanel rendered="{!IF(workJob.Before_Image__c!=null, true,false)}"> 
                                                                                    <label class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Attachments}</label>
                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                        <apex:commandLink value="{!$ObjectType.CSS_Job_Order__c.fields.Before_Image__c.Label}" onClick="processInsiteBefore();return false;"/>
                                                                                        <apex:actionfunction action="{!getFile}" oncomplete="downloadFile1('{!sEndPoint}','{!sEncryptToken}','{!attachId}')" name="processInsiteBefore" reRender="tokenId,attId,fileNameId,statusCodeId">
                                                                                            <apex:param name="fileName" value="{!workJob.Before_Image__c}"/>
                                                                                            </apex:actionFunction>
                                                                                    </div>
                                                                                    <div class="clearfix"></div>
                                                                                </apex:outputPanel>
                                                                                
                                                                                <apex:outputPanel rendered="{!IF(workJob.After_Image__c!=null, true,false)}">
                                                                                    <label class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Attachments}</label>
                                                                                    <div class="col-sm-8 col-xs-12">
                                                                                        <apex:commandLink value="{!$ObjectType.CSS_Job_Order__c.fields.After_Image__c.Label}" onClick="processInsiteAfter();return false;"/>
                                                                                        <apex:actionfunction action="{!getFile}" oncomplete="downloadFile1('{!sEndPoint}','{!sEncryptToken}','{!attachId}')" name="processInsiteAfter" reRender="tokenId,attId,fileNameId,statusCodeId">
                                                                                            <apex:param name="fileName" value="{!workJob.After_Image__c}"/>
                                                                                            </apex:actionFunction>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                                <!--</apex:actionRegion>-->
                                                                                <!--Story Number : 78936 Implementation end  --->
                                                                                <!--<apex:actionRegion >-->
                                                                                <apex:repeat value="{!jobAttach}" var="atth">
                                                                                    <div class="clearfix"></div>

                                                                                    <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Attachment}</label>
                                                                                    <div class="col-sm-8 col-xs-12"> 

                                                                                        <a href="/servlet/servlet.FileDownload?file={!atth.Id}" target="_blank" style="text-decoration:underline;">
                                                                                            <i class="cmi_upload-document"></i> {!LEFT(atth.Name,40)}
                                                                                        </a> 
                                                                                        <br/>
                                                                                        <apex:outputLabel value="{!atth.Description}" style="word-break:break-word; font-weight: normal"/>
                                                                                       <!-- <apex:actionRegion >-->
                                                                                        <div onclick="abc()" class="pull-right"><i class="cmi_delete-icon"></i>
                                                                                            <apex:commandlink value="{!$Label.CSS_Delete}" action="{!showPopup6}"  style="margin-right: -20px; font-weight:bold ;">
                                                                                                <apex:param name="atthIdParam" value="{!atth.Id}" assignTo="{!atthId}"/>
                                                                                            </apex:commandlink>
                                                                                        </div>
                                                                                       <!-- </apex:actionRegion>-->
                                                                                        <div class="clearfix"></div>  
                                                                                        <!--<apex:actionRegion > -->
                                                                                        <div data-target="#EditPopupNew" data-toggle="modal" class="pull-right" style="font-weight:bold;"><i class="CMI-edit-icon"></i>
                                                                                             
                                                                                            <apex:commandLink value="{!$Label.css_Edit}" action="{!showPopup5}" rerender="EditPopupNew,EPopup" style="font-weight:bold;  text-decoration:underline;" oncomplete="showattacheditPopup();"> 
                                                                                                <apex:param name="atthIdParam" value="{!atth.Id}" assignTo="{!atthId}"/>
                                                                                            </apex:commandLink>
                                                                                             
                                                                                        </div>
                                                                                        
                                                                                        <!--</apex:actionRegion> -->
                                                                                    </div>   </apex:repeat>
                                                                                   <!--</apex:actionRegion>-->
                                                                                    </div>
                                                                                    <div class="modal fade" id="EditPopupNew"  role="dialog">
                    <apex:outputPanel id="EPopup">
                        <div class="modal-dialog">
                            <div class="modal-content"> 
                                <div class="modal-header">  
                                    <Button title="Close the popup" class="cross_butten" data-dismiss="modal" /> 
                                    <!--<h4 class="modal-title" style="color: #FFFFFF;">{!$Label.css_Intake} {!$Label.css_view_History} - {!$Label.css_Cummins_Service_System}</h4>-->
                                    <!--Changed lable as per testing team words(shruti)06-02-2018-> By RAJESH  -->
                                    <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.CSS_Edit_Description} - {!$Label.css_cummins_service_system}</h4>
                                </div>
                                <div class="modal-body">
                                    <!-- <form class="form-horizontal" role="form">   -->
                                    <div class="form-group">
                                        <div class="col-sm-12 col-xs-12">
                                            <!--Changed lable as per testing team words(shruti)06-02-2018 By RAJESH  css_Modify_attachment_for-->
                                            <div>  {!$Label.css_Modify_description_for} - {!atthName} </div>
                                            <!--<div>  {!$Label.css_Modify_attachment_for} - {!atthName} </div> --> 
                                            <!--   <apex:outputLabel value="JOB NOTES " /> -->

                                        </div>
                                    </div>
                                    <!--   </form> -->
                                    <div class="clearfix"></div>
                                    <apex:outputLabel value="{!$Label.css_Description}" for="description"/>
                                    <div class="clearfix"></div>
                                    
                                    <apex:inputtextarea id="edit_desc9_textarea" value="{!description}" rows="2" cols="20" onkeyup="textCounter(this,'edit_desc1',100);"/>
                                    
                                    
                                    <div class="clearfix"></div>
                                    <hr/>
                                    <div>{!$Label.css_Remaining_Characters} <input disabled="true" value ="100" id="edit_desc1" style="border:none; background: none;" /> </div>      


                                    <hr/>
                                    <div class="col-sm-5 col-xs-4 cmi-tar">
                                         
                                        <apex:commandButton value="{!$Label.css_save_btn}" action="{!editAttachment}" styleClass="saveButton"  >
                                            <!--<apex:param name="atthIddesc" value="{!description}" assignTo="{!description}"/>-->
                                            </apex:commandButton>
                                    
                                    </div>
                                    <div class="col-sm-5 col-xs-4 cmi-tar">
                                        
                                        <button type="button" class="cancelButton" data-dismiss="modal">{!$Label.css_Cancel}</button>
                                    
                                    </div> 
                                    <br/></div></div></div>
                    </apex:outputPanel>
                    
                </div>
                                                                            <!-- End - Attachment Records -->                                        
                                                                        </fieldset>
                                                                    </apex:outputpanel>
                                                                    </apex:actionRegion>
                                                                    </div></div></div>

                                                        <!---      </apex:form>  --->
                                                        <!--Fault Code and EDS -->
                                                        <!-- Column 2 -->                           <div class="col-md-6">  
                                                        <!-- Fault Codes Repairs -->                          <div height="100%">

                                                        <apex:outputpanel id="faultcodes4" rendered="true">
                                                            <fieldset class="cmi_field_set">
                                                                 <legend class="fs_legend">{!$Label.css_Fault_Codes_Symptoms_Diagnostic_Solutions_Repairs}</legend>
                                                                <c:CSS_TnDFCSummary jobOrdId="{!workjob.Id}" jobOrdNumb="{!workjob.Name}" TnDFCstatus="{!workjob.Status__c}" isReadUser="{!dsidIndi}" CustName="{!workjob.Customer_Name__c}" TechID="{!workjob.OwnerID}" RedirectPage1="/apex/CSS_JobTnDRj?id={!workJob.Id}&pgflag=rj#accordion1-heading-5" FCOverviewPage="/apex/CSS_JobTnDEds?id={!workJob.Id}" DisplayPrioritized="true" viewMod="shortView"/>  <!-- Sai: 11/22/2016: added TnDFCstatus/isReadUser attribute -->
                                                                <!--  <div class="form-horizontal" role="form"> 
<label for="" class="col-sm-offset-4 col-sm-4 control-label cmi_fcsds-mobile">Diagnose</label>
<label class="col-sm-offset-1 col-sm-3 cmi_fcsds-mobile">Repair</label>

<div class="clearfix"></div>
<div class="col-sm-4 cmi-tar">
<apex:outputLabel value="{!IF(isPrioritized, 'Prioritized ', '')}Fault Codes" /> 
</div>
<div class="col-sm-8 cmi-tar">
<apex:repeat value="{!solList}" var="fC" id="theRepeat1"  rows="5">    
<div class="col-sm-1 col-xs-12">                                                                      
<apex:repeat value="{!fC.faultCode}" var="sList">
<apex:outputText value="{!sList.Name}" id="theValue1" style="align:left; font-weight:bold;"/> <br />
</apex:repeat>
</div>
<div class="col-sm-6 col-xs-12">

<apex:outputPanel rendered="{!IF(fC.verified.size> 0, true, false)}">
{!fC.verified.size} Most Likely the solution
</apex:outputPanel>
<br/>
<apex:outputPanel rendered="{!IF(fC.notVerified.size> 0, true, false)}">
{!fC.notVerified.size} Could Not perform the solution verification
</apex:outputPanel>
<br/>
<apex:outputPanel rendered="{!IF(fC.solutionFound.size> 0, true, false)}">
{!fC.solutionFound.size} Solution Found
</apex:outputPanel>

</div>
<div class="col-sm-4 col-xs-12">
<apex:outputPanel rendered="{!IF(fC.repairFound.size> 0, true, false)}">
{!fC.repairFound.size} Repairs Found
</apex:outputPanel>
</div>
<div class="clearfix"></div>
</apex:repeat>
</div>    
<p for="" class="col-sm-3 control-label cmi_fcsds-mobile"></p>
<p for="" class="col-sm-3 control-label cmi_fcsds-mobile"></p>
<div class="clearfix"></div>
<table class="CMI-HomeTableMobile">
<tbody style="border-bottom: 2px solid #666666;" >
<tr>
<th>Diagnose</th>
<td></td>
</tr>

<tr>
<th>Repair</th>
<td class="even"></td>
</tr>  
</tbody>
</table> -->

                                                                <div class="row intakerow">
                                                                    <div class="col-md-4 col-xs-12 fset-label">
                                                                        <apex:outputLabel value="{!$Label.CSS_DSID}" /> </div>
                                                                    <div class="col-md-8 col-xs-12">
                                                                        <apex:outputText value="{!workjob.DSID__c}" id="dsid"/><br/> <!-- removed DSID : Sai: 75252 -->
                                                                    </div>      
                                                                </div>    

                                                                <div class="clearfix"></div>
                                                                <div class="col-sm-4 cmi-tar">
                                                                    <apex:outputLabel value="{!$Label.CSS_Pulled_From_INSITE}" /> </div>
                                                                <div class="col-sm-8 col-xs-12">
                                                                    <apex:outputText value="{!InsiteTimeStr}" id="theValue7"/><br/>
                                                                </div>                                                                                                                                        

                                                                <div class="clearfix"></div>
                                                                <div class="col-sm-4 cmi-tar">
                                                                    <apex:outputLabel value="{!$Label.CSS_Repairs}" /> </div>
                                                                <div class="col-sm-8 col-xs-12">
                                                                    <apex:outputText value="{!Repair}" id="repair1"/><br/>
                                                                </div>  




                                                            </fieldset>
                                                        </apex:outputpanel> 
                                                        <apex:actionRegion >
                                                        <apex:outputpanel id="DiagSRTpnl1">
                                                            <c:CSS_SRTDiagComp techTimeReadonly="false" decimalDiagTime="{!digTime}" decimalrepTime="{!repTime}" vpageName="TnDRJ" RedirectPage4="/apex/CSS_JobTnDRj?id={!workJob.Id}&pgflag=rj#accordianSRT"/>
                                                            <!--
<div class="form-horizontal" role="form"> 
<label for="" class="col-sm-4 cmi-tar">Diagnose</label>

<div class="col-sm-6"> 00 Hours &nbsp; 00 Minutes </div>
<div class="clearfix"></div>
<div class="col-sm-4 cmi-tar"></div>
<div class="col-sm-8 col-xs-12"><a style="text-decoration:underline"> View SRT Detail </a>  </div> 


</div>
</fieldset>    --->
                                                        </apex:outputpanel>
                                                        </apex:actionRegion>

                                                        <!-- Job Notes -->                                                        
                                                        <apex:actionRegion >
                                                       <fieldset class="cmi_field_set">
                                                            <legend class="fs_legend">{!$Label.CSS_Job_Notes}</legend>
                                                            <apex:outputpanel id="jobnotesNewpnl4" rendered="true"> 
                                                                <c:CSS_NotesCapture compLocation="mainPage" sJobID="{!workjob.Id}" RedirectPage="/apex/CSS_JobTnDRj?id={!workJob.Id}&pgflag=rj#accordianSRT"/> 
                                                            </apex:outputpanel> 
                                                        </fieldset>
                                                        </apex:actionRegion>
                                                        <!---          </apex:form>  --->
                                                        <!-- Audit Trial -->                         <!--       <apex:Form >     --->  
                                                        <apex:outputpanel id="auditpnlC" rendered="true">
                                                            <apex:actionRegion >
                                                                <c:css_vmore_audit jobordID="{!workjob.Id}" /></apex:actionRegion>
                                                        </apex:outputpanel>
                                                        <apex:outputpanel id="formid" rendered="{!IF(workjob.Id!=null, true, false)}">
                                                            <apex:actionRegion >
                                                           <c:CSS_Forms jobordID="{!workjob.Id}" />
                                                           </apex:actionRegion>
                                                        </apex:outputpanel> 
                                                        <!---        </apex:Form> --->
                                                        </div>
                                                        </div>    </div></div>
                                            </div>
                                            <hr/>
                                            <!--Gyan INSERT Code Here --->
                                            <!----campTspTrp code start------------->
                                            <fieldset>
                                                <!-- <div class="">  -->                              
                                                <div class="panel-group cmi_generic-accordion">

                                                    <div class="panel panel-default" id="accordian_resultSummary">
                                                        <div class="panel-heading active">
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordian_resultSummary" data-target="#ResultSummaryAccordian">
                                                                <a class="accordion-toggle">
                                                                   <div class="accordion-title"><span class="glyphicon glyphicon-minus"></span>{!$Label.css_Result_Summary} </div> 
                                                                    
                                                                </a>
                                                            </h4>
                                                        </div>
                                                        <div id="ResultSummaryAccordian" class="panel-collapse collapse in">
                                                            <div class="panel-body" id="accordian_resultSummaryBody">
                                                                <apex:outputpanel id="CTT601" rendered="true">
                                                                    
                                                                    <div class="panel-body">
                                                                      <!--  <div style="margin-top: 50px;">-->
                                                                       <!-- <a href='/apex/CSS_Job_Detail_RO?Id={!JobID}' style="text-decoration:underline" target="_blank"><b>Troubleshooting Audit Trial</b></a>-->
                                                                        <apex:actionRegion >
                                                                        <apex:commandlink value="{!$Label.CSS_Troubleshooting_Audit_Trail}" reRender="out" onclick="myPopup3()" style="text-decoration:underline;font-weight:bold;"/>
                                                                      <!--  </div>-->
                                                                        <c:CSS_TnDFCSummary jobOrdId="{!workjob.Id}" jobOrdNumb="{!workjob.Name}" TnDFCstatus="{!workjob.Status__c}" isReadUser="{!dsidIndi}" CustName="{!workjob.Customer_Name__c}" TechID="{!workjob.OwnerID}" RedirectPage1="/apex/CSS_JobTnDRj?id={!workJob.Id}&pgflag=rj#accordion1-heading-5" FCOverviewPage="/apex/CSS_JobTnDEds?id={!workJob.Id}" DisplayPrioritized="true" viewMod="LongView"/>  
                                                                        </apex:actionRegion>
                                                                            <!--RAJESH Added Code for Document no :93306 -->
                                                                        <!--   <c:CSS_TndRep_FaultCodes jobOrdId="{!workjob.Id}" jobOrdNumb="{!workjob.Name}" CustName="{!workjob.Customer_Name__c}" TechID="{!workjob.OwnerID}" RedirectPage1="/apex/CSS_JobTnDRj?id={!workJob.Id}&pgflag=rj#accordion1-heading-5" FCOverviewPage="/apex/CSS_JobTnDEds?id={!workJob.Id}&rank=0" DisplayPrioritized="false" pgName="REPAIR" dSIDIndicator="{!dsidIndi}"/> -->
                                                                        <!-- Rajesh code end -->
                                                                    </div>  
                                                                </apex:outputpanel>
                                                            </div>                    
                                                        </div>
                                                    </div>   
                                                    <script>

                                                        function myPopup3() {
                                                            window.open( "/apex/CSS_AuditTrailReviewPages?id={!workjob.Id}", "myWindow", "status = 1, height = 600, width = 1200, resizable = 1,scrollbars=yes" );
                                                        }
                                                    </script>
                                                    
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id="accordion1-heading-TRPS">
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordion1-heading-TRPS" data-target="#tndrjcollapseZero">
                                                                <a class="accordion-toggle">
                                                                    <div class="accordion-title"><span class="glyphicon glyphicon-plus"></span>{!$Label.css_Customer_Approved_Completed_Campaigns_TRPS_TSBs}</div> 
                                                                </a>
                                                            </h4>
                                                        </div>
                                                        <div id="tndrjcollapseZero" class="panel-collapse collapse out">
                                                            <div class="panel-body" id="accordion1-body-TRPS">
                                                                <apex:actionRegion >
                                                                <apex:outputpanel id="CTT501" rendered="{!IF(workjob.ESN__c ==null , false , true)}">
                                                                    <!---      <apex:outputpanel id="CTT501" rendered="{!IF(OR(AND(Camps = 0 , Trps = 0),workjob.ESN__c = null),false,true)}"> --->
                                                                    <div class="panel-body">
                                                                        <!--     <div class="col-sm-12 " id="cmi-customer-approve-xs" style="padding: 0 !important;"> -->
                                                                        <div class="col-sm-12" style="padding: 0 !important;">
                                                                            <div class="table-responsive" style="max-height:285px;"> 
                                                                                <table stlye="overflow;">
                                                                                    <tbody>
                                                                                        <apex:outputpanel id="CTTComp11">
                                                                                            <table class="table table-striped table-bordered " style="100%">
                                                                                                <thead>
                                                                                                    <tr>
                                                                                                        <th class="tblhead"><b>{!$Label.css_Activity} </b></th>
                                                                                                        <th class="tblhead"><b>{!$Label.css_Technician} <br/>{!$Label.css_check_if_Reviewed}</b></th>
                                                                                                        <th class="tblhead"><b>{!$Label.css_Technician} <br/> {!$Label.css_check_if_Performed}</b></th>
                                                                                                        <th class="tblhead"><b>{!$Label.css_Required_to} <br/> {!$Label.css_Perform_Review}</b></th>
                                                                                                    </tr>
                                                                                                </thead>
                                                                                                <tbody> 

                                                                                                    <apex:repeat value="{!ALLRecords}" var="CTT1" id="theRepeat143" >
                                                                                                        <apex:outputPanel rendered="{!IF(CTT1.Type__c != 'TSB',true,false)}">

                                                                                                            <tr> 
                                                                                                                <!--<td><b><apex:outputLink value="{!CTT1.URL__c}" target="_blank">{!LEFT(CTT1.Component_Id__c+CTT1.Campaign_Description__c,20)}</apex:outputLink>  </b></td> -->
                                                                                                                <apex:outputPanel id="url" rendered="{!IF(CTT1.URL__c != '' || CTT1.URL__c != null, true, false)}">
                                                                                                                    <td><b>
                                                                                                                        <apex:outputLink value="{!CTT1.URL__c}" target="_blank">{!LEFT(CTT1.Component_Id__c + ' - ' + CTT1.Campaign_Description__c,20)}</apex:outputLink></b></td>
                                                                                                                </apex:outputPanel>
                                                                                                                <apex:outputPanel rendered="{!IF(CTT1.URL__c==null || CTT1.URL__c=='',true,false)}">
                                                                                                                    <td><b>
                                                                                                                        <apex:outputText value="{!LEFT(CTT1.Component_Id__c + ' - ' + CTT1.Campaign_Description__c,20)}"></apex:outputText>  </b></td>
                                                                                                                </apex:outputPanel>

                                                                                                                 <!-- Added Conditions to Grey Out the Select Checkboxes -- KungFu Panda Rajasekhar 174419-->
                                                                                                                <apex:outputPanel rendered="{!IF(workjob.Account__r.isCampTrp__c == 'Y',true,false)}">
                                                                                                                <td><apex:inputCheckbox value="{!CTT1.Performed__c}"/></td>
                                                                                                                   </apex:outputPanel>
                                                                                                                   
                                                                                                                 <apex:outputPanel rendered="{!IF(workjob.Account__r.isCampTrp__c != 'Y',true,false)}">
                                                                                                                <td><apex:inputCheckbox value="{!CTT1.Performed__c}" disabled="true"/></td>
                                                                                                                   </apex:outputPanel>  
                                                                                                                
                                                                                                                <apex:outputPanel rendered="{!IF(workjob.Account__r.isCampTrp__c == 'Y',true,false)}">
                                                                                                                <td><apex:inputCheckbox value="{!CTT1.Reviewed__c}"/>
                                                                                                                    <apex:outputLabel rendered="{!IF((CTT1.Performed_Review__c ==true && CTT1.Reviewed__c == false && contains($Profile.Name,'Technician')) , true , false)}" id="re"><span style="color:red">*{!$Label.Please_write_notes_to_proceed_furture}</span></apex:outputLabel>  
                                                                                                                    <!--  <apex:outputLabel rendered="{!InperformBoolean}" style="color:red"> You must enter value.</apex:outputLabel>
-->                                                                                                                     </td>
                                                                                                                 </apex:outputPanel>
                                                                                                                 
                                                                                                                 <apex:outputPanel rendered="{!IF(workjob.Account__r.isCampTrp__c != 'Y',true,false)}">
                                                                                                                <td><apex:inputCheckbox value="{!CTT1.Reviewed__c}" disabled="true"/>
                                                                                                                  </td>
                                                                                                                  </apex:outputPanel>

                                        
                                                                            <apex:outputPanel rendered="{!IF(workjob.Account__r.isCampTrp__c == 'Y',true,false)}">
                                                                            <td><apex:inputCheckbox value="{!CTT1.Performed_Review__c}" disabled="{!$Setup.css_header_nav__c.CampReviewedRO__c}"/></td>  
                                                                               </apex:outputPanel>
                                                                               
                                                                              <apex:outputPanel rendered="{!IF(workjob.Account__r.isCampTrp__c != 'Y',true,false)}"> 
                                                                                 <td><apex:inputCheckbox value="{!CTT1.Performed_Review__c}" disabled="true"/></td>  
                                                                               </apex:outputPanel>
                                                                                                            </tr>

                                                                                                        </apex:outputPanel>
                                                                                                    </apex:repeat>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </apex:outputpanel>
                                                                                    </tbody>
                                                                                </table>  
                                                                            </div>  
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12 col-xs-12">
                                                                                <H3><b>{!$Label.css_Comments}:</b></H3>
                                                                            </div> 
                                                                            <div class="col-md-12 col-xs-12">
                                                                                <apex:inputTextarea id="description_upla" style="min-height:100px; resize:initial; overflow-x:hidden; overflow-y:scroll;" value="{!comm}" rows="1" cols="20" onkeyup="textCounter(this,'counter_desc1',1000);"/>
                                                                            </div>  
                                                                        </div> 
                                                                        <div class="row">    
                                                                            <div class="col-md-12 ">
                                                                                {!$Label.css_Remaining_Characters} <input  disabled="true" value ="1000"   id="counter_desc1" style="border:none; background:none" /> <br/>
                                                                                <!--   Remaining characters:<span id="count"></span>  -->
                                                                                <br/></div>
                                                                        </div>

                                                                        <div>
                                                                            <apex:repeat value="{!workjob2}" var="wj"> 
                                                                                <div class="col-sm-3  cmi-tar"> 
                                                                                    <apex:outputLabel value="{!wj.CreatedBy.firstname} {!wj.CreatedBy.lastname}  :"/> 
                                                                                </div>
                                                                                <div class="col-sm-9 " style="word-break: break-word;">        
                                                                                    <apex:outputField value="{!wj.body}"/>  <br/><br/>
                                                                                </div>
                                                                            </apex:repeat> 
                                                                        </div>
                                                                        <!--apex:actionRegion-- ><!--GSSC-442-->
                                                                        <div class="col-sm-5 cmi-tar">
                                                                            <!-- <apex:commandButton value="{!$Label.css_save_btn}" action="{!saveCheckBox}" styleClass="saveButton" rerender="tndrevjob" onclick="DisableSaveButton1(this);"/> Old Code-->
                                                                            <apex:commandButton value="{!$Label.css_save_btn}"  action="{!showFieldActionPopup}" styleClass="saveButton" 
                                                                                reRender="DeletePopupTDRJ" status="Actstatusid" oncomplete="showCampaignATCPopup('{!showCampaignPopup}',this);"  onclick="DisableSaveButton1(this);" />
                                                                            <apex:actionStatus id="Actstatusid">
                                                                            <apex:facet name="start">
                                                                                <img src = "/img/loading.gif"/>
                                                                            </apex:facet>
                                                                        </apex:actionStatus>
                                                                        </div>
                                                                        <!--/apex:actionRegion-->
                                                                        <div class="col-sm-3 cmi-tar">
                                                                            <apex:commandButton value="{!$Label.css_Reset}" onclick="this.form.reset(); return false;" styleClass="cancelButton" />
                                                                        </div>
                                                                        <!--   <c:CSS_Cttpage jobSFDCID="{!workJob.ID}" jobSFDCESN="{!workjob.ESN__c}" pgName="Trp"/> -->
                                                                    </div>
                                                                </apex:outputpanel> 
                                                                    
                                                                    
                                                                    
                                                                    <apex:outputPanel id="DeletePopupTDRJ"> 
                                                                            <div class="modal fade" id ="showCampaignPopuponsave" role="dialog">
                                                                                <div class="modal-dialog">
                                                                                    <div class="modal-content">      
                                                                                        <div class="modal-header">
                                                                                             <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.css_cummins_service_system}</h4> 
                                                                                        </div> 
                                                                                        <div class="modal-body">
                                                                                            <form class="form-horizontal" role="form">
                                                                                                <div class="form-group">  
                                                                                                    <div class="clearfix"></div>
                                                                                                    <div class="col-sm-12 col-xs-12">
                                                                                                        <apex:outputPanel rendered="true">
                                                                                                            <b> <font size="2px" weight="bold">{!$Label.CSS_Deselection_of_Field_Action_will_result_in}<br/>
                                                                                                                &nbsp;<br/>
                                                                                                                {!$Label.CSS_Deletion_of_associated_parts} <br/>
                                                                                                                &nbsp;<br/>
                                                                                                                {!$Label.CSS_WS_Global_E006}</font> </b>
                                                                                                        </apex:outputPanel>
                                                                                                    </div>
                                                                                                </div></form>

                                                                                            <hr/>

                                                                                            <div class="clearfix"></div>
                                                                                            <div class="col-sm-5 col-xs-4 cmi-tar">
                                                                                                <apex:commandButton value="{!$Label.css_Yes}" action="{!saveCheckBoxComp_New}" styleClass="saveButton" reRender="DeletePopupTDRJ"/>

                                                                                            </div>
                                                                                            <div class="col-sm-5 col-xs-4 cmi-tar">
                                                                                                 <apex:commandButton value="{!$Label.CSS_No}"  html-data-dismiss="modal" styleClass="cancelButton" reRender="DeletePopupTDRJ" ></apex:commandButton>

                                                                                            </div> 
                                                                                           <hr style="border:0;"/>
                                                                                        </div>   
                                                                                    </div>
                                                                                </div>
                                                                            </div>     
        																</apex:outputPanel> 
                                                                       
                                                                </apex:actionRegion>
                                                               
                                                                <apex:outputPanel id="CTT502" rendered="{!IF(workjob.ESN__c =='', true, false)}">
                                                                    <div class="col-sm-12" height="100%">
                                                                        <apex:outputpanel id="TRP1panel" rendered="{!IF(workjob.ESN__c ==null, true, false)}">         
                                                                            <fieldset style="border: 1px solid grey;">
                                                                                <legend class="fs_legend">{!$Label.CSS_Customer_Approved_CompleteCampaigns_TRPs_TSB}</legend>
                                                                                <div class="row intakerow">
                                                                                    <div class="col-md-12 col-xs-12">
                                                                                        {!$Label.css_Youwillbeableto_view_Customer_Approved_Completed_CampaignsTRPs_TSBs} <b>{!$Label.css_Review_Job_section}</b>.
                                                                                    </div>
                                                                                </div>   
                                                                            </fieldset>
                                                                        </apex:outputpanel>
                                                                    </div>                                            
                                                                </apex:outputPanel> 
                                                            </div>                    
                                                        </div>
                                                    </div>


                                                    <!-- Insert 4 -->
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id="accordion1-heading-1">
                                                            <h4 class="panel-title" data-toggle="collapse" data-parent="#accordion1-heading-1" data-target="#tndrjcollapseOne">
                                                                <a  class="accordion-title" >
                                                                    <div class="accordion-title"><span class="glyphicon glyphicon-plus"></span> {!$Label.css_Available_TSBs} <span class="campaigns-icon-redcircle">{!Tsbs}</span>   </div> 
                                                                </a>
                                                            </h4>
                                                        </div>
                                                        <div id="tndrjcollapseOne" class="panel-collapse collapse out">
                                                            <div class="panel-body" id="accordion1-body-3">
                                                                <apex:outputpanel id="CTT101" rendered="{!IF(workjob.ESN__c ==null , false , true)}">
                                                                    <div class='row'>
                                                                        TSB's 
                                                                        ({!Tsbs} {!$Label.CSS_Available})<br/><br/> 
                                                                        <apex:repeat value="{!lstTSB}" var="fc1" id="TSBList1" >
                                                                            <div>
                                                                                <apex:outputPanel id="url" rendered="{!IF(fc1.URL__c != '' || fc1.URL__c != null, true, false)}">
                                                                                    <td><b>
                                                                                        <apex:outputLink value="{!fc1.URL__c}" target="_blank">"{!(fc1.Doc_Num__c + ' - ' + fc1.Doc_Title__c)}"</apex:outputLink></b></td>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel rendered="{!IF(fc1.URL__c==null || fc1.URL__c=='',true,false)}">
                                                                                    <td><b>
                                                                                        <apex:outputText value="{!LEFT(fc1.Doc_Num__c + ' - ' + fc1.Doc_Title__c,20)}"></apex:outputText>  </b></td>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </apex:repeat>
                                                                        <apex:outputpanel id="idESN5" >

                                                                            <!--     <div class="panel-body">
<apex:repeat value="{!TsbsRecords}" var="fc" id="theRepeata4" >
<apex:outputPanel rendered="{!IF(accountlang.CSS_QsolLanguage__c == fc.Cu_Language__c, true, false)}">
<div>
<apex:outputLink value="{!fc.URL__c}" target="_blank">{!LEFT(fc.Doc_Num__c+fc.Doc_Title__c,255)}</apex:outputLink>
</div>
</apex:outputPanel>
</apex:repeat>   
({!Tsbs} {!$Label.CSS_Available})<br/><br/> 
</div> -->
                                                                        </apex:outputpanel>

                                                                    </div> 
                                                                </apex:outputpanel>   
                                                                <apex:outputPanel id="CTT102" rendered="{!IF(workjob.ESN__c =='', true, false)}">
                                                                    <div class="col-sm-12" height="100%">   
                                                                        <apex:outputpanel id="Camppanel" rendered="{!IF(workjob.ESN__c ==null, true, false)}">         
                                                                            <fieldset style="border: 1px solid grey;">
                                                                               <legend class="fs_legend">{!$Label.css_Campaigns}</legend>
                                                                                <div class="row intakerow">
                                                                                    <div class="col-md-12 col-xs-12">
                                                                                        {!$Label.css_You_will_abletoview_Campaigns_once_you_have_entered_ESN}<b>{!$Label.css_Review_Job_section}</b>.
                                                                                    </div>
                                                                                </div>   
                                                                            </fieldset>
                                                                        </apex:outputpanel>
                                                                    </div>                                            
                                                                </apex:outputPanel>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <!-- Insert 5 -->
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id="accordion1-heading-2">
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordion1-heading-2" data-target="#tndrjcollapseTwo">
                                                                <a class="accordion-toggle">
                                                                    <div class="accordion-title"><span class="glyphicon glyphicon-plus"></span>{!$Label.CSS_Warranty} </div> 
                                                                </a>
                                                            </h4>
                                                        </div>
                                                        <div id="tndrjcollapseTwo" class="panel-collapse collapse out">
                                                            <div class="panel-body" id="accordion1-body-1">
                                                                <c:css_warrantycomp pgName="TND"/>

                                                            </div>                    
                                                        </div>
                                                    </div>

                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" style="background-color:lightgray">
                                                            <h4 class="panel-title">

                                                                <a data-toggle="collapse" data-parent="#accordion" style = " text-decoration: none"> 
                                                                    <i class="fa fa-caret-down fa-lg   pull-left"></i>{!$Label.css_Calibration_Updates}</a>
                                                            </h4>
                                                        </div>
                                                    </div>                                                                           
                                                    <!-- Insert 7 -->
                                                    <!--<div class="panel-group cmi_generic-accordion">-->
                                                    <!--GSSC-442 added Parts accordion-->
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id = 'accordianPART'>
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordionReadOnly" data-target="#collapseSeven">
                                                                <a class="accordion-toggle">
                                                                    <div class="accordion-title"> <span class="glyphicon glyphicon-plus"></span>Job Plan Parts</div> 
                                                                </a>
                                                            </h4>
                                                        </div>
                                                              <div id="collapseSeven" class="panel-collapse collapse out">
                                                            <div class="panel-body">
                                                                <div class="panel-group" id="accordionPART">
                                                                    <apex:outputpanel id="CTT703" >
                                                                        <!--Commenting PartsFRomERP Comp, as its not required as per GSSC-442-->
                                                                       <!-- <div class="">
                                                                            <!----Defect fix Angies list-------------->
                                                                            
                                                                            <!--<c:CG_PartsFromERP JobRecord="{!workJob}"/> <!-- Kalpana Story# 97314-->
                                                                       <!-- </div>-->
                                                                           <!-- </apex:outputPanel>-->
                                                                        <div>
                                                                            <c:css_partslistcomp_RO pgName="ReadOnly"/>
                                                                        </div>
                                                <div>
                                                    <c:CSS_Campaigns jobId="{!workJob.Id}" pgName="ReadOnly"/>
                                                                        </div>
                                                
                                                                           
                                                                <!--</div>-->
                                                                    </apex:outputpanel>   
                                                                    <apex:outputPanel id="CTT7092">
                                                                        <div> 
                                                                           <apex:actionRegion >
                                                                               <c:css_useraddedparts jobId="{!workJob.Id}" jobOrdNumb="{!workJob.Name}" dealerUser="{!isDealer}" pgName="ReadOnly"/>
                                                                               </apex:actionRegion>
                                                                        </div> 
                                                                        <div> 
                                                                           <apex:actionRegion >
                                                    
                                                    <c:Css_OtherClaimables_RO JobOrdId="{!workJob.Id}" id="testingid" JobRecord="{!workJob}"/>
                                                    
                                                </apex:actionRegion>
                                                                        </div> 
                                                                        
                                                                         
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>                 
                                                        </div>
</div> 
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id="accordianSRT">
                                                            <!--<h4 class="panel-title"  data-toggle="collapse" data-parent="#accordion1-heading-5" data-target="#tndrjcollapseFive">-Prabhakar commented-->
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordionSRTs" data-target="#tndrjcollapseFive">
                                                                <a class="accordion-toggle">
                                                                    <div class="accordion-title"> <span class="glyphicon glyphicon-plus"></span>SRT</div> 
                                                                </a>
                                                            </h4>
                                                        </div>
                                                        <div id="tndrjcollapseFive" class="panel-collapse collapse out">
                                                            <div class="panel-body" id="accordion1-body-1">
                                                              <c:CSS_SRT_RO JoId="{!workjob.Id}" RedirectPage1="/apex/CSS_JobTnDTs?id={!workJob.Id}&pgflag=ts" diagind="{!isReadUser}"/>  



                                                                <apex:outputpanel >
                                                                    <div>
                                                                        <c:CSS_ReviewJobFieldActionSRTs_RO />
                                                                    </div>
                                                                </apex:outputpanel>

                                                                <!--  <div class="panel-group cmi_generic-accordion">-->
                                                                      <c:CSS_99TIME_SRT_RO />
                                                                <!-- </div>-->
                                                                <!--Wolverine 97301 end -->
                                                                <!-- #106947 End --> 
                                                                <!--<c:CSS_OverlapSRTcomp /> -->
                                                                <div class="clearfix"></div>
                                                                <div class="col-sm-2">
                                                                <apex:outputLabel value="{!$ObjectType.CSS_Job_Order__c.Fields.Actual_Technician_Time__c.Label}">
                                                               <!-- <apex:outputPanel rendered="{!IF(isClaimEnabled, true,false)}"> -->
                                                               <!--commented as part of story number GSSC-108-->
                                                                          <!-- <apex:outputpanel rendered="{!IF(workjob.Actual_Technician_Time__c == null && ($Setup.css_header_nav__c.RSWButtonEnable__c), true, false)}">
                                                                            <span class="glyphicon-asterisk" style="color:red"></span> </apex:outputpanel>-->
                                                                  <!--  </apex:outputPanel> -->
                                                                </apex:outputLabel>  &nbsp;
                                                                     </div>
                                                                <div class="col-sm-1">
                                                                <apex:inputField value="{!workjob.Actual_Technician_Time__c}" onkeydown="return qtyPressTnDrj(event,this)" style="width:100px;margin:0px -50px;" onkeyup="validateActtt(this)" html-maxlength="5" id="acttt" onkeypress="return blockSpecialCharactersActtt(event,this)" /> 
</div>
                                                                <div class="col-sm-4"> 
                                                                 <!--commented as part of story number GSSC-108-->
                                                                    <!--<apex:outputLabel rendered="{!IF(reqATTBoolean, true, false)}" style="color:red;font-weight:bold;"> {!$Label.css_You_must_enter_value}.</apex:outputLabel>-->
                                                                </div>
                                                                <div class="clearfix"></div>
                                                                <!--  </div>
</apex:outputpanel> -->
                                                            </div>          
                                                        </div>
                                                    </div>
                                                    <!--</div>-->
                                                    <!-- Insert Escalation Accordion -->
                                                    <apex:actionRegion >
                                                    <apex:outputPanel rendered="{!IF(workJob.TSR_EscalateNumber__c != null && workJob.TSR_EscalateNumber__c != '' && workJob.TSR_EscalateNumber__c != 'Error' ,true,false)}">
                                                        <c:CG_Escalate sJobID="{!workjob.Id}" SRNumber="{!workJob.TSR_EscalateNumber__c}"/> 
                                                    </apex:outputPanel> </apex:actionRegion>
                                                    <!-- Insert 8 -->
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id="accordion1-heading-4">
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordion1-heading-4" data-target="#tndrjcollapseFour">
                                                                <a class="accordion-toggle">
                                                                    <div class="accordion-title"> <span class="glyphicon glyphicon-plus"></span>{!$Label.css_JobNotes}</div> 
                                                                </a>

                                                            </h4>
                                                        </div>
                                                        <div id="tndrjcollapseFour" class="panel-collapse collapse out">
                                                            <div class="panel-body" id="accordion1-body-1">
                                                                <apex:actionRegion >
                                                                 <apex:outputpanel id="CTT701">
<div class="panel-body">
                                                                <c:CSS_NotesCapture compLocation="accordion" sJobID="{!workjob.Id}"/>

                                                                 </div>
</apex:outputpanel>
</apex:actionRegion>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- 4C story Start here -->
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading" id="accordion1-heading-7">
                                                            <h4 class="panel-title"  data-toggle="collapse" data-parent="#accordion1-heading-4" data-target="#tndrjcollapseseven">
                                                                <a class="accordion-toggle">
                                                                    <div class="accordion-title"> <span class="glyphicon glyphicon-plus"></span>4C's</div> 
                                                                </a>

                                                            </h4>
                                                        </div>
                                                        <div id="tndrjcollapseseven" class="panel-collapse collapse out">
                                                            <div class="panel-body" id="accordion1-body-1">
                                                                <c:CSS_4C_Comp sJobId="{!workjob.Id}" /> 
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- 4C Story End here -->

                                                    <!--  </div> -->
                                                    <!--  </div> -->
                                                    <!--Insert 1-->

                                                </div>
                                                <!--  </div> -->
                                            </fieldset>
                                            <!--Gyan END Code Here --->

                                            <br/>
                                            <br/>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="pull-left btncrumbslft">
                                                        <ul class="desk-ulist">
                                                            <li>
                                                                &nbsp;
                                                            </li>
                                                            <li>
                                                                <!--Defect fix - 65391 -->
                                                                <apex:commandLink action="{!createDSID}" styleclass="sopen" id="josavebottom2">
                                                                    <span class="chev_ts_img_open"/>
                                                                    <span class="chev_text_open"> {!$Label.css_Troubleshooting} </span>
                                                                </apex:commandLink>
                                                            </li>
                                                            <li>
                                                                &nbsp;
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>

                                                <div class="col-md-6" align="center">
                                                    <!--  <a data-target="#substatuspopup" data-toggle="modal" >  -->
                                                    <!--<apex:commandButton id="SavenAssignButton" value="{!$Label.Save_Send_for_Review}" action="{!validateBeforeSave}" styleClass="saveButton" onclick="DisableSavenSendAssignButton(); return false;" rerender=""/> 
                                                    <apex:actionFunction name="SaveAssignbtn" action="{!validateBeforeSave}" reRender=""/> -->
                                                    <apex:actionRegion >
                                                     <apex:commandButton id="SavenAssignButton" value="{!$Label.Save_Send_for_Review}" action="{!validateBeforeSave}" styleClass="saveButton" onclick="DisableSavenSendAssignButton(); return false;"/> 
                                                    <apex:actionFunction name="SaveAssignbtn" action="{!validateBeforeSave}"/>
                                                    </apex:actionRegion>
                                                    <!-- </a>  -->
                                                </div>
                                                <br/> <div class="clearfix"></div>
                                                <!-- New Buttons -->
                                                <div class="col-xs-12 mob-ulist">
                                                    <apex:commandLink action="/apex/CSS_JobTnDTs?id={!workjob.Id}" value="Back to Troubleshooting" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                    <span class="mob-only"> &nbsp; </span>
                                                </div>
                                                <div class="col-md-2 col-xs-12 mob-ulist">
                                                    <apex:commandLink action="{!pgSave}" value="{!$Label.css_save_btn}" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                    <span class="mob-only"> &nbsp; </span>
                                                </div> 
                                                <apex:actionRegion >
                                                <div class="col-md-2 col-xs-12 mob-ulist">
                                                    <apex:commandLink action="{!showPopup}" rerender="popup" value="{!$Label.css_exit_btn}" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                    <span class="mob-only"> &nbsp; </span>
                                                </div>
                                                
                                                <div class="col-md-2 col-xs-12 mob-ulist">
                                                    <apex:CommandButton action="{!closeSession}"  value="{!$Label.css_save_close_btn}"  styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
                                                    <!--  <apex:commandLink action="{!pgSaveFinish}" value="Job is Finished - Save & Close" styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
<span class="mob-only"> &nbsp; </span>-->
                                                </div>
                                                </apex:actionRegion>
                                                <!-- 82020- Story87378 Reminder when canceling a job - Krishna on 19-06-2017.-->
                                                <!--
<div class="col-md-5 col-xs-12 mob-ulist">
<apex:commandLink action="{!cancel}"  value="{!$Label.css_cancel_btn}" styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
<span class="mob-only"> &nbsp; </span>
</div>
-->
                                                <div class="col-md-5 col-xs-12 mob-ulist">
                                                    <apex:outputPanel rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}">
                                                        <a data-target="#cancelModelPopup" data-toggle="modal" class="btn-intake btn-intake-footer m-btn-width">{!$Label.css_cancel_btn}</a>
                                                        <span class="mob-only"> &nbsp; </span>
                                                    </apex:outputPanel>
                                                </div>
                                                <!-- 82020- Story87378 Reminder when canceling a job - Krishna on 19-06-2017.-->
                                                <!--end of new -->
                                            </div>
                                            <!-- Button -->
                                            <div class="panel-body">
                                                <div class="col-sm-offset-5 col-sm-7">

                                                    <div class="col-md-2 col-xs-12">
                                                        <apex:commandLink action="{!pgSave}" value="{!$Label.css_save_btn}" styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                        <span class="mob-only"> &nbsp; </span>
                                                    </div> 
                                                    <apex:actionRegion >
                                                    <div class="col-sm-2 col-xs-12">
                                                        <apex:commandLink action="{!showPopup}" rerender="popup" value="{!$Label.css_exit_btn} " styleclass="btn-intake btn-intake-footer m-btn-width"/>
                                                        <span class="mob-only"> &nbsp; </span>
                                                    </div> 
                                                    
                                                    <div class="col-sm-6 col-xs-12">
                                                        <apex:CommandButton action="{!closeSession}"  value="{!$Label.css_save_close_btn}"  styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}" />
                                                        <!--   <c:CSS_JobCloseComponent sJobId="{!workjob.Id}"/> 
<apex:commandLink action="{!pgSaveFinish}" value="Job is Finished - Save & Close " styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
<span class="mob-only"> &nbsp; </span> -->
                                                    </div> 
                                                    </apex:actionRegion>
                                                    <!-- 82020- Story87378 Reminder when canceling a job - Krishna on 19-06-2017.-->
                                                    <!--
<div class="col-sm-2 col-xs-12">
<apex:commandLink action="{!cancel}"  value="{!$Label.css_cancel_btn}" styleclass="btn-intake btn-intake-footer m-btn-width" rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}"/>
<span class="mob-only"> &nbsp; </span>
</div>
-->
                                                    <div class="col-sm-2 col-xs-12">
                                                        <apex:outputPanel rendered="{!$Setup.css_header_nav__c.btnJobFinishedCanceled__c}">
                                                            <a data-target="#cancelModelPopup" data-toggle="modal" class="btn-intake btn-intake-footer m-btn-width">{!$Label.css_cancel_btn}</a>
                                                            <span class="mob-only"> &nbsp; </span>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <!-- 82020- Story87378 Reminder when canceling a job - Krishna on 19-06-2017.-->
                                                </div>
                                            </div>
                                            <!-- Button End -->
                                        </div></apex:outputPanel></div>
                                <!-- 82020- Story87378 Reminder when canceling a job ******* START CANCEL - MODEL POPUP **** -->
                                <apex:actionRegion >
                                <apex:outputPanel id="cancelModelPopup">
                                    <div class="modal fade" id="cancelModelPopup"  role="dialog">
                                        <apex:outputPanel id="cancelModeShow" styleClass="popupAttachBg" layout="block">                  
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">  
                                                        <apex:commandButton title="Close the popup" html-data-dismiss="modal" styleClass="cross_butten" onclick="ClearErrorMessage();"/>
                                                        <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.css_cummins_service_system} </h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <b>{!$Label.CSS_Cancel_Popup_Message}</b>
                                                    </div>
                                                    <apex:outputPanel id="msgbody">
                                                        <apex:outputPanel rendered="{!cancelSJWrapperObj1.errorFlag}">
                                                            <div class="modal-body">
                                                                <span id="CancelErrorId"><b><apex:outputText value="{!cancelSJWrapperObj1.errorMessage}" style="color:red;"/></b></span>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <div class="modal-footer">
                                                        <div class="col-sm-8 col-xs-4 cmi-tar"> 
                                                            <apex:commandButton value="{!$Label.CSS_FAQs_Working_A7}" action="{!cancel}" styleClass="saveButton"   status="cancelJobImg" rerender="msgbody,exeReload" oncomplete="redirectPage();"/>

                                                            <apex:actionStatus id="cancelJobImg">
                                                                <apex:facet name="start"><img src="/img/loading.gif" /></apex:facet>
                                                                <apex:facet name="stop"></apex:facet>
                                                            </apex:actionStatus>&nbsp; &nbsp;
                                                            <apex:commandButton value="{!$Label.CSS_No}" html-data-dismiss="modal" styleClass="cancelButton" onclick="ClearErrorMessage();"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                </apex:outputPanel>
                                </apex:actionRegion>
                                <!-- 82020- Story87378 Reminder when canceling a job ******* END CANCEL - MODEL POPUP **** -->
                                <apex:actionRegion >
                                <apex:outputPanel id="popup">
                                    <apex:outputPanel id="popInnerOutputPnl" styleClass="customPopup" layout="block" rendered="{!displayPopUp}">                  
                                        <table style="width:100%" align="centre" background-color="">
                                            <tr>
                                                <td><font face="Helvetica neue" size="5px"> {!$Label.css_cummins_service_system}</font>
                                                    <apex:commandButton image="{!URLFOR($Resource.CSS_Cross_Button)}" title="Close the popup" action="{!closePopup}" styleClass="closeButton" rerender="popup"></apex:commandButton>
                                                </td>
                                            </tr>
                                            <tr><td>  <br/>{!$Label.css_Do_you_want_to_Exit}</td> </tr><br/>
                                            <tr><td> <br/>
                                                <div class="col-md-12" align="center" draggable="false" >

                                                    <apex:commandButton value="{!$Label.CSS_FAQs_Working_A7}" action="{!redirectPopup}" styleClass="saveButton" rerender="popup" />
                                                    <!-- <button type="button" class="cancelButton" data-dismiss="modal">{!$Label.css_Cancel}</button> commented by Rajesh Narra to fix the defect 191735 number --> &nbsp;&nbsp;
                                   <apex:commandButton title="Close the popup" value="{!$Label.css_Cancel}" action="{!closePopup}" styleClass="cancelButton" rerender="popup" />
                                                </div> 
                                                </td></tr>
                                        </table>
                                    </apex:outputPanel> 
                                </apex:outputPanel>
                                </apex:actionRegion>
                                <!-- Sai -->
                            <apex:outputPanel id="uPopup">
                                    <!-- <apex:outputPanel id="popInnerOutputPnl1" styleClass="uploadAttachmentPopupStyle" layout="block" rendered="{!displayPopup1}"> -->                                              
                                    <apex:outputPanel id="popInnerOutputPnl1" styleClass="popupAttachBg" layout="block" rendered="{!displayPopup1}">
                                        <apex:outputPanel styleClass="custPopupAttach" layout="block" rendered="{!displayPopup1}">
                                            <div class="modal-header">  
                                                <apex:commandButton title="Close the popup" action="{!closePopup1}" styleClass="cross_butten" />
                                                <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.CSS_Triage_Diagnosis_Cummins_Service_System}</h4>
                                            </div>

                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title"> 
                                                <apex:outputLabel value="{!$Label.css_File_Select_the_file_you_would_like_to_upload}" for="file_File"/>&nbsp;<span style="font-size:12px;"><b>({!$Label.file_size_must_be_less_than_10_MB})</b></span>
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputFile id="file_File_1" value="{!fileBody}" filename="{!fileName}" onchange="checkFileSize(this);return false;"/>
                                            </div>
                                            <div class="col-md-12 col-xs-12 modal-title" >    
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/> 
                                                 <b><apex:outputText value="{!$Label.Attachment_size_cannot_exceed_10_MB}" id="error12" style="display:none;color: red;font-size: 12px;"></apex:outputText></b> 
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputTextarea id="description_upl1" value="{!description1}" rows="2" cols="20" onkeyup="textCounter(this,'counter_desc1',100);"/>
                                            </div> 
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12"> 
                                                {!$Label.css_Remaining_Characters} <input disabled="true" value ="100"   id="counter_desc1" style="border:none; background:none" />
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">
                                                <apex:outputLabel value="{!$Label.css_File_Select_the_file_you_would_like_to_upload}" for="file_File"/>&nbsp;<span style="font-size:12px;"><b>({!$Label.file_size_must_be_less_than_10_MB})</b></span>
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputFile id="file_File_2" value="{!fileBody2}" filename="{!fileName2}" style="height:30px;" onchange="checkFileSize12(this);return false;"/>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">  
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/> 
                                                <b><apex:outputText value="{!$Label.Attachment_size_cannot_exceed_10_MB}" id="error11" style="display:none;color: red;font-size:12px;"></apex:outputText></b>
                                            </div>
                                            <div class="col-md-12 col-xs-12">  
                                                <apex:inputTextarea id="description_upl2" value="{!description2}" rows="2" cols="20" onkeyup="textCounter(this,'counter_desc2',100);"/>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">  
                                                {!$Label.css_Remaining_Characters} <input disabled="true" value ="100"   id="counter_desc2" style="border:none; background:none"/>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">
                                                <apex:outputLabel value="{!$Label.css_File_Select_the_file_you_would_like_to_upload}" for="file_File"/>&nbsp;<span style="font-size:12px;"><b>({!$Label.file_size_must_be_less_than_10_MB})</b></span>
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputFile id="file_File_3" value="{!fileBody3}" filename="{!fileName3}" style="height:30px;" onchange="checkFileSize13(this);return false;"/>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12 modal-title">    
                                                <apex:outputLabel value="{!$Label.css_Description}" for="description"/> 
                                                <b><apex:outputText value="{!$Label.Attachment_size_cannot_exceed_10_MB}" id="error13" style="display:none;color: red;font-size: 12px;"></apex:outputText></b>  
                                            </div>
                                            <div class="col-md-12 col-xs-12">
                                                <apex:inputTextarea id="description_upl3" value="{!description3}" rows="2" cols="20" onkeyup="textCounter(this,'counter_desc3',100);"/>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-md-12 col-xs-12"> 
                                                {!$Label.css_Remaining_Characters} <input disabled="true" value ="100"  id="counter_desc3" style="border:none; background:none" />
                                            </div>
                                            <div class="clearfix"></div>
                                            <hr/> 
                                            <div style="margin-bottom:15px;">
                                                <div class="col-sm-5 col-xs-4 cmi-tar">    
                                                    <!--<apex:commandButton value="{!$Label.css_save_btn}" action="{!processUpload}" styleClass="saveButton" ></apex:commandButton>-->
                                                    <apex:actionRegion >
                                                    <apex:commandButton value="{!$Label.css_save_btn}" styleClass="saveButton" onclick="return disableButton1();"  id="Attach1" /> <!--Defect fix 61124 --->
                                                    </apex:actionRegion>
                                <apex:commandButton value="{!$Label.css_save_btn}" styleClass="cmi_lighttealbutton"  id="disableAttach1" style="display:none;"/>
                                                </div>
                                                <div class="col-sm-5 col-xs-4 cmi-tar">
                                                    <apex:actionRegion >
                                                    <apex:commandButton value="{!$Label.css_Cancel}" action="{!closePopup1}" styleClass="cancelButton" ></apex:commandButton>
                                                    </apex:actionRegion>
                                                </div>
                                                <br/>
                                            </div>
                                            <!-- <c:css_multi_attach objId="{!$CurrentPage.Parameters.id}"/> -->                                                           
                                        </apex:outputPanel> 
                                    </apex:outputPanel> 
                                </apex:outputPanel>
                                <!--New Code for triage Popup -Start --->
                                <!--   New Code for triage Popup -End-->
                                

                                <apex:outputPanel id="DeletePopupNew">  
                                
                                    <apex:outputPanel id="popInnerOutputPn6" styleClass="DeletepopupStyle" layout="block" rendered="{!displayPopup6}">                     
                                        <div class="modal-header">
                                            <apex:actionRegion >
                                            <apex:commandButton title="Close the popup" action="{!closePopup6}" styleClass="cross_butten" rerender="DeletePopupNew" ></apex:commandButton>  
                                            </apex:actionRegion>
                                            <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.CSS_Triage_Diagnosis_Cummins_Service_System} </h4>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-sm-12 col-xs-12">
                                            <font size="4px" weight="bold">{!$Label.css_Please_confirm_delete}.</font>  
                                            <!--   <apex:outputLabel value="JOB NOTES " /> -->
                                        </div>
                                        <div class="clearfix"></div>
                                        <hr/>
                                        <div class="col-sm-5 col-xs-4 cmi-tar"> 
                                        <apex:actionRegion >
                                            <apex:commandButton value="{!$Label.CSS_Delete}" action="{!delAttachment}" styleClass="saveButton" rerender="DeletePopupNew" onClick="disableDeleteButton();" id="theDeleteButton" />
                                        </apex:actionRegion>
                                        </div>
                                        <div class="col-sm-5 col-xs-4 cmi-tar">
                                            <apex:actionRegion >
                                            <apex:commandButton value="{!$Label.css_Cancel}" action="{!closePopup6}" styleClass="cancelButton" rerender="DeletePopupNew" />
                                        </apex:actionRegion>
                                        </div> 

                                    </apex:outputPanel>
                                    
                                </apex:outputPanel>

                                <!--popup for Service Model Name -->
                                <apex:outputPanel id="servModelPopup">
                                    <apex:outputPanel id="servModelInnerOutputPnl" styleClass="customPopup" layout="block" rendered="{!displaySrvModPopup}">                  
                                        <div class="modal-header">  
                                            <apex:commandButton title="Close the popup" action="{!closeSrvModPopup}" styleClass="cross_butten" rerender="servModelPopup"/>
                                            <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.css_cummins_service_system} </h4>
                                        </div>
                                        <div class="clearfix"></div> 
                                        <div class="modal-body">
                                            <fieldset class="HHP_fieldSet">
                                                <div class="col-sm-2 col-xs-12">
                                                    <div class="css_alert_red" style="zoom:1.95"/> 
                                                </div>
                                                <div class="col-md-10 col-xs-12">
                                                    <b>{!$Label.css_Engine_Serial_Number_ESN_was_not_recognised}.</b><br/>
                                                    <b>{!$Label.css_Please_verify_your_ESN}</b><br/>
                                                    <b>{!$Label.css_If_you_feel_you_have_recieved_this_message}<br/>{!$Label.css_in_error_please_contact_Customer_Support}</b><br/>
                                                </div>
                                            </fieldset>        </div>
                                        <div class="clearfix"></div>
                                        <hr/>
                                        <div class="modal-footer">
                                            <div class="col-sm-7 col-xs-4 cmi-tar"> 
                                                <apex:commandButton value="{!$Label.css_Ok}" action="{!closeSrvModPopup}" styleClass="saveButton" rerender="servModelPopup"/>
                                            </div>
                                        </div>
                                    </apex:outputPanel> 
                                </apex:outputPanel>
                                <!--popup for HHP Engine -->                                 
                                <apex:outputPanel id="servModelPopup1">
                                    <apex:outputPanel id="servModelInnerOutputPnl1" styleClass="customPopup" layout="block" rendered="{!displaySrvModPopup1}">                  
                                        <div class="modal-header">  
                                            <apex:commandButton title="Close the popup" action="{!closeSrvModPopup1}" styleClass="cross_butten" rerender="servModelPopup1"/>
                                            <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.css_cummins_service_system} </h4>
                                        </div>
                                        <div class="clearfix"></div> 
                                        <fieldset style="border: 1px solid grey; height:100%;" id="HHPCer">  
                                            <div class="col-md-12 col-xs-12">
                                                <b>{!$Label.css_Warning_HHP_Certification_needed_to_continue}!</b><br/><br/>
                                                {!$Label.css_A_CSS_job_cannot_be_created_because_the_Engine_Serial_Number_ESN_is_for_a_S} <br/> {!$Label.css_ModelName_that_is_NOT_available_for_accesslevel}.<br/><br/>
                                                {!$Label.css_Click_OK_to_close_the_job}.<br/>
                                                Or <br/> {!$Label.css_Click_Cancel_to_enter_adifferent_ESN}

                                            </div>
                                        </fieldset>
                                        <div class="clearfix"></div>
                                        <hr/>
                                        <div class="col-sm-5 col-xs-4 cmi-tar"> 
                                            <apex:commandButton value="{!$Label.css_Ok}" action="{!pgSaveFinish}" styleClass="saveButton" rerender="servModelPopup1"/>
                                        </div>
                                        <div class="col-sm-5 col-xs-4 cmi-tar"> 
                                            <!--<apex:commandButton value="{!$Label.css_Cancel}" action="{!closeSrvModPopup1}" styleClass="saveButton" oncomplete="clearValue()" rerender="servModelPopup1"/> -->
                                            <apex:commandButton value="{!$Label.css_Cancel}" action="{!closeSrvModPopup1}" styleClass="saveButton" rerender="servModelPopup1"/>
                                        </div>
                                    </apex:outputPanel> 
                                </apex:outputPanel>

                                <!-- 56604  Start Code for Job Closure panel content --->    
                                <apex:actionRegion >
                <apex:outputPanel id="jobClosePanel">
                    <apex:outputPanel id="JobCloseInnerPanel" rendered="{!displayClosePopup}" styleclass="popupAttachBg" layout="block">
                        <apex:outputPanel styleClass="custPopupAttach" layout="block">
                        <div role="dialog">
                            <div class="modal-header">  
                                <apex:commandButton title="Close the popup" action="{!closeSession_close}" styleClass="cross_butten" rerender="jobClosePanel" oncomplete="CloseErrorMessage();"></apex:commandButton>  
                                <h4 class="modal-title" style="color: #FFFFFF;">{!$Label.CSS_Job3} - {!workjob.Customer_Name__c}</h4>
                            </div>
                            <div class="modal-body" style="max-height:500px;overflow:auto;">
                                <!-- Begin Code for Warning Message with CAMPAIGNS, TSB's TRP's incomplete  as-->
                                <apex:outputPanel id="NoCampTSBsTRPs" rendered="{!nocamptsbtrps}">
                                    <div>
                                        {!$Label.css_Please_check_off_required_Campaigns_TRPs_TSBs_or_provide_comments}
                                    </div>
                                </apex:outputPanel>
                                <!-- End Code for Warning Message with CAMPAIGNS, TSB's TRP's incomplete -->
                                
                                <!-- Begin Code for  Job Close with Resolution and Feed Back Fields -->
                                <apex:outputPanel rendered="{!showResolution}">
                                    <apex:pageMessages />
                                    <div>
                                        {!$Label.css_You_are_about_to_close_the_Job}. 
                                    </div><br/>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <b><apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Resolution__c.Label}"/></b>
                                            <apex:selectRadio value="{!workJob.CSS_Resolution__c}" layout="pageDirection">
                                                <apex:selectOptions value="{!resolutionOptions}" />
                                            </apex:selectRadio>
                                            
                                            <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}">
                                                <div class="form-horizontal" role="form">
                                                    <apex:outputPanel rendered="{!IF((workJob.Customer_Code__c==''||workJob.Customer_Code__c==null), true,false)}">
                                                        <label for="" class="col-sm-4 cmi-tar">{!$Label.CSS_Customer_Code}<span class="cmi_asterisk">*</span></label>
                                                        <div class="col-sm-7 col-xs-12 " >
                                                            <apex:InputField value="{!workJob.Customer_Code__c}"></apex:InputField>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!IF((workJob.Unit_Number__c==''||workJob.Unit_Number__c==null), true,false)}">
                                                        <div class="clearfix"></div>
                                                        <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Unit_Num}<span class="cmi_asterisk">*</span></label>
                                                        <div class="col-sm-8 col-xs-12 " >
                                                            <apex:InputField value="{!workJob.Unit_Number__c}"></apex:InputField>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="clearfix"></div>
                                                    <apex:outputPanel rendered="{!IF((workJob.Shop_Work_Order__c==''||workJob.Shop_Work_Order__c==null), true,false)}">
                                                        <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Work_Oder_Num}<span class="cmi_asterisk">*</span></label>
                                                        <div class="col-sm-8 col-xs-12 " >
                                                            <apex:InputField value="{!workJob.Shop_Work_Order__c}" ></apex:InputField> <!--added html-maxlength as 9 for story GSSC-259-->   <!--html-maxlength="9" karthik G commented as part of GSSC-706-->
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="clearfix"></div>                                                            
                                                </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel id="resolutionReqMessage">
                                                <apex:outputPanel rendered="{!showResolutionRequired}"> <!--Rajesh. Fixed as part of defect 179167-->
                                                        <div class="modal-body"> <!--Rajesh. Fixed as part of defect 179167-->
                                                           <span id="resolutionRequired"><b><apex:outputText value="Please select the resolution" style="color:red;"/></b></span> <!--Rajesh. Fixed as part of defect 179167-->
                                                        </div> <!--Rajesh Narra-->
                                               </apex:outputPanel> <!--Rajesh Narra-->
                                              <!-- <apex:outputText rendered="{!requiredBMSMessage}" value="Please add values to the fields" style="color:red; font-weight:bold"/><br/> Rajesh. Fixed as part of defect 179167 -->
                                           </apex:outputPanel>
                                            <!--<apex:outputText rendered="{!requiredBMSMessage}" value="Please add values to the fields" style="color:red; font-weight:bold"/><br/>-- Rajesh. Fixed as part of defect 179167-->
                                            <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Feedback_Comments__c.Label}"/>
                                            <div style="padding-left:15px;border-bottom:1px solid #000000">       
                                                <apex:inputTextarea value="{!workjob.CSS_Feedback_Comments__c}" style="min-height:100px; overflow-x:hidden; overflow-y:scroll; resize: none; border-style: groove;" onkeyup="textCounter(this,'ttocounter',2000);" rows="1" cols="20" />
                                                {!$Label.css_Remaining_Characters} <input type="text" value="2000" readonly="readonly" maxlength="3" size="3"  id="ttocounter" style="border:none;" />    
                                            </div><br/>
                                            <apex:outputPanel id="errmsgbody">
                                                <apex:outputPanel rendered="{!cancelSJWrapperObj1.errorFlag}">
                                                    <div class="modal-body">
                                                       <span id="closeErrorId"><b><apex:outputText value="{!cancelSJWrapperObj1.errorMessage}" style="color:red;"/></b></span>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <div class="row" style="padding-left:15px">
                                                <div class="col-sm-offset-2 col-sm-4 col-xs-12">    
                                                    <apex:commandButton value="{!$Label.css_Close_Job}" action="{!saveAndCloseJob}" styleClass="saveButton"  status="closeJobImg3" rerender="errmsgbody,exeReload,resolutionReqMessage,showResolution" oncomplete="redirectPage();" ></apex:commandbutton><!--Rajesh. Fixed as part of defect 179167 showResolution -->
                                                    <apex:actionStatus id="closeJobImg3">
                                                        <apex:facet name="start"><img src="/img/loading.gif" /></apex:facet>
                                                        <apex:facet name="stop"></apex:facet>
                                                    </apex:actionStatus>
                                                </div>
                                                <div class="col-sm-6 col-xs-12">
                                                    <apex:commandButton value="{!$Label.css_Cancel}" action="{!closeSession_close}" styleClass="cancelButton" rerender="jobClosePanel" oncomplete="CloseErrorMessage();"/><br/>
                                                </div><br/>
                                            </div>
                                            
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!-- End Code for Job Close with Resolution and Feed Back Fields -->
                                
                                <!-- Begin Code for Job Close with Verified Solutions with out Repairs -->
                                <apex:outputPanel id="repairsPan" rendered="{!showRepairs}">
                                    <apex:outputText rendered="{!showRepairErrorMessage}" value="Please select repair response for the below solutions" style="color:red; font-weight:bold"/>
                                    <apex:outputText rendered="{!showRepairRequired}" value="Please select resolution" style="color:red; font-weight:bold"/><!--Rajesh. Fixed as part of defect 179167-->
                                    <div>
                                        {!$Label.css_You_are_about_to_close_the_Job}. 
                                    </div><br/>
                                    <div class="row"><b>{!$Label.css_Please_provide_repair_information_forthe_cases}.</b><br/>
                                        <div class="col-sm-12"><br/>
                                            <apex:selectOptions value="{!responseOptions}"/>
                                            <apex:repeat var="qa" value="{!responseValues}">
                                                {!qa.Case_Name__c} - {!qa.Solution_Title__c}
                                                <apex:selectRadio value="{!qa.Repair_Response__c}" layout="pageDirection">
                                                    <apex:selectOptions value="{!responseOptions}"/>
                                                </apex:selectRadio> 
                                            </apex:repeat>
                                             <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Resolution__c.Label}" rendered="{!showRepairRequired}"/><!-- Rajesh. Fixed as part of defect 179167 showResolutionWithRepair Replaced with showRepairRequired  -->
                                                <apex:selectRadio value="{!workJob.CSS_Resolution__c}" layout="pageDirection" rendered="{!showRepairRequired}"><!-- Rajesh. Fixed as part of defect 179167 showResolutionWithRepair Replaced with showRepairRequired  -->
                                                    <apex:selectOptions value="{!resolutionOptions}" />
                                                </apex:selectRadio> 
                                     <apex:outputPanel rendered="{!IF(bmsEnabled==true, true,false)}">
                                        <div class="form-horizontal" role="form">
                                            <apex:outputPanel rendered="{!IF((workJob.Customer_Code__c==''||workJob.Customer_Code__c==null), true,false)}">
                                            <label for="" class="col-sm-4 cmi-tar">{!$Label.CSS_Customer_Code}<span class="cmi_asterisk">*</span></label> <!-- Rajesh. Fixed as part of defect 179167 ---->
                                            <div class="col-sm-7 col-xs-12" >
                                                <apex:InputField value="{!workJob.Customer_Code__c}"></apex:InputField>
                                            </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!IF((workJob.Unit_Number__c==''||workJob.Unit_Number__c==null), true,false)}">
                                            <div class="clearfix"></div>
                                            <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Unit_Num}<span class="cmi_asterisk">*</span></label>
                                            <div class="col-sm-8 col-xs-12" >
                                                <apex:InputField value="{!workJob.Unit_Number__c}"></apex:InputField>
                                            </div>
                                            </apex:outputPanel>
                                            <div class="clearfix"></div>
                                            <apex:outputPanel rendered="{!IF((workJob.Shop_Work_Order__c==''||workJob.Shop_Work_Order__c==null), true,false)}">
                                            <label for="" class="col-sm-4 col-xs-12 cmi-tar">{!$Label.CSS_Work_Oder_Num}<span class="cmi_asterisk">*</span></label>
                                            <div class="col-sm-8 col-xs-12" >
                                                <apex:InputField value="{!workJob.Shop_Work_Order__c}" ></apex:InputField> <!-- added html-maxlength as 8 for story GSSC-259-->  <!--html-maxlength="9" karthik G commented as part of GSSC-706-->
                                            </div>
                                            </apex:outputPanel>
                                            <div class="clearfix"></div>                                                   
                                        </div>
                                    </apex:outputPanel>
                                                    
                                  <!--  <apex:outputText rendered="{!requiredBMSMessage}" value="Please add values to the fields" style="color:red; font-weight:bold"/><br/> -->
                                    <apex:outputLabel value="{!$objectType.CSS_Job_Order__c.Fields.CSS_Feedback_Comments__c.Label}"/>
                                    <apex:inputTextarea value="{!workjob.CSS_Feedback_Comments__c}" style="min-height:100px; overflow-x:hidden; overflow-y:scroll; resize: none; border-style: groove;" onkeyup="textCounter(this,'txtcounter',2000);" rows="1" cols="20" />
                                    {!$Label.css_Remaining_Characters} <input type="text" value="2000" readonly="readonly" maxlength="3" size="3"  id="txtcounter" style="border:none;" /> 
                                            <apex:outputPanel id="errmsgbody1">
                                                <apex:outputPanel rendered="{!cancelSJWrapperObj1.errorFlag}">
                                                    <div class="modal-body">
                                                       <span id="closeErrorId1"><b><apex:outputText value="{!cancelSJWrapperObj1.errorMessage}" style="color:red;"/></b></span>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <div class="row" style="padding-left:15px">
                                                <div class="col-sm-offset-2 col-sm-4 col-xs-12">    
                                                    <apex:commandButton value="{!$Label.css_Close_Job}" action="{!saveAndCloseJob}" styleClass="saveButton"   status="closeJobImg1" rerender="errmsgbody1,exeReload,repairsPan" oncomplete="redirectPage();"></apex:commandButton> <!--Rajesh Narra -->
                                                    <apex:actionStatus id="closeJobImg1">
                                                        <apex:facet name="start"><img src="/img/loading.gif" /></apex:facet>
                                                        <apex:facet name="stop"></apex:facet>
                                                    </apex:actionStatus>
                                                </div>
                                                <div class="col-sm-6 col-xs-12">
                                                    <apex:commandButton value="{!$Label.css_Cancel}" action="{!closeSession_close}" styleClass="cancelButton" rerender="jobClosePanel"  oncomplete="CloseErrorMessage();"/><br/>
                                                </div><br/>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!-- End Code for Resoluiton inclduing negative repair Reponse -->
                                
                            </div>
                        </div>
                    </apex:outputPanel>
                    </apex:outputPanel>
                </apex:outputPanel>
                </apex:actionRegion> 
                                <!-- 56604  EndCode for Job Closure panel content --->    
                            </div>
                        </div>
                    </div>
                </div>
            </apex:outputpanel>
            <!--   substatus popup  -->

            <apex:outputPanel id="substatuspopup">
                <div class="modal fade" id="subStatusPop" role="dialog"> 
                    <apex:outputPanel id="subStatusShow" styleClass="popupAttachBg" layout="block">                  
                        <apex:outputPanel styleClass="custPopupAttach" style="width:700px;left:45%;">

                            <div class="modal-header">  
                                <!-- <apex:commandButton title="Close the popup" onclick="closeSubStatusPopup()" styleClass="cross_butten" html-data-dismiss="modal"/>
<apex:actionFunction name="closeSSPopup" action="{!closeSubStatusPopup}" reRender=" " />-->
                                <h4 class="modal-title" style="color: #FFFFFF;">Guidanz </h4>
                            </div>
                            <br/>

                            <div class="modal-body">
                                <div class="col-sm-12 col-xs-12">
                                <apex:outputPanel id="errormessage1">
                                <apex:outputPanel rendered="{!IF(substatuscheck == true,true,false)}">
                                  <b>  <apex:outputText value="{!$Label.CG_Please_select_a_value}" style="color:red;font-size:16px;"/> </b>
                                </apex:outputPanel>
                                </apex:outputpanel>
                                </div>
                                <div class="col-sm-12 col-xs-12"><b>
                                    {!$Label.CSS_Please_select_a_Sub_Status_for_CSS_Job} {!workJob.Name}</b>
                                    <br/><br/>
                                    <div class="col-sm-6 col-xs-6">
                                     <!--   <div class="radio">
                                            <label>
                                                <input type="radio" value="none" name="rdoResult" onclick="callSubStatus('none');"/> 
                                                {!$Label.CSS_None}
                                            </label>
                                        </div>-->
                                        <div class="radio">
                                            <label>
                                                <input  type="radio" value="Escalated" name="rdoResult" onclick="callSubStatus('Escalated');" />
                                                {!$Label.CSS_Escalated}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Estimate Needs Update" name="rdoResult" onclick="callSubStatus('Estimate Needs Update');"/>
                                                {!$Label.CSS_Estimate_Needs_Update}
                                            </label>
                                        </div>
                                        <!--<apex:outputPanel rendered="{!IF($Cache.Session.local.CSSPartition.oneBMSSystem == 'One BMS' && ($Profile.Name='CSS_Service_Advanced' || $Profile.Name == 'System Admin' || $Profile.Name == 'System Administrator')|| (contains($Profile.Name,'Dealer')),true,false)}">-->
                                         <!--<apex:outputPanel rendered="{!IF(isClaimEnabled == true,true,false)}"> <!--Sneha commented outputpanel rendered ="{!isclaimenable}" for #GSSC-242--> <!--Karthik G Removed it should work Factory/DISTR claim enabled && (contains($Profile.Name,'Dealer')),true,false-->
                                            <apex:outputPanel rendered="{!IF(Contains($Profile.Name,'Advanced') || Contains($UserRole.Name,'Factory'),true,false)}"> <!--Sneha added outputPanel for GSSC-242 -->
                                            <div class="radio" style="margin-top:-7px;margin-bottom:-6px;">
                                                <label>
                                                    <input type="radio" value="Ready for Claim Creation" name="rdoResult" onclick="callSubStatus('Ready for Claim Creation');"/>
                                                    {!$Label.CSS_Ready_for_Claim_Creation}
                                                </label>
                                            </div>
                                            </apex:outputPanel>
                                        <!--</apex:outputPanel>-->
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Repair Complete" name="rdoResult" onclick="callSubStatus('Repair Complete');"/>
                                                {!$Label.CSS_Repair_Complete}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Repair Scheduled" name="rdoResult" onclick="callSubStatus('Repair Scheduled');"/>
                                                {!$Label.CSS_Repair_Scheduled}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Troubleshooting Complete" name="rdoResult" onclick="callSubStatus('Troubleshooting Complete');"/>
                                                {!$Label.CSS_Troubleshooting_Complete}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Unit/Vehicle on Lot" name="rdoResult" onclick="callSubStatus(' Unit/Vehicle on Lot');"/>
                                                {!$Label.CSS_Unit_Vehicle_on_Lot}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Waiting on Customer" name="rdoResult" onclick="callSubStatus('Waiting on Customer');"/>
                                                {!$Label.CSS_Waiting_on_Customer}
                                            </label>
                                        </div>
                                    </div>

                                    <div class="col-sm-6 col-xs-6">
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Waiting on Factory" name="rdoResult" onclick="callSubStatus('Waiting on Factory');"/>
                                                {!$Label.CSS_Waiting_on_Factory}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Waiting on Estimate/Approval" name="rdoResult" onclick="callSubStatus('Waiting on Estimate/Approval');"/>
                                                {!$Label.CSS_Waiting_on_Estimate_Approval}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Waiting on Parts" name="rdoResult" onclick="callSubStatus('Waiting on Parts');"/>
                                                {!$Label.CSS_Waiting_on_Parts}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Waiting on Tech Availability" name="rdoResult" onclick="callSubStatus(' Waiting on Tech Availability');"/>
                                                {!$Label.CSS_Waiting_on_Tech_Availability}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Waiting on Unit/Vehicle" name="rdoResult" onclick="callSubStatus('Waiting on Unit/Vehicle');"/>
                                                {!$Label.CSS_Waiting_on_Unit_Vehicle}
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="Work in Progress" name="rdoResult" onclick="callSubStatus('Work in Progress');"/>
                                                {!$Label.CSS_Work_in_Progress}
                                            </label>
                                        </div>
                                        <apex:outputPanel rendered="{!IF($Cache.Session.local.CSSPartition.oneBMSSystem == 'BMS Legacy' && ($Profile.Name='CSS_Service_Advanced' || $Profile.Name == 'System Admin' || $Profile.Name == 'System Administrator'),true,false)}">
                                            <div class="radio">
                                                <label>
                                                    <input type="radio" value="Claim in Progress" name="rdoResult" onclick="callSubStatus('Claim in Progress');"/>
                                                    {!$Label.css_Claim_in_Progress}
                                                </label>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>

                           <apex:actionRegion >
                            <apex:actionFunction name="callSubStatus" reRender="none,theRepeat,CampData" status="callSubstatusReq">
                                <apex:param name="subStatus" value="subStatus" assignTo="{!selectedSubStatusVal}"></apex:param>
                            </apex:actionFunction>
                            </apex:actionRegion>


                            <div class="modal-footer" style="margin-top:20px;">
                                <div class="col-sm-12" align="center" draggable="false" >
                                    <!--<apex:commandButton value="Ok" action="{!pgSaveAssign}" styleClass="saveButton" /> -->
                                    <apex:actionStatus startText="requesting..." id="callSubstatusReq">
                                        <apex:facet name="start">Requesting... <img src="/img/loading.gif" /></apex:facet>
                                        <apex:facet name="stop">
                                            <apex:actionRegion >
                                            <apex:commandButton value="Ok" action="{!pgSaveAssign}" styleClass="saveButton" rerender="errormessage1"/>
                                        </apex:actionRegion>
                                        </apex:facet>                                                                                
                                    </apex:actionStatus> 
                                </div> 
                            </div>

                        </apex:outputPanel>
                    </apex:outputPanel> 
                </div>
            </apex:outputPanel>  

            <!-- Substatus popup  --->  

            <!--          <apex:outputPanel id="substatuspopup">
<apex:outputPanel id="substatushow" styleClass="customPopup" layout="block" rendered="{!ShowSubStatuspopup}">                  
<table style="width:100%" align="centre" background-color="">
<div class="modal-header">  
<apex:commandButton title="Close the popup" action="{!closeSubStatusPopup}" styleClass="cross_butten" rerender="substatuspopup"/>
<h4 class="modal-title" style="color: #FFFFFF;">Guidanz </h4>
</div>
<tr><td> <br/>

<div class="form-group">
<div class="col-sm-12 col-xs-12">
<div class="col-sm-11 col-xs-12" style=" text-align: justify;">
<div>
Please select a Sub Status for CSS Job {!workJob.Name}
</div>
<apex:selectRadio value="{!selectedSubStatusVal}" layout="pageDirection" >
<apex:selectOption itemValue="None" itemLabel="None"/>
<apex:selectOption itemValue="Escalated" itemLabel="Escalated"/>
<apex:selectOption itemValue="Estimate Needs Update" itemLabel="Estimate Needs Update"/>
<apex:selectOption itemValue="Repair Complete" itemLabel="Repair Complete"/>
<apex:selectOption itemValue="Troubleshooting Complete" itemLabel="Troubleshooting Complete"/>
<apex:selectOption itemValue="Unit/Vehicle on Lot" itemLabel="Unit/Vehicle on Lot"/>
<apex:selectOption itemValue="Waiting on Customer" itemLabel="Waiting on Customer"/>
<apex:selectOption itemValue="Waiting on Factory" itemLabel="Waiting on Factory"/>
<apex:selectOption itemValue="Waiting on Estimate/Approval" itemLabel="Waiting on Estimate/Approval"/>
<apex:selectOption itemValue="Waiting on Parts" itemLabel="Waiting on Parts"/>
<apex:selectOption itemValue="Waiting on Tech Availability" itemLabel="Waiting on Tech Availability"/>
<apex:selectOption itemValue="Waiting on Unit/Vehicle" itemLabel="Waiting on Unit/Vehicle"/>
<apex:selectOption itemValue="Work in Progress" itemLabel="Work in Progress"/> 
</apex:selectRadio>

</div>  
</div>
</div>

<div class="col-sm-12" align="center" draggable="false" >
<apex:commandButton value="Ok" action="{!pgSaveAssign}" styleClass="saveButton" />
</div> <br/>
</td></tr>
</table>
</apex:outputPanel> 
</apex:outputPanel>  -->

            <!-- Substatus popup  --->
        </div>
        <!-- BMS Unit Lookup Popup for Unit number and ESN Details ----->
        <apex:actionRegion >
        <apex:outputPanel id="AdditionalUnitLookupPopup">

            <div class="modal fade" id="modalUnitlkupPopUp" role="dialog">
                <div class="modal-dialog modal-lg"> 
                    <div class="modal-content">
                        <apex:outputPanel id="modCont" > 
                            <div class="modal-header">  
                                <button title="Close the popup" data-dismiss="modal" class="cross_butten" /> 
                                <h4 class="modal-title" style="color: #FFFFFF;"><b> Unit Lookup/Selection</b></h4>
                            </div>
                            <div class="modal-body modal-lg " style="padding:0px;overflow:auto;height:424px;">
                                <apex:outputPanel id="gsqPopUpId">
                                    <div class="cmi_modal-body-desktop">
                                        <apex:outputPanel rendered="{!IF((UnitOutboundDetails.DataArea == null || UnitOutboundDetails.DataArea.size == 0),true,false)}">
                                            <p style="color:red;text-align:center;"><b>{!$Label.CSS_UnitOutbound_NoData}</b></p>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!IF((UnitOutboundDetails.DataArea != null && UnitOutboundDetails.DataArea.size > 98),true,false)}">
                                            <p style="color:red;text-align:center;"><b>{!$Label.CSS_bmsMoreThan100RecordsError}</b></p>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!IF((UnitOutboundDetails.DataArea !=null && UnitOutboundDetails.DataArea.size > 0),true,false)}">
                                            <table class="table cmi_customerpopup" id="contentsContainerUnitLookup2">                                                                           

                                                <thead>
                                                    <tr>
                                                        <th>Sel</th>
                                                        <th>UnitNumber</th>
                                                        <th>Model</th>
                                                        <th>Make</th>
                                                        <th>PSN</th>

                                                    </tr>
                                                </thead>
                                                <!--<apex:actionStatus startText="requesting..." id="rerenderUnitDetailsStatus">
<apex:facet name="start">Requesting... <img src="/img/loading.gif" /></apex:facet>
<apex:facet name="stop">-->
                                                <tbody>

                                                    <apex:repeat value="{!UnitOutboundDetails.DataArea}" var="unit">
                                                        <tr>   
                                                            <td>
                                                                <!--
<apex:commandLink action="{!selectedCustDetails}" value="Select" status="getCustDetls"> 
<apex:param name="CustomerCode" value="{!cust.CustomerCode}" assignTo="{!selectedCustCode}" />
</apex:commandLink> -->

                                                                <!--<apex:actionsupport action="{!selectedBMSCustCode}" event="onclick" rerender=""> -->

                                                                <input type="radio" id="{!unit.UnitNumber}" name="newUnitChk"  onclick="callNewUnitNumberModal('{!unit.UnitNumber}','{!unit.ESN}');"/>

                                                                <!--   </apex:actionsupport> -->

                                                            </td>
                                                            <td>{!unit.UnitNumber}</td>
                                                            <td>{!unit.Model}</td>
                                                            <td>{!unit.Manufacturer}</td>
                                                            <td>{!unit.ESN}</td>

                                                        </tr>        
                                                    </apex:repeat> 

                                                </tbody>
                                                <!-- </apex:facet>                                                                                
</apex:actionStatus>-->
                                            </table>
                                        </apex:outputPanel>
                                    </div>
                                </apex:outputPanel>
                            </div>
                            <apex:actionFunction name="callNewUnitNumberModal" action="{!selectedBMSUnitNumber}" reRender="none" status="callBMSModalUnitStatus">
                                <apex:param name="NewBMSUnitNumber" id="NewBMSUnitNumber" value="" assignTo="{!selectedUnitNumber}">
                                </apex:param>
                                <apex:param name="NewBMSESN" id="NewBMSESN" value="" assignTo="{!selectedBMSESN}"> 
                                </apex:param>
                            </apex:actionFunction>
                            <div align="center">

                                <apex:actionStatus startText="requesting..." id="callBMSModalUnitStatus">
                                    <apex:facet name="start">Requesting... <img src="/img/loading.gif" /></apex:facet>
                                    <apex:facet name="stop">
                                        <apex:outputPanel rendered="{!IF((UnitOutboundDetails.DataArea != null && UnitOutboundDetails.DataArea.size > 0),true,false)}">
                                            <apex:commandButton value="Select" styleclass="CMI-primary-button" html-data-dismiss="modal" action="{!selectedESNnUnitDetails}" reRender="pgUIpnl,UnitLookupSearch" status="updateBMSUnitnESNDetails"/>
                                        </apex:outputPanel>
                                    </apex:facet>
                                </apex:actionStatus>
                                <apex:outputPanel rendered="{!IF((UnitOutboundDetails.DataArea == null || UnitOutboundDetails.DataArea.size == 0),true,false)}">
                                    <apex:commandButton value="Select" styleclass="cmi_lighttealbutton" html-data-dismiss="modal"/>
                                </apex:outputPanel><br/>
                            </div> 
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
        </apex:outputPanel>
        </apex:actionRegion>
        <!---- Modal Unit Lookup Popup End --->
    
    </apex:form>
</apex:define> 
</div>
<apex:outputPanel id="ueESNQMarkPopup">
<div class="container">  
    <div class="modal fade" id="ueESNQMarkPopup"  role="dialog">
        <div class="modal-dialog">
            <div class="modal-content"> 
                <div class="modal-header">  
                    <Button title="Close the popup" class="cross_butten" data-dismiss="modal" />
                    <h4 class="modal-title" style="color: #FFFFFF;"> {!$Label.css_unit} &amp; {!$Label.css_Engine} - {!$Label.css_cummins_service_system}  </h4>
                </div>
                <div class="modal-body">
                    <!---<form class="form-horizontal" role="form">---> 
                    <div class="form-group">
                        <div class="col-sm-12 col-xs-12">
                            <div class="intake_help1 intake_help-popup"></div>
                            <div class="col-sm-11 col-xs-12" style=" text-align: justify;">
                                <!--<p><b> PSN </b>-->
                                <apex:outputLabel value="{!$Label.css_ue_ESN_popup}" escape="false" style="font-weight: normal;"></apex:outputLabel>
                                <!-- {!$Label.css_ue_ESN_popup}-->

                                <!--{!$Label.css_ue_ESN_popup1}--> 
                                <!--</p>-->
                            </div>
                        </div>
                    </div>
                    <!---</form>---->
                    <div class="clearfix"></div>
                    <hr/>

                    <div class="col-sm-12" align="center" draggable="false" >
                        <button type="button"  class="cancelButton" data-dismiss="modal">{!$Label.css_Ok}</button>

                    </div> <br/>
                    <div class="clearfix"></div>
                    <div class="clearfix"></div>
                </div></div></div></div></div>


</apex:outputPanel> 


<script>
function showUnitModalPop(){
    // $('#modalUnitlkupPopUp').modal('show');
    $('#modalUnitlkupPopUp').modal({backdrop: 'static',
                                    keyboard: false,
                                    show:true});
    rerenderUnitDetails();
    return false;
}
function DisableUnitLookup(){
    document.getElementById("tndpages:TnDRjfrm:unitLookupSearchglass").disabled=true;
}
function DisableStopUnitLookup(){
    document.getElementById("tndpages:TnDRjfrm:unitLookupSearchglass").disabled=false;
}   
function CompareDates(value1){
    //alert('Moulika');
    //alert(value1);
    //var wardate = document.getElementById("reppages:Rjfrm:repairWarranty").value;
    //alert(wardate);
    //CompareDatesfun(wardate);
    CompareDatesfun(value1);
}       
</script>


</apex:page>