!function(){return function t(e,n,a){function s(i,r){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!r&&l)return l(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[i]={exports:{}};e[i][0].call(d.exports,function(t){return s(e[i][1][t]||t)},d,d.exports,t,e,n,a)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)s(a[i]);return s}}()({1:[function(t,e,n){"use strict";var a,s,o={previewOpen:S},i=t("./src/vfr.js"),r=t("./src/dataStore.js"),l=t("./src/form.js"),c=t("./src/section.js"),d=t("./src/validation.js"),u=window.location.pathname,f=sfEnv.originPath=window.location.origin,m=sfEnv.isCommunityUser;if(window.location.search&&window.location.search.indexOf("lwcComPath=")>-1){var p=window.location.search.split("lwcComPath=")[1];p&&p.indexOf("&")>-1&&(p=p.slice(0,p.indexOf("&"))),s=p}if(sfEnv.isLWC&&s)sfEnv.isCommunityUser=m=!0,sfEnv.pathStart=a=s;else if(-1===window.location.host.indexOf(".visual")&&sfEnv.isLightningExp){m=!0;var v=window.location.pathname,h=v.indexOf("/apex/"+sfEnv.namespace+"FormDetail");a=sfEnv.pathStart=v.slice(1,h),sfEnv.isNapili=!0}else if(u.indexOf("apex")>-1)a=sfEnv.pathStart="apex";else{var g=u.slice(1);a=-1===g.indexOf("/")?sfEnv.pathStart="":sfEnv.pathStart=g.slice(0,g.indexOf("/"))}var b="".concat(f).concat(a?"/"+a:""),w=jQuery,y='\n\t<div class="save-button-container">\n\t\t<button type="button" class="slds-button slds-button_inverse" id="cancelBtn">\n\t\t\t'.concat(sfEnv.cancelButtonLbl,'\n\t\t</button>\n\t\t<button class="slds-button slds-button_inverse type="button" id="quickSaver">\n\t\t\t').concat(sfEnv.quickSaveButtonLbl,'\n\t\t</button> \n\t\t\x3c!-- Quick Save button type should override default \'submit\' with \'button\' because quickSave function handles form submission--\x3e\n\t\t<button class="slds-button slds-button_inverse" type="button" id="normalSaver">\n\t\t\t').concat(sfEnv.saveButtonLbl,"\n\t\t</button>\n\t</div>"),k='\n\t<span class="icon-container">\n\t\t<span type="button" id="sf1CancelBtn" class="slds-icon_container slds-icon-action-reject slds-icon_container_circle">\n\t\t\t<svg aria-hidden="true" class="slds-icon slds-icon_small">\n\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(sfEnv.SLDS_PATH+"/assets/icons/action-sprite/svg/symbols.svg#reject",'"></use>\n\t\t\t</svg>\n\t\t</span>\n\t</span>');function x(){w("#fade").hide(),w("#previewStatus").hide(),w(".js-preview-close-btn").hide(),w("#formContent").empty(),w("#formContent").off(),w(".paginationBlock").remove(),c.closeLSCardModal(),window.answerStore={},r.depQuestionLogicStore={},r.hasSignature={},r.questionStore={},r.regExRules=[],r.formRender.allPages=[],r.formRender.currentPage=1,r.formRender.setFormColor=!1,r.formRender.totalPages=0,w("#formContent").removeClass("changed-input"),w("#completeFormPage").off("click",".add-linked-section"),w("#completeFormPage").off("click",".js-add-linked-section-card"),w("#completeFormPage").off("click",".remove-linked-section")}function S(){i._loadPageSuccess(sfEnv.previewForm,{status:!0}),w("#previewStatus").off(),w("#completeFormPage #savingStatus").hide(),w(".js-preview-close-btn").on("click",x)}sfEnv.isPreview||sfEnv.isMobileApp||w(document).ready(function(){var e=sfEnv.isFormDetail,n=t("./src/app.js"),s=t("./src/formDetail"),o=t("./src/util"),i=sfEnv.namespace,r=sfEnv.customCSS;if(e){if(""===sfEnv.thisForm)return;var c=sfEnv.isLWC&&m&&sfEnv.pathStart&&"apex"!==sfEnv.pathStart;w("#cfBtn").on("click",function(){var t=sfEnv.isLWC?"&isLWC=true":"",e=c?"&lwcComPath=".concat(sfEnv.pathStart):"",n="".concat(m?b:sfEnv.isPublicSite?"/".concat(sfEnv.pathStart):"/apex","/").concat(i,"CompleteForm?id=").concat(sfEnv.formId).concat(t).concat(e);s.openLink(n)}),w("#lockBtn").on("click",function(){s.openModal("#lock-confirm-modal")}),w("#makeDiscoveriesBtn").on("click",function(){var t=sfEnv.isLWC?"&isLWC=true":"",e=c?"&lwcComPath=".concat(sfEnv.pathStart):"",n="".concat(m?b:"/apex","/").concat(i,"MakeDiscoveriesPage?id=").concat(sfEnv.formId).concat(t).concat(e);!1===sfEnv.formIsLocked?s.openModal("#md-lock-confirm-modal"):s.openLink(n)}),w("#confirm-lock-modal").on("click",function(){s.modalAction("#lock-confirm-modal",s.lock)}),w("#cancel-lock-modal").on("click",function(){s.modalAction("#lock-confirm-modal")}),w("#md-confirm-lock-modal").on("click",function(){s.modalAction("#md-lock-confirm-modal",s.lockAndDiscover)}),w("#md-cancel-lock-modal").on("click",function(){s.modalAction("#md-lock-confirm-modal")}),w("#moreActionsBtn").on("click",function(){s.toggleMenu("#actionsMenu")}),w("#navigateToBtn").on("click",function(){s.toggleMenu("#navigateToMenu")}),w("#enableMobileBtn").on("click",function(){s.toggleMobileAvailable()}),w("#disableMobileBtn").on("click",function(){s.toggleMobileAvailable()}),w("#deepLinkBtn").on("click",function(){o.openDeepLink(sfEnv.formId)}),s.addNavigateToMenu(),o.updateMobileAvailableActions(),w(".linked-record").on("click",function(){var t=w(this).data("sfid"),e="".concat(m?b:"","/").concat(t);s.returnToRecordPage(t,e)}),w(".return-sf1-forms-list").on("click",function(){s.returnToSF1FormsList(a)}),w("#deleteBtn").on("click",function(){s.openModal("#delete-modal")}),w("#confirm-delete-modal").on("click",function(){s.modalAction("#delete-modal",s.deleteForm)}),w("#cancel-delete-modal").on("click",function(){s.modalAction("#delete-modal")}),w("#publicURLBtn").on("click",function(){s.openModal("#public-url-modal")}),w("#publicURLSelectBtn").on("click",function(){""===w("#retURL").val()?s.showRetURLError():(s.hideRetURLError(),s.populateGeneratedURL(w("#sitesList").val(),w("#retURL").val()))}),w("#confirm-public-url-modal").on("click",function(){s.modalAction("#public-url-modal")});var d=w("#sitesList");sfEnv.forceSites.forEach(function(t){d.append('<option value="'+t.siteURL+'">'+t.site.Name+"</option>")}),w("#copyBtnContainer").on("click",function(){s.copyGeneratedURL()}),w("#archiveBtn").on("click",function(){s.openModal("#archive-modal")}),w("#confirm-archive-modal").on("click",function(){s.modalAction("#archive-modal",s.archiveForm)}),w("#cancel-archive-modal").on("click",function(){s.modalAction("#archive-modal")}),w("#lockArchiveBtn").on("click",function(){s.openModal("#lock-archive-modal")}),w("#confirm-lock-archive-modal").on("click",function(){s.modalAction("#lock-archive-modal",s.archiveForm)}),w("#cancel-lock-archive-modal").on("click",function(){s.modalAction("#lock-archive-modal")}),w("#unarchiveBtn").on("click",function(){s.openModal("#unarchive-modal")}),w("#confirm-unarchive-modal").on("click",function(){s.modalAction("#unarchive-modal",s.unarchiveForm)}),w("#cancel-unarchive-modal").on("click",function(){s.modalAction("#unarchive-modal")}),w("#cloneBtn").on("click",function(){s.openModal("#clone-modal")}),w("#confirm-clone-modal").on("click",function(){s.modalAction("#clone-modal",s.cloneForm)}),w("#cancel-clone-modal").on("click",function(){s.modalAction("#clone-modal")}),w("#editPropertiesBtn").on("click",function(){var t="".concat(m?b:"","/").concat(sfEnv.formId,"/e?nooverride=1&retURL=/").concat(sfEnv.formId);s.openLink(t)}),w("#viewPropertiesBtn").on("click",function(){var t="".concat(m?b:"","/").concat(sfEnv.formId,"?nooverride=1&retURL=/").concat(sfEnv.formId);s.openLink(t)}),w("#sf1-photo-gallery").on("click",function(){var t="".concat(m?b:"/apex","/").concat(i,"sf1photos?id=").concat(sfEnv.formId);s.openLink(t)}),sfEnv.isLWC&&w("#closeBtn").on("click",function(){w(this).closest("html").html(""),window.top.postMessage("close","*")}),sfEnv.isConsole&&w("#cloneBtn").hide(),sfEnv.isSF1?w("#edit-properties").hide():w("#deepLinkBtn").hide()}else{if(sfEnv.isSF1)w(".containerBox").after('\n\t<div class="footer">\n\t\t<div class="js-footer footer-pagination-container"></div>\n\t</div>'),w(".pagination-container").after(k);else{w(".nav-container").prepend(y),w(".nav-container").prepend('\n\t\t\t\t\t<div class="sidemenu-icon-container">\n\t\t\t\t\t\t<button class="slds-button slds-button_icon-inverse slide-button js-toggle-button" type="button">\n\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-button__icon slds-button__icon_large">\n\t\t\t\t\t\t\t\t<use xlink:href="'.concat(sfEnv.SLDS_PATH+'/assets/icons/utility-sprite/svg/symbols.svg#rows"',"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t")),w("#panel").on("click",function(){l.slideout().close()}),w(".js-toggle-button").on("click",function(t){l.slideout().toggle(),t.stopPropagation()});var u=document.querySelector(".buttons-fixed");l.slideout().on("translate",function(t){u.style.transform="translateX("+t+"px)"}),l.slideout().on("beforeopen",function(){u.style.transition="transform 300ms ease",u.style.transform="translateX(270px)"}),l.slideout().on("beforeclose",function(){u.style.transition="transform 300ms ease",u.style.transform="translateX(0px)"}),l.slideout().on("open",function(){u.style.transition=""}),l.slideout().on("close",function(){u.style.transition=""})}w("#normalSaver").on("click",n.normalSaveBtn),w("#quickSaver").on("click",n.quickSaveBtn),w("#cancelBtn").on("click",n.cancelBtn),w("#sf1CancelBtn").on("click",o.sforceBack);var f=w(".container").width();w(".button-row-form").css("width",f)}r&&w("<style type='text/css'> ".concat(r," </style>")).appendTo("body"),n.loadPage()}),window.previewOpen=S,window.mobileFormLoad=function(t,e,n){sfEnv.thisForm=e;var a=sfEnv.namespace;r.toggledQIds&&r.toggledQIds.size&&r.toggledQIds.clear(),t[0].allForms=[e],t[0].sections.forEach(function(t){t.allQuestions&&t.allQuestions.forEach(function(t){var e={};e[a+"Question__c"]=t.question.Id,t.answers=_.where(n,e)})}),i._loadPageSuccess(t,{status:!0})},window.changePage=l.changePage,window.setErrorFieldIndex=d.setErrorFieldIndex,window.setErrorGuidedMode=function(t){w("body").toggleClass("cf-error-guided-mode",t)},window.clearErrorMessages=d.clearErrorMessages,sfEnv.currentFormPage=1,e.exports=o},{"./src/app.js":3,"./src/dataStore.js":6,"./src/form.js":8,"./src/formDetail":9,"./src/section.js":15,"./src/util":16,"./src/validation.js":17,"./src/vfr.js":18}],2:[function(t,e,n){"use strict";var a={findAnswers:function(t){var e,n=[];for(e in answerStore){var a=answerStore[e];a[s+"Question__c"]===t&&n.push(a)}return n},findAnswerCount:o,findAnswerByIndex:function(t,e){for(var n in answerStore){var a=answerStore[n];if(a[s+"Question__c"]===t&&a[s+"Linked_Section_Order__c"]===e)return a}return null},findMaxAnswerCount:function(t){var e=0;return t.forEach(function(t){var n=o(t.question.Id);n>e&&(e=n)}),e},defaultAnswer:i},s=sfEnv.namespace;function o(t){var e=0;for(var n in answerStore){answerStore[n][s+"Question__c"]===t&&e++}return e}function i(t,e){var n=e?e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":t[s+"Question__r."+s+"Default_Value__c"]?t[s+"Question__r."+s+"Default_Value__c"]:"",a=e?e[s+"Type__c"]:t[s+"Question__r.Type__c"],o=!!t[s+"Link_Record_Id__c"]||!!t[s+"Linked_Section_Record_Id__c"];if(null!=n&&!o){if("Field Link"===a);else switch(a){case"Text":t[s+"Text_Answer__c"]=n;break;case"Long Text":t[s+"Long_Text_Answer__c"]=n;break;case"Number":t[s+"Number_Answer__c"]=n;break;case"Percent":t[s+"Percent_Answer__c"]=n;break;case"Currency":t[s+"Currency_Answer__c"]=n;break;case"Date":t[s+"Date_Answer__c"]=n&&"None"!==n?function(t){var e=t.toUpperCase();if(!e.includes("TODAY")){var n=new Date(t),a=n.getTimezoneOffset();return(n=new Date(n.getTime()-60*a*1e3)).toISOString().split("T")[0]}e=e.replace("TODAY","");var s=parseInt(e),o=new Date,i=-sfEnv.gmtOffsetInSeconds/60;return o=(o=new Date(o.getTime()-60*i*1e3)).setDate(o.getDate()+s)}(n):null;break;case"Date/Time":t[s+"Date_Time_Answer__c"]=n&&"None"!==n?function(t){var e=t.toUpperCase();if(!e.includes("NOW")){var n=new Date(t),a=n.getTimezoneOffset();return n=new Date(n.getTime()-60*a*1e3)}e=e.replace("NOW","");var s=parseInt(e),o=new Date,i=-sfEnv.gmtOffsetInSeconds/60;return(o=new Date(o.getTime()-60*i*1e3)).setMinutes(o.getMinutes()+s),o}(n):"";break;case"Email":t[s+"Email_Answer__c"]=n;break;case"Phone":t[s+"Phone_Answer__c"]=n;break;case"URL":t[s+"URL_Answer__c"]=n;break;case"Multi-select Picklist":case"Checkbox List":case"Picklist":case"Radio Button List":t[s+"Long_Text_Answer__c"]=n}return t}}window.defaultAnswer=i,e.exports=a},{}],3:[function(t,e,n){"use strict";var a={normalSaveBtn:function(){window.setErrorGuidedMode(!0),window.setErrorFieldIndex(-1),a.saveMsgOn(),u.contextualSpinnerText("saveForm"),sfEnv.wasQuickSave=!1,setTimeout(function(){u.allowFormulaValidation(!0),s("#mainForm").submit(),u.allowFormulaValidation(!1)},1)},quickSaveBtn:function(t,e){a.saveMsgOn(),u.contextualSpinnerText("saveForm"),sfEnv.wasQuickSave=!0,sfEnv.noNavOnSave=e||!1,window.setErrorGuidedMode(!1),window.setErrorFieldIndex(-1),window.clearErrorMessages(!1),setTimeout(function(){s("input, select, textarea,.selectable-multiselect").filter("[required]").attr({quickSaveReq:!0,required:!1}),s("[dbrequired]").attr("required",!0),s(".errorSummary-mobile").css("display","none"),s(".errorSummary").addClass("slds-hide"),u.allowFormulaValidation(!0),s("#mainForm").submit(),u.allowFormulaValidation(!1),s("input, select, textarea,.selectable-multiselect").filter("[quickSaveReq=true]").attr("required",!0).removeAttr("quickSaveReq")},1)},cancelBtn:function(){if(sfEnv.isLWC){u.sendMsgToLWC("yFormClose",{closeType:"CANCEL"})}var t=s("#formContent");if((r||l)&&t.hasClass("changed-input")){window.openCustomModal({bodyStringArray:["You have unsaved changes! Are you sure you want to leave without saving?"],showCancelButton:!0}).then(function(){t.removeClass("changed-input"),u.returnToDetailPage()}).catch(function(){})}else u.returnToDetailPage()},saveMsgOn:function(t){t?u.contextualSpinnerText(t):u.contextualSpinnerText("clear");s("#savingStatus").show(),s("div.js-page-backdrop.slds-backdrop").removeClass("slds-backdrop_closed").addClass("slds-backdrop_open")},saveMsgOff:function(){s("#savingStatus").hide(),s("div.js-page-backdrop.slds-backdrop").removeClass("slds-backdrop_open").addClass("slds-backdrop_closed")},loadPage:function(){var t=[];o&&(delete o.attributes,delete o[c+"Form_Template__r"].attributes,delete o[c+"Contact__r"],t.push(o),d.loadPageCount=0,f.loadPageVFR(t))}},s=jQuery,o=sfEnv.thisForm,i=sfEnv.isSF1,r=sfEnv.isLightningExp,l=sfEnv.isConsole,c=sfEnv.namespace,d=t("./dataStore"),u=t("./util"),f=t("./vfr");s(".js-no-license-cancel").on("click",function(){i||r?sforce.one.navigateToFeed(sfEnv.userId,"NEWS"):window.location.href="/"}),s(".js-cancel").on("click",function(){u.returnToDetailPage()}),sfEnv.isMobileiOS&&(s(document).on("focus","input, textarea, select",function(){!function t(){s(document).one("touchstart",function(e){["INPUT","TEXTAREA"].includes(e.target.tagName.toUpperCase())?t():s(":focus").length&&s(":focus").blur()})}()}),s(document).on("blur","input, textarea, select",function(){setTimeout(function(){if(!s(":focus").length){var t=!!s("div.form-section.js-uses-ls-card.ls-modal").length,e=t?"div.form-section.js-uses-ls-card.ls-modal .scroll-view":".form-scroll-container",n=s(e).scrollTop();s(e).scrollTop(0),setTimeout(function(){var e=t?"section-scroll":"form-scroll";window.$ionicScrollDelegateScrollBy(0,n,!1,e)},50)}})}));var m='textarea, input:not([type="date"], [type="datetime-local"], [type="checkbox"], [type="radio"], .link-lookup, .dateTime, .date)';s(document).on("focus",m,function(){s(this).closest(".form-section").hasClass("ls-modal")||s(".tabs").addClass("tabs-hidden")}),s(document).on("blur",m,function(){s(".tabs").removeClass("tabs-hidden")}),window.addEventListener("native.keyboardhide",function(){s(".tabs").removeClass("tabs-hidden")}),e.exports=a},{"./dataStore":6,"./util":16,"./vfr":18}],4:[function(t,e,n){"use strict";var a={runAllCustomFormulas:function(){s.debounce(function(){var t=$("#formContent").find(".js-custom-formula");(t=t.sort(function(t,e){return $(t).data("formula").includes($(e).data("randomId"))?1:$(e).data("formula").includes($(t).data("randomId"))?-1:0})).each(function(t,e){!function(t){var e,n=$(t),a=n.data("formula"),i=n.data("treatBlankAsZero"),r=n.attr("data-formula-metadata")?JSON.parse(s.withoutDoubleQuote(n.attr("data-formula-metadata"),!1)):"",l=n.closest(".controls").find("input"),c=n.closest(".form-section"),d=c.find("[data-sectionid]").data("sectionid"),u=c.find("[data-sectionindex]").data("sectionindex"),f=l.hasClass("js-percent"),m=n.data("decimal-length");d&&(e={id:d,index:u});var p=function t(e,n,a,i,r,l){var c=e.indexOf("_")+1;var d=e.slice(c).indexOf("_")+c;var u=e.slice(c,d);var f=!!e.slice(d+1,d+3).includes("&")&&e.slice(d+2,d+3);var m;if(a){var p=$('[data-randomid="'.concat(u,'"]'));p.length>1?p.each(function(t,e){var n=$(e).closest(".form-section").find("[data-sectionindex]").data("sectionindex");n===a.index&&(m=$(e).find('input:not([type="radio"]), select, fieldset'))}):m=p.find('input:not([type="radio"]), select, fieldset')}else m=$('[data-randomid="'.concat(u,'"]')).find('input:not([type="radio"]), select, fieldset').filter(function(t,e){return!$(e).closest(".form-section").hasClass("js-section-delete")});var v=function(t,e,n,a,s){var i;if(0===t.length)i=0;else if(t.length>1){var r=[];if(t.each(function(t,n){var i=o($(n),e,a,s);r.push(i)}),r.length>1){var l="#"===n?"+":n;i=r.reduce(function(t,e){return mexp.eval("".concat(t).concat(l).concat(e))}),"#"===n&&(i/=r.length)}else i=r[0]}else i=o(t,e,a,s);return i}(m,n,f,r,l);if(Number.isNaN(v))return;var _;var h;f?_=function t(e,n,a){var s=e.slice(0,e.indexOf(a))+n+e.slice(e.indexOf(a)+a.length);return s.includes(a)?t(s,n,a):s}(e,v,"_".concat(u,"_&").concat(f)):(h=new RegExp("\\b_".concat(u,"_\\b"),"g"),_=e.replace(h,v));if(_.includes("_"))return t(_,n,a,i,r,l);var g=0;return g=_.includes("IF")?function t(e){var n=e.indexOf("(")+1;var a=e.indexOf(",");var o=e.lastIndexOf(")");var i=e.substring(n,a).trim().split(" ");var r=Number(i[0]);var l=i[1];var c=Number(i[2]);var d=s.logicStrComparison(r,l,c);var u=e.substring(a+1,o).trim();var f=u.includes("IF")&&u.indexOf("IF")<u.indexOf(",");var m=f?u.indexOf(")")+1:u.indexOf(",");var p=u.substring(0,m);var v=m+1;var _=u.substring(v).trim();var h=_.includes("IF");return d&&f?t(p):d?Number(p):h?t(_):Number(_)}(_):mexp.eval(_),s.precisionRound(g,i).toFixed(i)}(a,r,e,m,f,i),v=s.withCommaSeparators(p);n.val(v).trigger("change")}(e)})},600)()}},s=t("./util");function o(t,e,n){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a=t.is("fieldset")?t.find("input:checked").val():t.val(),a=s.withoutDoubleQuote(a,!1);var i=t.data("randomId");(t.is("fieldset")||t.is("select"))&&(a=a&&e&&e.hasOwnProperty(i)&&e[i].hasOwnProperty(a)?e[i][a].toString():0);var r=""===(a=a&&a.includes(",")?s.withoutCommaSeparators(a):a)?o?0:NaN:Number(a);t.hasClass("js-percent")&&!n&&(r/=100);var l=t.closest(".form-section");return Number.isNaN(r)&&(l.find(".js-remove-linked-section").length>0||l.find(".js-inherited-remove-linked-section").length>0)&&(r=0),r}e.exports=a},{"./util":16}],5:[function(t,e,n){"use strict";var a={runAllCustomFormulasMSP:function(){$("#formContent").find(".control-group .js-custom-formula-ms").each(function(t,e){var n,a,o,i,r,l;n=$(e),a=n.data("formula"),o=a.indexOf("_")+1,i=a.slice(o).indexOf("_")+o,r=a.slice(o,i),l=$('.form-section:not(.js-section-delete) .control-group[data-randomid="'.concat(r,'"]')),sfEnv.isMobileApp?setTimeout(function(){n.val(null).change(),l.each(function(t,e){var a=$(e).find("select.formInput"),s=$(e).find("fieldset.formInput"),o="";if(o=s.length?s.find('.slds-radio.radio-list [type="radio"]:checked').val():a.val()){var i=Array.isArray(o);i||(o=[o]),o.forEach(function(t){!function(t,e){if(e){e=String(e);var n=t.find("option"),a=!1;n.each(function(t,n){$(n).attr("value").toLowerCase()===e.toLowerCase()&&($(n).prop("selected",!0),a=!0)}),a&&t.change()}}(n,t)})}})},0):(n.find("li.ui-selected").removeClass("ui-selected"),l.each(function(t,e){var a=$(e).find("ol.formInput"),o=$(e).find("select.formInput"),i=$(e).find("fieldset.formInput");if(a.length)a.find("li.ui-selected").each(function(t,e){var a=$(e).data("option-value");s(n,a)});else if(o.length){var r=o.val();s(n,r)}else if(i.length){var l=i.find('.slds-radio.radio-list [type="radio"]:checked').val();s(n,l)}}))})}};function s(t,e){e&&(e=String(e),t.find("li:not(.ui-selected)").each(function(t,n){$(n).attr("data-option-value").toLowerCase()===e.toLowerCase()&&$(n).addClass("ui-selected")}))}e.exports=a},{}],6:[function(t,e,n){"use strict";n.wasQuickSave=!1,n.onMobile=!1,n.hasSignature=!1,n.prevSaveErrors=!1,n.loadPageCount=0,n.questionStore={},n.regExRules=[],n.depQuestionLogicStore={},n.attachmentInputIds=[],n.esigInputIds=[];var a={allPages:[],currentPage:1,totalPages:0,fieldLinkUpdateArray:[],setFormColor:!1};n.formRender=a,n.toggledQIds=new Set,window.answerStore={}},{}],7:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s={toggleChildFields:d,buildDepQuestionLogicStore:function(t,e){var n;for(n=0;n<e.parentValues.length;n++){var a=e.parentValues[n];r.depQuestionLogicStore.hasOwnProperty(a)||(r.depQuestionLogicStore[a]={}),r.depQuestionLogicStore[a][t]=e}return},setupDepLogicListeners:function(t){if(!t.length)return;var e=o("div.control-group[data-randomid]").filter(function(e,n){var a=o(n).attr("data-randomid");return t.includes("".concat(a))});e.addClass("parentQuestion");var n='select, input:not([type="number"]):not([type="text"]), input[type="text"].js-custom-formula, div.barcode-field input[type="text"]';e.off("change",n,h).on("change",n,h);var a='input[type="number"]:not(.js-custom-formula), input[type="text"]:not(.js-custom-formula)';e.off("input",a,l.debounce(g,600)).on("input",a,l.debounce(g,600)),e.find("ol li").off("click",b).on("click",b)},toggleEachChildField:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=o(e),s=a.find(".formInput");d(s.length?s:a,a.data("randomid"),"fast",!1,!0,n)},checkAnswer_UpdateJSON:f,_getFormAnswer:function(t,e,n){var a,s,i,r="number"==typeof o('#formContent [data-randomid="'.concat(t,'"]')).data("ctrlgrplsindex")?'[data-ctrlgrplsindex="'.concat(n,'"]'):"",c=e||o('#formContent [data-randomid="'.concat(t,'"]').concat(r," .formInput"));if(c.hasClass("table-checkbox")){s=[];var d=c.find(".boolean-checkbox");d.length?d.is(":checked")?s.push(!0):s.push(!1):c.find("input:checked").map(function(t,e){s.push(e.value.toLowerCase())})}else c.hasClass("table-radio")?a=c.find("input:checked").val():c.parent().hasClass("slds-radio")?a=c.closest("fieldset.table-radio").find("input:checked").val():c.hasClass("selectable-multiselect")?(s=[],c.find(".ui-selected").map(function(t,e){s.push(o(e).data("optionValue").toString().toLowerCase())})):(a=c.val(),sfEnv.isMobileApp&&c.hasClass("slds-select")&&(a=l.withoutDoubleQuote(a,!1)));""===a&&"text"===c.attr("type")?i=a:a?(a instanceof Array?a=a.map(function(t){return t.toString().toLowerCase()}):"string"==typeof a&&(a=a.toString().toLowerCase()),i=a):i=s;i instanceof Array&&""===i[0]&&(i=null);return i}},o=jQuery,i=t("json-logic"),r=t("./dataStore"),l=t("./util"),c=t("./app");function d(t,e,n,a,l){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.length){var f=t.closest(".control-group").data("ctrlgrplsindex");if(a){var v=e,_=t.closest(".control-group").data("ctrlgrplsindex");if(null!=_&&(v+="-".concat(_)),r.toggledQIds.has(v))return;r.toggledQIds.add(v)}o.isEmptyObject(r.depQuestionLogicStore)||function(){var v,_,h,g,b,w=r.depQuestionLogicStore[e],y="checkbox"===t.find("input").attr("type");"number"==typeof t.data("linkedsectionorder")?t.data("linkedsectionorder"):t.find("input").data("linkedsectionorder");(y||t&&"checkbox"===t.attr("type"))&&void 0===(t=t.closest(".table-checkbox")).find(".boolean-checkbox").data("linkedsectionorder")&&t.find("input").data("linkedsectionorder");for(b in(a||l)&&w&&Object.keys(w).length>=50&&t.addClass("js-use-logic-spinner"),w){var k=void 0;if(c&&c.length||void 0!==f){var x=f||c.attr("data-sectionindex");k=o('#formContent .form-section:not(.js-section-delete)[data-section-index="'.concat(x,'"] [data-randomid="').concat(b,'"], #formContent .form-section[data-section-index="').concat(x,'"] [data-randomid="').concat(b,'"]:not(.js-section-delete)'))}else k=o('#formContent .form-section:not(.js-section-delete) [data-randomid="'.concat(b,'"], #formContent [data-randomid="').concat(b,'"]:not(.js-section-delete)'));k.each(function(r,l){var c=o(l),f=c.hasClass("ls-card-add-container")||c.hasClass("ls-card-header")||c.hasClass("form-section"),y=y?c.data("section-index"):c.data("ctrlgrplsindex"),k="number"==typeof y&&!f;if(!c.closest(".form-section").hasClass("js-section-delete")){var x=JSON.parse(JSON.stringify(w[b].logic));for(v=0;v<w[b].parentValues.length;v++){var S=w[b].parentValues[v],I=!f&&"number"==typeof o('#formContent div.control-group[data-randomid="'.concat(S,'"]')).data("ctrlgrplsindex");if(I?t.data("ctrlgrplsindex")===y&&S===e:S===e)_=t.closest("div.control-group").hasClass("hiddenByDep")?null:s._getFormAnswer(S,t,y);else{var C=I?'[data-ctrlgrplsindex="'.concat(y,'"]'):"",E=o('#formContent div.control-group[data-randomid="'.concat(S,'"]').concat(C));_=E.hasClass("hiddenByDep")?null:s._getFormAnswer(S,null,y)}x=k&&I?s.checkAnswer_UpdateJSON(x,_,S,y):s.checkAnswer_UpdateJSON(x,_,S)}h=new i,g=h.execute({show:x});var L=c.hasClass("form-section")||c.hasClass("ls-card-header")||c.hasClass("ls-card-add-container");if(L&&c.hasClass("ls-group-changed-input")){if(L){var T=!0===g.show;c.toggleClass("hiddenByDep",!T)}c.find("input, select, textarea").removeClass("ignore")}else if(u(c,g,n),L&&c.hasClass("js-uses-ls-card")){var A=c.data("randomid");u(c.prevAll('[data-randomid="'.concat(A,'"].ls-card-header')),g,n),u(c.prev(".ls-card"),g,n),u(c.nextAll('[data-randomid="'.concat(A,'"].ls-card-add-container')),g,n)}p(b,n),d(c.find(".formInput"),b,null,a),setTimeout(function(){m(c)})}})}}()}}function u(t,e,n){!0===e.show?"slow"===n&&t.hasClass("hiddenByDep")?(t.slideDown().removeClass("hiddenByDep"),t.find("input, select, textarea").removeClass("ignore")):(t.show().removeClass("hiddenByDep"),t.find("input, select, textarea").removeClass("ignore")):"slow"!==n||t.hasClass("hiddenByDep")?(t.hide().addClass("hiddenByDep"),t.find("input, select, textarea").addClass("ignore")):(t.slideUp().addClass("hiddenByDep"),t.find("input, select, textarea").addClass("ignore"))}function f(t,e,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=[];if(t.hasOwnProperty("variables")&&!t.hasOwnProperty("operation")&&(t.operation="||"),e&&(e instanceof Array?e.forEach(function(t){return"string"==typeof t?t.toLowerCase():t}):"string"==typeof e&&(e=e.toLowerCase())),"object"===a(t)&&t.variables instanceof Array)for(var d=0;d<t.variables.length;d++)if("object"===a(t.variables[d])&&Object.keys(t.variables[d])==n){var u=null===e,f=t.variables[d][n];if("object"===a(f)&&f.hasOwnProperty("num")||"boolean"==typeof f)t.variables[d]=!u&&v(e,f.op,f.num);else if("object"===a(f)&&(f.hasOwnProperty("text")||f.hasOwnProperty("qid"))){var m=null!==r?'[data-ctrlgrplsindex="'.concat(r,'"]'):"",p=f.qid?o('div.control-group[data-randomid="'.concat(f.qid,'"]').concat(m,":not(.hiddenByDep) .controls input.answerValue")).val():f.text,h=!(!f.qid||l.notNullish(p,!0)&&l.notNullish(e,!0));t.variables[d]=!u&&!h&&_(e,f.op,p)}else{var g=f.toLowerCase();if(g==e||"false"===g&&!1===e)t.variables[d]=!0;else if(e instanceof Array&&e.length)!function(){i=!1;for(var n=g.split(","),a=[],s=0;s<n.length;s++){var o=n[s];o=o.trim(),a.push(o)}e.forEach(function(t){a.indexOf(t)>-1&&(i=!0)}),t.variables[d]=!!i}();else if("string"==typeof g&&g.indexOf(",")>-1){for(var b=g.split(","),w=[],y="string"==typeof e&&e?e.trim():null,k=0;k<b.length;k++){var x=b[k];x=x.trim(),w.push(x)}b.indexOf(e)>-1||w.indexOf(y)>-1?t.variables[d]=!0:t.variables[d]=!1}else t.variables[d]=!1}}else c=null!==r?c.concat(s.checkAnswer_UpdateJSON(t.variables[d],e,n,r)):c.concat(s.checkAnswer_UpdateJSON(t.variables[d],e,n));return t}function m(t){var e=t.closest(".pageContent"),n=e.find(".form-section:not(.js-section-delete)");n.length===n.filter(".hiddenByDep").not(".ls-group-changed-input").length?e.find(".hidden-page-msg").removeClass("slds-hide"):e.find(".hidden-page-msg").addClass("slds-hide")}function p(t,e){var n=o('div[data-randomid="'.concat(t,'"]'));if(!n.hasClass("form-section")){var a=n.closest(".form-section");if(!a.hasClass("childSection")){var s=a.find(".control-group.hiddenByDep").length,i=a.find(".control-group .blank_space").length,r=a.find(".control-group.always-hidden").length,l=a.hasClass("hiddenByDep"),c=a.hasClass("ls-group-changed-input");a.hasClass("js-section-delete")||a.find(".control-group").length!==s+i+r?a.hasClass("js-section-delete")||("slow"===e&&l&&!c?a.slideDown().removeClass("hiddenByDep"):a.show().removeClass("hiddenByDep")):"slow"!==e||l||c?a.hide().addClass("hiddenByDep"):a.slideUp().addClass("hiddenByDep")}}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(""===t&&""!==n)return!1;var a=t,s=n;return""!==n&&(a=Number(l.withoutCommaSeparators(a)),s=Number(s)),l.logicStrComparison(a,e,s)}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(""===t&&""!==n)return!1;l.checkIfLink(t,!0)&&(t=o("<div/>").html(t).text()),l.checkIfLink(n,!0)&&(n=o("<div/>").html(n).text());var a=t?t.toLowerCase().trim():"",s=n?n.toLowerCase().trim():"";return l.logicStrComparison(a,e,s)}function h(t){var e=o(t.currentTarget),n=e.closest(".control-group").attr("data-randomid"),a="checkbox"===e.attr("type")&&e.closest(".table-checkbox").hasClass("js-use-logic-spinner"),s="radio"===e.attr("type")&&e.closest(".table-radio").hasClass("js-use-logic-spinner"),i=e.hasClass("js-use-logic-spinner")||a||s;i&&sfEnv.isMobileApp?window.showLoading("Loading..."):i&&c.saveMsgOn("loading");var r=!!e.closest(".form-section").hasClass("is-linked-section")&&e.closest(".slds-card__body");setTimeout(function(t){d(e,n,"slow",!1,!1,t),i&&sfEnv.isMobileApp?window.hideLoading():i&&c.saveMsgOff()},1,r)}function g(t){var e=o(t.currentTarget),n=e.closest(".control-group").attr("data-randomid"),a=e.hasClass("js-use-logic-spinner");a&&sfEnv.isMobileApp?window.showLoading("Loading..."):a&&c.saveMsgOn("loading");var s=!!e.closest(".form-section").hasClass("is-linked-section")&&e.closest(".slds-card__body");setTimeout(function(t){d(e,n,"slow",!1,!1,t),a&&sfEnv.isMobileApp?window.hideLoading():a&&c.saveMsgOff()},1,s)}function b(t){var e=o(t.currentTarget),n=e.closest(".control-group").attr("data-randomid"),a=e.closest("ol").hasClass("js-use-logic-spinner");a&&sfEnv.isMobileApp?window.showLoading("Loading..."):a&&c.saveMsgOn("loading");var s=!!e.closest(".form-section").hasClass("is-linked-section")&&e.closest(".slds-card__body");setTimeout(function(t){d(e.closest("ol"),n,"slow",!1,!1,t),a&&sfEnv.isMobileApp?window.hideLoading():a&&c.saveMsgOff()},1,s)}window.executeJSONLogic=function(t){return(new i).execute({show:t})},window.checkAnswer_UpdateJSON=f,e.exports=s},{"./app":3,"./dataStore":6,"./util":16,"json-logic":20}],8:[function(t,e,n){"use strict";function a(t,e,n,a,s,o,i){try{var r=t[o](i),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(a,s)}function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,s=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function r(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var c,d,u,f,m,p,v=t("./app"),_=t("./dataStore"),h=t("./dependency"),g=t("./validation"),b=t("./question"),w=t("./vfr"),y=t("./formSubmission"),k=t("./inputModal"),x=t("./util"),S=x.CONSTANTS,I=S.DATE_TIME_FORMAT,C=S.DATE_TIME_FORMAT_DMY,E=S.DATE_FORMAT,L=S.DATE_FORMAT_DMY,T=S.LOOKUP_TYPE,A=S.TYPE_AHEAD,O=S.CLOSE,D=S.ESIG,F=t("./formDetail"),M=t("./pdf"),R=t("./util").formatDate,j=t("./util").convertDateFromHTML5,q=t("./util").convertDateTimeFromHTML5,P=t("./util").buildFilePreviewHTML,N=t("./util").getFileSize,V=t("./util").randomString,B=t("./util").updateBadgeCount,H=t("./geolocation"),Q=t("./answer"),U=t("./util").allCountryStateTexts,$=t("./util").allCountryStateCodes,z=t("./customFormulas"),Y=t("./customFormulasMSP"),W=sfEnv.isPublicSite?3e6:37888e3,G=!1,J=!1,K=[];window.buildFormulaFieldDatasets=xt,window.updateFormulaFieldInputs=St,window.updateFormulaRefreshBtns=function(t){return new Promise(function(e,n){xt(t).then(function(n){var a=function(e){var a=n[e];if(a.sfId.length>18||"undefined"===a.sfId){var s=a.$inputElement.siblings("button");t.dbResults.forEach(function(t){t.clientId===a.mobileId&&s.data("sfid",t.sfId)})}};for(var s in n)a(s);e(n)}).catch(function(t){n(t)})})},window.removeChangedInputDelay=600;var Z={source:yt,select:function(t,e){var n=e.item.value,a=A.ERROR,s=A.CONTINUE_TYPING,o=A.NO_RESULTS;if(n!==a&&n!==s&&n!==o){var i,r=X(this).eq(0),l=r.data("objectname"),c=r.data("linkfield"),d=r.data("lookupQuestionRandomId"),u=r.data("lookupType");i=[T.IN_FORM,T.BOTH].includes(u)?wt(e.item.fieldValues||e.item):e.item.fieldValues.Id,X(t.target).closest(".slds-form-element__control").find("input:hidden").val(i),x.setAsInFormLUParent(i,l,d),Ot(X(this),l,c,i)}else setTimeout(function(){X(t.target).val(""),X(t.target).closest(".slds-form-element__control").find("input:hidden").val("")},0)},change:function(t,e){e.item||(X(t.target).val(""),X(t.target).closest(".slds-form-element__control").find("input:hidden").val(""),ct(X(t.target)))},close:function(t){X(t.target).closest(".form-section").hasClass("js-uses-ls-card")&&ct(X(t.target))},focus:function(){return!1}},X=jQuery,tt=sfEnv.namespace,et=sfEnv.isFormDetail,nt=sfEnv.isSF1,at=sfEnv.isMobileApp,st=sfEnv.countryPickLists,ot=!Slideout||nt||at||sfEnv.isPreview?void 0:new Slideout({panel:document.getElementById("panel"),menu:document.getElementById("menu"),padding:270,tolerance:70});function it(t){t.on("click",".controls-table .table-radio .slds-radio",function(t){t.preventDefault(),t.stopPropagation();var e=X(this).find('input[type="radio"]'),n=X(this).closest(".control-group"),a=e.prop("checked");n.find(":checked").prop("checked",!1),e.prop("checked",!a),setTimeout(function(){e.trigger("change")},0)}),t.on("keypress",".slds-radio__label_target",function(t){if(32===t.charCode)return X(t.target).closest("label").trigger("click"),t.stopImmediatePropagation(),t.stopPropagation(),t.charCode=null,!1}),function(t){var e=this;t.on("keypress",".mspicklist-item",function(t){if(32===t.charCode){var n=X(t.target).hasClass("ui-selected");return n?X(t.target).removeClass("ui-selected"):X(t.target).addClass("ui-selected"),At(X(e)),X(t.target).trigger("click"),t.charCode=null,!1}})}(t)}function rt(t){if(t){var e=X(t).find(".slds-card__body").data("sectionid");t=X('[data-sectionid="'+e+'"]')}else t=X("#mainForm");t.find('input[type="datetime-local"]').each(function(){var t=X(this).hasClass("js-dmy-format"),e=t?C:I,n=X(this).val();if(X(this).prop("type","text"),n||(n=X(this).val()),n){var a="null"!==n?moment(n).format(e):null;X(this).val(a)}X(this).parent().css("position","relative"),sfEnv.isMobileApp?X(this).on("click",function(e){e.preventDefault(),window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0);var n={date:new Date,mode:"datetime",androidTheme:datePicker.ANDROID_THEMES.THEME_DEVICE_DEFAULT_LIGHT};datePicker.show(n,function(n){var a=x.formatDateTimeOnSelection(n,t);X(e.currentTarget).val(a).trigger("change")}),setTimeout(function(){window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1)},100)}):(X(this).datetimepicker({showClear:!0,format:e}),X(this).closest(".form-section").hasClass("js-uses-ls-card")&&X(this).on("dp.change",function(){ct(X(this))}))}),t.find('input[type="date"]').each(function(){var t=X(this).hasClass("js-dmy-format");if(X(this).prop("type","text"),""!==X(this).val()&&null!==X(this).val()){var e=new Date(X(this).val());X(this).val(R(e,t))}if(X(this).parent().css("position","relative"),sfEnv.isMobileApp)sfEnv.isMobileiOS?(X(this).on("click",function(t){t.preventDefault();var e=X(t.currentTarget),n=e.data("dateValue");n?(e.val(n),e.prop("type","date"),setTimeout(function(){e.val(n).trigger("change")},250)):e.prop("type","date")}),X(this).on("change",function(e){e.preventDefault();var n=X(e.currentTarget);if(n.data("dateValue",n.val()),n.prop("type","text"),n.val()){var a=n.val().split(/\D/),s=new Date(a[0],--a[1],a[2]),o=x.formatDateOnSelection(s,t);n.val(o)}})):X(this).on("click",function(e){e.preventDefault(),window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0);var n={date:new Date,mode:"date",androidTheme:datePicker.ANDROID_THEMES.THEME_DEVICE_DEFAULT_LIGHT};datePicker.show(n,function(n){var a=x.formatDateOnSelection(n,t);X(e.currentTarget).val(a).trigger("change")}),setTimeout(function(){window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1)},100)});else{var n=t?L:E;X(this).datetimepicker({showClear:!0,format:n}),X(this).closest(".form-section").hasClass("js-uses-ls-card")&&X(this).on("dp.change",function(){ct(X(this))})}})}function lt(){X("#menu").on("keypress",function(t){if(32===t.charCode)return t.preventDefault(),t.stopPropagation(),t.charCode=null,t.target.click(),!1})}function ct(t){var e=t.hasClass("table-radio"),n=e?t.find('input[type="radio"]').first().attr("name"):t.attr("name"),a=t.closest(".form-section.js-uses-ls-card").prev().find('[data-answer-id="'.concat(n,'"]')),s="Text";t.prev(".link-lookup").length?t=t.prev(".link-lookup"):t.closest(".slds-form-element").hasClass("js-sig-answer")?s="E-Signature":t.hasClass("dateTime")?s="Date/Time":t.hasClass("date")?s="Date":t.hasClass("boolean-checkbox")?s="BOOLEAN":t.hasClass("slds-select")&&(s="Picklist");var o=e?t.find("input:checked").val():t.val(),i=x.formatLSCardValues(s,o);a.find(".card-answer").text(i)}function dt(t){(t?t.find(".js-sig-answer"):X(".js-sig-answer")).each(function(t,e){var n=X(e);if(n.on("click",function(t){var e=X("#sigModal"),n=X(t.currentTarget),a=n.data("questionid"),s=n.closest(".slds-card__body.OR-card__body");e.removeClass("slds-hide"),e.find("canvas").remove(),X(".slds-backdrop").removeClass("slds-backdrop_closed").addClass("slds-backdrop_open"),e.find(".js-sig-wrapper").jSignature(),e.find(".js-sig-wrapper").data("qId",a),e.data("svgBase",e.find(".js-sig-wrapper").jSignature("getData","svgbase64")[1]),s.data("sectionid")&&(e.find(".js-sig-wrapper").data("sectionId",s.data("sectionid")),e.find(".js-sig-wrapper").data("sectionIndex",s.data("sectionindex")))}),n.hasClass("js-old-sig")){var a=n.find(".output").val()||"{}";n.signaturePad({drawOnly:!0,lineTop:70,validateFields:!1}).regenerate(a)}})}function ut(){X(".selectable-multiselect").on("mousedown",function(t){t.metaKey=!0,X(this).attr("disabled")||At(X(this))}).selectable(),X(".selectable-multiselect").each(function(t,e){"disabled"===X(e).attr("disabled")&&X(e).selectable("disable")})}function ft(t){var e=t||X("#formContent");e.find("input.js-comparative-validation").each(function(t,e){var n=X(e),a="number"===n.attr("type").toLowerCase()||sfEnv.isMobileApp?"change":"blur",s=n.data("min-question-id"),o=n.data("max-question-id"),i=n.data("linkedsectionorder");if(s){var r='input[data-random-id="'.concat(s,'"]');i&&"undefined"!==i&&(r+='[data-linkedsectionorder="'.concat(i,'"]'));var l=X(r),c=l.val(),d=l.hasClass("js-dmy-format");n.attr("data-compare-dmy-format-min",d),(c||0===c)&&n.attr("min",c),l.on(a,function(){var t=X(this).val();t||0===t?n.attr("min",t):n.removeAttr("min")})}if(o){var u='input[data-random-id="'.concat(o,'"]');i&&"undefined"!==i&&(u+='[data-linkedsectionorder="'.concat(i,'"]'));var f=X(u),m=f.val(),p=f.hasClass("js-dmy-format");n.attr("data-compare-dmy-format-max",p),(m||0===m)&&n.attr("max",m),f.on(a,function(){var t=X(this).val();t||0===t?n.attr("max",t):n.removeAttr("max")})}}),e.find("textarea.js-comparative-validation").each(function(t,e){var n=X(e),a=sfEnv.isMobileApp?"change":"blur",s=n.data("min-question-id"),o=n.data("max-question-id"),i=n.data("linkedsectionorder");if(s){var r='textarea[data-random-id="'.concat(s,'"]');i&&"undefined"!==i&&(r+='[data-linkedsectionorder="'.concat(i,'"]'));var l=X(r),c=l.val(),d=l.hasClass("js-dmy-format");n.attr("data-compare-dmy-format-min",d),(c||0===c)&&n.attr("min",c),l.on(a,function(){var t=X(this).val();t||0===t?n.attr("min",t):n.removeAttr("min")})}if(o){var u='textarea[data-random-id="'.concat(o,'"]');i&&"undefined"!==i&&(u+='[data-linkedsectionorder="'.concat(i,'"]'));var f=X(u),m=f.val(),p=f.hasClass("js-dmy-format");n.attr("data-compare-dmy-format-max",p),(m||0===m)&&n.attr("max",m),f.on(a,function(){var t=X(this).val();t||0===t?n.attr("max",t):n.removeAttr("max")})}})}function mt(t,e){var n="radio"===X(e).attr("type")?X(e).closest("fieldset"):X(e),a=n.hasClass("table-radio"),s=n.attr("data-random-id"),o=n.attr("data-linkedsectionorder");X("select.js-state-code, select.js-child-dep-pl, fieldset.js-state-code, fieldset.js-child-dep-pl").each(function(i,r){var l=X(r),c=l.hasClass("table-radio"),d=l.hasClass("js-state-code"),f=l.attr("data-parent-picklist-id"),m=l.attr("data-linkedsectionorder"),p=e&&s&&s===f&&!o&&!inkedSectionIndex;if(!t||e&&s&&s===f&&o&&o===m||p){var v,_=c?l.find('[type="radio"]:checked').val():l.val(),h=t?void 0:sfEnv.isMobileApp?x.withoutDoubleQuote(_,!1):_,g={name:l.data("answerid"),questionid:l.data("questionid"),linkedsectionorder:m,requiredOrNot:l.hasClass("required-rb-list")?" required ":""},b=l.attr("data-picklist-dependency")||"{}",w=d?u:JSON.parse(x.withoutDoubleQuote(b,!1));if(!t&&"undefined"!=f&&"undefined"!=m||t&&f===s&&m===o)if(t)v=a?n.find('[type="radio"]:checked').val():n.val();else{var y=X("#formContent").find('[data-random-id="'.concat(f,'"][data-linkedsectionorder="').concat(m,'"].formInput'));v=y.hasClass("table-radio")?y.find('[type="radio"]:checked').val():y.val()}else if(!t&&"undefined"!=f&&"undefined"==m||t&&f===s&&"undefined"==m){var k=X("#formContent").find('[data-random-id="'.concat(f,'"].formInput'));v=k.hasClass("table-radio")?k.find('[type="radio"]:checked').val()||"":k.val()}var S=c?l.find(".slds-form-element__control"):l;if(void 0!==v||c){S.empty(),sfEnv.isMobileApp&&(v=x.withoutDoubleQuote(v,!1));var I=function(t,e,n){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=a?"":'<option value="">--None--</option>',i=n[e]?n[e]:[],r=0;r<i.length;r++)o+=pt(i[r],t,a,s);!o&&e?o='<em>The parent list value of "'.concat(e,'" does not display any options in this dependent list.</em>'):o||(o="<em>Please select a value in the parent picklist to display values in this dependent list.</em>");return o}(h,v,w,c,g);S.html(I),t&&!l.hasClass("table-radio")&&(S.find("option")[0].selected=!0)}}})}function pt(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=x.withoutDoubleQuote(t,!0),o=void 0!==e&&t===e,i="".concat(a.name).concat(x.randomString(5,"aA#"));if(n){var r='<a class="slds-form-element__label slds-radio__label slds-radio__label_target" href="#">'.concat(t,"</a>");return x.createRBListElement(t,a.name,i,a.questionid,a.linkedsectionorder,a.requiredOrNot,"record",r,o,"dot-rb-icon")}return'<option value="'.concat(s,'" ').concat(o?' selected="selected" ':"",">").concat(t,"</option>")}function vt(){var t=function(){sfEnv.fieldLinkUpdateArray.length=0;for(var t=[],e=X(".answerValue, .text-image-space"),n=X("h1.formName").attr("data-formid"),a=X(".control-group.hiddenByDep, .form-section.hiddenByDep .control-group").map(function(){var t=X(this).find("[data-questionid]").addBack("[data-questionid]").attr("data-questionid"),e=X(this).find("[data-linkedsectionorder]").addBack("[data-linkedsectionorder]").attr("data-linkedsectionorder");return"undefined"!==e&&"null"!==e&&e?"".concat(t,"-").concat(e):t}).get(),s=-1,i=null,r=[],l=0;l<e.length;l++){var c=e[l],d=X(c).data("questionid"),u=X(c).closest(".slds-card__body").data("sectionindex"),f=void 0===u,m=_.questionStore[d].question,p=void 0,v=!1;if(f)p=Q.findAnswers(d)[0];else{var h=(p=Q.findAnswerByIndex(d,u))[tt+"Linked_Section_Order__c"],g=h.toString().split("."),b=o(g,2),w=b[0],y=b[1],k=!1;if(null!==i&&y===i.toString().split(".")[1]||(s=-1),(!p.hasOwnProperty("toDelete")||!1===p.toDelete)&&(i!==h?(i=h,s++,k=!0):k=!1,w!==s.toString())){var x=a.indexOf("".concat(d,"-").concat(p[tt+"Linked_Section_Order__c"])),S=Number(s.toString()+"."+y);p[tt+"Linked_Section_Order__c"]=S,x>-1&&a.splice(x,1,"".concat(d,"-").concat(S));var I=X(c).closest(".slds-card__body"),C=I.data("sectionid");C&&k&&r.push({newId:S,$element:I}),v=!0}}var E=_t(p,a,d,m,c,n,f,v);null!==E&&t.push(E)}var L={};r.forEach(function(t){var e=t.$element,n=t.newId,a=e.data("sectionindex"),s=e.data("sectionobject");e.data("sectionindex",n),L["".concat(s).concat(a)]="".concat(s).concat(n)}),Object.keys(L).length&&t.forEach(function(t){t[tt+"Lookup_ID__c"]&&L.hasOwnProperty(t[tt+"Lookup_ID__c"])&&(t[tt+"Lookup_ID__c"]=L[t[tt+"Lookup_ID__c"]])});return t}();if((t=function(t){if(X(".js-remove-linked-section").length>0||X(".js-section-delete").length>0){var e={};for(var n in answerStore){var a=answerStore[n],s=a.hasOwnProperty(tt+"Question__r")&&("Image"===a[tt+"Question__r"][tt+"Type__c"]||"Free Text"===a[tt+"Question__r"][tt+"Type__c"]||"Space"===a[tt+"Question__r"][tt+"Type__c"]);s&&a[tt+"Linked_Section_Order__c"]&&!0==!a.toDelete?function(){var n=a[tt+"Linked_Section_Order__c"],s=X(".form-section").filter(function(){return X(this).data("section-index")===n}),o=s.find(".slds-card__body").data("sectionindex");n!==o?(a[tt+"Linked_Section_Order__c"]=void 0!==o?o:n,t.push(a),e.hasOwnProperty(n)||(e[n]={$formSection:s,updatedSectionIndex:o})):t.push(a)}():s&&(n.length>18||!0===a.toDelete)&&t.push(a)}if(Object.keys(e).length)for(var o in e){var i=e[o],r=i.$formSection,l=i.updatedSectionIndex;r.data("section-index",l)}}return t}(t)).length||!sfEnv.wasQuickSave)ht(t);else{if(at||sfEnv.noNavOnSave)at&&ht(t);else{var e=sfEnv.wasQuickSave?O.SAVE_CLOSE:O.SUBMIT;x.sendMsgToLWC("yFormClose",{closeType:e}),x.returnToDetailPage()}v.saveMsgOff()}}function _t(t,e,n,a,s,o,i,r){var l,c,d,u=_.questionStore[n],f=a[tt+"Type__c"],m=!1,p=!!a[tt+"Is_Text_Formula__c"],v="Radio Button List"===a[tt+"FL_Display_As__c"];delete t.nullDate,"Field Link"===f?(f="Long_Text_Answer__c"===a[tt+"Link_Answer_Field__c"]||"Geolocation_Answer__c"===a[tt+"Link_Answer_Field__c"]?u.fieldLinkParentType:a[tt+"Link_Answer_Field__c"],l=!0):l=!1;var h=i?n:"".concat(n,"-").concat(t[tt+"Linked_Section_Order__c"]),g=t[tt+"Hidden_By_Dep__c"],b=e.indexOf(h)>-1,w=g!==b,y=X(s),k=y.parents(".control-group, .form-section").hasClass("ls-group-changed-input"),S=i&&(y.parent().hasClass("formula-field")||y.find(".slds-form-element__control").hasClass("formula-field")),I=!0===window.formSaveError||w||b||!t.hasOwnProperty("Id")||t.hasOwnProperty("toDelete")&&!0===t.toDelete||t.hasOwnProperty("forceSave")&&!0===t.forceSave||S||r;t[tt+"Hidden_By_Dep__c"]=b;var C=b&&!l&&!sfEnv.wasQuickSave;if("Text"===f||"Text_Answer__c"==f)c=tt+"Text_Answer__c",d=y.val(),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Currency"===f||"Currency_Answer__c"==f)c=tt+"Currency_Answer__c",(d=y.val())&&d.includes(",")&&(d=x.withoutCommaSeparators(d)),((t[c]?"".concat(t[c]):"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Picklist"===f||"PICKLIST"==f&&!v)c=tt+"Long_Text_Answer__c",d=x.withoutDoubleQuote(y.val(),!1),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Date"===f||"Date_Answer__c"==f){var E=y.val(),L=y.hasClass("js-dmy-format"),T=j(E,L);c=tt+"Date_Answer__c",""===E||C?((t[c]||"")!==T||I)&&(at?t[tt+"Date_Answer__c"]=null:(delete t[tt+"Date_Answer__c"],t.nullDate=!0),m=!0):(t[c]!==T||I)&&(m=!0,t[c]=T)}else if("Date/Time"===f||"Date_Time_Answer__c"==f){var A=y.val(),O=y.hasClass("js-dmy-format"),D=q(A,O);c=tt+"Date_Time_Answer__c",""===A||C?((t[c]||"")!==D||I)&&(at?t[tt+"Date_Time_Answer__c"]=null:(delete t[tt+"Date_Time_Answer__c"],t.nullDate=!0),m=!0):((t[c]?"".concat(t[c]):"")!==D||I)&&(m=!0,t[c]=D)}else if("Email"===f||"Email_Answer__c"==f)c=tt+"Email_Answer__c",d=y.val(),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Number"===f||"Number_Answer__c"==f)c=tt+"Number_Answer__c",(d=""===y.val()?null:y.val())&&d.includes(",")&&(d=x.withoutCommaSeparators(d)),((t[c]?"".concat(t[c]):"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Percent"===f||"Percent_Answer__c"==f)c=tt+"Percent_Answer__c",(d=y.val())&&d.includes(",")&&(d=x.withoutCommaSeparators(d)),((t[c]?"".concat(t[c]):"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Phone"===f||"Phone_Answer__c"==f)c=tt+"Phone_Answer__c",d=y.val(),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Long Text"===f||"TEXTAREA"==f||p)c=tt+"Long_Text_Answer__c",d=y.val(),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("URL"===f||"URL_Answer__c"==f)c=tt+"URL_Answer__c",d=y.val(),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d);else if("Multi-select Picklist"===f||"MULTIPICKLIST"==f){if(at||nt)d=y.val();else d=[],y.children(".ui-selected").each(function(t,e){d.push(X(e).data("optionValue"))});c=tt+"Long_Text_Answer__c",null===d||C?((t[c]||"")!==d||I)&&(m=!0,t[c]=""):((t[c]||"")!==d.join(";")||I)&&(m=!0,t[c]=d.join(";"))}else if("Radio Button List"===f||"PICKLIST"==f&&v)c=tt+"Long_Text_Answer__c",d=y.find("input:checked").val(),(t[c]!==d||I)&&(m=!0,d=d||null,t[c]=C?null:d);else if("Checkbox List"===f)c=tt+"Long_Text_Answer__c",(d=y.find(":checked").map(function(){return this.value}).get().join(";")).length>0&&!C?((t[c]||"")!==d||I)&&(m=!0,t[c]=d):((t[c]||"")!==d||I)&&(m=!0,t[c]="");else if("Checkbox_Answer__c"===f)d=y.find(":checked").length,c=tt+"Checkbox_Answer__c",d>0?(!0!==t[c]||I)&&(m=!0,t[c]=!0):(!1!==t[c]||I)&&(m=!0,t[c]=!1);else if("E-Signature"===f){if(c=tt+"Long_Text_Answer__c",d=y.val(),((t[c]||"")!==d||I)&&(m=!0,t[c]=C?null:d,sfEnv.saveESigAsJPG)){var F=y.attr("name");F.length>18&&_.esigInputIds.push({answerId:F,mobileId:F}),t[c]||(t[tt+"E_Sig_Image_Id__c"]=null)}}else if("Lookup_Answer__c"===f){if(c=tt+"Lookup_ID__c",d=y.val(),(t[c]||"")!==d||I)if(m=!0,t[c]=d,""===d)t[tt+"Lookup_Answer__c"]="";else{var M=y.parent().find(".link-lookup").val();t[tt+"Lookup_Answer__c"]=M}}else if("Attachment/Photo"===f){var R=y.closest(".answerValue").data("answerid");"undefined"===R&&(R=t[tt+"Mobile_ID__c"]),(I||b&&!sfEnv.wasQuickSave)&&(m=!0,!sfEnv.wasQuickSave&&b&&sfEnv.isMobileApp&&(t.deleteMyAttachments=!0)),sfEnv.isMobileApp&&y.hasClass("js-answer-changed")?m=!0:y.find("input").each(function(t,e){if(e.files.length>0){var n=X(e).data("externalids");_.attachmentInputIds.push({inputId:e.id,answerId:R,formId:o,externalIds:n}),m=!0}}),delete t[tt+"Long_Text_Answer__c"]}else if(["Free Text","Image","Space"].includes(f))I&&(m=!0);else if("Geolocation"===f||"LOCATION"==f){var P,N,V=y.val().split(" ");2===V.length&&(P=V[0],N=V[1]),(P&&(t[tt+"Geolocation_Answer__Latitude__s"]||"")!==P||I)&&(t[tt+"Geolocation_Answer__Latitude__s"]=C?null:P,m=!0),(N&&(t[tt+"Geolocation_Answer__Longitude__s"]||"")!==N||I)&&(t[tt+"Geolocation_Answer__Longitude__s"]=C?null:N,m=!0),m&&(t[tt+"Geolocation_Answer__c"]={latitude:t[tt+"Geolocation_Answer__Latitude__s"],longitude:t[tt+"Geolocation_Answer__Longitude__s"]})}return l&&t[tt+"Hidden_By_Dep__c"]&&!k&&!0!==t.toDelete&&(t.hasOwnProperty("Id")&&null!==t.Id?w||(m=!1):"Checkbox_Answer__c"===f?t[c]=!1:delete t[c]),l&&sfEnv.isMobileApp&&m?sfEnv.fieldLinkUpdateArray.push({recordId:t["".concat(tt,"Link_Record_Id__c")]||t["".concat(tt,"Linked_Section_Record_ID__c")],linkField:a["".concat(tt,"Link_Field__c")],saveLocation:c,answerValue:t[c],questionId:n,answerId:t.Id,linkObject:t["".concat(tt,"Link_Object__c")],lookupAnswer:t["".concat(tt,"Lookup_Answer__c")]}):sfEnv.isMobileApp||delete t[tt+"Question__r"],m||t[tt+"Hidden_By_Dep__c"],m?t:null}function ht(e){var n=sfEnv.thisForm,a=[],s=[],o=[];if(e.length>0&&X.each(e,function(t,e){!0===e.nullDate&&(a.push(e.Id),delete e.nullDate),!0===e.deleteMyAttachments&&(s.push(e.Id),delete e.deleteMyAttachments)}),null!==n){var i=JSON.parse(JSON.stringify(n));!1===sfEnv.wasQuickSave?i[tt+"Save_Complete__c"]=!0:i[tt+"Save_Complete__c"]=!1,o.push(i)}sfEnv.isMobileApp?mobileSave(e,s,o):w.saveAnswersVFR(e,a,o,!0).then(function(t){return xt(t)}).then(function(t){return w.retrieveFieldValuesVFR(t)}).then(function(t){return St(t)}).then(function(){return w.saveDocumentsVFR(_.attachmentInputIds,null)}).then(function(){!function(){var e=t("./util");_.attachmentInputIds=[],_.esigInputIds=[];var n=sfEnv.wasQuickSave?O.SAVE_CLOSE:O.SUBMIT;e.sendMsgToLWC("yFormClose",{closeType:n}),sfEnv.noNavOnSave?sfEnv.noNavOnSave=!1:e.returnToDetailPage();v.saveMsgOff()}()}).catch(function(t){if(t.type===sfEnv.VFR.saveAllAnswers&&(_.attachmentInputIds=[],_.esigInputIds=[]),v.saveMsgOff(),t.hasOwnProperty("msg")){console.log("Error saving: ".concat(t.msg));var e={headerString:"Error Saving",bodyStringArray:[t.msg]};window.openCustomModal(e)}else if(t.hasOwnProperty("message")&&t.hasOwnProperty("stack")){console.log("Error saving: ".concat(t.message," - ").concat(t.stack));var n={headerString:"Error Saving",bodyStringArray:[t.message,t.stack]};window.openCustomModal(n)}})}function gt(){X("#menu").on("click",function(t){var e,n,a=X(t.target);a.hasClass("page-label")||a.hasClass("page-border-offset")?e=a.closest("li").data("page"):a.hasClass("section")?(n=a.data("section"),e=a.closest("li.page").data("page")):e=a.data("page"),e?bt(null,e,n):Dt().close()})}function bt(e,n,a){var s,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=_.formRender.totalPages;if("string"==typeof _.formRender.currentPage&&(_.formRender.currentPage=parseInt(_.formRender.currentPage,10)),"string"==typeof n&&(n=parseInt(n,10)),o?window.setErrorGuidedMode(!0):window.setErrorGuidedMode(!1),_.formRender.currentPage===n)return at&&window.hideLoading(),a?c():void 0;if(sfEnv.isPreview||!X("#formContent").hasClass("changed-input")||o||t("./app").quickSaveBtn(null,!0),!("next"===e&&_.formRender.currentPage===i||"prev"===e&&1===_.formRender.currentPage)){if(X(".page"+_.formRender.currentPage).hide(),nt?X(".footer-pagination .goToPage"+_.formRender.currentPage).prop("selected",!1).prop("disabled",!1):X(".goToPage"+_.formRender.currentPage).prop("selected",!1).prop("disabled",!1),sfEnv.isMobileApp&&(sfEnv.currentFormPage=n,window.updateCFPagination()),"next"===e?_.formRender.currentPage++:"prev"===e?_.formRender.currentPage--:_.formRender.currentPage=n,nt){s=X(".buttons-fixed .goToPage .slds-badge");for(var r=0;r<s.length;r++)r<_.formRender.currentPage?X(s[r]).addClass("slds-theme_info"):X(s[r]).removeClass("slds-theme_info"),X(".js-section-name").html(f+" - "+K[_.formRender.currentPage-1])}if(X(".page"+_.formRender.currentPage).show(),X(".js-current-page-num").html(_.formRender.currentPage),X(".goToPage"+_.formRender.currentPage).prop("selected",!0).prop("disabled",!0),X("html, body").animate({scrollTop:0},0),_.formRender.currentPage>1&&_.formRender.currentPage<i&&(X(".prevBtn").show(),X(".nextBtn").show()),_.formRender.currentPage===i?nt?(X(".js-footer-right-side-last").show(),X(".js-footer-right-side").hide(),X(".prevBtn").show()):(X(".nextBtn").hide(),X(".prevBtn").show()):nt&&(X(".js-footer-right-side-last").hide(),X(".js-footer-right-side").show()),1===_.formRender.currentPage&&(X(".prevBtn").hide(),X(".nextBtn").show()),sfEnv.currentFormPage=_.formRender.currentPage,sfEnv.isPreview&&1===X(".form-section:visible").length&&X(".OR-card__body:visible").addClass("chrome-preview-fix"),nt||at||sfEnv.isPreview)return c();var l=X("#menu");l.find(".selected").removeClass("selected"),l.find('li.page[data-page="'.concat(sfEnv.currentFormPage,'"]')).addClass("selected"),a?c():Dt().close()}function c(){var t=a?X("#".concat(a)).offset().top:0;if(at)return t;nt||sfEnv.isPreview||Dt().close(),setTimeout(function(){X("html, body").animate({scrollTop:t-80})},500)}}function wt(t){var e=(t.questionId&&t.sectionIndex?Q.findAnswerByIndex(t.questionId,t.sectionIndex):{})[tt+"Linked_Section_Record_ID__c"];return e&&e.length<=18?e:t.Id}function yt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;!function(t,e,n,a,s,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:T.SEARCH,r=[],l=returnNameFieldForObject(e);if(void 0!==n&&"undefined"!==n||(n=null),void 0!==o&&o.length&&[T.IN_FORM,T.BOTH].includes(i)){var c=t.term?t.term.toUpperCase():"";if(o.map(function(t){t.value=X("<div/>").html(t[l]).text();var e=t.value.toUpperCase();c&&e&&e.includes(c)&&r.push(t)}),i===T.IN_FORM)return void s(r)}null!==t.term&&[T.SEARCH,T.BOTH].includes(i)?Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.findMatchingLookupRecords,e,t.term,n,a,function(t,e){t&&t.length?t.forEach(function(t){t.value=X("<div/>").html(t.fieldValues[l]).text(),r.push(t)}):null===t&&e.hasOwnProperty("message")&&s([A.ERROR]),r.length>0?s(r):s([A.NO_RESULTS])}):s([A.CONTINUE_TYPING])}(t,o,X((a||this).element).data("lookupfilter")||"",i,e,n,s)}ot&&X("#menu").removeClass("slds-hide");var kt=function(){function t(e,n,a,s,o,i){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.objectName=e,this.recordId=n,this.fieldName=o,this.fieldType=i,this.mobileId=a,this.sfId=s,this.randomId=x.randomString(8,"Aa#"),this.value=r,this.updateAnswer=l}var e,n,a;return e=t,(n=[{key:"setDOMElement",value:function(t){this.$inputElement="Checkbox_Answer__c"===this.fieldType?t.closest(".slds-form-element__control").find("input"):t.siblings("input")}},{key:"getSFData",value:function(){return{objectName:this.objectName,recordId:this.recordId,mobileId:this.mobileId,sfId:this.sfId,fieldName:this.fieldName,randomId:this.randomId,fieldType:this.fieldType,updateAnswer:this.updateAnswer}}},{key:"updateUIInput",value:function(t){var e=this.$inputElement,n=e.hasClass("js-dmy-format"),a=x.checkIfLink(t),s=!(a&&at);if(["Text_Answer__c","Long_Text_Answer__c"].includes(this.fieldType))s&&(t=X("<div/>").html(t).text());else if("Date_Answer__c"===this.fieldType)if(t){var o=n?L:E;t=moment(t).format(o)}else t=null;else if("Date_Time_Answer__c"===this.fieldType)t=t?x.formatDateTimeAnswerValue(t,n):null;else if("Checkbox_Answer__c"===this.fieldType)return e.prop("checked","true"===t||!0===t),setTimeout(function(){e.trigger("input")},0),void(sfEnv.noNavOnSave&&setTimeout(function(){e.trigger("change")},0));if(e.val(t),a)if(at&&(t=x.convertToMobileLink(t)),e.siblings(".is-url-formula").length)e.siblings(".is-url-formula").html(t);else{var i=e.prop("required")||!1,r=e.data("questionid"),l=e.data("linkedsectionorder"),c=e.prop("name"),d=b.createDisabledTextarea(a,i,r,l,c,t);X(d).insertBefore(e)}setTimeout(function(){e.trigger("input")},0),sfEnv.noNavOnSave&&setTimeout(function(){e.trigger("change")},0)}}])&&s(e.prototype,n),a&&s(e,a),t}();function xt(t){return new Promise(function(e){var n=X(".form-section:not(.js-section-delete)").find(".js-refresh-formula"),a={};if(0===n.length)return e(a);!function(){if(!at){var t=X(".js-refresh-formula");t.find(".js-formula-spinner").show(),t.find(".js-formula-icon").hide()}}(),n.each(function(e,n){var s=X(n),o=function(t,e){if("undefined"!==t.data("recordid"))return t.data("recordid");var n="undefined"!==t.data("sfid")?t.data("sfid"):t.data("mobileid"),a=e.dbResults.filter(function(t){if((n===t.clientId||n===t.sfId)&&t.hasOwnProperty("relatedRecordID"))return!0});return a.length?(t.data("recordid",a[0].relatedRecordID),a[0].relatedRecordID):null}(s,t);if(o){var i=new kt(s.data("objectname"),o,s.data("mobileid"),s.data("sfid"),s.data("fieldname"),s.data("fieldtype"));i.setDOMElement(s),a[i.randomId]=i}}),e(a)})}function St(t){if(t){var e=t.allFormulaFieldDatasets,n=t.updatedFieldInfo;return new Promise(function(t,a){var s,o=i(n);try{for(o.s();!(s=o.n()).done;){var r=s.value;if(r.hasOwnProperty("error")&&null!==r.error)return It(),a({type:sfEnv.VFR.retrieveFieldValues,msg:r.error});e[r.randomId].updateUIInput(r.value)}}catch(t){o.e(t)}finally{o.f()}return It(),t()})}}function It(){if(!at){var t=X(".js-refresh-formula");t.find(".js-formula-spinner").hide(),t.find(".js-formula-icon").show()}}function Ct(t){t.preventDefault();var e=X(t.currentTarget).prev(".geolocation-input");H.getGeolocation().then(function(t){t&&X(e).val("".concat(H.formatCoordinate(t.coords.latitude)," ").concat(H.formatCoordinate(t.coords.longitude))).trigger("change")})}function Et(t){var e,n=t.target,a=X(t.target),s=n.files,o=a.closest(".file-uploader"),i=o.attr("id"),r=i.indexOf("_"),l=i.slice(r+1),c=n.id.slice(n.id.indexOf("_")+1),d=c;c.indexOf("__")>-1&&(d=c.slice(0,c.indexOf("__")),e=c.slice(c.indexOf("__")+2).replace(".","-"));var u=parseInt(d.slice(d.indexOf("-")+1),10),f=!1,m=[],p=[],v=[];if(o.find(".js-file-error").remove(),s.length){a.off("change").prop("disabled",!0),a.after('<input type="file" '.concat(nt?'capture="camera"':"",'\n\t\t\t\tclass="slds-file-selector__input slds-assistive-text" \n\t\t\t\tid="file-upload-input_').concat(l,"-").concat(u+1).concat(void 0!==e?"__"+e:"",'"\n\t\t\t\tname="file-upload-input_').concat(l,"-").concat(u+1).concat(void 0!==e?"__"+e:"",'"\n\t\t\t\taria-describedby="file-selector-id" \n\t\t\t\t/>')),(nt?a.parent().find(".slds-button_icon"):a.parent().find(".slds-file-selector__body")).prop("for","file-upload-input_".concat(l,"-").concat(u+1).concat(void 0!==e?"__"+e:""));for(var _=0;_<s.length;_++){var h=s[_],g=h.size,b=V(22,"aA#");if(g>=W)m.push(h.name),f=!0;else{v.push(b);var w=N(g);p.push(P(h.name,w,u,b,null,"file-upload-input_".concat(l,"-").concat(u).concat(void 0!==e?"__"+e:"")))}}X(a[0]).data("externalids",v.join(","));var y=a.parent().find(".js-attachment-count");B(y,s.length-m.length);var k=X(this).closest(".controls").find(".selected-files");f?(k.append(function(t){var e=t.length>1,n=sfEnv.isPublicSite?"3 MB":"37 MB",a="Selected file".concat(e?"s":""," too large, limit ").concat(n," per file.");return'\n\t\t\t<div class="slds-grid slds-m-top_small file-preview file-error js-file-error">\n\t\t\t\t<div class="slds-col slds-size_2-of-12 flex-center">\n\t\t\t\t\t<svg class="slds-button__icon slds-icon_small" aria-hidden="true">\n\t\t\t\t\t\t<use xlink:href="'.concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#warning",'"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-col slds-size_10-of-12 file-name-align">\n\t\t\t\t\t<p class="slds-text-align_left">').concat(a,"</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")}(m)),k.context.required&&(k.context.nextSibling.required=!0),k.context.remove()):(k.append(p),k.find('[data-input-index="'.concat(u,'"] .js-remove-file')).on("click",function(t){Lt(t,l,u)}))}else;}function Lt(t,e,n){var a=X(t.target).closest(".js-file-preview"),s=a.closest(".controls"),o=a.find(".js-remove-file").data("sfid"),i=n||a.data("input-index"),r=a.closest(".form-section").find("[data-sectionindex]").data("sectionindex"),l=0!==a.closest(".file-uploader").find(".js-required-photo").length;if(1===a.closest(".selected-files").find(".js-file-preview").length&&l){window.openCustomModal({headerString:"Required Question",bodyStringArray:["This question requires an attachment. Please add another attachment before deleting this one."]})}else if(o){window.openCustomModal({bodyStringArray:["Are you sure you want to delete this File?"],showCancelButton:!0}).then(function(){v.saveMsgOn(),Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.deleteDocument,o,function(e){if("success"===e){var n=X(t.currentTarget),a=n.closest(".file-uploader"),s=!!a.find(".js-required-photo").length;n.closest(".js-file-preview").remove();var o=a.find(".js-file-preview").length;if(s&&o<1){var i=a.find("input");X(i[0]).prop("required",!0)}v.saveMsgOff()}else{window.openCustomModal({bodyStringArray:["File could not be deleted."]})}},function(){v.saveMsgOff()})}).catch(function(){})}else{var c=0,d=X(t.target).closest(".controls").find("input");X(d).each(function(t,n){n.id==="file-upload-input_".concat(e,"-").concat(i).concat(0===r||r?"__"+r:"")&&(c+=n.files.length,n.required&&(d[t+1].required=!0),X(n).remove())}),X(t.target).closest(".selected-files").find('[data-input-index="'.concat(i,'"]')).remove();var u=s.find(".js-attachment-count");B(u,-c)}}function Tt(t){if(t.target.files.length){v.saveMsgOn("sf1Photo");var e=t.target.files[0],n=e.name,a=V(22,"aA#"),s=X("h1.formName").data("formid");w.saveDocumentsVFR(null,{file:e,fileName:n,externalId:a,formId:s}).then(function(){v.saveMsgOff()})}}function At(t){x.setLSGroupChangedInput(t),X("#formContent").addClass("changed-input")}function Ot(t,e,n,a){var s=t.closest(".slds-card__body").find('textarea[data-inhvalrel="'.concat(n,'"],input[data-inhvalrel="').concat(n,'"]')),o={};(s.length>0&&s.each(function(t,n){var s=X(n).data("inhvalfield"),i=new kt(e,a,null,null,s,X(n).data("fieldtype"),null,!1);if(i.$inputElement=X(n),null===a)return i.updateUIInput(null),!0;o[i.randomId]=i}),null!==a)?(at?window.retrieveFieldValuesMobile(o):w.retrieveFieldValuesVFR(o)).then(function(t){return St(t)}).then(function(){z.runAllCustomFormulas()}):z.runAllCustomFormulas()}function Dt(){return ot}window.setInheritedValue=Ot,window.setAutocompleteAnswer=function(t,e){var n,a=e.eq(0),s=a.data("objectname"),o=a.data("linkfield"),i=a.data("lookupQuestionRandomId");if(Array.isArray(t))e.val(""),e.parent().find("input:hidden").val(""),ct(e),n=null,e.parent().find(".control-group").removeClass("in-form-lookup-parent");else{n=wt(t);var r=x.returnNameFieldForObject(t.attributes.type);e.val(t[r]),ct(e),e.parent().find("input:hidden").val(n),x.setAsInFormLUParent(n,s,i)}Ot(e,s,o,n)};var Ft={renderForm:function(e,n){y.setBehavior(e.template,e.form.Id,e.form[tt+"Mobile_ID__c"]);var a=e.template,s=e.form;f=x.purifyHTML(a.templateName),m=s.Name,sfEnv.fieldLinkUpdateArray=[];var o=s.hasOwnProperty(tt+"Contact__c")?s[tt+"Contact__c"]:s[tt+"Contact_Mobile_ID__c"];p=s.hasOwnProperty("Id")?s.Id:s[tt+"Mobile_ID__c"];var i=1,r="",l=X("#formContent"),b=t("./section");u=sfEnv.stateCountryMap,st=sfEnv.countryPickLists,l.addClass("slds-p-bottom_xx-large");var w=nt?"sf1-footer-margin":"";if(sfEnv.isLWC&&X("#complete-form").addClass("is-lwc"),nt&&e.form.hasOwnProperty(tt+"Redirect_After_Save__c")&&(sfEnv.sf1RedirectId=e.form[tt+"Redirect_After_Save__c"]),sfEnv.isMobileApp&&a.theTemplate[tt+"Enable_Form_PDFs__c"]?sfEnv.thisForm.formPDFsEnabled=a.theTemplate[tt+"Enable_Form_PDFs__c"]:et&&!nt&&a.theTemplate[tt+"Enable_Form_PDFs__c"]&&(X("#createPDFBtn").parent().removeClass("slds-hide"),X("#createPDFBtn").click(M.createPDF)),sfEnv.isMobileApp&&(sfEnv.thisForm.mobileButtonLabels={},sfEnv.thisForm.mobileButtonLabels.quickSave=a.theTemplate[tt+"Quick_Save_Label_Mobile__c"]||"Save & Close",sfEnv.thisForm.mobileButtonLabels.save=a.theTemplate[tt+"Save_Label_Mobile__c"]||"Submit",sfEnv.thisForm.mobileButtonLabels.cancel=a.theTemplate[tt+"Cancel_Label_Mobile__c"]||"Cancel",sfEnv.thisForm.mobileButtonLabels.viewInsights=a.theTemplate[tt+"View_Insights_Label_Mobile__c"]||"View Insights",sfEnv.thisForm.mobileButtonLabels.generatePDF=a.theTemplate[tt+"Generate_PDF_Label_Mobile__c"]||"Generate PDF"),sfEnv.isMobileApp&&(_.formRender.allPages=[],_.depQuestionLogicStore={},G=!1,J=!1),X.each(a.sections,function(t,e){e.hasOwnProperty("allQuestions")&&e.allQuestions.length>0&&X.each(e.allQuestions,function(t,e){c=X.inArray(e.question[tt+"Link_Field__c"],U)>=0,d=X.inArray(e.question[tt+"Link_Field__c"],$)>=0,st&&c?G=!0:!st&&d&&(J=!0)})}),X("body.sfdcBody").length>0&&X(".dataStore.formRender.currentPageContainer").css("background-color","#fff"),a.hasOwnProperty("bannerImage")&&""!==a.bannerImage&&l.append('<img src="data:image/jpeg;base64,'+a.bannerImage+'"/>'),_.formRender.setFormColor=!(!a.hasOwnProperty("formColor")||""===a.formColor),!nt){var S=sfEnv.isMobileiOS?'tabindex="-1"':"";l.append('<h1 class="formName slds-text-heading_large slds-m-vertical_small" data-contactid="'.concat(o,'" data-formid="').concat(p,'" ').concat(S,'><span class="template-name-width">').concat(f,"</span></h1>")),l.append('<h3 class="slds-text-heading_small slds-m-vertical_small  form-number"><span class="form-name-width">'.concat(s.Name,"</span></h3>"))}s.hasOwnProperty(tt+"Full_Save_Error__c")&&s[tt+"Full_Save_Error__c"]?(window.formSaveError=!0,sfEnv.isMobileApp&&l.append('<div class="slds-text-heading_medium slds-m-vertical_medium slds-box slds-theme_shade" >\n\t\t\t\t\t<h1 class="error">\n\t\t\t\t\t\t'.concat(s[tt+"Full_Save_Error__c"],"\n\t\t\t\t\t</h1>\n\t\t\t\t</div>"))):window.formSaveError=!1,J?(l.append('<div class="error-text state-country-invalid"><div class="state-country-container"><b>State/Country Field Error</b><br> The state/country picklist field link fields on this form\'s template are incompatible with your org. <br>Please create a copy of the template and then convert the fields before re-publishing.</div></div>'),X("#cfBtn").attr("href","").addClass("disabled-slds-btn")):G&&(l.append('<div class="error-text state-country-invalid"><div class="state-country-container"><b>State/Country Field Error</b><br> The state/country text field link fields on this form\'s template are incompatible with your org. <br>Please create a copy of the template and then convert the fields before re-publishing.</div></div>'),X("#cfBtn").attr("href","").addClass("disabled-slds-btn"));var I=!0===et?"":'<div class="slds-hide hidden-page-msg slds-text-heading_medium slds-m-vertical_medium slds-box slds-theme_shade" >\n\t\t\t\t\t\t\t\t<h1>Based on your previous answers, you can skip this page.</h1>\n\t\t\t\t\t\t\t</div>';if(X.each(a.sections,function(t,e){r+="","Linked"===e.sectionType?r+=b.buildLinkedSections(e,s):e.hasOwnProperty("allQuestions")&&e.allQuestions.length>0&&(r+=b.buildSection(e,s,0,null,!1)),X("#menu").find('li[data-page="'.concat(i,'"] ul')).append('\n\t\t\t<li class="section slds-text-body_small" tabindex="0" data-section="'.concat(e.sectionId,'">\n\t\t\t\t<span class="section-dot"></span>\n\t\t\t\t').concat(e.sectionName,"\n\t\t\t</li>\n\t\t")),a.sections.length===t+1?(!nt&&at&&(r+='\n\t\t\t\t\t<span class="slds-scope save-button-container">\n\t\t\t\t\t\t<button type="button" class="slds-button slds-button_neutral js-mobile-save slds-m-top_x-large">\n\t\t\t\t\t\t\t'.concat(sfEnv.thisForm.mobileButtonLabels.save,"\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>")),_.formRender.allPages.length>=1?_.formRender.allPages.push('<div class="pageContent page'+i+" "+w+' " data-page="'+i+'">'+I+r+"</div>"):_.formRender.allPages.push(r)):(!0===e.pageBreak||nt)&&(nt&&K.push(e.sectionName),_.formRender.allPages.push('<div class="pageContent page'+i+" "+w+' " data-page="'+i+'">'+I+r+"</div>"),r="",i++,X("#menu").find("ul.pages").append('\n\t\t\t\t<li class="page" data-page="'.concat(i,'">\n\t\t\t\t\t<div class="page-border-offset">\n\t\t\t\t\t\t<div class="page-label slds-text-heading_label" tabindex="0">\n\t\t\t\t\t\t\tPage ').concat(i,'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class="sections"></ul>\n\t\t\t\t</li>\n\t\t\t')))}),l.append(_.formRender.allPages),at){var C=!1;l.on("focus",".link-lookup",function(t){if(!C){C=!0;var e=X(t.currentTarget);if(!e.data("isSmartLookup")){var n={};if(n.objectName=e.data("objectname"),n.questionId=e.attr("name"),n.answerVal=e.val(),n.answerValId=e.parent().find("input:hidden").val(),n.init=!0,n.targetRef=e,n.lookupFilter="undefined"===e.data("lookupfilter")?null:e.data("lookupfilter"),n.lookupType="undefined"===e.data("lookupType")?"Search":e.data("lookupType"),n.lookupQuestionRandomId="undefined"===e.data("lookupQuestionRandomId")?null:e.data("lookupQuestionRandomId"),n.lookupFieldsetFields="undefined"===e.data("lookup-fieldset-fields")?null:e.data("lookup-fieldset-fields"),[T.IN_FORM,T.BOTH].includes(n.lookupType)&&n.lookupQuestionRandomId){var a=x.getInFormLookupRecords(n.lookupQuestionRandomId);a.length&&(n.inFormRecords=a)}return window.openIonAutocomplete(n).then(function(){setTimeout(function(){C=!1},1e3)})}var s=["undefined",void 0].includes(e.data("smartFieldsetFields"))?[]:e.data("smartFieldsetFields"),o=e.closest(".control-group").find(".label-width").text().trim(),i=e.attr("name"),r=e.data("objectname"),l=e.next(".answerValue").val(),c="undefined"===e.data("lookupfilter")?"":e.data("lookupfilter"),d=e.data("linkfield");k.openSmartLookup(s,o,i,r,l,c,d),setTimeout(function(){C=!1},100)}}),k.setUpModalButtonListeners()}else l.on("keydown.autocomplete",".link-lookup",function(t){if(t.keyCode!==X.ui.keyCode.TAB&&16!==t.keyCode&&17!==t.keyCode&&18!==t.keyCode&&91!==t.keyCode&&27!==t.keyCode){var e=X(this).eq(0),n=e.data("objectname"),a=e.data("linkfield");Ot(X(this),n,a,null);var s="undefined"===e.data("lookupType")?"Search":e.data("lookupType"),o="undefined"===e.data("lookupQuestionRandomId")?null:e.data("lookupQuestionRandomId"),i="undefined"===e.data("lookup-fieldset-fields")?null:e.data("lookup-fieldset-fields"),r=returnNameFieldForObject(n);if([T.IN_FORM,T.BOTH].includes(s)&&o){var l=x.getInFormLookupRecords(o);Z.source=function(t,e){yt(t,e,l,this,s,n)}}else s===T.SEARCH?Z.source=function(t,e){yt(t,e,void 0,this,s,n,i)}:Z.source=yt;X(this).autocomplete(Z).autocomplete("instance")._renderItem=function(t,e){if(e.fieldValues&&e.fieldValues[r]){var n="<div class='autocomplete-title'>".concat(e.fieldValues[r],"</div>");return i&&i.split(",").forEach(function(t){e.fieldValues[t]&&(n+="<div>".concat(e.fieldValues[t],"</div>"))}),X("<li>").append(n).appendTo(t)}return X("<li>").append("<div>".concat(e.label,"</div>")).appendTo(t)}}});sfEnv.numFormPages=_.formRender.allPages.length;for(var E=Object.keys(_.depQuestionLogicStore),L=0;L<E.length;L++){var A=E[L];l.find('[data-randomid="'.concat(A,'"]')).addClass("parentQuestion")}!0===_.hasSignature&&(X("#mainForm").trigger("esig"),_.hasSignature=!1),X('.pageContent[class^="page"]').hide(),X(".page1").show(),_.formRender.totalPages=_.formRender.allPages.length,_.formRender.totalPages>1||sfEnv.isSF1?(function(){var t,e=_.formRender.allPages.length,n=i(e);nt&&(t=i(e,!0));var a,s,o=sfEnv.isMobileApp?"paginationBlock-mobile":"";function i(t,e){var n,a="";for(n=1;n<=t;n++)a+=1===n?e?'<div class="slds-badge js-page-numbering slds-theme_info"> </div>':'<option class="goToPage'+n+'" selected disabled value='+n+">Page "+n+"</option>":e?'<div class="slds-badge js-page-numbering"> </div>':'<option class="goToPage'+n+'" value='+n+">Page "+n+"</option>";return a}nt||sfEnv.isMobileApp?!nt&&sfEnv.isMobileApp?a='<select class="slds-select goToPage ignore">\n\t\t\t\t\t\t\t'.concat(n,"\n                        </select>"):(a='\n\t\t\t\t\t\t\t<h1 class="template-name js-section-name formName slds-truncate" data-formid="'.concat(sfEnv.thisForm.Id,'">').concat(f," (").concat(m,") - ").concat(K[0],'</h1>\n\t\t\t\t\t\t\t<span class="goToPage">\n\t\t\t\t\t\t\t\t').concat(t,"\n\t\t\t\t\t\t\t</span>"),s='\n\t\t\t<div class="slds-grid footer-pagination">\n\t\t\t\t<div class="slds-col slds-size_1-of-2 footer-icons-left">\n\t\t\t\t\t<button class="prevBtn slds-button slds-button_icon-container slds-button_icon-inverse" style="display:none;" type="button">\n\t\t\t\t\t\t<span class="icon-container">\n\t\t\t\t\t\t\t<span class="slds-icon_container slds-icon-action-reject slds-icon_container_circle">\n\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-icon slds-icon_x-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=\''.concat(sfEnv.SLDS_PATH+"/assets/icons/action-sprite/svg/symbols.svg#back",'\'></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="slds-assistive-text">Previous Page</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t').concat(e>1?'<select class="slds-select goToPage ignore">\n\t\t\t\t\t'.concat(n,"\n\t\t\t\t</select>"):"",'\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-col slds-size_1-of-2 footer-icons-right">\n\t\t\t\t\t<input class="js-photo-file photo-input-offscreen" type="file" capture="camera" accept="image/*" />\n\t\t\t\t\t<section class="slds-clearfix js-footer-right-side">\n\t\t\t\t\t\t<div class="slds-float_right">\n\t\t\t\t\t\t\t<button class="photoBtn button-large button-marging-large slds-button slds-button_icon-container slds-button_icon-inverse" type="button">\n\t\t\t\t\t\t\t\t<span class="icon-container icon-container-camera">\n\t\t\t\t\t\t\t\t\t<span class="slds-icon_container slds-icon-action-reject slds-icon_container_circle footer-camera-container js-photo-open">\n\t\t\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-icon slds-icon_medium footer-camera-icon">\n\t\t\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=\'').concat(sfEnv.SLDS_PATH+"/assets/icons/standard-sprite/svg/symbols.svg#photo",'\'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Camera</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class="nextBtn button-large slds-button slds-button_icon-container slds-button_icon-inverse" type="button">\n\t\t\t\t\t\t\t\t<span class="icon-container">\n\t\t\t\t\t\t\t\t\t<span class="slds-icon_container slds-icon-action-reject slds-icon_container_circle">\n\t\t\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-icon slds-icon_small" style="transform: rotate(180deg);">\n\t\t\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=\'').concat(sfEnv.SLDS_PATH+"/assets/icons/action-sprite/svg/symbols.svg#back",'\'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Next Page</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class="slds-clearfix js-footer-right-side-last slds-hide">\n\t\t\t\t\t\t<div class="slds-float_right OR-footer-buttons-width">\n\t\t\t\t\t\t\t<button class="photoBtn button-large button-marging-large slds-button slds-button_icon-container slds-button_icon-inverse" type="button">\n\t\t\t\t\t\t\t\t<span class="icon-container icon-container-camera">\n\t\t\t\t\t\t\t\t\t<span class="slds-icon_container slds-icon-action-reject slds-icon_container_circle footer-camera-container js-photo-open">\n\t\t\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-icon slds-icon_medium footer-camera-icon">\n\t\t\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=\'').concat(sfEnv.SLDS_PATH+"/assets/icons/standard-sprite/svg/symbols.svg#photo",'\'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Camera</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class="button-finish button-large slds-button slds-button_icon-container slds-button_icon-inverse" type="button">\n\t\t\t\t\t\t\t\t<span class="icon-container">\n\t\t\t\t\t\t\t\t\t<span id="normalSaver" class="slds-icon_container slds-icon-action-reject slds-icon_container_circle">\n\t\t\t\t\t\t\t\t\t\t<p class="js-sf1-finish-text">SUBMIT</p>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Save</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>'),X(".js-footer").append(s),X(".js-photo-open").on("click",function(){X(".js-photo-file").trigger("click")}),X(".js-photo-file").on("change",Tt),X("#normalSaver").on("click",v.normalSaveBtn)):a='<div class="paginationBlock '.concat(o,'">\n\t\t\t\t\t\t\t<button class="prevBtn slds-button slds-button_icon-container slds-button_icon-inverse" style="display:none;" type="button">\n\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#chevronleft",'"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Previous Page</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span class="current-page-text">Page <span class="js-current-page-num">1</span> of ').concat(_.formRender.allPages.length,'</span>\n\t\t\t\t\t\t\t<button class="nextBtn slds-button slds-button_icon-container slds-button_icon-inverse" type="button">\n\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#chevronright",'"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Next Page</span>\n\t\t\t\t\t\t\t</button>\n                        </div>'),et||X(".js-pagination-container").append(a),sfEnv.sf1HeaderColor&&nt&&(X(".buttons-fixed").css("background-color",sfEnv.sf1HeaderColor),X(".footer").css("background-color",sfEnv.sf1HeaderColor),X("#sf1CancelBtn, .js-photo-open, #normalSaver, .prevBtn .slds-icon_container, .nextBtn .slds-icon_container").css("background-color",sfEnv.sf1ButtonColor),X("#normalSaver p").css("color",sfEnv.sf1ButtonText),X("#sf1CancelBtn, .js-photo-open, .prevBtn, .nextBtn").find("svg").css("fill",sfEnv.sf1ButtonText)),sfEnv.sf1HeaderText&&nt&&(X(".footer p").not(".js-sf1-finish-text").css("color",sfEnv.sf1HeaderText),X(".buttons-fixed h1").css("color",sfEnv.sf1HeaderText)),X(".prevBtn").on("click",function(){bt("prev")}),X(".nextBtn").on("click",function(){bt("next")}),X("select.goToPage").on("change",function(t){bt(null,t.currentTarget.value)}),nt||at||gt(),_.formRender.currentPage=1}(),X(".dataStore.formRender.currentPageContainer").addClass("with-pagination"),sfEnv.isMobileApp&&X(".errorSummary-mobile").css("margin-top","10px")):(X(".dataStore.formRender.currentPageContainer").removeClass("with-pagination"),nt||at||gt()),lt(),X(".parentQuestion, .childQuestion").each(function(){h.toggleChildFields(X(this).find(".formInput"),X(this).data("randomid"),"fast",!0)}),_.formRender.setFormColor&&(X(".form-section .slds-card__header").css({"background-color":a.formColor}),X(".form-section .slds-card__footer").css({"background-color":a.formColor})),l.on("change keyup keydown","input, textarea, select",function(){At(X(this))}),l.on("keyup","input.js-num-type-input",z.runAllCustomFormulas),l.on("change",".js-trigger-custom-formula",z.runAllCustomFormulas),l.on("change","select.formInput:not(.js-custom-formula-ms), .is-linked-section .controls-table fieldset.formInput",Y.runAllCustomFormulasMSP),X("ol:not(.js-custom-formula-ms) li.mspicklist-item").off("click.cfmsp").on("click.cfmsp",Y.runAllCustomFormulasMSP),l.on("mouseup","input.date, input.dateTime, canvas",function(){At(X(this))}),l.on("change",'select.js-country-code, fieldset.js-country-code input[type="radio"]',function(){mt(!0,this)}),l.find("select.js-child-dep-pl, fieldset.js-child-dep-pl").each(function(t,e){var n=X(e),a=n.data("parent-picklist-id"),s=n.data("linkedsectionorder");l.find('select[data-random-id="'.concat(a,'"][data-linkedSectionOrder="').concat(s,'"]')).closest(".slds-select_container").on("change","select.slds-select",function(){mt(!0,this)}),l.find('fieldset[data-random-id="'.concat(a,'"][data-linkedSectionOrder="').concat(s,'"]')).closest(".controls").on("change",'input[type="radio"]',function(){mt(!0,this)})}),sfEnv.isMobileApp||X(window).on("beforeunload",function(){if(l.hasClass("changed-input"))return"You have unsaved changes!"}),et||sfEnv.isPreview||lt(X("#menu .section")),g.setupValidationRules(),X("#loadingMessage").hide(),n&&n(),!0===et&&(F.displayInsights(a,p),X(".card-item[data-discoveryid]").on("click",function(t){F.openLink("/"+X(t.currentTarget).data("discoveryid"))}))},afterFormRender:function(){mt(!1,null),at&&nt||ut(),ft(),[T.BOTH,T.IN_FORM].forEach(function(t){X('input.link-lookup[data-lookup-type="'.concat(t,'"]')).each(function(){var t=X(this),e=t.data("objectname"),n=t.data("lookupQuestionRandomId"),a=t.next().val();x.setAsInFormLUParent(a,e,n)})});var e=navigator.userAgent;if(e.indexOf("Windows")>-1&&e.indexOf("Chrome")>-1&&-1===e.indexOf("Edge")?X("#completeFormPage select").addClass("hide-scroll"):sfEnv.isSF1&&sfEnv.isMobileiOS&&X(".buttons-fixed").css("position","absolute"),sfEnv.isMobileApp&&(window.toggleOfflineElements(),X("#completeFormPage").on("click","img.js-template-image",function(t){cordova.InAppBrowser.open(t.currentTarget.currentSrc,"_blank","location=no,zoom=yes,toolbar=yes,closebuttoncaption=Done,enableViewportScale=true")})),sfEnv.isPreview&&1===X(".form-section:visible").length&&X(".OR-card__body:visible").addClass("chrome-preview-fix"),!0===et&&(X(".pageContent").show(),X(".paginationBlock").remove(),X(".dataStore.formRender.currentPageContainer").removeClass("with-pagination"),X(".controls select[multiple]").each(function(t,e){X(e).prop("size",X(e).find("option").length),X(e).css("max-height","100%")})),!1===et){var n=t("./section"),s=X("#formContent"),o=sfEnv.isMobileAndroid?333:0,r=sfEnv.isMobileiOS?800:0;s.on("click",".ls-card",function(){var t=this;setTimeout(function(){n.openLSCardModal(X(t))},o)}),s.on("change",'.js-uses-ls-card .slds-form-element__control:not(.formula-field) .answerValue, .js-uses-ls-card .slds-form-element.js-sig-answer .answerValue, .js-uses-ls-card .answerValue.table-radio input[type="radio"]',function(){ct(X(this))}),s.on("input",".js-uses-ls-card .formula-field .answerValue, .js-uses-ls-card .slds-form-element__control [data-inhvalfield].answerValue",function(){ct(X(this))}),s.on("click",".js-close-linked-section",function(){n.closeLSCardModal(X(this))}),sfEnv.hasLSCards&&(window.onresize=function(){setTimeout(function(){n.setLSModalSize()},r)}),g.setupFormValidation(vt),function(){var t,e=this,n=X("#sigModal"),s=n.find(".js-sig-wrapper");n.find(".js-sig-save").on("click",(t=regeneratorRuntime.mark(function t(){var a,o,i,r,l,c,d,u,f,m,p,v,_,h,g,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.data("sectionId"),o=s.data("sectionIndex"),i=s.data("qId"),r=s.jSignature("getData","svgbase64"),l=new Image,c=a?X('[data-sectionid="'.concat(a,'"][data-sectionindex="').concat(o,'"]')).find('.js-sig-answer[data-questionid="'.concat(i,'"]')):X('.js-sig-answer[data-questionid="'.concat(i,'"]')),d=!1,r[1]===n.data("svgBase")?(d=!0,c.addClass("sig-empty"),c.hasClass("js-old-sig")&&(l.style="height: 60px")):(l.src="data:".concat(r[0],",").concat(r[1]),l.classList.add("slds-p-around_small"),c.removeClass("sig-empty")),s.jSignature("clear"),c.find("img, canvas").replaceWith(l),c.find("input").val(d?"":l.src).trigger("change"),c.addClass("js-input-changed"),!sfEnv.isMobileApp||!sfEnv.saveESigAsJPG){t.next=44;break}return window.showLoading(""),u=c.find("input").prop("name"),f="undefined"!==c.find("input").data("jpgVersionId")?c.find("input").data("jpgVersionId"):void 0,t.next=18,window.queryPhotoByAnswerID(u);case 18:if(m=t.sent,!f&&m&&m.versionID&&(f=m.versionID),!l.src){t.next=41;break}return t.prev=21,t.next=24,x.svgString2Image(l.src,D.WIDTH,D.HEIGHT,D.FORMAT);case 24:return p=t.sent,v=p.indexOf(",")+1,_=p.slice(v),h=u,g=m&&m.externalFileID,b=f,t.next=34,window.saveAsJPG(_,h,g,u,b,D.WIDTH,D.HEIGHT,!1,!0);case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(21),console.log("svgString2Image error:",t.t0);case 39:t.next=43;break;case 41:return t.next=43,window.deletePhoto(u,f,m);case 43:window.hideLoading();case 44:n.addClass("slds-hide"),X(".slds-backdrop").addClass("slds-backdrop_closed").removeClass("slds-backdrop_open"),s.empty(),At(X(e)),s.data({qId:"",sectionId:"",sectionIndex:""});case 49:case"end":return t.stop()}},t,null,[[21,36]])}),function(){var e=this,n=arguments;return new Promise(function(s,o){var i=t.apply(e,n);function r(t){a(i,s,o,r,l,"next",t)}function l(t){a(i,s,o,r,l,"throw",t)}r(void 0)})})),n.find(".js-sig-cancel").on("click",function(){n.addClass("slds-hide"),X(".slds-backdrop").addClass("slds-backdrop_closed").removeClass("slds-backdrop_open"),s.empty()}),n.find(".js-sig-clear").on("click",function(){n.find(".js-sig-wrapper").jSignature("clear")})}(),dt(),z.runAllCustomFormulas(),Y.runAllCustomFormulasMSP(),rt(),it(s);var l=Object.keys(_.depQuestionLogicStore);h.setupDepLogicListeners(l),X(".form-section.js-uses-ls-card .answerValue").each(function(t,e){ct(X(e))}),X("#completeFormPage").on("click",".add-linked-section",function(){setTimeout(function(t){var e=t.closest(".form-section"),a={randomId:e.data("randomid"),usesLSCard:e.hasClass("uses-ls-card")};n.addLinkedSection(t),at?(window.showLoading(""),setTimeout(function(t){var e=X('.form-section[data-randomid="'.concat(t.randomId,'"]:not(.js-section-delete)')).last(),n=e.data("sectionIndex");window.recompileAngularElement('.form-section[data-randomid="'.concat(t.randomId,'"][data-section-index="').concat(n,'"]')),t.usesLSCard?e.prevAll(".ls-card").first().trigger("click"):window.hideLoading()},r,a)):a.usesLSCard&&setTimeout(function(t){X('.form-section[data-randomid="'.concat(t.randomId,'"]:not(.js-section-delete)')).last().prevAll(".ls-card").first().trigger("click")},0,a)},o,X(this)),setTimeout(function(){X("ol:not(.js-custom-formula-ms) li.mspicklist-item").off("click.cfmsp").on("click.cfmsp",Y.runAllCustomFormulasMSP)},0)}),X("#completeFormPage").on("click",".js-add-linked-section-card",function(){X(this).parent().prevAll(".form-section:not(.js-section-delete)").first().find(".add-linked-section").trigger("click"),X(this).parent().removeClass("slds-has-error OR-has-error").siblings(".ls-card-header").removeClass("slds-has-error").find(".section-required-msg").removeClass("slds-show").addClass("slds-hide"),X("body").addClass("ls-modal-open")}),sfEnv.isMobileAndroid&&(sfEnv.clickedRemoveLS=!1),X("#completeFormPage").on("click",".js-remove-linked-section",function(){var t=X(this);sfEnv.isMobileAndroid?sfEnv.clickedRemoveLS||(sfEnv.clickedRemoveLS=!0,setTimeout(function(){n.removeLinkedSection(t,!1)},333)):n.removeLinkedSection(t,!1)}),X("#completeFormPage").on("click",".js-inherited-remove-linked-section",function(){n.removeLinkedSection(X(this),!0)}),X(".js-remove-file").on("click",Lt),X.widget.bridge("uitooltip",X.ui.tooltip),at?(X(".js-mobile-touch-area").on("click",function(t){window.openIonicPopover(t)}),X("#completeFormPage").on("click",".js-clear-btn",function(){!function(t){var e=t.siblings("input");if(e.val(null).trigger("change"),e.filter(".link-lookup").data("isSmartLookup")){var n=e.attr("name"),a=e.data("objectname"),s=e.data("linkfield"),o=X('.control-group input.answerValue[name="'.concat(n,'"]'));Ot(o,a,s,null)}}(X(this))})):("Theme4d"===sfEnv.sfTheme&&X("#complete-form").addClass("slds"),X(".js-show-tooltip").uitooltip({tooltipClass:"slds-popover slds-popover_tooltip ",content:function(){return X(this).attr("title")},show:null,open:function(t,e){if(void 0===t.originalEvent)return!1;var n=X(e.tooltip).attr("id");X("div.ui-tooltip").not("#"+n).remove()},close:function(t,e){e.tooltip.hover(function(){X(this).stop(!0).fadeTo(400,1)},function(){X(this).fadeOut("400",function(){X(this).remove()})})}}));var c=function(t,e){if(e.length){t&&t!=sfEnv.currentFormPage&&bt(null,t,null,!0);var n=e.hasClass("save-button-container");if(sfEnv.isMobileApp)setTimeout(function(t){var e=t.closest(".form-section"),a=e.hasClass("js-uses-ls-card"),s=n?t:a?e.prev():e,o=window.$ionicPosition(s),i=sfEnv.isMobileAndroid?{top:0}:window.$ionicScrollDelegateGetScrollPosition(),r={top:0};if(!a&&!n){var l=t.closest(".control-group");r=window.$ionicPosition(l)}var c=i.top+o.top+r.top-100;window.$ionicScrollDelegateScrollTo(0,c,!0),n&&t.find("button").addClass("guided-submit-focus")},0,e);else{var a=e.closest(".form-section"),s=a.hasClass("js-uses-ls-card")?a.prev():e.closest(".control-group"),o=0;n||(o=s.offset().top-150),X("html, body").animate({scrollTop:o},400,function(){e.focus()})}}};X(".errorSummary").on("click",".js-cf-errors-previous, .js-cf-errors-next",function(){var t=X(this).hasClass("js-cf-errors-previous"),e=g.getErrorFields(),n=e.errorFields,a=e.errorFieldCurrentIndex,s=X("#mainForm").valid(),o=g.getErrorFields().errorFields;if(s){X("body").removeClass("has-errors"),window.setErrorGuidedMode(!1),X("div.errorSummary").hide();var i=X(".pageContent").length?String(X(".pageContent").length):"1";c(i,X(".save-button-container"))}else{if(n.length>o.length&&!t){var r=Math.max(a-1,-1);g.setErrorFieldIndex(r)}!function(t){var e,n=g.getErrorFields(),a=n.errorFields,s=n.errorFieldCurrentIndex;e=t?s<=0?a.length-1:s-1:s>=a.length-1?0:s+1,e=Math.max(e,0),e=Math.min(e,a.length-1);var o=String(a[e].pageNumber),i=a[e].element;g.setErrorFieldIndex(e),c(o,i)}(t)}}),setTimeout(function(){s.removeClass("changed-input")},window.removeChangedInputDelay)}else X(".js-form").find("select, input, textarea, .selectable-multiselect").prop("disabled",!0),X(".js-form").find("button.add-linked-section").remove(),X(".js-form").find(".js-remove-linked-section").remove(),X(".sigPad").each(function(){var t=X(this).find(".output").val()||"{}";X(this).signaturePad({displayOnly:!0,lineTop:70}).regenerate(t)}),nt&&X(".js-sf1-photo-gallery").on("click",function(){var t=X(this).data("answerid"),e="/".concat(sfEnv.pathStart?sfEnv.pathStart+"/":"").concat(tt,"sf1photos?id=").concat(sfEnv.formId,"&answerId=").concat(t);F.openLink(e)}),X(".tooltip-container").addClass("slds-hide"),w.retrieveAnswerFilesVFR(p,function(t){if(null!==t&&t.hasOwnProperty("answerID2FilesInfo")&&Object.keys(t.answerID2FilesInfo).length>0){var e=t.answerID2FilesInfo,n={};for(var a in e){var s=e[a];n[a]=!0;for(var o=0;o<s.length;o++)if(!1===e[a][o].isPhoto){n[a]=e[a][o].isPhoto;break}}for(var r in e){var l=e[r],c=X('.sf-file[data-answerid="'.concat(r,'"]')),d=sfEnv.isCommunityUser&&sfEnv.pathStart?"/".concat(sfEnv.pathStart):"";c.html("");var u,f=i(l);try{for(f.s();!(u=f.n()).done;){var m=u.value;if(!0===n[r])c.addClass("js-photos"),c.append('<a href="'.concat(d,"/sfc/servlet.shepherd/version/download/").concat(m.Id,'" target="_blank" data-file-id="').concat(m.Id,'" data-file-size="').concat(m.size,'" data-file-name="').concat(m.name,'"><img loading="lazy" src="').concat(d,"/sfc/servlet.shepherd/version/renditionDownload?rendition=THUMB720BY480&versionId=").concat(m.Id,'" width="50px" data-img-id="').concat(m.Id,'"/></a>'));else{var p='<div class="file-uploader">'+P(m.name,m.size,0),v=!1!==m.isPhoto?'class="js-file-is-photo"':"";c.append('<a target="_blank" href="'.concat(d,"/sfc/servlet.shepherd/version/download/").concat(m.Id,'" ').concat(v,' data-file-id="').concat(m.Id,'" data-file-size="').concat(m.size,'" data-file-name="').concat(m.name,'">').concat(p,"</a></div>"))}}}catch(t){f.e(t)}finally{f.f()}}}X(".sf-file.js-photos").lightGallery(),X(".sf-file .slds-spinner").each(function(){var t='<div class="file-uploader">'+P("No Files Uploaded","",0);X(this).closest(".sf-file").html(t),X(this).remove()}),X(".file-uploader .js-remove-file").remove()});sfEnv.isLWC&&(window.top.postMessage("height:".concat(X("#formContent").height()),"*"),x.sendMsgToLWC("yFormLoaded")),nt&&1===_.formRender.totalPages&&(X(".js-footer-right-side-last").removeClass("slds-hide"),X(".js-footer-right-side").addClass("slds-hide")),at?(X("#completeFormPage").on("click",".js-question-camera",openQuestionCamera),X("#completeFormPage").on("click",".js-question-gallery",function(t){var e=X(t.currentTarget),n=0!==e.closest(".controls").find(".js-required-photo").length;openQuestionGallery(e,n)})):X("#completeFormPage").on("change",".file-uploader input",Et),at?X("#completeFormPage").on("click",".js-geolocation",getMobileGeolocation):X("#completeFormPage").on("click",".js-geolocation",Ct),at&&(X("#completeFormPage").on("click",".js-scanner",openBarcodeScanner),X("#completeFormPage").on("click",".js-scanner-output",openBarcodeScannerOutput)),(at&&"android"===window.deviceType||sfEnv.isSF1)&&X("#mainForm").on("keyup","input[maxlength], textarea[maxlength]",function(t){var e=X(t.currentTarget),n=e.val(),a=parseInt(e.attr("maxlength"),10);n.length>=a&&e.val(n.substr(0,a))}),X("#completeFormPage").on("click",".js-refresh-formula",function(){sfEnv.isFormulaRefreshOrQuickSave=!0,v.quickSaveBtn(null,!0)}),sfEnv.isMobileBrowser?(X("body.slds-scope").addClass(sfEnv.sfTheme+"-public-site"),X("#formContent .page2").length>0&&X("h1.formName").addClass("slds-m-top_xx-large")):X("body.slds-scope").addClass(sfEnv.sfTheme)},countryStateCode:d,initDateTimePicker:rt,initRadioButtons:it,addEsigAnswerListeners:dt,changePage:bt,enableMsPicklists:ut,initComparativeValidation:ft,showHideForDepPicklists:mt,manageFileSelection:Et,slideout:Dt};e.exports=Ft},{"./answer":2,"./app":3,"./customFormulas":4,"./customFormulasMSP":5,"./dataStore":6,"./dependency":7,"./formDetail":9,"./formSubmission":10,"./geolocation":11,"./inputModal":12,"./pdf":13,"./question":14,"./section":15,"./util":16,"./validation":17,"./vfr":18}],9:[function(t,e,n){"use strict";function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var o={returnToRecordPage:function(t,e){u?_.handleConsoleNav(e,m):d&&sfEnv.isNapili?window.parent.location=e:d?sforce.one.navigateToSObject(t):window.location.href=e},deleteForm:function(t,e){var n=e;Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.deleteForm,l,function(t,e){if(!0===e.status)if("success"===t){var a="/".concat(sfEnv.pathStart&&-1===sfEnv.pathStart.indexOf("apex")?sfEnv.pathStart+"/":"").concat(sfEnv.formObjectPrefix);if(u){_.handleConsoleClose(!0)}else d&&sfEnv.isNapili?window.parent.location=a:d?sforce.one.navigateToList(sfEnv.formListViewID,"All Forms",c+"Form__c"):window.location.href=a}else{var s="string"==typeof t?t:JSON.stringify(t);S(n,s)}else S(n,"There was a system error deleting your form: \n"+JSON.stringify(t))})},lock:C,lockAndDiscover:function(t,e){var n=sfEnv.isLWC?"&isLWC=true":"",a=sfEnv.isLWC&&sfEnv.isCommunityUser&&sfEnv.pathStart&&"apex"!==sfEnv.pathStart?"&lwcComPath=".concat(sfEnv.pathStart):"";C(t,e,"/".concat(sfEnv.pathStart?sfEnv.pathStart+"/":"").concat(c,"MakeDiscoveriesPage?id=").concat(r.Id).concat(n).concat(a))},openModal:function(t){i(".js-confirm-modal").find(".slds-backdrop").addClass("slds-backdrop_open").removeClass("slds-backdrop_closed"),i(t).removeClass("slds-hide"),i(".js-confirm-modal").modal()},modalAction:function(t,e){i(t).find(".slds-spinner_container").removeClass("slds-hide"),e?e(function(){I(t)},t):I(t)},openLink:function(t){u?_.handleConsoleNav(t,m):d&&sfEnv.isNapili?window.parent.location=t:d?sforce.one.navigateToURL(t):window.location.href=t},archiveForm:function(t,e){var n=e,a=i("h1.formName").attr("data-formid");Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.archiveForm,a,function(e,a){!0===a.status?"success"===e?(i("#unarchiveBtn").parent().show(),i("#archiveBtn").parent().hide(),i("#lockArchiveBtn").parent().hide(),i("#lockBtn").parent().hide(),i("#cloneBtn").parent().hide(),i("#makeDiscoveriesBtn").parent().hide(),i("#cfBtn").parent().hide(),i("#ArchiveHeader").show(),i("#LockHeader").hide(),i(".locked-stage_incomplete").hide(),i(".locked-stage_complete").show().addClass("slds-is-completed"),i(".archived-stage_incomplete").hide(),i(".archived-stage_complete").show().addClass("slds-is-completed"),i(".js-form-status_width").removeClass(k).removeClass(y).addClass(x),t()):S(n,e):S(n,"There was a system error archiving your form..\n"+JSON.stringify(e))})},unarchiveForm:function(t,e){var n=e,a=i("h1.formName").attr("data-formid");Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.unarchiveForm,a,function(e,a){!0===a.status?"success"===e?(i("#archiveBtn").parent().show(),i("#cloneBtn").parent().show(),i("#unarchiveBtn").parent().hide(),"true"!==sfEnv.hasDiscoveries&&sfEnv.allowMakeDiscosBtn?i("#makeDiscoveriesBtn").parent().show():i("#makeDiscoveriesBtn").parent().hide(),i("#ArchiveHeader").hide(),i("#LockHeader").show(),i(".archived-stage_complete").hide(),i(".archived-stage_incomplete").show(),i(".js-form-status_width").removeClass(x).addClass(k),t()):S(n,e):S(n,"There was a system error unarchiving your form..\n"+JSON.stringify(e))})},cloneForm:function(t,e){Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.cloneForm,l,function(t,n){if(!0===n.status)if(-1===t.indexOf("Error")){var a="/".concat(sfEnv.pathStart&&-1===sfEnv.pathStart.indexOf("apex")?sfEnv.pathStart+"/":"").concat(t);d&&sfEnv.isNapili?window.parent.location=a:d?sforce.one.navigateToSObject(t):window.location.href=a}else S(e,"There was an error cloning your form: \n"+JSON.stringify(t));else S(e,"There was a system error cloning your form: \n"+JSON.stringify(t))})},populateGeneratedURL:function(t,e){i(".public-url-container").show(),i("#generatedURL").val(t+"apex/"+c+"CompleteForm?id="+l+"&returnURL="+encodeURIComponent(e))},copyGeneratedURL:function(){document.querySelector("#generatedURL").select(),document.execCommand("copy");var t=i("#urlCopyBtn");i("#copyBtnContainer").html('<span class="copied-text">Copied!</span>'),setTimeout(function(){i("#copyBtnContainer").html(t)},800)},showRetURLError:function(){0===i("#retURL").parent().find(".error").length&&(i("#retURL").addClass("error"),i("#retURL").after('<span class="error">This field is required.</span>'))},hideRetURLError:function(){i("#retURL").removeClass("error"),i("#retURL").parent().find(".error").remove()},toggleMenu:function(t){E(),i(t).show(function(){document.body.addEventListener("click",E,!1),document.body.selector=t})},addNavigateToMenu:function(){if(null!=sfEnv.linkedRecords&&sfEnv.linkedRecords.hasOwnProperty("length")){var t,e=i("#navigateToMenu").find("ul"),n=a(sfEnv.linkedRecords);try{for(n.s();!(t=n.n()).done;){var s=t.value,o=i("<div/>").text(s.name).html();e.append('\n\t\t\t\t\t\t<li class="slds-dropdown__item" role="presentation" >\n                            <a class="linked-record" data-sfid="'.concat(s.id,'" role="menuitem" tabindex="0">\n                                <span class="slds-truncate">').concat(o," (").concat(s.objectName,")</span>\n                            </a>\n                        </li>"))}}catch(t){n.e(t)}finally{n.f()}}},toggleMobileAvailable:function(){r[c+"Mobile_Available__c"]=!r[c+"Mobile_Available__c"],v.updateFormMobileAvailableVFR()},returnToSF1FormsList:function(t){sforce.one.navigateToURL("/".concat(t?t+"/":"").concat(c,"SF1FormsList"))},displayInsights:function(t,e){var n=t.formID2DiscoveryResults[e],a=t.formID2IntentResults[e],s=t.formID2SentimentResults[e],o=t.formID2VisionResults[e];n||a||s||o?(n&&n.length&&n.forEach(function(t){L(t,"disco")}),a&&a.length&&a.forEach(function(t){L(t,"intent")}),s&&s.length&&s.forEach(function(t){L(t,"sentiment")}),o&&o.length&&o.forEach(function(t){L(t,"vision")}),setTimeout(function(){i(".js-cards").fadeIn(1200),i(".js-einstein").fadeOut(400,function(){i(".js-temp-margin").removeClass("js-temp-margin"),i(".js-card-fade").removeClass("slds-hide")})},3e3)):i(".js-youreka-insights").hide()}},i=jQuery,r=sfEnv.thisForm,l=sfEnv.formId,c=sfEnv.namespace,d=sfEnv.isLightningExp,u=sfEnv.isConsole,f=sfEnv.thisForm.hasOwnProperty(c+"Form_Template__r")?sfEnv.thisForm[c+"Form_Template__r"].Name:"",m="".concat(f," - ").concat(sfEnv.thisForm.Name),p=sfEnv.isSF1,v=t("./vfr"),_=t("./util"),h=75,g=35,b="progress-new",w="progress-in-progress",y="progress-submitted",k="progress-locked",x="progress-archived";function S(t,e){i(t).find(".slds-spinner_container").addClass("slds-hide"),i(t).find(".js-error-title").removeClass("slds-hide"),i(t).find(".js-error-text").removeClass("slds-hide").html(e),i(t).find(".js-standard-text").hide(),i(t).find(".slds-button_brand").hide()}function I(t){i(t).find(".js-error-title").addClass("slds-hide"),i(t).find(".js-error-text").addClass("slds-hide").html(""),i(t).find(".slds-button_brand").show(),i(t).find(".js-standard-text").show(),i(t).addClass("slds-hide"),i(t).find(".slds-spinner_container").addClass("slds-hide"),i(".js-confirm-modal").data("modal").close()}function C(t,e,n){var a=e;Visualforce.remoting.Manager.invokeAction(sfEnv.VFR.lockForm,l,function(e,s){!0===s.status?"success"===e?(t(),n?u?_.handleConsoleNav(n,m):d&&sfEnv.isNapili?window.parent.location=n:d?sforce.one.navigateToURL(n):window.location.href=n:(sfEnv.formIsLocked=!0,"false"===sfEnv.hasDiscoveries&&i("#ppBtn").parent().show(),i("#lockBtn").parent().hide(),i("#cfBtn").parent().hide(),i("#archiveBtn").parent().show(),i("#lockArchiveBtn").parent().hide(),i("#LockHeader").show(),i(".locked-stage_incomplete").hide(),i(".locked-stage_complete").show().addClass("slds-is-completed"),i(".js-form-status_width").removeClass(y).addClass(k))):S(a,e):S(a,"There was a system error locking your form..\n"+JSON.stringify(e))})}function E(){var t=document.body.selector;i(t).hide(function(){document.body.removeEventListener("click",E,!1)})}function L(t,e){var n,a,s,o,r,l;if("disco"===e){var c=t.discoveryType,d=t.description;n=c||"",a=d||"",r='\n                <li class="slds-list__item card-item slds-text-link_faux" data-discoveryid="'.concat(t.Id,'">\n\t                <div class="slds-section-title_divider header-background-').concat(e,'">Youreka</div>\n                \t<div class="insight-content">\n\t                \t<div>\n\t\t                    <div class="card-icon">\n\t\t                        <img src="').concat(sfEnv.discoImgIcon,'" />\n\t\t                    </div>\n\t                    </div>\n\t                    <div class="card-text">\n\t                    \t<span class="insight-badge slds-badge slds-m-top_xx-small slds-m-bottom_x-small approve slds-truncate">\n\t                            New Discovery!\n\t                        </span>\n\t                        ').concat(sfEnv.discoveryFieldSet.split(",").map(function(e,n){return'<p class="slds-text-body_small slds-text-align_left truncate-3 '.concat(0===n?"youreka-disco-text":"",'">\n                ').concat(t[e]||"&nbsp;","\n            </p>")}).join(""),"\n\t                    </div>\n                    </div>\n                </li>")}else if("vision"===e){var u=t.category,f=t.probability,m=t.sfId;n=u||"",a=f,l=m,r=function(t){var s=w(t).badgeColorClass,o=sfEnv.isCommunityUser&&sfEnv.pathStart?"/".concat(sfEnv.pathStart):"";return'\n                <li class="slds-list__item card-item">\n                \t<div class="slds-section-title_divider header-background-'.concat(e,'">Einstein Vision</div>\n                \t<div class="insight-content">\n\t                \t<div>\n\t\t                    <div class="card-icon">\n\t\t                        <img src="').concat(sfEnv.einsteinIcon,'" />\n\t\t                    </div>\n\t                    </div>\n\t                    <div class="card-text">\n\t                    \t<span class="insight-badge slds-badge slds-m-top_xx-small slds-m-bottom_x-small ').concat(s,' slds-truncate">\n\t                            ').concat(a," - ").concat(n,'\n\t                        </span>\n\t                    \t<a href="').concat(o,"/sfc/servlet.shepherd/version/renditionDownload?rendition=THUMB720BY480&versionId=").concat(l,'" target="_blank">\n\t                    \t\t<img class="card-img-thumb" src="').concat(o,"/sfc/servlet.shepherd/version/renditionDownload?rendition=THUMB720BY480&versionId=").concat(l,'"/>\n\t                    \t</a>\n\t                    </div>\n                    </div>\n                </li>')}(f)}else{var p=t.answerText,v=t.category,_=t.probability,b=t.questionLabel;n=b||"",a=p||"",s=_,o=v,r=function(t){var i=w(t).badgeColorClass;return'\n                <li class="slds-list__item card-item">\n                    <div class="slds-section-title_divider header-background-'.concat(e,'">Einstein ').concat(e,'</div>\n                \t<div class="insight-content">\n\t                \t<div>\n\t\t                    <div class="card-icon">\n\t\t                        <img src="').concat(sfEnv.einsteinIcon,'" />\n\t\t                    </div>\n\t                    </div>\n\t                    <div class="card-text">\n\t                    \t<span class="insight-badge slds-badge slds-m-top_xx-small slds-m-bottom_x-small ').concat(i,' slds-truncate">\n\t                            ').concat(s," - ").concat(o,'\n\t                        </span>\n\t                        <p class="slds-text-body_small slds-text-align_left truncate-3">\n\t                            ').concat(n,": ").concat(a,"\n\t                        </p>\n\t                    </div>\n                    </div>\n                </li>")}(_)}function w(t){var e,n,a=0;return t&&(a=parseInt(t.slice(0,-1),10)),a>h?(n="approve",e="/assets/icons/action-sprite/svg/symbols.svg#approval"):a>g?(n="neutral",e="/assets/icons/action-sprite/svg/symbols.svg#sort"):(n="reject",e="/assets/icons/action-sprite/svg/symbols.svg#reject"),{probabilityIcon:e,badgeColorClass:n}}i(".js-youreka-insights").find("ul").append(r)}!function(){var t,e=!!sfEnv.formSaveError;switch(sfEnv.formStatus){case"NEW":t=b;break;case"IN PROGRESS":t=w;break;case"SUBMITTED":t=y;break;case"LOCKED":t=k;break;case"ARCHIVED":t=x}i(".js-form-status_width").addClass(t),e&&i(".js-save-error").removeClass("slds-hide").prev().prev().addClass("slds-hide")}(),p&&(i("#lockBtn, #lockArchiveBtn, #archiveBtn, #cloneBtn, #makeDiscoveriesBtn, #unarchiveBtn, #publicURLBtn, #editPropertiesBtn,#viewPropertiesBtn").hide(),i("#section_header").hide(),i(".feedpage").hide()),e.exports=o},{"./util":16,"./vfr":18}],10:[function(t,e,n){"use strict";var a=t("./util"),s=sfEnv.namespace,o=a.CONSTANTS.MOBILE_SUBMIT,i=[],r="",l={},c={};function d(t,e){var n=null;t:for(var a=0;a<t.length;a++)if("Standard"===t[a].sectionType)for(var o=t[a].allQuestions,i=0;i<o.length;i++)if(o[i].question["".concat(s,"Link_Lookup__c")]===e&&o[i].answers&&1===o[i].answers.length&&o[i].answers[0]["".concat(s,"Link_Record_Id__c")]){n=o[i].answers[0]["".concat(s,"Link_Record_Id__c")];break t}return n}function u(){i=[],r=""}window.getMobileURLwParams=function(){return r?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!Array.isArray(i)&&!e)return"";var n="",a=e.includes("?"),s={Mobile_ID:c?c.value:"",SF_ID:l?l.value:""};for(var o in i.forEach(function(o,i){if(o.type===t){n=0!==i||a?"&":"?";var r=o.label,l=o.staticValue,c=o.sectionId,d=o.questionId,u="";if(r&&l)u=l;else if(r&&c&&d){var f=$("div.form-section #".concat(c,' ~ .OR-card__body .control-group [data-questionid="').concat(d,'"]'));u=f.hasClass("table-radio")?f.find("input:checked").val():f.hasClass("boolean-checkbox")?!!f.find(":checked").length:f.hasClass("table-checkbox")?f.find(":checked").map(function(){return this.value}).get().join(";"):f.val(),["",void 0].includes(u)&&(u=null)}""!==u&&(s[r]=u,e+="".concat(n).concat(r,"=").concat(encodeURI(u)))}}),s)e=e.replaceAll(new RegExp("{!("+o+")}","g"),s[o]);return e=e.replaceAll(new RegExp("{!(.*?)}","g"),"undefined"),Object.keys(l).length&&l.label&&(n=e.includes("?")?"&":"?",e+="".concat(n).concat(l.label,"=").concat(encodeURI(l.value))),Object.keys(c).length&&c.label&&(n=e.includes("?")?"&":"?",e+="".concat(n).concat(c.label,"=").concat(encodeURI(c.value))),e}("Mobile",r):void 0},window.resetMobileURLParams=u;var f={setBehavior:function(t,e,n){if(sfEnv.isMobileApp){var u=t.theTemplate["".concat(s,"Submit_Mobile_Destination__c")],f=t.theTemplate["".concat(s,"Submit_Mobile_Context__c")],m=t.theTemplate["".concat(s,"Submit_Mobile_Parameters__c")];if("string"==typeof m)try{i=JSON.parse(m)}catch(t){a.onFail(t)}switch(l={label:"SF_ID",value:e===n?null:e},c={label:"Mobile_ID",value:n},u){case o.SF_MOBILE:r="salesforce1://sObject/".concat(d(t.sections,f),"/view");break;case o.FSL:r="com.salesforce.fieldservice://v1/sObject/".concat(d(t.sections,f)).concat(function(t){return"string"==typeof t["".concat(s,"Submit_Mobile_Action__c")]&&t["".concat(s,"Submit_Mobile_Action__c")]&&t["".concat(s,"Submit_Mobile_Action_Context__c")]?"/".concat(t["".concat(s,"Submit_Mobile_Action__c")].toLowerCase().split(" ").join(""),"/").concat(encodeURI(t["".concat(s,"Submit_Mobile_Action_Context__c")])):""}(t.theTemplate));break;case o.URL:r=a.prependHTTPS(f);break;default:r=""}}},resetLocal:u};e.exports=f},{"./util":16}],11:[function(t,e,n){"use strict";var a=t("./util"),s=a.CONSTANTS.GEOLOCATION;function o(t){var e={headerString:s.ERROR,bodyStringArray:[t]};window.openCustomModal(e)}var i={getGeolocation:function(){return new Promise(function(t){a.contextualSpinnerText("geolocation"),$("#savingStatus").show(),navigator.geolocation.getCurrentPosition(function(e){$("#savingStatus").hide(),t(e)},function(e){switch($("#savingStatus").hide(),e.code){case e.PERMISSION_DENIED:o(s.PERMISSION_DENIED);break;case e.POSITION_UNAVAILABLE:o(s.POSITION_UNAVAILABLE);break;case e.TIMEOUT:o(s.TIMEOUT);break;case e.UNKNOWN_ERROR:o(s.UNKNOWN_ERROR)}t(null)})})},formatCoordinate:function(t){if(t){var e,n=a.roundNumber(t,6).toString();if(n.includes(".")){var s=n.substring(n.indexOf("."),n.length);e=n.replace(s,s.padEnd(7,"0"))}else e=n+".000000";return e}return""}};e.exports=i},{"./util":16}],12:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,a,s,o,i){try{var r=t[o](i),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(a,s)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var i=t.apply(e,n);function r(t){s(i,a,o,r,l,"next",t)}function l(t){s(i,a,o,r,l,"throw",t)}r(void 0)})}}var i={openSmartLookup:function(){return c.apply(this,arguments)},setUpModalButtonListeners:function(){$("#input-modal .js-input-modal-save").click(u),$("#input-modal .js-input-modal-clear").click(f),$("#input-modal .js-input-modal-cancel").click(d),$("#input-modal").on("change",".js-smart-lookup-select",v),$("#input-modal").on("click",".js-smart-lookup-query-values-on-open",h)}},r=t("./util"),l='<option value="">-- none --</option>';function c(){return(c=o(regeneratorRuntime.mark(function t(){var e,n,a,s,o,i,r,l,c,d,u,f,p=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:[],n=p.length>1&&void 0!==p[1]?p[1]:"",a=p.length>2?p[2]:void 0,s=p.length>3?p[3]:void 0,o=p.length>4?p[4]:void 0,i=p.length>5&&void 0!==p[5]?p[5]:"",r=p.length>6&&void 0!==p[6]?p[6]:"",l=e.map(function(t){return t.fieldName}).join(","),!!["null",null].includes(o)){t.next=15;break}return t.next=12,window.smartLookupsSearch(s,l,"",{Id:o},!0);case 12:t.t0=t.sent,t.next=16;break;case 15:t.t0=[];case 16:c=t.t0,d=m(e,n,s,c[0]),$("#input-modal + .slds-backdrop").removeClass("slds-backdrop_closed").addClass("slds-backdrop_open"),$("#input-modal").removeClass("slds-hide").find(".input-modal-wrapper").html(d),(u=$("#input-modal fieldset")).data("answerId",a),u.data("lookupFilter",i),u.data("objectName",s),u.data("linkfield",r),f=e[0]?e[0].fieldName:"",!1,b(s,f,i,{},!1);case 30:case"end":return t.stop()}},t)}))).apply(this,arguments)}function d(){$("#input-modal + .slds-backdrop").addClass("slds-backdrop_closed").removeClass("slds-backdrop_open"),$("#input-modal").addClass("slds-hide").find(".input-modal-wrapper").html("")}function u(){var t=$("#input-modal fieldset"),e=t.data("answerId");if(e){var n=$("#input-modal .js-smart-lookup-select-container:last-of-type .js-smart-lookup-select"),a=n.val(),s=n.find("option:selected").data("recordId"),o=$('.control-group input.answerValue[name="'.concat(e,'"]'));o.val(s),$('.control-group input.link-lookup[name="'.concat(e,'"]')).val(a),o.trigger("change");var i=t.data("objectName"),r=t.data("linkfield"),l=s||null;window.setInheritedValue(o,i,r,l)}else alert("Warning: Selection could not be saved.");d()}function f(){$("#input-modal .js-smart-lookup-select-container .js-smart-lookup-select").val("");var t=$("#input-modal .js-smart-lookup-select-container:not(:first-of-type)");t.find(".js-smart-lookup-select").html(l),t.slideUp(),$("#input-modal .js-input-modal-save").prop("disabled",!1)}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return'<fieldset class="slds-p-top_small slds-p-horizontal_small" data-record-id="" data-lookup-filter="" data-object-name="" data-linkfield=""> \n                <legend>'.concat(e,"</legend>\n                ").concat(t.filter(p).map(function(e,o){return function(t,e,n,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i="object"===a(o)&&!!Object.keys(o).length,r=i?"":'style="display: none;"',c=i?y(o,t.fieldName,i):l,d=i?'style="display: none;"':"";return'<div class="slds-form-element js-smart-lookup-select-container '.concat(i&&0!==e?"js-smart-lookup-query-values-on-open":"",'" ').concat(r,'>\n                <label class="slds-form-element__label" for="select-').concat(e,'">').concat(t.fieldLabel," (").concat(e+1," of ").concat(s,')</label>\n                <div class="slds-form-element__control slds-p-bottom_x-small slds-p-right_large">\n                    <div class="slds-select_container">\n                        <select id="select-').concat(e,'" class="slds-select js-smart-lookup-select" data-field-api-name="').concat(t.fieldName,'" data-object-name="').concat(n,'">\n                            ').concat(c,'\n                        </select>\n                    </div>\n                    <div class="slds-spinner_container select-spinner" ').concat(d,'>\n                        <div role="status" class="slds-spinner slds-spinner_x-small slds-spinner_brand">\n                            <span class="slds-assistive-text">Loading</span>\n                            <div class="slds-spinner__dot-a"></div>\n                            <div class="slds-spinner__dot-b"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>')}(e,o,n,t.length,s)}).join(""),"\n            </fieldset>")}function p(t){return["PICKLIST","STRING"].includes(t.type)}function v(t){var e=$(t.currentTarget),n=e.closest(".slds-form-element").nextAll();""===e.val()?"select-0"===e.attr("id")?f():(n.find(".js-smart-lookup-select").val("").html(l),n.slideUp(),$("#input-modal .js-input-modal-save").prop("disabled",!0)):(n.find(".js-smart-lookup-select").val("").html(l),_(e))}function _(t,e){var n=t.closest(".slds-form-element").next().find(".js-smart-lookup-select"),a=n.data("fieldApiName"),s=n.data("objectName"),o=0===n.closest(".slds-form-element").next().find(".js-smart-lookup-select").length,i=t.closest("fieldset").data("lookupFilter"),l=i&&"undefined"!==i?i:"",c={};n.closest(".slds-form-element").prevAll(".slds-form-element").find(".js-smart-lookup-select").each(function(t,e){var n=$(e).val();if(n){var a=$(e).data("fieldApiName");c[a]="null"===n?null:r.withoutDoubleQuote(n,!1)}}),b(s,a,l,c,o,e)}function h(t){return g.apply(this,arguments)}function g(){return(g=o(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=$(e.currentTarget),e.preventDefault(),e.stopImmediatePropagation(),_(n.prev(".slds-form-element").find(".js-smart-lookup-select"),n);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function b(t,e){return w.apply(this,arguments)}function w(){return(w=o(regeneratorRuntime.mark(function t(e,n){var a,s,o,i,r,c,d,u,f,m,p=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=p.length>2&&void 0!==p[2]?p[2]:"",s=p.length>3&&void 0!==p[3]?p[3]:null,o=p.length>4&&void 0!==p[4]&&p[4],i=p.length>5?p[5]:void 0,r=$("button.js-input-modal-save"),!n){t.next=24;break}return r.prop("disabled",!0),c=$('#input-modal fieldset [data-field-api-name="'.concat(n,'"].js-smart-lookup-select')),d=c.closest(".slds-form-element"),c.prop("disabled",!0),d.find(".slds-spinner_container").show(),null!==s&&Object.keys(s).length?d.slideDown():d.show(),t.next=14,window.smartLookupsSearch(e,n,a,s,o);case 14:u=t.sent,f=u.map(function(t){return y(t,n)}).join(""),m=c.val(),c.html("".concat(l).concat(f)),m&&c.val(m),i&&(i.removeClass("js-smart-lookup-query-values-on-open"),i.find(".js-smart-lookup-select").focus()),d.find(".slds-spinner_container").hide(),c.prop("disabled",!1),t.next=25;break;case 24:r.prop("disabled",!1);case 25:case"end":return t.stop()}},t)}))).apply(this,arguments)}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t[e];n&&void 0===a&&(a=null);var s=null===a?"(blank)":a,o=n?'selected="true"':"",i=r.withoutDoubleQuote(a,!0);return'<option value="'.concat(i,'" data-record-id="').concat(t.Id,'" ').concat(o,">").concat(s,"</option>")}e.exports=i},{"./util":16}],13:[function(t,e,n){"use strict";function a(t,e,n,a,s,o,i){try{var r=t[o](i),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(a,s)}function s(t){return function(t){if(Array.isArray(t))return t}(t)||r(t)||i(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||r(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function r(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var c={createPDF:v};window.createPDF=v;var d=t("./app"),u=t("./vfr"),f=t("./util"),m=sfEnv.namespace,p=f.CONSTANTS.WRAP_TYPE;function v(){var t=$("#formContent");d.saveMsgOn("createPDF");var e=t.find(".js-template-image").length>0,n=t.find(".js-photos").length>0||t.find(".js-att-photo").length>0,a=[];if(t.addClass("pdf-view"),!sfEnv.isMobileApp&&n){var i=new Set;$(".control-group:not(.hiddenByDep) .js-photos img").each(function(){var t=$(this).data("img-id");t&&i.add(t)}),$(".control-group:not(.hiddenByDep) .js-file-is-photo").each(function(){var t=$(this).data("file-id");t&&i.add(t)});var r=o(i);if(r.length){var l=new Promise(function(t){var e=[];r.forEach(function(t){var n=u.getDocAPICallPromise(t);e.push(n)}),Promise.all(e).then(function(e){var n={};e.forEach(function(t){for(var e in t)n[e]=t[e]}),t(n)}).catch(function(){t(null)})});a.push(l)}else a.push(null)}else if(sfEnv.isMobileApp&&n){var c=t.find(".formName").data("formid"),m=window.getPhotosForPDF(c);a.push(m)}else a.push(null);if(sfEnv.isMobileApp)a.push(window.getLogoForPDF());else{var p=new Promise(function(t){u.getLogoForPDFsVFR(function(e,n){if(n.status&&e){var a=new Image;a.onload=function(){var n={data:e,width:this.width,height:this.height};t(n)},a.src="data:image/jpeg;base64,"+e}else t(null)})});a.push(p)}if(e&&!sfEnv.isMobileApp){var v=new Set;$(".control-group:not(.hiddenByDep) > img").each(function(){var t=$(this).data("img-id");t&&v.add(t)});var h=o(v),g=[];h.forEach(function(t,e,n){g.length<4&&e!==n.length-1?g.push(t):(g.push(t),a.push(u.retrieveTemplateImageDataVFR(g)),g=[])})}else a.push(null);Promise.all(a).then(function(t){var e={type:"imageData",data:{}},n=s(t),a=n[0],o=n[1],i=n.slice(2),r=sfEnv.isMobileApp?{}:a,l=sfEnv.isMobileApp?a:null;i.forEach(function(t){for(var n in t)e.data[n]=t[n]}),function(t,e,n,a){_.apply(this,arguments)}(e,r,l,o)}).catch(function(e){var n="string"==typeof e?e:JSON.stringify(e);if(f.onFail(n),t.removeClass("pdf-view").css({width:"auto"}),sfEnv.isMobileApp)window.$ionicScrollDelegateResizePromise().then(function(){window.hideLoading()}),t.find(".pageContent:not(.js-current-page)").hide(),t.find(".pageContent.js-current-page").removeClass(".js-current-page"),alert(n);else{d.saveMsgOff();var a={headerString:"Issue Creating PDF",bodyStringArray:[n]};window.openCustomModal(a)}})}function _(){var t;return t=regeneratorRuntime.mark(function t(e,n,a,s){var o,i,r,l,c,u,v,_,k,x,S,I,C,E,L,T,A,O,D,F,M,R,j,q,P,N,V,B,H,Q,U,z,Y,W,G,J,K,Z,X,tt;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=$("#formContent"),i=f.isNotIE(),(r={}).scaleDownRatio=.66,r.borderRadius=2,r.s={},r.s.nameSize=18,r.s.nameH=r.s.nameSize*r.scaleDownRatio,r.s.w=434,r.s.halfW=r.s.w/2,r.s.horizontalPad=8,r.s.verticalPad=4,r.s.nameW=r.s.w-r.s.horizontalPad,r.q={},r.q.size=9.75,r.q.marginTop=8,r.q.inputCharW=44,r.q.listCharW=42,r.q.listLineH=8.5,r.q.listLineM=6,r.q.fileNameCharW=r.q.listCharW-14,r.q.listXOffset=11,r.q.lineH=9,r.q.lineOffset=12,r.q.verticalPad=10,r.q.fileMargin=6,r.q.eSigW=125,r.q.maxHeight=520,r.q.fontSize=10,r.q.minHeight=40,r.q.labelAndInputW=r.s.halfW-2*r.s.horizontalPad,r.q.listW=r.q.labelAndInputW-r.q.listLineM,r.q.msplOptionW=r.q.labelAndInputW-4*r.q.listLineM,r.p={},r.p.numberSize=16,r.p.nameSize=28,r.p.margin=12,r.p.w=r.s.w+2*r.p.margin,r.p.h=595,r.p.marginTop=36,r.p.maxLogoDimension=48,r.p.maxAttPhotoH=(r.p.h-2*r.p.margin-2*r.p.numberSize-2*r.q.marginTop)/2,r.p.maxAttPhotoW=r.s.w/2,r.p.headerOffset=r.p.marginTop+r.s.verticalPad,r.p.tempNameW=s?r.p.w-r.p.margin-2*r.p.maxLogoDimension:r.p.w-r.p.margin,r.p.charW=120,o.css({width:(r.s.w-r.s.horizontalPad)/r.scaleDownRatio}),l=r.p.marginTop+r.p.margin,c=new jsPDF({unit:"px",format:"letter",orientation:"p"}),u=$("h1.formName"),c.setFont("sans-serif"),s&&i){v=atob(s.data),_=b(s.width,s.height,r.p.maxLogoDimension,r.p.maxLogoDimension),k=_.width,x=_.height;try{c.addImage(v,"PNG",r.p.margin,r.p.margin,k,x,null,"FAST")}catch(t){}}else i||(c.setFontSize(r.q.fontSize),c.text(["[PDF logos not","supported in IE]"],r.p.margin,r.p.margin));c.setFontSize(r.p.nameSize),S=c.splitTextToSize(u.text().trim(),r.p.tempNameW),c.text(S,r.s.halfW+r.p.margin,l,null,null,"center"),l+=r.p.nameSize*r.scaleDownRatio*S.length+r.p.margin,I=o.find("h3.form-number"),c.setFontSize(r.p.numberSize),c.text(I.text().trim(),r.s.halfW,l,null,null,"center"),l+=r.p.numberSize*r.scaleDownRatio+r.p.margin,sfEnv.isMobileApp&&(o.find(".pageContent:visible").addClass("js-current-page"),o.find(".pageContent").show()),C=1,E=1,L=1,T=o.find(".form-section:not(.hiddenByDep)").toArray(),A=regeneratorRuntime.mark(function t(){var s,o,d,u,m,v,_,h,b,k,x,S,I,A,F,M,R,j,q,P;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(P=function(t,e,n,a,s,o){var i=t===p.VALUE?null:"right";if(c.text(e.slice(n,a),s,l,null,null,i),e.length>a){if(t===p.VALUE){var d=r.s.w/2+8,u=r.s.w/2-r.p.margin,f=k&&0!==n?-6:o,m=k?r.p.h+6:r.p.h;c.roundedRect(d,f,u,m,r.borderRadius,r.borderRadius,"S")}q();var v=r.p.h-l,_=a,h=a+Math.floor(v/r.q.lineH);P(t,e,_,h,s,o)}else t===p.VALUE?x=(e.length-n)*r.q.lineH+l:t===p.LABEL&&(c.setPage(S),E=S,l=I,A=(e.length-n)*r.q.lineH+r.p.marginTop)},q=function(){var t=k?-6:b,e=k?r.p.h+6:r.p.h;c.roundedRect(r.p.margin,t,r.s.w,e,r.borderRadius,r.borderRadius,"S"),L>E?c.setPage(E+1):(c.addPage(),L++),E++,l=r.p.marginTop,b=l-r.s.nameH,r.p.headerOffset=0,k=!0},s=$(T[O]),o=s.find("span.title-text"),d=c.splitTextToSize(o.text().trim(),r.s.nameW,{fontSize:r.s.nameSize}),u=r.s.nameSize*d.length*r.scaleDownRatio,m=u+r.s.verticalPad,v={name:d,nameHeight:u,questions:[]},0===O?r.p.headerOffset+=l+v.nameHeight:r.p.headerOffset=0,!1,1,s.find('.control-group:not(.hiddenByDep), .slds-card__body[data-placeholdersection="true"]').length){for(_=s.find('.control-group:not(.hiddenByDep), .slds-card__body[data-placeholdersection="true"]').toArray(),h=function(){var t=$(_[D]),e=t.hasClass("slds-card__body"),s=t.find(".control-label"),o=t.find(".slds-form-element__control").length?t.find(".slds-form-element__control"):t.find(".controls"),l=t.closest(".pageContent").data("page"),d={columnIndex:1,colTwoLeftOffset:0};if(0===D&&l&&l!==C&&(v.newPage=!0,C=l),t.find(".blank_space").length||e)d.controlType="space",d.questionHeight=e?0:r.q.minHeight,m+=d.questionHeight;else if(t.find(".js-sig-answer").length){if(d.controlType="eSig",d.imgH=1*t.find("img").height(),d.imgW=t.find("img").width()*r.scaleDownRatio*1,i){var u=document.createElement("canvas");u.getContext("2d").drawImage(t.find(".js-sig-answer img").get(0),0,0,d.imgW,d.imgH),d.imgData=u.toDataURL("image/png")}var p=s.find(".label-width").text().trim();d.label=c.splitTextToSize(p,r.q.labelAndInputW,{fontSize:r.q.fontSize}),d.labelHeight=d.label.length*r.q.lineH+r.q.verticalPad,d.questionHeight=d.labelHeight>d.imgH?d.labelHeight:d.imgH,m+=d.questionHeight}else if(t.find(".js-template-image-controls").length){var h=.5*t.find("img").height();d.imgW=.5*t.find("img").width(),d.imgH=h,m+=h,d.questionHeight=h,d.controlType="templateImg",d.imgId=t.find("img").data("img-id"),i&&sfEnv.isMobileApp&&t.find("img").length?d.imgData=t.find("img").attr("src").slice(23):(sfEnv.isMobileApp||i)&&(d.imgData=null),d.alignment=t.hasClass("slds-text-align_center")?"center":t.hasClass("slds-text-align_right")?"right":"left"}else if(t.find(".table-checkbox").length||t.find(".table-radio").length)d.controlType=t.find(".table-checkbox").length?"checkboxList":"radioList",d.label=c.splitTextToSize(s.text().trim(),r.q.labelAndInputW,{fontSize:r.q.fontSize}),d.valueHeight=r.q.marginTop,d.options=[],t.find(".slds-checkbox, .slds-radio").each(function(t,e){var n=c.splitTextToSize($(e).find(".slds-form-element__label").text().trim(),r.q.listW,{fontSize:r.q.fontSize}),a=r.q.listLineH*n.length+r.q.listLineM;d.valueHeight+=a,d.options.push({text:n,val:$(e).find("input").prop("checked"),numOfLines:n.length,h:a})}),d.labelHeight=d.label.length*r.q.lineH+r.q.marginTop,d.questionHeight=d.labelHeight>d.valueHeight?d.labelHeight:d.valueHeight,m+=d.questionHeight;else if(t.find(".free-text-container").length||t.hasClass("js-plain-free-text")){var g=t.height();if(m+=g,d.controlType="freeText",d.questionHeight=g,i&&t.hasClass("js-plain-free-text")){var b=t.hasClass("slds-text-align_center")?"text-align: center;":t.hasClass("slds-text-align_right")?"text-align: right;":"";d.html='<div style="'.concat(b,'">').concat(t.find(".js-plain-text").html().replace(/<br>/gi,"<br/>").replace(/&nbsp;/gi," "),"</div>")}else d.html=i?t.find(".free-text-container").html().replace(/<br>/gi,"<br/>").replace(/&nbsp;/gi," "):null}else{var w=1;if(t.find(".js-att-photo").length){w=2,d.controlType="attFile",d.value=[],d.dimensions={};var k=t.find(".control-label .label-width").text().trim(),x=o.find(".sf-file > a"),S=t.find(".js-question-gallery").data("answer-photos");if(sfEnv.isMobileApp&&(a&&a.length||S)){var I=o.find(".js-question-camera").data("answerid");a.length&&a.forEach(function(t){if(t.answerID===I){n[t.externalFileID]={},n[t.externalFileID].labelText=k,n[t.externalFileID].docData=t.docData,n[t.externalFileID].answerID=I,n[t.externalFileID].fileName=t.docTitle,n[t.externalFileID].fileType="JPEG",n[t.externalFileID].width=t.width||null,n[t.externalFileID].height=t.height||null;var e=y(t.docTitle,r.q.fileNameCharW);d.value.push("FILE: ".concat(e))}}),S&&S.length&&S.forEach(function(t){if(!n[t.externalFileID]){var e=y(t.docTitle,r.q.fileNameCharW);d.value.push("FILE: ".concat(e," (").concat(t.docSize,")"))}})}else!sfEnv.isMobileApp&&x.length&&x.each(function(t,e){var a=$(e),s=a.data("file-id"),o=a.data("file-name"),i=a.data("file-size");if(n&&n[s]){var l=a.find("img");!n[s].height&&l.length&&(n[s].height=l[0].naturalHeight*r.scaleDownRatio),!n[s].width&&l.length&&(n[s].width=l[0].naturalWidth*r.scaleDownRatio),n[s].labelText=k,n[s].fileName=a.data("file-name"),n[s].fileSize=i}var c=y(o,r.q.fileNameCharW);d.value.push("FILE: ".concat(c," (").concat(i,")"))});d.value.length||(d.value.push("No Files Uploaded"),w=1)}else if(t.find(".js-ms-picklist").length){w=2,d.controlType="msPicklist",d.value=[];var E=0;sfEnv.isMobileApp?o.find("select.js-ms-picklist option").each(function(t,e){if($(e).prop("selected")){var n=c.splitTextToSize($(e).text().trim(),r.q.msplOptionW,{fontSize:r.q.fontSize}),a=n.length*r.q.lineH;r.q.maxHeight-r.p.headerOffset>E+a&&(E+=a,d.value.push(n))}}):o.find(".mspl-value").each(function(t,e){if($(e).text()){var n=c.splitTextToSize($(e).text().trim(),r.q.msplOptionW,{fontSize:r.q.fontSize}),a=n.length*r.q.lineH;r.p.headerOffset=m<r.p.h?r.p.headerOffset:0,r.q.maxHeight-r.p.headerOffset>E+a&&(E+=a,d.value.push(n))}}),d.valueHeight=E+r.q.verticalPad*w}else if(t.find(".js-picklist").length){d.controlType="picklist";var L=sfEnv.isMobileApp?f.withoutDoubleQuote(o.find("select").val(),!1):o.find('option[selected="selected"]').text().trim();d.value=c.splitTextToSize(L,r.q.listW-12,{fontSize:r.q.fontSize})}else if(t.find(".form-detail-link__url").length)d.controlType="URL",d.url=t.find(".form-detail-link__url").text(),d.value=[],d.value.length=1;else if(t.find(".js-link-input.URL").length)d.controlType="URL",d.url=t.find(".js-link-input.URL").val(),d.value=[],d.value.length=1;else if(t.find(".js-link-input.email").length)d.controlType="EMAIL",d.url=t.find(".js-link-input.email").val(),d.value=[],d.value.length=1;else if(t.find(".form-detail-link__email").length)d.controlType="EMAIL",d.url=t.find(".form-detail-link__email").text(),d.value=[],d.value.length=1;else{d.controlType="input";var T=o.find("textarea").length?"textarea":"input.slds-input",A=sfEnv.isMobileApp?o.find(T).val():o.find("div").text().trim();d.value=c.splitTextToSize(A,r.q.labelAndInputW,{fontSize:r.q.fontSize})}var O=s.find(".label-width").text().trim();d.label=c.splitTextToSize(O,r.q.labelAndInputW,{fontSize:r.q.fontSize}),d.labelHeight=d.label.length*r.q.lineH+r.q.verticalPad,"msPicklist"!==d.controlType||d.value.length?"attFile"===d.controlType&&d.value.length?d.valueHeight=d.value.length*(r.q.lineH+3*r.q.fileMargin)+r.q.verticalPad*w:"msPicklist"===d.controlType?(d.valueHeight=0,d.value.forEach(function(t){d.valueHeight+=t.length*r.q.lineH+r.q.verticalPad*w})):d.valueHeight=d.value.length*r.q.lineH+r.q.verticalPad*w:d.valueHeight=r.q.listLineH+r.q.verticalPad,d.questionHeight=d.labelHeight>d.valueHeight?d.labelHeight:d.valueHeight,m+=d.questionHeight}v.questions.push(d)},D=0;D<_.length;D++)h();m+=2*r.q.marginTop}b=l-r.s.nameH,k=!1,x=0,S=void 0,I=void 0,A=0,F=regeneratorRuntime.mark(function t(n){var a,s,o,d,u,f,m,_,h,y,T,O,D,F,M,R,j,N,V,B,H,Q,U,$,z,Y,W,G,J,K,Z,X,tt,et,nt,at,st,ot,it,rt,lt,ct,dt,ut,ft,mt,pt,vt,_t,ht,gt;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.questions[n],0===n&&((v.newPage||(C>1&&l+a.questionHeight+v.nameHeight+r.s.verticalPad)>r.p.h)&&(c.addPage(),E++,L++,l=r.p.marginTop,b=r.p.marginTop-r.s.nameH,r.p.headerOffset=0,k=!1),s=1===v.name.length?l+r.s.verticalPad:l+r.s.nameH+2*r.s.verticalPad,c.setFontSize(r.s.nameSize),c.text(v.name,r.s.halfW+r.p.margin,l,null,null,"center"),c.line(r.p.margin,s,r.s.w+r.p.margin,s),l+=v.nameHeight+r.s.verticalPad),o=a.controlType,0!==n&&l+a.questionHeight+r.q.verticalPad>r.p.h&&r.p.h>a.questionHeight?E<L?(c.setPage(E+1),E++,l=A):q():l+=r.q.marginTop,c.setFontSize(r.q.size),"space"!==o){t.next=9;break}l+=a.questionHeight,t.next=33;break;case 9:if("freeText"!==o){t.next=32;break}if(d=r.s.w-r.s.horizontalPad,!i){t.next=27;break}return t.prev=12,t.next=15,w(a.html,d,a.questionHeight);case 15:u=t.sent,c.addImage(u,"jpg",r.p.margin+r.s.horizontalPad,l,d,a.questionHeight,null,"FAST"),l+=a.questionHeight,t.next=25;break;case 20:t.prev=20,t.t0=t.catch(12),f=r.s.w/2+8,c.text(["Could not display this Rich Free Text."],f,l,null,null,"center"),l+=r.q.minHeight;case 25:t.next=30;break;case 27:m=r.s.w/2+8,c.text(["[PDF Free Text not supported in IE]"],m,l,null,null,"center"),l+=r.q.minHeight;case 30:t.next=33;break;case 32:"eSig"===o?(_=r.s.w/2+8+a.colTwoLeftOffset,h=r.q.eSigW,i?(y=_+(h-a.imgW*r.scaleDownRatio)/2,c.addImage(a.imgData,"PNG",y,l)):(T=_+h*r.scaleDownRatio/2,c.text(["E-Signatures are not","supported in IE11 pdfs."],T,l,null,null,"center")),O=r.s.halfW-r.q.listLineM+a.colTwoLeftOffset,c.text(a.label,O,l,null,null,"right"),(D=a.imgH*r.scaleDownRatio+2*r.q.lineOffset)>a.questionHeight&&(a.questionHeight=D),F=l-r.q.lineOffset,c.roundedRect(_,F,h,D,r.borderRadius,r.borderRadius,"S"),l+=a.questionHeight):"templateImg"===o?(M=g(a.imgW,a.imgH,a.alignment,r.s.w,r.p.margin),i&&sfEnv.isMobileApp&&a.imgData?R=atob(a.imgData):i&&e.data[a.imgId]&&(R=atob(e.data[a.imgId])),i&&R?(j=0===n?l-2*r.q.marginTop:l,c.addImage(R,"JPEG",M,j,a.imgW,a.imgH,null,"FAST")):(N=i?"Missing Template Image":"PDF Template Images not supported in IE",V=r.s.w/2+8,c.text("[".concat(N,"]"),V,l,null,null,"center")),l+=a.imgH+r.q.marginTop):(B=l-r.q.lineOffset,H=l-r.q.lineOffset,Q=B+r.q.lineOffset,U=r.s.halfW-r.q.listLineM+a.colTwoLeftOffset,!["checkboxList","radioList","attFile","msPicklist"].includes(o)&&l+a.label.length*r.q.lineH>r.p.h?($=r.p.h-l,0,z=Math.floor($/r.q.lineH),S=E,I=l,P(p.LABEL,a.label,0,z,U,H)):c.text(a.label,U,l,null,null,"right"),"checkboxList"===o||"radioList"===o?(a.options.forEach(function(t){var e="radioList"===o?3:1,n=r.s.halfW+10+a.colTwoLeftOffset;if(c.roundedRect(n,Q-r.q.lineOffset/2,6,6,e,e,"S"),t.val&&"radioList"===o){var s=r.s.halfW+r.q.listXOffset+a.colTwoLeftOffset;c.roundedRect(s,Q-5,4,4,2,2,"F")}else if(t.val&&"checkboxList"===o){var i=r.s.halfW+r.q.listXOffset+a.colTwoLeftOffset;c.text("x",i,Q-1)}var l=r.s.halfW+r.p.margin+r.q.lineOffset/2+a.colTwoLeftOffset;c.text(t.text,l,Q,null,null),Q+=t.h}),l+=a.questionHeight):"attFile"===o?(Y=r.q.lineH+2*r.q.fileMargin,W=r.s.w/2+8+a.colTwoLeftOffset,G=l,a.value.forEach(function(t){var e=r.s.halfW+r.p.margin+a.colTwoLeftOffset;c.text(t,e,G),G+=Y+r.q.fileMargin,c.roundedRect(W,H,r.s.w/2-r.p.margin,Y,r.borderRadius,r.borderRadius,"S"),H=G-r.q.lineOffset}),G+=r.q.verticalPad,l=G>l+a.questionHeight?G:l+a.questionHeight):"msPicklist"===o?(J=r.s.w/2+8+a.colTwoLeftOffset,Z=l,a.value.length?(a.questionHeight=0,K=H-r.q.listLineM/2,a.value.forEach(function(t){var e=1.5*r.q.fileMargin,n=t.length*r.q.listLineH+e;H=Z-r.q.lineOffset;var s=r.s.halfW+r.p.margin+r.q.listLineM+a.colTwoLeftOffset;c.text(t,s,Z);var o=1*(r.s.w/2-2*r.p.margin);c.roundedRect(J+r.q.listLineM,H,o,n,r.borderRadius,r.borderRadius,"S"),a.questionHeight+=n+r.q.fileMargin,Z+=n+r.q.fileMargin}),a.questionHeight=a.labelHeight>a.valueHeight?a.labelHeight:a.valueHeight,l=Z>l+a.questionHeight?Z:l+a.questionHeight):(K=H,l+=a.questionHeight),X=1*(r.s.w/2-r.p.margin),c.roundedRect(J,K,X,a.valueHeight,r.borderRadius,r.borderRadius,"S")):("URL"===o||"EMAIL"===o?(tt=r.s.halfW+r.p.margin+a.colTwoLeftOffset,a.url&&"string"==typeof a.url&&a.url.trim().length&&(et=r.q.inputCharW-6,nt=a.url.trim(),at="EMAIL"===o?"mailto:".concat(nt):nt,c.setTextColor(0,112,210),st=nt.length>et?"".concat(nt.slice(0,et),"..."):nt.slice(0,et),c.textWithLink(st,tt,H+r.q.lineOffset,{url:at}),c.setTextColor(0,0,0))):(ot=r.s.halfW+r.p.margin+a.colTwoLeftOffset,l+a.valueHeight<r.p.h?c.text(a.value,ot,l):(it=r.p.h-l,0,rt=Math.floor(it/r.q.lineH),P(p.VALUE,a.value,0,rt,ot,H))),lt=r.s.w/2+8+a.colTwoLeftOffset,ct=1*(r.s.w/2-r.p.margin),"picklist"===o&&(dt=H+a.valueHeight/2,ft=(ut=lt+ct)-10,mt=ut-4,pt=ut-7,vt=dt-1,_t=dt+1,c.triangle(ft,vt,mt,vt,pt,dt-5,"F"),c.triangle(ft,_t,mt,_t,pt,dt+5,"F")),ht=x||a.valueHeight,gt=k&&x?-6:H,c.roundedRect(lt,gt,ct,ht,r.borderRadius,r.borderRadius,"S"),l=x?x+r.q.marginTop:l+a.questionHeight,x=0));case 33:case"end":return t.stop()}},t,null,[[12,20]])}),M=0;case 20:if(!(M<v.questions.length)){t.next=25;break}return t.delegateYield(F(M),"t0",22);case 22:M++,t.next=20;break;case 25:R=k?-6:b,j=k?l-b+(b+12):l-b,c.roundedRect(r.p.margin,R,r.s.w,j,r.borderRadius,r.borderRadius,"S"),l+=r.p.marginTop;case 29:case"end":return t.stop()}},t)}),O=0;case 67:if(!(O<T.length)){t.next=72;break}return t.delegateYield(A(),"t0",69);case 69:O++,t.next=67;break;case 72:if(!n||!Object.keys(n).length){t.next=125;break}if(c.addPage(),E++,L++,c.setFontSize(r.p.numberSize),c.text("Appendix 1: Photo Attachments (under 10 MB)",r.p.margin,r.p.marginTop),c.setFontSize(r.q.size),F=0,M=1,l=r.p.marginTop+r.q.lineH,!i){t.next=122;break}t.t1=regeneratorRuntime.keys(n);case 84:if((t.t2=t.t1()).done){t.next=120;break}if(R=t.t2.value,j=h(n[R].height,r.p.h,n[R].width,r.p.w),q=j.height,P=j.width,N=void 0,V="",n[R].labelText&&(V+="".concat(n[R].labelText," ")),n[R].fileName&&(V+="(".concat(n[R].fileName,"): ")),n[R].error?(B=V?2:1,q=r.q.lineH*B+r.q.marginTop):q&&P?(H=b(P,q,r.p.maxAttPhotoW,r.p.maxAttPhotoH),q=H.height,P=H.width,N=g(P,q,"center",r.s.w,r.p.margin)):N=r.p.margin,Q=q||r.p.h,l+Q+2*r.q.marginTop>r.p.h&&0!==F&&(c.addPage(),E++,L++,M++,c.text("Appendex 1: Photo Attachments - Page ".concat(M),r.p.margin,r.p.marginTop),l=r.p.marginTop+r.q.lineH),n[R].error||sfEnv.isMobileApp||!f.fileSizeOverLimit(n[R].fileSize,1e7)||(n[R].error="Cannot Display Images over 10 MB."),!n[R].error){t.next=106;break}c.setFontSize(r.q.fontSize),l+=r.q.marginTop,V&&(U=c.splitTextToSize(V,r.s.w-r.s.horizontalPad),c.text(U,r.p.margin,l),l+=r.q.lineH),z=n[R].error.length>=r.p.charW?"".concat(n[R].error.substring(0,r.p.charW),"..."):n[R].error,Y=c.splitTextToSize(z,r.s.w-r.s.horizontalPad),c.text(Y,r.p.margin,l),l+=r.q.lineH+r.q.marginTop,F++,t.next=118;break;case 106:if(W=c.splitTextToSize(V,r.s.w-r.s.horizontalPad),c.text(W,r.p.margin,l),l+=r.q.lineH,!sfEnv.isMobileiOS){t.next=114;break}return!1,t.next=113,window.mobilePhotoCorrectOrientation("data:image/jpeg;base64,".concat(n[R].docData),!1);case 113:n[R].docData=t.sent;case 114:G=atob(n[R].docData),c.addImage(G,n[R].fileType,N,l,P,q,null,"FAST"),l+=q+2*r.q.marginTop,F++;case 118:t.next=84;break;case 120:t.next=125;break;case 122:c.setFontSize(r.q.fontSize),c.text("[PDF Photo Attachments not supported in IE]",r.p.margin,l),l+=r.q.lineH;case 125:J=sfEnv.isMobileApp?sfEnv.thisForm[m+"Form_Template_Name__c"]:sfEnv.thisForm[m+"Form_Template__r"].Name,K=f.replaceReserveChars("".concat(sfEnv.thisForm.Name,"_").concat(J),100),K+=".pdf",c.setProperties({title:K}),o.removeClass("pdf-view").css({width:"auto"}),sfEnv.isMobileApp?(Z=c.output("datauristring"),X=Z.indexOf("base64")+7,tt="base64:".concat(K,"//").concat(Z.slice(X)),window.$ionicScrollDelegateResizePromise().then(function(){window.hideLoading(),cordova.plugins.email.open({subject:K,attachments:[tt]})}),o.find(".pageContent:not(.js-current-page)").hide(),o.find(".pageContent.js-current-page").removeClass(".js-current-page")):(d.saveMsgOff(),c.save(K));case 131:case"end":return t.stop()}},t)}),(_=function(){var e=this,n=arguments;return new Promise(function(s,o){var i=t.apply(e,n);function r(t){a(i,s,o,r,l,"next",t)}function l(t){a(i,s,o,r,l,"throw",t)}r(void 0)})}).apply(this,arguments)}function h(t,e,n,a){return t&&n?{height:t,width:n}:sfEnv.isMobileApp&&sfEnv.photoMaxSize<=750?{height:null,width:null}:{height:e,width:a}}function g(t,e,n,a,s,o){var i=o||0;return"center"===n?a/2+s-t/2+i:"right"===n?a+s-t+i:s+i}function b(t,e,n,a){var s=a/e,o=n/t;return(s<1||o<1)&&(o<s?(e*=o,t*=o):(e*=s,t*=s)),{width:t,height:e}}function w(t,e,n){return e*=2,n*=2,new Promise(function(a,s){var o=document.body,i=document.createElement("canvas"),r=i.getContext("2d");i.width=e,i.height=n;var l=document.createElement("img");l.onerror=function(){c.parentNode.removeChild(c),s()},l.addEventListener("load",function(t){r.drawImage(t.target,0,0),c.src=i.toDataURL(),a(i.toDataURL()),c.parentNode.removeChild(c)}),l.src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(n,'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">').concat(t,"</div></foreignObject></svg>"));var c=document.createElement("img");c.classList.add("temp-freetext-img"),o.appendChild(c)})}function y(t,e){return t&&t.length>e?t.substring(0,e)+"...":t}e.exports=c},{"./app":3,"./util":16,"./vfr":18}],14:[function(t,e,n){"use strict";var a={createQuestionHTML:function(t,e,n){var o=t.qType,i=[!0,"true",1].includes(e[s+"Is_Text_Formula__c"]);return"Text"===o||"Text_Answer__c"===o||i?a._textInput(t,e,n,i):"Currency"===o||"Currency_Answer__c"===o?a._currencyInput(t,e,n):"Date"===o||"Date_Answer__c"===o?a._dateInput(t,e,n):"Date/Time"===o||"Date_Time_Answer__c"===o?a._dateTimeInput(t,e,n):"Email"===o||"Email_Answer__c"===o?a._emailInput(t,e,n):"Number"===o||"Number_Answer__c"===o?a._numberInput(t,e,n):"Percent"===o||"Percent_Answer__c"===o?a._percentInput(t,e,n):"Phone"===o||"Phone_Answer__c"===o?a._phoneInput(t,e,n):"Long Text"===o||"TEXTAREA"===o?a._longTextInput(t,e,n):"URL"===o||"URL_Answer__c"===o?a._urlInput(t,e,n):"Picklist"===o||"PICKLIST"===o&&!t.isFLAsRadioButton?a._picklist(t,e,n):"Multi-select Picklist"===o||"MULTIPICKLIST"===o?a._msPicklist(t,e,n):"Radio Button List"===o||"PICKLIST"===o&&t.isFLAsRadioButton?a._radioButtonList(t,e,n):"Checkbox List"===o||"Checkbox_Answer__c"===o?a._checkBoxList(t,e,n):"E-Signature"===o?a._esig(t,e,n):"Lookup_Answer__c"===o?a._lookupInput(t,e,n):"Attachment/Photo"===o?a._attachmentPhoto(t,e,n):"Geolocation"===o||"LOCATION"===o?a._geolocationInput(t,e,n):""},createDisabledTextarea:x,_textInput:function(t,e,n,a){var o=a?"Long_Text_Answer__c":"Text_Answer__c",i=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+o]?n[s+o]:y;i=i.replace(/"/g,"&quot;");var l=v.checkIfLink(i);l||(i=i.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#39;/g,"'"));var c=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],d=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]),u=$.inArray(e[s+"Link_Field__c"],r)>=0;void 0===h&&(h=sfEnv.countryPickLists);if(h&&u)return'\n\t\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t<div class="error-text">\n\t\t\t\t\t\tThis state/country text question is incompatible with your org.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t\t</div>';var f="",m=t.fieldLengthMin,p=t.fieldLength,_=!!e["".concat(s,"Validation_Regex__c")]&&e["".concat(s,"Validation_Regex__c")],w=_?"js-text-regex":"",S=_?' data-regex="'.concat(_,'" '):"",C=e["".concat(s,"Validation_Message__c")]?e["".concat(s,"Validation_Message__c")]:"This field requires a valid value",T=k(m,p,_,C),A=e[s+"Minimum_Value_Question_Random_Id__c"]||"",O=e[s+"Maximum_Value_Question_Random_Id__c"]||"",D=A||O?"js-comparative-validation":"",F=D?"js-text-equals":"",M=i;l&&g?M=v.convertToMobileLink(v.withoutQuote(i)):l&&(M=$("<div/>").html(i).text());var R=x(l,t.requiredOrNot,e.Id,n[s+"Linked_Section_Order__c"],n[s+"Mobile_ID__c"],M);b&&(f+='\n\t\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t'.concat(R,"\n\t\t\t\t</div>\n\t\t\t</div>"));var j=!!e[s+"Inherited_Value_Field__c"],q="",P="";return t.requiredOrNot.includes("disabled")&&g&&(q="js-readonly-disabled",P=" disabled "),f+='\n\t\t<div class="slds-form-element OR-form-element_width '.concat(b?"slds-hide":"",'">\n\t\t\t<div class="slds-form-element__control ').concat(t.isFormula?"formula-field":""," ").concat(c?"barcode-field":""," ").concat(d?"ocr-field":"",'">\n\t\t\t\t').concat(l?R:"",'\n\t\t\t\t<input minlength="').concat(m,'" maxlength="').concat(p,'" \n\t\t\t\t\tclass="answerValue slds-input formInput textInput ').concat(w," ").concat(D," ").concat(F,'" \n\t\t\t\t\t').concat(t.requiredOrNot,' \n\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t').concat(A?' data-min-question-id="'.concat(A,'" '):"","\n\t\t\t\t\t").concat(O?' data-max-question-id="'.concat(O,'" '):"","\n\t\t\t\t\t").concat(T?' data-validation-msg="'.concat(T,'" '):"","\n\t\t\t\t\t").concat(S,'\n\t\t\t\t\ttype="text" \n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\tvalue="').concat(i,'" \n\t\t\t\t\t').concat(j?E(e):"","/>\n\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t").concat(c?L(e,n,P,q,!1):"","\n\t\t\t\t").concat(d?"<ocr></ocr>":"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_currencyInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"Currency_Answer__c"]||0===n[s+"Currency_Answer__c"]?n[s+"Currency_Answer__c"]:y,o="",i=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],r=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b){var l=e[s+"Decimal_Length__c"]||0,c=null!==a&&""!==a?v.withCommaSeparators(v.precisionRound(a,l).toFixed(l)):"";o+='<div class="slds-form-element  OR-form-element_width">\n\t\t\t<div class="slds-form-element__control">\t\n\t\t\t\t<div\n\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(c,"</div>\n\t\t\t</div>\n\t\t</div>")}var d=e[s+"Minimum_Value_Question_Random_Id__c"]||"",u="greaterThan"===e[s+"Minimum_Value_Comparison__c"]?"js-num-greater-than":"greaterThanOrEquals"===e[s+"Minimum_Value_Comparison__c"]?"js-num-greater-than-or-equals":"",f=e[s+"Maximum_Value_Question_Random_Id__c"]||"",m="lessThan"===e[s+"Maximum_Value_Comparison__c"]?"js-num-less-than":"lessThanOrEquals"===e[s+"Maximum_Value_Comparison__c"]?"js-num-less-than-or-equals":"",p=!!t.customFormula,_=p?"js-custom-formula":"js-num-type-input",h=d||f?"js-comparative-validation":"",w=e[s+"Validation_Message__c"]||"",k=!!e[s+"Inherited_Value_Field__c"],x=sfEnv.isMobileiOS?"js-numeric":"",S="",T="";t.requiredOrNot.includes("disabled")&&g&&(S="js-readonly-disabled",T=" disabled ");return o+='<div class="slds-form-element OR-form-element_width '.concat(b?"slds-hide":"",'">\n\t\t\t\t<div class="slds-form-element__control ').concat(t.isFormula?"formula-field":""," ").concat(i?"barcode-field":""," ").concat(r?"ocr-field":"",'">\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass="formInput answerValue ').concat(x," ").concat(t.regExClass," removeExtraCharacters slds-input ").concat(_," ").concat(h," ").concat(u," ").concat(m,'"\n\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\ttype="').concat(p||sfEnv.isMobileiOS?"text":"number",'"  \n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t\tmax="').concat(e[s+"Maximum_Value__c"],'" \n\t\t\t\t\t\tmin="').concat(e[s+"Minimum_Value__c"],'" \n\t\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t\t').concat(d?' data-min-question-id="'.concat(d,'" '):"","\n\t\t\t\t\t\t").concat(f?' data-max-question-id="'.concat(f,'" '):"","\n\t\t\t\t\t\t").concat(w?' data-validation-msg="'.concat(w,'" '):"",'\n\t\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t\t').concat(p?C(t):""," \n\t\t\t\t\t\t").concat(k?E(e):"","\n\t\t\t\t\t\t/>\n\t\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t\t").concat(i?L(e,n,T,S,!1):"","\n\t\t\t\t\t").concat(r?"<ocr></ocr>":"",'\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t\t</div>')},_emailInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"Email_Answer__c"]?n[s+"Email_Answer__c"]:y,o=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],i=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b)return'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control ">\t\n\t\t\t\t<div\n\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t><a class="form-detail-link__email" href="mailto:').concat(a,'">').concat(a,"</a></div>\n\t\t\t</div>\n\t\t</div>");var r=e[s+"Minimum_Value_Question_Random_Id__c"]||"",l=e[s+"Maximum_Value_Question_Random_Id__c"]||"",c=r||l?"js-comparative-validation":"",d=c?"js-text-equals":"",u=e[s+"Validation_Message__c"]||"",f=!!e[s+"Inherited_Value_Field__c"],m=t.fieldLength?' maxlength="'.concat(t.fieldLength,'" '):" ",p="",v="";return t.requiredOrNot.includes("disabled")&&g&&(p="js-readonly-disabled",v=" disabled "),'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control '.concat(t.isFormula?"formula-field":""," ").concat(o?"barcode-field":""," ").concat(i?"ocr-field":"",'">\n\t\t\t\t<input \n\t\t\t\t\t').concat(m,'\n\t\t\t\t\tclass="email answerValue slds-input js-link-input ').concat(c," ").concat(d,'" \n\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t').concat(r?' data-min-question-id="'.concat(r,'" '):"","\n\t\t\t\t\t").concat(l?' data-max-question-id="'.concat(l,'" '):"","\n\t\t\t\t\t").concat(u?' data-validation-msg="'.concat(u,'" '):"",'\n\t\t\t\t\ttype="email"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t').concat(f?E(e):""," />\n\t\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t\t").concat(o?L(e,n,v,p,!1):"","\n\t\t\t\t\t").concat(i?"<ocr></ocr>":"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_numberInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"Number_Answer__c"]||0===n[s+"Number_Answer__c"]?n[s+"Number_Answer__c"]:y,o="",i=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],r=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b){var l=e[s+"Decimal_Length__c"]||0,c=null!==a&&""!==a?v.withCommaSeparators(v.precisionRound(a,l).toFixed(l)):"";o+='<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control ">\t\n\t\t\t\t<div\n\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(c,"</div>\n\t\t\t</div>\n\t\t</div>")}var d=e[s+"Minimum_Value_Question_Random_Id__c"]||"",u="greaterThan"===e[s+"Minimum_Value_Comparison__c"]?"js-num-greater-than":"greaterThanOrEquals"===e[s+"Minimum_Value_Comparison__c"]?"js-num-greater-than-or-equals":"",f=e[s+"Maximum_Value_Question_Random_Id__c"]||"",m="lessThan"===e[s+"Maximum_Value_Comparison__c"]?"js-num-less-than":"lessThanOrEquals"===e[s+"Maximum_Value_Comparison__c"]?"js-num-less-than-or-equals":"",p=!!t.customFormula,_=p?"js-custom-formula":"js-num-type-input",h=d||f?"js-comparative-validation":"",w=e[s+"Validation_Message__c"]||"",k=!!e[s+"Inherited_Value_Field__c"],x=sfEnv.isMobileiOS?"js-numeric":"",S="",T="";t.requiredOrNot.includes("disabled")&&g&&(S="js-readonly-disabled",T=" disabled ");return o+='<div class="slds-form-element OR-form-element_width '.concat(b?"slds-hide":"",'">\n\t\t\t<div class="slds-form-element__control ').concat(t.isFormula?"formula-field":""," ").concat(i?"barcode-field":""," ").concat(r?"ocr-field":"",'">\n\t\t\t\t<input \n\t\t\t\t\tclass="formInput answerValue ').concat(x," ").concat(t.regExClass," removeExtraCharacters slds-input ").concat(_," ").concat(h," ").concat(u," ").concat(m,'" \n\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t').concat(d?' data-min-question-id="'.concat(d,'" '):"","\n\t\t\t\t\t").concat(f?' data-max-question-id="'.concat(f,'" '):"","\n\t\t\t\t\t").concat(w?' data-validation-msg="'.concat(w,'" '):"",'\n\t\t\t\t\ttype="').concat(p||sfEnv.isMobileiOS?"text":"number",'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\tmax="').concat(e[s+"Maximum_Value__c"],'" \n\t\t\t\t\tmin="').concat(e[s+"Minimum_Value__c"],'" \n\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t').concat(p?C(t):"","\n\t\t\t\t\t").concat(k?E(e):"","\n\t\t\t\t/>\n\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t").concat(i?L(e,n,T,S,!1):"","\n\t\t\t\t").concat(r?"<ocr></ocr>":"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_percentInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"Percent_Answer__c"]||0===n[s+"Percent_Answer__c"]?n[s+"Percent_Answer__c"]:y,o="",i=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],r=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b){var l=e[s+"Decimal_Length__c"]||0,c=null!==a&&""!==a?v.withCommaSeparators(v.precisionRound(a,l).toFixed(l)):"";o+='<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control ">\n\t\t\t\t<div\n\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(c,"</div>\n\t\t\t</div>\n\t\t</div>")}var d=e[s+"Minimum_Value_Question_Random_Id__c"]||"",u="greaterThan"===e[s+"Minimum_Value_Comparison__c"]?"js-num-greater-than":"greaterThanOrEquals"===e[s+"Minimum_Value_Comparison__c"]?"js-num-greater-than-or-equals":"",f=e[s+"Maximum_Value_Question_Random_Id__c"]||"",m="lessThan"===e[s+"Maximum_Value_Comparison__c"]?"js-num-less-than":"lessThanOrEquals"===e[s+"Maximum_Value_Comparison__c"]?"js-num-less-than-or-equals":"",p=!!t.customFormula,_=p?"js-custom-formula":"js-num-type-input",h=d||f?"js-comparative-validation":"",w=e[s+"Validation_Message__c"]||"",k=!!e[s+"Inherited_Value_Field__c"],x=sfEnv.isMobileiOS?"js-numeric":"",S="",T="";t.requiredOrNot.includes("disabled")&&g&&(S="js-readonly-disabled",T=" disabled ");return o+='<div class="slds-form-element OR-form-element_width '.concat(b?"slds-hide":"",'">\n\t\t\t<div class="slds-form-element__control ').concat(t.isFormula?"formula-field":""," ").concat(i?"barcode-field":""," ").concat(r?"ocr-field":"",'">\n\t\t\t\t<input \n\t\t\t\t\tclass="formInput answerValue ').concat(x," ").concat(t.regExClass," removeExtraCharacters slds-input js-percent ").concat(_," ").concat(h," ").concat(u," ").concat(m,'"\n\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\ttype="').concat(p||sfEnv.isMobileiOS?"text":"number",'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\tmax="').concat(e[s+"Maximum_Value__c"],'" \n\t\t\t\t\tmin="').concat(e[s+"Minimum_Value__c"],'" \n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t').concat(d?' data-min-question-id="'.concat(d,'" '):"","\n\t\t\t\t\t").concat(f?' data-max-question-id="'.concat(f,'" '):"","\n\t\t\t\t\t").concat(w?' data-validation-msg="'.concat(w,'" '):"",'\n\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t').concat(p?C(t):""," \n\t\t\t\t\t").concat(k?E(e):"","/>\n\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t").concat(i?L(e,n,T,S,!1):"","\n\t\t\t\t").concat(r?"<ocr></ocr>":"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_phoneInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"Phone_Answer__c"]?n[s+"Phone_Answer__c"]:y,o=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],i=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b)return'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control ">\n\t\t\t\t<div\n\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(a,"</div>\n\t\t\t</div>\n\t\t</div>");var r=e[s+"Minimum_Value_Question_Random_Id__c"]||"",l=e[s+"Maximum_Value_Question_Random_Id__c"]||"",c=r||l?"js-comparative-validation":"",d=c?"js-text-equals":"",u=e[s+"Validation_Message__c"]||"",f=!!e[s+"Inherited_Value_Field__c"],m=t.fieldLength?' maxlength="'.concat(t.fieldLength,'" '):" ",p="",v="";return t.requiredOrNot.includes("disabled")&&g&&(p="js-readonly-disabled",v=" disabled "),'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control '.concat(t.isFormula?"formula-field":""," ").concat(o?"barcode-field":""," ").concat(i?"ocr-field":"",'">\n\t\t\t\t<input \n\t\t\t\t\t').concat(m,' \n\t\t\t\t\tclass="answerValue removeExtraCharacters phoneNum slds-input ').concat(c," ").concat(d,'"\n\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t').concat(r?' data-min-question-id="'.concat(r,'" '):"","\n\t\t\t\t\t").concat(l?' data-max-question-id="'.concat(l,'" '):"","\n\t\t\t\t\t").concat(u?' data-validation-msg="'.concat(u,'" '):"",'\n\t\t\t\t\ttype="tel" \n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\tvalue="').concat(a,'" \n\t\t\t\t\t').concat(f?E(e):"","/>\n\t\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t\t").concat(o?L(e,n,v,p,!1):"","\n\t\t\t\t\t").concat(i?"<ocr></ocr>":"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_longTextInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"Long_Text_Answer__c"]?n[s+"Long_Text_Answer__c"]:y,o=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],i=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b)return'\n\t\t<div class="slds-form-element OR-form-element_width long-text-container">\n\t\t\t<div class="slds-form-element__control">\n\t\t\t\t<div\n\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(a,"</div>\n\t\t\t</div>\n\t\t</div>");var r=e[s+"Minimum_Value_Question_Random_Id__c"]||"",l=e[s+"Maximum_Value_Question_Random_Id__c"]||"",c=r||l?"js-comparative-validation":"",d=c?"js-text-equals":"",u=e[s+"Validation_Message__c"]||"This field is required.",f=!!e[s+"Inherited_Value_Field__c"],m=t.fieldLengthMin,p=t.fieldLength,v="",_="";return t.requiredOrNot.includes("disabled")&&g&&(v="js-readonly-disabled",_=" disabled "),'\n\t\t\t<div class="slds-form-element long-text-container">\n\t\t\t<div class="slds-form-element__control '.concat(t.isFormula?"formula-field":""," ").concat(o?"barcode-field":""," ").concat(i?"ocr-field":"",'">\n\t\t\t\t<textarea\n\t\t\t\t\trows="6" \n\t\t\t\t\tclass="answerValue slds-textarea ').concat(c," ").concat(d,'"\n\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\tminlength="').concat(m,'"\n\t\t\t\t\tmaxlength="').concat(p,'"\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t').concat(r?' data-min-question-id="'.concat(r,'" '):"","\n\t\t\t\t\t").concat(l?' data-max-question-id="'.concat(l,'" '):"","\n\t\t\t\t\t").concat(u?' data-validation-msg="'.concat(u,'" '):"",'\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t').concat(f?E(e):"",">").concat(a,"</textarea>\n\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t").concat(o?L(e,n,_,v,!1):"","\n\t\t\t\t").concat(i?"<ocr></ocr>":"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_urlInput:function(t,e,n){var a=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]?e[s+"Default_Value__c"]:"":n[s+"URL_Answer__c"]?n[s+"URL_Answer__c"]:y,o=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],i=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b)return""!==a&&-1===a.indexOf("://")&&(a="https://"+a),'\n\t\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t<div class="disabled-control-color slds-textarea form-detail-link__container">\t\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclass="form-detail-link__url"\n\t\t\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\t\thref="').concat(a,'"\n\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t>').concat(a,"</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>");var r=e[s+"Minimum_Value_Question_Random_Id__c"]||"",l=e[s+"Maximum_Value_Question_Random_Id__c"]||"",c=r||l?"js-comparative-validation":"",d=c?"js-text-equals":"",u=e[s+"Validation_Message__c"]||"",f=!!e[s+"Inherited_Value_Field__c"],m=t.fieldLength?' maxlength="'.concat(t.fieldLength,'" '):" ",p="",v="";return t.requiredOrNot.includes("disabled")&&g&&(p="js-readonly-disabled",v=" disabled "),'\n\t\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control '.concat(t.isFormula?"formula-field":""," ").concat(o?"barcode-field":""," ").concat(i?"ocr-field":"",'">\n\t\t\t\t\t<input \n\t\t\t\t\t\t').concat(m,' \n\t\t\t\t\t\tclass="answerValue URL slds-input js-link-input ').concat(c," ").concat(d,'"\n\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t\t').concat(r?' data-min-question-id="'.concat(r,'" '):"","\n\t\t\t\t\t\t").concat(l?' data-max-question-id="'.concat(l,'" '):"","\n\t\t\t\t\t\t").concat(u?' data-validation-msg="'.concat(u,'" '):"",'\n\t\t\t\t\t\ttype="url"\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\tvalue="').concat(a,'" \n\t\t\t\t\t\t').concat(f?E(e):"","/>\n\t\t\t\t\t").concat(t.isFormula?I(e,n):"","\n\t\t\t\t\t").concat(o?L(e,n,v,p,!1):"","\n\t\t\t\t\t").concat(i?"<ocr></ocr>":"",'\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t\t</div>')},_picklist:function(t,e,n){var a="",o="";if(b){var i=n[s+"Long_Text_Answer__c"];null==i&&(i="");var r=v.purifyHTML($("<div/>").html(i).text());o='<div class="slds-form-element OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="slds-textarea disabled-control-color"\n\t\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t>').concat(r,"</div>\n\t\t\t\t</div>\n\t\t\t</div>")}void 0===h&&(h=sfEnv.countryPickLists);var d=$.inArray(e[s+"Link_Field__c"],l)>=0,u=$.inArray(e[s+"Link_Field__c"],c)>=0,f=!!e[s+"Inherited_Value_Field__c"];if(h&&(d||u)){var m=d?"js-country-code":"js-state-code";a+='\n\t\t\t<div class="slds-form-element OR-form-element_width js-picklist',b&&(a+=" slds-hide "),a+='">\n\t\t\t\t<div class="slds-form-element__control '.concat(t.isFormula?"formula-field":"",'">\n\t\t\t\t\t<div class="slds-select_container">\n\t\t\t\t\t\t<select \n\t\t\t\t\t\t\tclass="formInput answerValue slds-select js-trigger-custom-formula ').concat(m,'"\n\t\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t\t\tdata-parent-picklist-id="').concat(e[s+"Parent_Picklist_ID__c"],'"\n\t\t\t\t\t\t\t').concat(f?E(e):"",'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value="">--None--</option>')}else{a+='\n\t\t\t<div class="slds-form-element js-picklist OR-form-element_width',b&&(a+=" slds-hide ");var _=e[s+"Parent_Picklist_ID__c"]?"js-child-dep-pl":"",w=e[s+"Picklist_Dependency__c"]||"",y=v.withoutDoubleQuote(w,!0);a+='">\n\t\t\t\t<div class="slds-form-element__control OR-form-element_width '.concat(t.isFormula?"formula-field":"",'">\n\t\t\t\t\t<div class="slds-select_container">\n\t\t\t\t\t\t<select \n\t\t\t\t\t\t\tclass="formInput answerValue slds-select js-trigger-custom-formula ').concat(_,'"\n\t\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\t\t\tdata-parent-picklist-id="').concat(e[s+"Parent_Picklist_ID__c"],'"\n\t\t\t\t\t\t\tdata-picklist-dependency="').concat(y,'"\n\t\t\t\t\t\t\t').concat(f?E(e):"",'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value="">--None--</option>')}if(!h&&p)return'\n\t\t\t<div class="slds-form-element js-picklist OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t<div class="error-text">\n\t\t\t\t\t\tThis state/country picklist question is incompatible with your org.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t\t</div>';(e[s+"Question_Values__r"]&&(Array.isArray(e[s+"Question_Values__r"])||e[s+"Question_Values__r"].hasOwnProperty("records"))?e[s+"Question_Values__r"].hasOwnProperty("records")?e[s+"Question_Values__r"].records:e[s+"Question_Values__r"]:t.picklistValues).forEach(function(t){var o=t[s+"Label__c"],i=g?o:$("<div/>").html(o).text();i=v.purifyHTML(i);var r=g?v.withoutDoubleQuote(o,!0):o,l=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]&&(e[s+"Default_Value__c"].replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'")===o.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'")||e[s+"Default_Value__c"]===o):void 0!==n[s+"Long_Text_Answer__c"]&&n[s+"Long_Text_Answer__c"]===o,c=l?'selected="selected"':"";a+='<option value="'.concat(r,'" ').concat(c,">\n\t\t\t\t\t\t").concat(i,"\n\t\t\t\t\t</option>")});return a+="\t\t\n\t\t\t\t</select>\n\t\t\t\t".concat(t.isFormula?I(e,n):"",'\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\t\n\t</div>'),o+a},_msPicklist:function(t,e,n,a){var o="";if(b||a){for(var i=$("<div/>").html(n[s+"Long_Text_Answer__c"]).text(),r='<span class="mspl-value">',l=a||i.split(";"),c=0;c<l.length;c++){var d=$("<div/>").text(l[c]).html();r+=d+(l.length-1>c?'</span><hr class="ms-pl-separator"><span class="mspl-value">':"")}if(r+="</span>",o='<div class="slds-form-element OR-form-element_width js-ms-picklist">\n\t\t\t<div class="slds-form-element__control">\n\t\t\t\t<div\n\t\t\t\t\tclass="slds-textarea disabled-control-color"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(r,"</div>\n\t\t\t</div>\n\t\t</div>"),a)return o}var u="",f=!!e[s+"Inherited_Value_Field__c"],m=!!t.customFormula,p=m?"js-custom-formula-ms":"";if(g||w){u+='<div class="slds-form-element OR-form-element_width js-ms-picklist"><select \n\t\t\t\t\tclass="formInput answerValue js-ms-picklist '.concat(p),u+=b?'slds-hide "':'" ',u+='multiple \n\t\t\t\t\tname="'.concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t').concat(f?E(e):"","\n\t\t\t\t\t").concat(m?C(t):"","\n\t\t\t\t\t>");var _,h=$("<div/>").html(n[s+"Long_Text_Answer__c"]).text(),y=h.split(";");_=e[s+"Question_Values__r"]&&(Array.isArray(e[s+"Question_Values__r"])||e[s+"Question_Values__r"].hasOwnProperty("records"))?e[s+"Question_Values__r"].hasOwnProperty("records")?e[s+"Question_Values__r"].records:e[s+"Question_Values__r"]:t.picklistValues;var k=void 0===n[s+"Long_Text_Answer__c"];_.forEach(function(t){var e=$("<div/>").html(t[s+"Label__c"]).text(),n=v.purifyHTML(t[s+"Label__c"]),a=!k&&y.includes(e)?'selected="selected"':"";u+="<option ".concat(a,' value="').concat(t[s+"Label__c"],'">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t</option>")}),u+="</select></div>"}else{u+='<div class="ms-selectable '.concat(b?"slds-hide":"",'">\n\t\t\t\t\t<ol class="formInput answerValue selectable-multiselect ').concat(p,'" \n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\tdata-selected-val=""\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\t').concat(m?C(t):""," \n\t\t\t\t\t>");var x=sfEnv.isPreview?$("<div/>").html(e[s+"Default_Value__c"]).text().replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'"):$("<div/>").html(n[s+"Long_Text_Answer__c"]).text().replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'"),S=x.split(";");(e[s+"Question_Values__r"]&&(Array.isArray(e[s+"Question_Values__r"])||e[s+"Question_Values__r"].hasOwnProperty("records"))?e[s+"Question_Values__r"].hasOwnProperty("records")?e[s+"Question_Values__r"].records:e[s+"Question_Values__r"]:t.picklistValues).forEach(function(t){var a=$("<div/>").html(t[s+"Label__c"]).text(),o=v.purifyHTML(a),i=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]&&S.includes(a)?"ui-selected":"":void 0!==n[s+"Long_Text_Answer__c"]&&S.includes(a)?"ui-selected":"";u+='<li class="ui-widget-content mspicklist-item '.concat(i,'"  tabindex="0" data-option-value="').concat(t[s+"Label__c"],'">\n\t\t\t\t\t\t').concat(o,"\n\t\t\t\t\t</li>")}),u+="</ol>",u+='<div class="slds-form-element__help slds-hide">This field is required.</div></div>'}return o+u},_radioButtonList:function(t,e,n){var a=n.Id?n.Id:n[s+"Mobile_ID__c"],o="",i="";if(e[s+"Picklist_Dependency__c"]){var r=v.withoutDoubleQuote(e[s+"Picklist_Dependency__c"],!0);o=' data-picklist-dependency="'.concat(r,'"')}e[s+"Parent_Picklist_ID__c"]&&(o+=' data-parent-picklist-id="'.concat(e[s+"Parent_Picklist_ID__c"],'"'),i+=" js-child-dep-pl");var d=l.includes(e[s+"Link_Field__c"]),u=c.includes(e[s+"Link_Field__c"]);void 0===h&&(h=sfEnv.countryPickLists);h&&(d||u)&&(i+=d?" js-country-code":" js-state-code");var f,m=t.requiredOrNot.includes("disabled")?"disabled":"",p=t.requiredOrNot.includes("required")?"required-rb-list":"",_='\n\t\t<fieldset class="slds-form-element OR-form-element_width formInput answerValue table-radio '.concat(p," ").concat(t.requiredTableMargin," ").concat(i,'" \n\t\t\tdata-answerid="').concat(a,'"\n\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'" \n\t\t\t').concat(m,"\n\t\t\t").concat(o,'>\n\t\t\t<div class="slds-form-element__control">'),g=v.randomString(5,"aA#");f=e[s+"Question_Values__r"]&&(Array.isArray(e[s+"Question_Values__r"])||e[s+"Question_Values__r"].hasOwnProperty("records"))?e[s+"Question_Values__r"].hasOwnProperty("records")?e[s+"Question_Values__r"].records:e[s+"Question_Values__r"]:t.picklistValues;return f.forEach(function(o){var i=o[s+"Icon__c"]||"record",r=function(t){switch(t){case"question":case"priority":case"custom_apps":case"notification":case"threedots":case"like":case"dislike":case"ban":case"approval":case"lock":case"unlock":case"arrowup":case"chevronup":case"chevrondown":case"arrowdown":return"inverted-rb-icon";case"warning":return"warning-rb-icon";case"record":return"dot-rb-icon";default:return""}}(i),l=v.purifyHTML(o[s+"Label__c"]),c=!0===b?'<div class="slds-form-element__label slds-radio__label slds-radio__label_target" >\n\t\t\t\t\t\t\t\t'.concat(l,"\n\t\t\t\t\t\t\t</div>"):'<a class="slds-form-element__label slds-radio__label slds-radio__label_target" href="#">\n\t\t\t\t\t\t\t\t'.concat(l,"\n\t\t\t\t\t\t\t</a>"),d=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]&&(e[s+"Default_Value__c"].replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'")===o[s+"Label__c"].replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'")||e[s+"Default_Value__c"]===o[s+"Label__c"]):void 0!==n[s+"Long_Text_Answer__c"]&&n[s+"Long_Text_Answer__c"]===o[s+"Label__c"],u=o[s+"Label__c"],f=o.Id+g,m=e.Id,p=n[s+"Linked_Section_Order__c"],h=t.requiredOrNot;_+=v.createRBListElement(u,a,f,m,p,h,i,c,d,r)}),_+='</div>\n\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t</fieldset>'},_checkBoxList:function(t,e,n){var a,o,i,r=!!e[s+"Inherited_Value_Field__c"],l="",c=v.randomString(5,"aA#");if(l+='\n\t<div class="slds-form-element OR-form-element_width formInput answerValue table-checkbox '.concat(t.requiredTableMargin,'"\n\tid="').concat(e.Id,'"\n\tdata-questionid="').concat(e.Id,'">\n\t\t<div class="slds-form-element__control ').concat(t.isFormula?"formula-field":"",'">'),"Checkbox_Answer__c"==t.qType)l+='<div class="slds-checkbox">\t\t\t\t\n\t\t\t\t\t<input\n\t\t\t\t\t\tvalue="'.concat(e[s+"Label__c"],'"\n\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t').concat(!0===n[s+"Checkbox_Answer__c"]?'checked="checked"':"",'\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\tid="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tclass="boolean-checkbox"\n\t\t\t\t\t\t').concat(r?E(e):"",'/>\n\t\t\t\t\t<label class="slds-checkbox__label OR-checkbox-flex boolean-checkbox" for="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'">\n\t\t\t\t\t\t<span class="slds-checkbox_faux "></span>\n\t\t\t\t\t\t<span class="slds-form-element__label"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t').concat(t.isFormula&&!b?I(e,n):"");else{a=sfEnv.isPreview?$("<div/>").html(e[s+"Default_Value__c"]).text().replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'"):$("<div/>").html(n[s+"Long_Text_Answer__c"]).text().replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/"/g,"&quot;").replace(/&#39;/g,"'"),i=a.split(";"),(e[s+"Question_Values__r"]&&(Array.isArray(e[s+"Question_Values__r"])||e[s+"Question_Values__r"].hasOwnProperty("records"))?e[s+"Question_Values__r"].hasOwnProperty("records")?e[s+"Question_Values__r"].records:e[s+"Question_Values__r"]:t.picklistValues).forEach(function(a){o=$("<div/>").html(a[s+"Label__c"]).text();var r=sfEnv.isPreview?void 0!==e[s+"Default_Value__c"]&&i.includes(o):void 0!==n[s+"Long_Text_Answer__c"]&&i.includes(o),d=r?'checked="checked"':"";l+='<div class="slds-checkbox">\t\t\t\t\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tvalue="'.concat(a[s+"Label__c"],'"\n\t\t\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t').concat(d,'\n\t\t\t\t\t\t\t\tname="').concat((n.Id?n.Id:n[s+"Mobile_ID__c"])+c,'"\n\t\t\t\t\t\t\t\tid="').concat(a.Id+c,'"\n\t\t\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label class="slds-checkbox__label OR-checkbox-flex" for="').concat(a.Id+c,'">\n\t\t\t\t\t\t\t\t<span class="slds-checkbox_faux"></span>\n\t\t\t\t\t\t\t\t<span class="slds-form-element__label">').concat(v.purifyHTML(a[s+"Label__c"]),"</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>")})}return l+='</div>\n\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t</div>'},_geolocationInput:function(t,e,n){var a=!!e[s+"Inherited_Value_Field__c"],o=n[s+"Geolocation_Answer__c"],i=o&&0!==Object.keys(o).length?"".concat(_.formatCoordinate(o.latitude)," ").concat(_.formatCoordinate(o.longitude)):y,r=t.requiredOrNot.split("disabled").length-1<2,l=t.requiredOrNot.replace(/disabled/g,"");return b?'<div class="slds-form-element OR-form-element_width long-text-container">\n\t\t\t\t\t<div class="slds-form-element__control">\t\n\t\t\t\t\t\t<div\n\t\t\t\t\t\tclass="answerValue slds-textarea disabled-control-color"\n\t\t\t\t\t\t'.concat(l,'\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\t>').concat(i,"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>"):'<div class="slds-form-element OR-form-element_width '.concat(b?"slds-hide":"",'">\n\t\t\t\t\t<div class="slds-form-element__control geolocation-field">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass="answerValue slds-input formInput geolocation-input"\n\t\t\t\t\t\t\treadonly="readonly"\n\t\t\t\t\t\t\t').concat(l,'\n\t\t\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\t\ttype="text" \n\t\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t\t\tvalue="').concat(i,'" \n\t\t\t\t\t\t\t').concat(a?E(e):"","/>\n\t\t\t\t\t\t").concat(r?'<button class="slds-button slds-button_icon slds-button_icon-border-filled input-btn js-geolocation">\n\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t<use xlink:href='.concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#checkin",'></use>\n\t\t\t\t</svg>\n\t\t\t\t<span class="slds-assistive-text">Get Geolocation</span>\n\t\t\t</button>'):"",'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t\t\t</div>')},_esig:function(t,e,n){var a=void 0!==n[s+"Long_Text_Answer__c"]&&null!==n[s+"Long_Text_Answer__c"]?n[s+"Long_Text_Answer__c"]:"",o=!(!a||a.indexOf("image/svg")>-1),i=b?"disabled-sig-pad":"";if(o){var r=a.replace(/"/g,"&quot;");return sfEnv.hasSignature=!0,'\t\n\t\t\t<div class="slds-form-element sigPad js-sig-answer js-old-sig" data-questionid="'.concat(e.Id,'">\n\t\t\t\t<div class="sig sigWrapper">\n\t\t\t\t\t<div class="typed"></div>\n\t\t\t\t\t<canvas class="pad ').concat(i,'" width="243" height="80"></canvas>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="hidden"\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\tclass="output answerValue"\n\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tvalue="').concat(r,'"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class="slds-form-element__help slds-hide slds-m-left_small">Signature is required.</div>\n\t\t\t\t</div>\n\t\t\t</div>')}var l="";return a||(l="sig-empty"),'\t\n\t\t\t<div class="slds-form-element sig-element">\n\t\t\t\t<div class="slds-form-element OR-form-element_width sig-answer-container js-sig-answer '.concat(l,'" data-questionid="').concat(e.Id,'">\n\t\t\t\t\t<img loading="lazy" src="').concat(a,'" class="slds-p-around_small" />\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype="hidden"\n\t\t\t\t\t\tclass="answerValue"\n\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tdata-jpg-version-id="').concat(n[s+"E_Sig_Image_Id__c"],'"\n\t\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class="slds-form-element__help slds-hide slds-m-left_small">Signature is required.</div>\n\t\t\t\t</div>\n\t\t\t</div>')},_dateInput:function(t,e,n){var a,o=[!0,"true"].includes(e[s+"DMY_Format__c"]);if(b)return a=v.formatDateAnswerValue(n[s+"Date_Answer__c"],o),'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control ">\n\t\t\t\t<div\n\t\t\t\t\tclass="disabled-control-color slds-textarea"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(a,"</div>\n\t\t\t</div>\n\t\t</div>");var r=!!e[s+"Inherited_Value_Field__c"],l=o?"js-dmy-format":"";"Invalid date"==(a=sfEnv.isPreview?e[s+"Default_Value__c"]&&"None"!==e[s+"Default_Value__c"]?v.previewDateFormatter("date",e[s+"Default_Value__c"]):"":i(n[s+"Date_Answer__c"]))&&(a=null);var c=e[s+"Maximum_Value__c"],d=e[s+"Minimum_Value__c"],u=e[s+"Minimum_Value_Question_Random_Id__c"]||"",f=e[s+"Maximum_Value_Question_Random_Id__c"]||"",m=e[s+"Validation_Message__c"]||"",p=u||f?"js-comparative-validation":"";return'\n\t\t<div class="slds-form-element OR-form-element_width date">\n\t\t\t<div class="slds-form-element__control inner-addon right-addon '.concat(t.isFormula?"date-formula formula-field":"",'">\n\t\t\t\t<svg aria-hidden="true" class="slds-button__icon input-calendar">\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#monthlyview",'"></use>\n\t\t\t\t</svg>\n\t\t\t\t<input \n\t\t\t\t\tclass="answerValue date slds-input ').concat(l," ").concat(p,'" \n\t\t\t\t\t').concat(t.requiredOrNot,' \n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'" \n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\ttype="date" \n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t').concat(c?' max="'.concat(c,'" '):""," \n\t\t\t\t\t").concat(d?' min="'.concat(d,'" '):""," \n\t\t\t\t\t").concat(u?' data-min-question-id="'.concat(u,'" '):"","\n\t\t\t\t\t").concat(f?' data-max-question-id="'.concat(f,'" '):"","\n\t\t\t\t\t").concat(m?' data-validation-msg="'.concat(m,'" '):"",'\n\t\t\t\t\tdata-dateerrmsg="').concat(e[s+"Date_Validation_Error__c"],'" \n\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t').concat(sfEnv.isMobileApp?"readonly":""," \n\t\t\t\t\t").concat(r?E(e):"","/>\n\t\t\t\t").concat(g&&!t.requiredOrNot.includes("disabled")?S():"","\n\t\t\t\t").concat(t.isFormula?I(e,n):"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_dateTimeInput:function(t,e,n){var a,i=[!0,"true"].includes(e[s+"DMY_Format__c"]);if(b){if(a=" ",void 0!==n[s+"Date_Time_Answer__c"]){var r=i?m:f;"Invalid date"!=(a=moment.utc(n[s+"Date_Time_Answer__c"]).format(r))&&null!=a&&""!=a||(a=" ")}return'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control ">\n\t\t\t\t<div\n\t\t\t\t\tclass="disabled-control-color slds-textarea"\n\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t>').concat(a,"</div>\n\t\t\t</div>\n\t\t</div>")}var l=!!e[s+"Inherited_Value_Field__c"];try{a=sfEnv.isPreview?e[s+"Default_Value__c"]&&"None"!==e[s+"Default_Value__c"]?v.previewDateFormatter("datetime",e[s+"Default_Value__c"]):"":o(n[s+"Date_Time_Answer__c"])}catch(t){a=moment.utc(n[s+"Date_Time_Answer__c"]).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS)}var c=e[s+"Maximum_Value__c"],d=e[s+"Minimum_Value__c"],u=i?"js-dmy-format":"",p=e[s+"Minimum_Value_Question_Random_Id__c"]||"",_=e[s+"Maximum_Value_Question_Random_Id__c"]||"",h=e[s+"Validation_Message__c"]||"",w=p||_?"js-comparative-validation":"";return'\n\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control inner-addon right-addon '.concat(t.isFormula?"date-formula formula-field":"",'">\n\t\t\t\t<svg aria-hidden="true" class="slds-button__icon input-calendar">\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#monthlyview",'"></use>\n\t\t\t\t</svg>\n\t\t\t\t<input \n\t\t\t\t\tclass="answerValue dateTime slds-input ').concat(u," ").concat(w,'" \n\t\t\t\t\t').concat(t.requiredOrNot,' \n\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'" \n\t\t\t\t\tdata-random-id="').concat(e[s+"RandomId__c"],'"\n\t\t\t\t\ttype="datetime-local" \n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t').concat(c?' max="'.concat(c,'" '):""," \n\t\t\t\t\t").concat(d?' min="'.concat(d,'" '):""," \n\t\t\t\t\t").concat(p?' data-min-question-id="'.concat(p,'" '):"","\n\t\t\t\t\t").concat(_?' data-max-question-id="'.concat(_,'" '):"","\n\t\t\t\t\t").concat(h?' data-validation-msg="'.concat(h,'" '):"",'\n\t\t\t\t\tdata-dateerrmsg="').concat(e[s+"Date_Validation_Error__c"],'" \n\t\t\t\t\tvalue="').concat(a,'"\n\t\t\t\t\t').concat(sfEnv.isMobileApp?"readonly":""," \n\t\t\t\t\t").concat(l?E(e):"","/>\n\t\t\t\t").concat(g&&!t.requiredOrNot.includes("disabled")?S():"","\n\t\t\t\t").concat(t.isFormula?I(e,n):"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_lookupInput:function(t,e,n){var a=n[s+"Lookup_Answer__c"]?n[s+"Lookup_Answer__c"]:y,o=g&&!0===e[s+"Allow_Barcode_Scanning__c"]||1===e[s+"Allow_Barcode_Scanning__c"],i=g&&(!0===e[s+"Allow_OCR_Scanning__c"]||1===e[s+"Allow_OCR_Scanning__c"]);if(b)return'\n\t\t\t<div class="slds-form-element OR-form-element_width">\n\t\t\t\t<div class="slds-form-element__control ">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="disabled-control-color slds-textarea"\n\t\t\t\t\t\t'.concat(t.requiredOrNot,'\n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"\n\t\t\t\t\t>').concat(a,"</div>\n\t\t\t\t</div>\n\t\t\t</div>");var r,l,c,d="",u="",f="";t.requiredOrNot.includes("disabled")&&g?(d="js-readonly-disabled",r='readonly="readonly" disabled ',u=" disabled "):g?(r='readonly="readonly" ',f=" white-bg "):r=t.requiredOrNot.includes("disabled")?'readonly="readonly" disabled ':"",t.requiredOrNot.includes("required")&&(l=" required "),t.requiredOrNot.includes("dbrequired")&&(l+=" dbrequired "),g&&e[s+"Lookup_Filter__c"]?c=JSON.parse(e[s+"Lookup_Filter__c"]).whereClause:e[s+"Lookup_Filter__c"]&&(c=JSON.parse(e[s+"Lookup_Filter__c"].replace(/&quot;/g,'"')).whereClause);var m=g&&t.smartLookupEnabled&&!t.requiredOrNot.includes("disabled"),p=m?"inner-addon right-addon":"",v=g&&t.smartLookupEnabled;return'<div class="slds-form-element OR-form-element_width">\n\t\t\t<div class="slds-form-element__control '.concat(o?"barcode-field":""," ").concat(i?"ocr-field":""," ").concat(p,'">\n\t\t\t\t<input \n\t\t\t\t\tclass="slds-input link-lookup ').concat(d," ").concat(f,'" \n\t\t\t\t\t').concat(r," ").concat(l,'\n\t\t\t\t\tdata-objectname="').concat(e[s+"Link_Lookup_Object__c"],'"\n\t\t\t\t\tdata-lookupfilter="').concat(c,'"\n\t\t\t\t\tdata-linkfield="').concat(e[s+"Link_Field__c"],'"\n\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'"\n\t\t\t\t\tdata-lookup-type="').concat(e[s+"Lookup_Type__c"],'"\n\t\t\t\t\tdata-lookup-question-random-id="').concat(e[s+"Lookup_Question_RandomId__c"],'"\n\t\t\t\t\tdata-lookup-fieldset-fields="').concat(e[s+"Lookup_Fieldset__c"],'"\n\t\t\t\t\tdata-is-smart-lookup="').concat(v,'"\n\t\t\t\t\tdata-smart-fieldset-fields="').concat(t.smartLookupFieldset,'"\n\t\t\t\t\ttype="text" \n\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\tvalue="').concat(a,'"/>\n\t\t\t\t<input class="answerValue" name="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'"  \n\t\t\t\t\t\tdata-questionid="').concat(e.Id,'" \n\t\t\t\t\t\ttype="hidden" \n\t\t\t\t\t\tclass="lookup-id"\n\t\t\t\t\t\tname="').concat(n.Id?n.Id:n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t\tvalue="').concat(n.hasOwnProperty([s+"Lookup_ID__c"])?n[s+"Lookup_ID__c"]:"",'"/>\n\t\t\t\t').concat(o?L(e,n,u,d,!0):"","\n\t\t\t\t").concat(m?S():"",'\n\t\t\t</div>\n\t\t\t<div class="slds-form-element__help slds-hide">This field is required.</div>\n\t\t</div>')},_attachmentPhoto:function(t,e,n){var a="",o="",i="",r=void 0===n[s+"File_Count__c"]||null===n[s+"File_Count__c"]?0:n[s+"File_Count__c"],l=n[s+"Long_Text_Answer__c"]?n[s+"Long_Text_Answer__c"]:"[]",c=null!==n[s+"Linked_Section_Order__c"]&&void 0!==n[s+"Linked_Section_Order__c"]?"__".concat(n[s+"Linked_Section_Order__c"].toString().replace(".","-")):"",u=e[s+"Allow_Camera_Roll_Selection__c"];e[s+"Auto_Name_Photos__c"]&&(i=e[s+"Photo_Name_Type__c"]||"Date");r>0&&(t.requiredOrNot="");if(n.hasOwnProperty(s+"Long_Text_Answer__c")&&null!==n[s+"Long_Text_Answer__c"]){var f=JSON.parse($("<div/>").html(n[s+"Long_Text_Answer__c"]).text());f.forEach(function(t){var e=t.docTitle,n=t.docSize,a=t.versionID;o+=d(e,n,"-1","",a)})}var m='<button class="slds-button slds-button_icon js-question-camera question-camera_toucharea" title="settings" type="button" \n\t\t\t\t\t\t\t\tdata-use-device-gallery="true" \n\t\t\t\t\t\t\t\tdata-answerid="'.concat(n.Id||n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t\t\t\tdata-qlabel="').concat(e[s+"Label__c"],'" \n\t\t\t\t\t\t\t\tdata-photo-name-type="').concat(i,'"\n\t\t\t\t\t\t\t\tdata-use-auto-name="').concat(e[s+"Auto_Name_Photos__c"],'">\n\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#image",'></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span class="slds-assistive-text">Open Camera</span>\n\t\t\t\t\t\t</button>');g?a='\n\t\t\t<div class="slds-form-element js-att-photo '.concat(t.photoRequired?"js-required-photo":"",'">\n\t\t\t\t<div class="slds-grid slds-grid_align-center full-width">\n\t\t\t\t\t<div class="slds-col slds-size_3-of-3 text-align_center-mobile">\n\t\t\t\t\t\t<input type="file"\n\t\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\t\tclass="slds-file-selector__input slds-assistive-text answerValue" \n\t\t\t\t\t\t\tdata-questionid="').concat(e.Id,'"\n\t\t\t\t\t\t\tid="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\taria-describedby="file-selector-id"\n\t\t\t\t\t\t\tname="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'" />\n\n\t\t\t\t\t\t<button class="slds-button slds-button_icon js-question-camera question-camera_toucharea" title="settings" type="button" \n\t\t\t\t\t\t\tdata-photo-name-type="').concat(i,'" \n\t\t\t\t\t\t\tdata-answerid="').concat(n.Id||n[s+"Mobile_ID__c"],'" \n\t\t\t\t\t\t\tdata-qlabel="').concat(e[s+"Label__c"],'" \n\t\t\t\t\t\t\tdata-use-auto-name="').concat(e[s+"Auto_Name_Photos__c"],'">\n\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#photo",'></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span class="slds-assistive-text">Open Camera</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t').concat(u?m:"",'\n\t\t\t\t\t\t<button class="slds-button slds-button_icon js-question-gallery question-gallery_toucharea" title="settings" type="button" \n\t\t\t\t\t\t\t\tdata-photo-name-type="').concat(i,'" \n\t\t\t\t\t\t\t\tdata-answerid="').concat(n.Id||n[s+"Mobile_ID__c"],"\" \n\t\t\t\t\t\t\t\tdata-answer-photos='").concat(l,"' \n\t\t\t\t\t\t\t\tdata-qlabel=\"").concat(e[s+"Label__c"],'" \n\t\t\t\t\t\t\t\tdata-use-auto-name="').concat(e[s+"Auto_Name_Photos__c"],'" \n\t\t\t\t\t\t\t\tdata-allow-device-gallery="').concat(u,'" >\n\t\t\t\t\t\t\t<span class="slds-badge slds-truncate file-count badge_vert-align">').concat(r,'</span>\n\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#overflow",'></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span class="slds-assistive-text">Photo Gallery</span>\n\t\t\t\t\t\t</button>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="slds-form-element__help slds-hide">At least 1 photo is required.</div>\n\t\t\t</div>\n\t\t'):w?(a='\n\t\t\t<div class="file-uploader" id="file-uploader_'.concat(t.randomId,'">\n\t\t\t\t<div class="slds-form-element js-att-photo ').concat(t.photoRequired?"js-required-photo":"",'">\n\t\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t\t<div class="slds-file-selector slds-file-selector_files OR-file-selector_width">'),a+=b?'<div class="slds-text-align_center">\n\t\t\t\t\t\t\t\t\t<button class="slds-button slds-button_icon js-sf1-photo-gallery" title="settings" type="button" data-answerid="'.concat(n.Id,'" data-qlabel="').concat(e[s+"Label__c"],'">\n\t\t\t\t\t\t\t\t\t\t<span class="slds-badge slds-truncate file-count badge_vert-align">').concat(r,'</span>\n\t\t\t\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#overflow",'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#chevronright",'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Photo Gallery</span>\n\t\t\t\t\t\t\t\t\t</button>\t\t\t\n\t\t\t\t\t\t\t\t</div>'):'<div class="slds-file-selector__dropzone OR-dropzone OR-dropzone_border answerValue" data-questionid="'.concat(e.Id,'" data-answerid="').concat(n.Id,'">\n\t\t\t\t\t\t\t\t\t<input type="file" \n\t\t\t\t\t\t\t\t\t\tcapture="camera"\n\t\t\t\t\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\t\t\t\t\tclass="slds-assistive-text" \n\t\t\t\t\t\t\t\t\t\tid="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\t\t\t\taria-describedby="file-selector-id"\n\t\t\t\t\t\t\t\t\t\tname="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'" />\n\t\t\t\t\t\t\t\t\t<label class="slds-button slds-button_icon js-question-camera question-camera_toucharea slds-text-align_center" for="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\t\t\tdata-answerid="').concat(n.Id,'" data-qlabel="').concat(e[s+"Label__c"],'">\n\t\t\t\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#photo",'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<span class="slds-assistive-text">Open Camera</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<span class="slds-badge slds-truncate js-attachment-count ').concat("slds-hide",'"></span>\n\t\t\t\t\t\t\t\t</div>'),a+='</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="slds-form-element__help slds-hide">At least 1 attachment is required.</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="selected-files">\n\t\t\t\t\t'.concat(o,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")):a=b?'\n\t\t<div class="slds-form-element js-att-photo">\n\t\t\t<div class="slds-form-element__control">\n\t\t\t\t<div class="sf-file" data-answerid="'.concat(n.Id,'" >\n\t\t\t\t\t<div role="status" class="slds-spinner slds-spinner_small">\n\t\t\t\t\t\t<span class="slds-assistive-text">Loading</span>\n\t\t\t\t\t\t<div class="slds-spinner__dot-a"></div>\n\t\t\t\t\t\t<div class="slds-spinner__dot-b"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>'):'\n\t\t\t<div class="file-uploader" id="file-uploader_'.concat(t.randomId,'">\n\t\t\t\t<div class="slds-form-element js-att-photo ').concat(t.photoRequired?"js-required-photo":"",'">\n\t\t\t\t\t<div class="slds-form-element__control">\n\t\t\t\t\t\t<div class="slds-file-selector slds-file-selector_files OR-file-selector_width">\n\t\t\t\t\t\t\t<div class="slds-file-selector__dropzone OR-dropzone OR-dropzone_border answerValue" data-questionid="').concat(e.Id,'" data-answerid="').concat(n.Id,'">\n\t\t\t\t\t\t\t\t<input type="file"\n\t\t\t\t\t\t\t\t\t').concat(t.requiredOrNot,'\n\t\t\t\t\t\t\t\t\tclass="slds-file-selector__input slds-assistive-text" \n\t\t\t\t\t\t\t\t\tid="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\t\t\taria-describedby="file-selector-id"\n\t\t\t\t\t\t\t\t\tname="file-upload-input_').concat(t.randomId,"-0").concat(c,'"\n\t\t\t\t\t\t\t\t\tdata-linkedsectionorder="').concat(n[s+"Linked_Section_Order__c"],'" />\n\t\t\t\t\t\t\t\t<label class="slds-file-selector__body cursor-pointer" for="file-upload-input_').concat(t.randomId,"-0").concat(c,'">\n\t\t\t\t\t\t\t\t\t<span class="slds-file-selector__button slds-button slds-button_neutral OR-upload-button_nowrap">\n\t\t\t\t\t\t\t\t\t\t<svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#upload",'></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\tUpload Files\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<span class="slds-badge slds-truncate js-attachment-count ').concat("slds-hide",'"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="slds-form-element__help slds-hide">At least 1 attachment is required.</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="selected-files">\n\t\t\t\t\t').concat(o,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t");return a},_formulaInputBtn:I},s=sfEnv.namespace,o=t("./util").convertDateTimeForHTML5,i=t("./util").convertDateForHTML5,r=t("./util").allCountryStateTexts,l=t("./util").allCountryCodes,c=t("./util").allStateCodes,d=t("./util").buildFilePreviewHTML,u=t("./util").CONSTANTS,f=u.DATE_TIME_FORMAT,m=u.DATE_TIME_FORMAT_DMY,p=t("./form").countryStateCode,v=t("./util"),_=t("./geolocation"),h=sfEnv.countryPickLists,g=sfEnv.isMobileApp,b=sfEnv.isFormDetail,w=sfEnv.isSF1,y="";var k=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"This field requires a valid value",s=a,o="";return 0!==parseInt(t)&&(o=t===e?"exactly ".concat(t," characters"):"minimum ".concat(t," characters")),o&&n?s="".concat(a,", ").concat(o):o?s="This field requires ".concat(o):n&&(s=a),s};function x(t,e,n,a,s,o){return'<div class="disabled-control-color slds-textarea '.concat(t?"is-url-formula":"",'"\n\t\t\t\t').concat(e,'\n\t\t\t\tdata-questionid="').concat(n,'" \n\t\t\t\tdata-linkedsectionorder="').concat(a,'" \n\t\t\t\tname="').concat(n||s,'" \n\t\t\t\tdisabled\n\t\t\t\t>').concat(o,"</div>")}function S(){return'<button class="slds-button slds-button_icon js-clear-btn clear-date-btn" type="button">\n\t\t\t<svg class="slds-button__icon slds-button__icon_medium js-formula-icon" aria-hidden="true">\n\t\t\t\t<use xlink:href='.concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#close",'></use>\n\t\t\t</svg>\n\t\t\t<span class="slds-assistive-text">Clear Button</span>\n\t\t</button>')}function I(t,e){var n=e[s+"Link_Record_Id__c"]?e[s+"Link_Record_Id__c"]:e[s+"Linked_Section_Record_ID__c"];return'<button class="slds-button slds-button_icon '.concat("js-refresh-formula",' slds-button_icon-border input-btn" type="button" data-answerid="').concat(e.Id?e.Id:e[s+"Mobile_ID__c"],'"\n\t\t\t\t\tdata-objectname="').concat(t[s+"Link_Object__c"],'"\n\t\t\t\t\tdata-fieldname="').concat(t[s+"Link_Field__c"],'"\n\t\t\t\t\tdata-fieldtype="').concat(t[s+"Link_Answer_Field__c"],'"\n\t\t\t\t\tdata-recordid="').concat(n,'"\n\t\t\t\t\tdata-mobileid="').concat(e[s+"Mobile_ID__c"],'"\n\t\t\t\t\tdata-sfid="').concat(e.Id,'"\n\t\t\t\t\t').concat(sfEnv.isPreview?"disabled":"",'>\n\t\t\t\t<svg class="slds-button__icon slds-button__icon_large js-formula-icon" aria-hidden="true">\n\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#refresh",'></use>\n\t\t\t\t</svg>\n\t\t\t\t<img loading="lazy" class="js-formula-spinner" style="display:none" src="').concat(sfEnv.SLDS_PATH+"/assets/images/spinners/slds_spinner_brand.gif",'" alt="Saving..." />\n\t\t\t\t<span class="slds-assistive-text">Refresh Formula Field</span>\n\t\t\t</button>')}function C(t){var e=v.withoutDoubleQuote(t.customFormulaMetadata,!0);return'data-formula="'.concat(t.customFormula,'" \n\t\t\tdata-formula-metadata="').concat(e,'" \n\t\t\tdata-treat-blank-as-zero="').concat(t.treatBlankAsZero,'" \n\t\t\tdisabled \n\t\t\tdata-decimal-length="').concat(t.decimalLength,'"')}function E(t){return'data-inhvalrel="'.concat(t[s+"Inherited_Value_Relationship__c"],'" data-inhvalfield="').concat(t[s+"Inherited_Value_Field__c"],'" data-fieldtype="').concat(t[s+"Link_Answer_Field__c"],'"')}function L(t,e,n,a,o){return'<button class="slds-button slds-button_icon '.concat(o?"js-scanner":"js-scanner-output"," ").concat(a,' slds-button_icon-border-filled OR-scan-position input-btn" \n\t\t\t\t\t\t\ttype="button"data-answerid="').concat(e.Id?e.Id:e[s+"Mobile_ID__c"],'" \n\t\t\t\t\t\t\tdata-objectname="').concat(t[s+"Link_Lookup_Object__c"],'"\n\t\t\t\t\t\t\tdata-fieldname="').concat(t[s+"Barcode_Field__c"],'"\n\t\t\t\t\t\t\t').concat(n,'>\n\t\t\t\t<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">\n\t\t\t\t\t<use xlink:href=').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#cases",'></use>\n\t\t\t\t</svg>\n\t\t\t\t<span class="slds-assistive-text">Open Barcode Scanner</span>\n\t\t\t</button>')}e.exports=a},{"./form":8,"./geolocation":11,"./util":16}],15:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,a,s,o,i){try{var r=t[o](i),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(a,s)}var o={buildLinkedSections:function(t,e){var n="";if(!t.hasOwnProperty("allQuestions")||0===t.allQuestions.length)return"";var a=_.findMaxAnswerCount(t.allQuestions);if(0===a){t.isPlaceholder=!sfEnv.isPreview;var s=t.allQuestions[0].question[r+"Link_Object__c"];n+=T(t,s,0,!0,!1)}else{for(var o=0;o<a;o++){var i=o===a-1;n+=F(t,e,o,i,!0)}t.usesLSCard&&!c&&(n+=L(t))}return n},buildSection:F,addLinkedSection:function(t){var e=t.parent(),n=e.data("sectionid"),a=t.closest(".form-section"),s=m.sectionStore[n],o=e.data("placeholdersection"),u=linkedSectionIndexes.hasOwnProperty(n)?linkedSectionIndexes[n]+1:0;s.usesLSCard=a.hasClass("js-uses-ls-card");var f=a.prevAll(".ls-card-header").first();if(i(".form-section:not(.js-section-delete) .control-group").length+s.allQuestions.length>1e3){var v="This section cannot be added because it will surpass the ".concat(1e3," questions per form limit."),y="If you wish to add another Linked Section, please create a new form.";if(sfEnv.isMobileApp)alert("".concat(v," ").concat(y));else{var k={bodyStringArray:[v,y]};window.openCustomModal(k)}return}u=h.makeSectionIndexFromLSOrder(u,s.order,sfEnv.useDecimalLSOrder);var x={};x.Id=m.formID;var S=function(t,e,n){for(var a=[],s=0;s<t.allQuestions.length;s++){var o={},i=t.allQuestions[s].question;o[r+"Form__c"]=e.Id,o[r+"Question__c"]=i.Id,o[r+"Form_Template__c"]=t.templateId,o[r+"Mobile_ID__c"]=h.randomString(21,"Aa#"),o[r+"Linked_Section_Order__c"]=n,o[r+"Link_Object__c"]=i[r+"Link_Object__c"],o[r+"Question__r"]={},o[r+"Question__r"][r+"Type__c"]=i[r+"Type__c"],o=_.defaultAnswer(o,i),20===e.Id.length&&(o[r+"Form_Mobile_Id__c"]=e.Id),a.push(o[r+"Mobile_ID__c"]),answerStore[o[r+"Mobile_ID__c"]]=o}return a}(s,x,u),I=F(s,x,u,!0,!0,S,!0);a.after(I),o?a.remove():a.find("button.add-linked-section").remove();if(s.usesLSCard){var C;if(S&&S.length){var E=f.find(".ls-card-count");C=Number(E.text()),C++,E.text(C)}1!==C||c||f.hasClass("ls-icon")||f.find(".ls-icon").addClass("slds-hide")}g.initDateTimePicker(a),g.showHideForDepPicklists(!1,null),sfEnv.isMobileApp&&window.toggleOfflineElements();l&&sfEnv.isMobileApp||g.enableMsPicklists();var L=i('div[data-sectionid="'.concat(n,'"][data-sectionindex="').concat(u,'"]'));!s.usesLSCard||c||d||L.closest(".form-section").prev(".ls-card").first().trigger("click");h.setLSGroupChangedInput(L);var T=Object.keys(m.depQuestionLogicStore);p.setupDepLogicListeners(T),i(".form-section:not(.is-linked-section) .control-group.parentQuestion").each(function(t,e){p.toggleEachChildField(t,e,L)}),L.find(".control-group.parentQuestion").each(function(t,e){p.toggleEachChildField(t,e,L)}),L.find("select.js-child-dep-pl, fieldset.js-child-dep-pl").each(function(t,e){var n=i(e).data("parent-picklist-id");L.find('select[data-random-id="'.concat(n,'"]')).closest(".slds-select_container").on("change","select.slds-select",function(){g.showHideForDepPicklists(!0,this)}),L.find('fieldset[data-random-id="'.concat(n,'"]')).closest(".controls").on("change",'input[type="radio"]',function(){g.showHideForDepPicklists(!0,this)})}),g.addEsigAnswerListeners(L),g.initComparativeValidation(L),d?L.find(".js-mobile-touch-area").on("click",function(t){window.openIonicPopover(t)}):L.find(".js-show-tooltip").uitooltip({tooltipClass:"slds-popover slds-popover_tooltip ",content:function(){return i(this).attr("title")},show:null,open:function(t,e){if(void 0===t.originalEvent)return!1;var n=i(e.tooltip).attr("id");i("div.ui-tooltip").not("#"+n).remove()},close:function(t,e){e.tooltip.hover(function(){i(this).stop(!0).fadeTo(400,1)},function(){i(this).fadeOut("400",function(){i(this).remove()})})}});b.setupValidationRules(),w.runAllCustomFormulas()},removeLinkedSection:function(t,e){return D.apply(this,arguments)},closeLSCardModal:j,openLSCardModal:function(t){var e=t.next(".js-uses-ls-card");sfEnv.isMobileiOS?(showLoading(""),$ionicScrollDelegateFreezeScroll("form-scroll",!0),$ionicScrollDelegateFreezeScroll("section-scroll",!1),$ionicScrollDelegateResize("section-scroll"),M(e)):sfEnv.isMobileAndroid?(i('ion-content.scroll-content[delegate-handle="form-scroll"]').css({"overflow-y":"hidden"}),t.closest(".slds-card__body").css({"overflow-y":"scroll"}),M(e)):(e.addClass("ls-modal"),R(e),document.body.style.overflow="hidden",l||i(".js-buttons-backdrop").addClass("slds-backdrop_open").removeClass("slds-backdrop_closed"));i("body").addClass("ls-modal-open")},setLSModalSize:R},i=jQuery,r=sfEnv.namespace,l=sfEnv.isSF1,c=sfEnv.isFormDetail,d=sfEnv.isMobileApp,u=window.location.href.split("/"),f=d?"":u[0]+"//"+u[2],m=t("./dataStore"),p=t("./dependency"),v=t("./question.js").createQuestionHTML,_=t("./answer"),h=t("./util"),g=t("./form"),b=t("./validation"),w=t("./customFormulas"),y=t("./customFormulasMSP"),k="",x="",S="",I="",C="",E="";function L(t){var e=t.lsIconColor?' style="background-color:'.concat(t.lsIconColor,'"'):"",n=t.childSectionClass||"";return'<div class="ls-card-add-container slds-m-bottom_x-large slds-p-vertical_xxx-small '.concat(n,'" data-randomid="').concat(t.randomId,'" ').concat(e,">").concat(E,"</div>")}function T(t,e,n,a,s){var o=l&&!c?"sf1-section-body sf1-section-linked-body":"",i=!l||c||t.usesLSCard?"":"slds-hide",r="";n=h.makeSectionIndexFromLSOrder(n,t.order,sfEnv.useDecimalLSOrder),t.sectionObject=e;return r+=A(t,!0,n,a,[],!0,s),r+='<div class="slds-card__body OR-card__body slds-p-horizontal_xx-small '.concat(o,'" data-placeholdersection="true" data-sectionobject="').concat(e,'" data-sectionindex="').concat(n,'"  data-sectionid="').concat(t.sectionId,'">').concat(S,"</div>"),r+='<div class="slds-card__footer OR-card__footer '.concat(i,'">\n\t\t\t\t\t\t\t<div class="slds-m-top_small"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'),!t.usesLSCard||c||s||(r+=L(t)),r}function A(t,e,n,a,s,o){var d,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=l&&!c?"sf1-section":"",v=l&&!c?"slds-hide":"",_=Math.floor(n),g="Linked"===t.sectionType;if(t.hasOwnProperty("allQuestions"))for(var b=0;b<t.allQuestions.length;b++){for(var w=t.allQuestions[b].answers,y=w.length-1;y>=0;y--)if(w[y][r+"Linked_Section_Order__c"]===n&&w[y][r+"LS_Status__c"]){d=w[y][r+"LS_Status__c"];break}if(d)break}else d="new";var S,I,E="",L=" ",T=t.usesLSCard&&!c?"uses-ls-card js-uses-ls-card":" ";t.dependentQuestionValues?("string"==typeof t.dependentQuestionValues&&(S=JSON.parse(i.parseHTML(t.dependentQuestionValues)[0].data),i.isArray(S)||(t.dependentQuestionValues=S)),L=" childSection ",p.buildDepQuestionLogicStore(t.randomId,t.dependentQuestionValues)):t.hasOwnProperty("childSectionClass")&&(L=t.childSectionClass);var A=t.hasOwnProperty("allQuestions")&&!!t.allQuestions[0];t.sectionObject?I=t.sectionObject:A&&t.allQuestions[0].hasOwnProperty("question")&&(I=t.allQuestions[0].question[r+"Link_Object__c"]);var D="This ".concat("Task"===I?"Task":"Linked"," Section requires at least 1 record."),F=O(t);if(t.usesLSCard&&!c){sfEnv.hasLSCards=!0;var M=F?' style="background-color:'.concat(t.lsIconColor,'"'):"",R=F?"slds-p-horizontal_x-large":"",j=A&&t.allQuestions[0].hasOwnProperty("answers")?t.allQuestions[0].answers.length:0,q=o||0!==j?j:1,P="2"===t.numberOfColumns,N=O(t,!o),V=u?"ls-group-changed-input":"";if(E+=o||0===_&&void 0===s?'\n\t\t\t<h3 class="ls-card-header slds-card slds-p-top_small slds-p-bottom_x-small slds-m-top_x-large '.concat(R," ").concat(L," ").concat(V,'" data-randomid="').concat(t.randomId,'" >\n\t\t\t\t').concat(N,"\n\t\t\t\t").concat(t.required?'<span class="required-section">*</span>':"","\n\t\t\t\t").concat(t.sectionName,' (<span class="ls-card-count">').concat(q,"</span>)\n\t\t\t\t").concat(t.required?'<span class="slds-form-element__help slds-hide section-required-msg">'.concat(D,"</span>"):"","\n\t\t\t</h3>"):"",!o){E+='<div class="ls-card slds-p-around_xxx-small" '.concat(M,'><button type="button" class="slds-card slds-p-around_small ').concat(P?"slds-grid":""," ").concat(R,'">'),E+=F,E+=C;var B=1;P&&(E+='<div class="slds-size_1-of-2">'),t.allQuestions.forEach(function(t,e){if(t.question[r+"In_LS_Card__c"]){var a;t.answers.forEach(function(t){t[r+"Linked_Section_Order__c"]===n&&(a=t)}),P&&B!==t.question[r+"Column__c"]&&(B=t.question[r+"Column__c"],E+='</div><div class="slds-size_1-of-2">');var o="Field Link"===t.question[r+"Type__c"]?t.fieldLinkParentType:t.question[r+"Type__c"],i=h.formatLSCardValues(o,null);if(""===i&&t.question[r+"Default_Value__c"])if("Date"===t.question[r+"Type__c"]&&"None"!==t.question[r+"Default_Value__c"]){var l=[!0,"true"].includes(t.question[r+"DMY_Format__c"]),c=t.question[r+"Default_Value__c"].toUpperCase();if(c.includes("TODAY")){c=c.replace("TODAY","");var d=parseInt(c),u=new Date,f=-sfEnv.gmtOffsetInSeconds/60;u=(u=new Date(u.getTime()-60*f*1e3)).setDate(u.getDate()+d),i=l?moment.utc(u).format("DD/MM/YYYY"):moment.utc(u).format("MM/DD/YYYY")}else{var m=new Date(t.question[r+"Default_Value__c"]),p=m.getTimezoneOffset();i=(m=new Date(m.getTime()-60*p*1e3)).toISOString().split("T")[0],i=l?moment.utc(i).format("DD/MM/YYYY"):moment.utc(i).format("MM/DD/YYYY")}}else if("Date/Time"===t.question[r+"Type__c"]&&"None"!==t.question[r+"Default_Value__c"]){var v=[!0,"true"].includes(t.question[r+"DMY_Format__c"]),_=t.question[r+"Default_Value__c"].toUpperCase();if(_.includes("NOW")){_=_.replace("NOW","");var g=parseInt(_),b=new Date,w=-sfEnv.gmtOffsetInSeconds/60;(b=new Date(b.getTime()-60*w*1e3)).setMinutes(b.getMinutes()+g),i=v?moment.utc(b).format("DD/MM/YYYY h:mm a"):moment.utc(b).format("MM/DD/YYYY h:mm a")}else{var y=new Date(t.question[r+"Default_Value__c"]),k=y.getTimezoneOffset();y=new Date(y.getTime()-60*k*1e3),i=v?moment.utc(y).format("DD/MM/YYYY h:mm a"):moment.utc(y).format("MM/DD/YYYY h:mm a")}}else i="";var x=void 0===a?s[e]:a.Id,S="Space"===t.question[r+"Label__c"]?"":t.question[r+"Label__c"]+": ";E+='<p class="slds-grid" data-answer-id="'.concat(x,'"><span class="ls-card-label slds-size_1-of-2 slds-text-align_right slds-p-right_xxx-small slds-truncate" style="color: ').concat(t.question[r+"Color__c"],'">').concat(S,' </span><span class="card-answer slds-size_1-of-2 slds-text-align_left slds-p-left_xxx-small slds-truncate">').concat(i,"</span></p>")}}),P&&(E+="</div>"),E+="</button></div>"}}var H=!Array.isArray(t.allQuestions)||t.allQuestions.some(function(t){return![!0,"true"].includes(t.question["".concat(r,"Always_Hidden__c")])})?"":"always-hidden",Q=h.cleanText(t.sectionName),U=g?"is-linked-section":"";if(E+='<div class="form-section slds-card slds-m-top_large slds-m-bottom_x-large '.concat(H," ").concat(m," ").concat(L," ").concat(U," ").concat(T,' " data-randomid="').concat(t.randomId,'" ').concat(t.required?'data-section-required="true"':"",' data-section-name="').concat(Q,'" data-section-index="').concat(n,'">\n\t\t\t\t\t\t').concat(F,'\n\t\t\t\t\t\t<span class="slds-form-element__help slds-hide section-required-msg">').concat(D,'</span>\n\t\t\t\t\t\t<div id="').concat(t.sectionId,'" class="slds-card__header OR-card__header slds-grid">'),g&&"broken"===d&&!sfEnv.isMobileApp?E+='<div class="linked-section-icon-container" title="This record has been deleted.">\n\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#remove_link",'"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>'):g&&"broken"===d&&sfEnv.isMobileApp&&(E+='<div class="linked-section-icon-container" title="This record has been deleted.">\n\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#remove_link",'"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>')),E+='<div class="slds-media slds-media_center slds-has-flexi-truncate '.concat(v,'">\n\t\t\t\t\t\t\t\t\t<div class="slds-media__body">\n\t\t\t\t\t\t\t\t\t\t<h2 class="slds-text-heading_small title-form-section">\n\t\t\t\t\t\t\t\t\t\t\t').concat(t.required?'<span class="required-section">*</span>':"",'<span class="title-text">').concat(h.purifyHTML(t.sectionName),"</text>\n\t\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>"),!1===e){var $;switch(t.deleteSetting){case"Only for new records":$="inherited"===d?' style="display:none;" ':"";break;case"Never":$=' style="display:none;" ';break;case"Always":default:$=""}E+='<div class="remove-linked-section-container" '.concat($,">\n\t\t\t\t\t\t\t").concat("inherited"===d?x:k,"\n\t\t\t\t\t\t</div>")}return E+="</div>"}function O(t,e){return t.lsIcon?'<span class="ls-icon slds-icon__container slds-icon__container_circle slds-m-around_xx-small '.concat(e?"slds-hide":"",'" style="background: ').concat(t.lsIconColor,'">\n\t\t<svg class="slds-icon slds-icon_small slds-p-around_xx-small">\n\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(f+sfEnv.SLDS_PATH+"/assets/icons/standard-sprite/svg/symbols.svg#"+t.lsIcon,'"></use>\n\t\t</svg>\n\t</span>'):""}function D(){var t;return t=regeneratorRuntime.mark(function t(e,n){var s,o,l,c,d,u,f,v,_,g,b,k,x,I,C,E,L,A,O,D,F,M,R,q,P,N,V,B,H,Q,U,$,z,Y,W,G,J,K,Z,X,tt,et,nt,at,st,ot,it,rt,lt,ct;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.closest(".form-section").find(".slds-card__body"),o=s.data("sectionindex"),l=e.closest(".form-section"),c=l.prev(".ls-card"),d=l.prevAll().not(".js-section-delete, .ls-card"),u=l.prevAll(".ls-card-header").first(),g=s.data("sectionobject"),b=s.data("sectionicon"),k=0,x=1,I=!1,C=!1,E=!1,L=l.find(".ls-icon").css("background-color"),A=l.hasClass("js-uses-ls-card"),O=h.parseLSGroupFromIndex(s.data("sectionindex")),D=i(".form-section").not(".js-section-delete").find(".slds-card__body.OR-card__body"),sfEnv.saveESigAsJPG&&l.find(".js-sig-answer").addClass("js-input-changed"),!(!C||C&&V)||!s.find(".in-form-lookup-parent").length){t.next=37;break}if(t.prev=19,F="You are deleting a Linked Section that is looked up to by an In-Form Lookup. Deleting it will clear out the value in the In-Form Lookup question.",M="Do you wish to continue?",!sfEnv.isMobileApp){t.next=27;break}if(confirm("".concat(F," ").concat(M))){t.next=25;break}throw"Do not continue";case 25:t.next=30;break;case 27:return R={bodyStringArray:[F,M],showCancelButton:!0},t.next=30,window.openCustomModal(R);case 30:s.find(".in-form-lookup-parent").each(function(){var t=i(this),e=t.data("randomid"),n=h.getValueFromAnswerInput(t);i('input.link-lookup[data-lookup-question-random-id="'.concat(e,'"]')).each(function(){var t=i(this);t.val()===n&&t.val("").next().val("")})}),t.next=37;break;case 33:return t.prev=33,t.t0=t.catch(19),sfEnv.isMobileAndroid&&(sfEnv.clickedRemoveLS=!1),t.abrupt("return");case 37:for(q=0;q<D.length;q++)P=h.parseLSGroupFromIndex(i(D[q]).data("sectionindex")),i(D[q]).data("sectionobject")===g&&P===O&&++k;N="object"===a(sfEnv.objRights)&&(!sfEnv.objRights.hasOwnProperty(g)||sfEnv.objRights.hasOwnProperty(g)&&!!sfEnv.objRights[g].deleteRight),V=!1,t.t1=regeneratorRuntime.keys(answerStore);case 41:if((t.t2=t.t1()).done){t.next=86;break}if(B=t.t2.value,H=answerStore[B],Q="broken"===H[r+"LS_Status__c"],H[r+"Link_Object__c"]!==g||H[r+"Linked_Section_Order__c"]!==o){t.next=84;break}if(!H.hasOwnProperty("Id")||null===H.Id){t.next=83;break}if(!Q&&!n&&N){t.next=51;break}H.toDelete=!0,t.next=81;break;case 51:if(!(C||H.Id.length>18)){t.next=57;break}V=H.Id.length>18,C=!0,H.toDelete=!0,t.next=81;break;case 57:if(!N){t.next=79;break}if(t.prev=58,U="Deleting this section will also delete the associated record. Do you wish to continue?",!sfEnv.isMobileApp){t.next=65;break}if(confirm(U)){t.next=63;break}throw"Do not continue";case 63:t.next=68;break;case 65:return $={bodyStringArray:[U],showCancelButton:!0},t.next=68,window.openCustomModal($);case 68:V=H.Id.length>18,C=!0,H.toDelete=!0,t.next=77;break;case 73:return t.prev=73,t.t3=t.catch(58),sfEnv.isMobileAndroid&&(sfEnv.clickedRemoveLS=!1),t.abrupt("return");case 77:t.next=81;break;case 79:return sfEnv.isMobileAndroid&&(sfEnv.clickedRemoveLS=!1),t.abrupt("return");case 81:t.next=84;break;case 83:H.hasOwnProperty(r+"Question__r")&&["Free Text","Image","Space"].includes(H[r+"Question__r"][r+"Type__c"])?delete answerStore[B]:(I=!0,delete answerStore[B]);case 84:t.next=41;break;case 86:if(l.addClass("js-section-delete"),l.find(".answerValue").each(function(){var t=i(this);t.hasClass("table-radio")?t.find('.slds-radio input[type="radio"]').addClass("ignore"):t.hasClass("table-checkbox")?t.find('.slds-checkbox input[type="checkbox"]').addClass("ignore"):t.hasClass("slds-file-selector__dropzone")?t.find("input.slds-file-selector__input").addClass("ignore"):(t.addClass("ignore"),t.prev(".link-lookup").length&&t.prev(".link-lookup").addClass("ignore"))}),l.hide(),c.length&&(c.addClass("js-ls-card-delete"),c.hide(),j(e),z=l.prevAll(".ls-card-header").first(),Y=z.find(".ls-card-count"),W=Number(Y.text()),W--,Y.text(W),0===W&&z.find(".ls-icon").removeClass("slds-hide")),!d.length){t.next=113;break}G=0;case 92:if(!(G<d.length)){t.next=113;break}if(J=d[G],K=!i(J).hasClass("js-section-delete"),Z=i(J).hasClass("form-section"),X=i(J).hasClass("formName"),tt=i(J).find(".slds-card__body").data("sectionobject"),et=h.parseLSGroupFromIndex(i(J).find(".slds-card__body").data("sectionindex")),!K||!Z||g!==tt||et!==O||void 0!==f){t.next=104;break}f=J,++x,t.next=110;break;case 104:if(!K||!Z||g!==tt||et!==O){t.next=108;break}++x,t.next=110;break;case 108:if(!X){t.next=110;break}return t.abrupt("break",113);case 110:G++,t.next=92;break;case 113:if(v=i(f).find(".slds-card__body"),_=h.parseLSGroupFromIndex(v.data("sectionindex")),k===x)if(v.data("sectionobject")===g&&_===O)v.append(S);else{for(ot in A&&u.remove(),nt=l.data("randomid"),at=l.data("section-required"),st=" ",m.depQuestionLogicStore)void 0!==m.depQuestionLogicStore[ot][nt]&&(st=" childSection ");it={sectionName:l.find(".title-form-section .title-text").text().trim(),sectionId:s.data("sectionid"),randomId:nt,childSectionClass:st,required:!!at,usesLSCard:!!c.length,lsIcon:b,lsIconColor:L,isPlaceholder:!0},rt=s.data("sectionobject"),lt=i(".form-section").not(".js-section-delete").find('[data-sectionobject="'.concat(rt,'"]')).length||0,!0,ct=T(it,rt,lt,!0,!0),l.after(ct),E=!0}!0===I&&l.remove(),w.runAllCustomFormulas(),y.runAllCustomFormulasMSP(),E&&i(".parentQuestion").each(function(){p.toggleChildFields(i(this).find(".formInput"),i(this).data("randomid"),"fast")}),sfEnv.isMobileAndroid&&(sfEnv.clickedRemoveLS=!1),1!==k&&h.setLSGroupChangedInput(e),i("#formContent").addClass("changed-input"),i("body").removeClass("ls-modal-open");case 124:case"end":return t.stop()}},t,null,[[19,33],[58,73]])}),(D=function(){var e=this,n=arguments;return new Promise(function(a,o){var i=t.apply(e,n);function r(t){s(i,a,o,r,l,"next",t)}function l(t){s(i,a,o,r,l,"throw",t)}r(void 0)})}).apply(this,arguments)}function F(t,e,n,a,s,o,u){var g=l&&!c?"sf1-section-body":"",b=l&&s?"sf1-section-linked-body":"",w=!l||c||t.usesLSCard?"":"slds-hide",y=t.allQuestions[0].question[r+"Link_Object__c"],k="2"===t.numberOfColumns?'data-column-index="1"':"",x="2"===t.numberOfColumns?'data-column-index="2"':"",C=null,E="",L="";if(t.usesLSCard&&sfEnv.isMobileiOS&&(E+='<ion-scroll delegate-handle="section-scroll">'),s){n=h.makeSectionIndexFromLSOrder(n,t.order,sfEnv.useDecimalLSOrder);var T=t.allQuestions[0].answers,O=Math.floor(n);T.length>0&&void 0!==T[O]&&(C=T[O][r+"Linked_Section_Record_ID__c"]),E+='<div class="slds-card__body OR-card__body slds-p-horizontal_xx-small '.concat(g," ").concat(b,'" \n\t\t\t\t\t\tdata-sectionobject="').concat(y,'" data-linkedsectionrecordid="').concat(C,'" \n\t\t\t\t\t\tdata-sectionindex="').concat(n,'" data-sectionicon="').concat(t.lsIcon,'" \n\t\t\t\t\t\tdata-sectionid="').concat(t.sectionId,'">\n\t\t\t\t\t<div class="answerColumn" ').concat(k,">")}else E+='<div class="slds-card__body OR-card__body slds-p-horizontal_xx-small '.concat(g,'"><div class="answerColumn" ').concat(k,">");var D='<div class="answerColumn" '.concat(x,">"),F=D,M="";if(s){linkedSectionIndexes.hasOwnProperty(t.sectionId)?linkedSectionIndexes[t.sectionId]++:linkedSectionIndexes[t.sectionId]=0,L='data-ctrlgrplsindex="'.concat(n,'"');M+=A(t,!1,n,a,o,!1,u)}else M+=A(t,!0,n);return i.each(t.allQuestions,function(t,e){try{!function(t){var e,a,o,l,c,u={isFLAsRadioButton:!1},g=t.question,b="",w="",y="",k="";m.questionStore[g.Id]=t,a=s?_.findAnswerByIndex(g.Id,n):_.findAnswers(g.Id)[0];var x=" ",S=null;if(g[r+"Show_Tooltip__c"]&&d){var I=h.convertToMobileLink(g[r+"Tooltip_Label__c"].replace(new RegExp('"',"g"),"'"));S='data-title="'.concat(I,'"')}else g[r+"Show_Tooltip__c"]&&(S='title="'.concat(g[r+"Tooltip_Label__c"],'"'));var C='<div class="tooltip-container '.concat(S?"":"slds-hide"," ").concat(d?"mobile-touch-area js-mobile-touch-area":"",'">\n\t\t\t\t\t\t\t\t<svg aria-hidden="true" class="slds-button__icon js-show-tooltip OR-tooltip" ').concat(S||"",'>\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#info",'"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>');u.dependentQuestionVals="",u.questionId=g.Id,u.picklistValues=t.questionValues,g.hasOwnProperty(r+"Dependent_Question_Values__c")&&("string"==typeof g[r+"Dependent_Question_Values__c"]&&(e=JSON.parse(i.parseHTML(g[r+"Dependent_Question_Values__c"])[0].data),i.isArray(e)||(g[r+"Dependent_Question_Values__c"]=e)),x=" childQuestion ",u.dependentQuestionVals=g[r+"RandomId__c"],p.buildDepQuestionLogicStore(u.dependentQuestionVals,g[r+"Dependent_Question_Values__c"]));g.hasOwnProperty(r+"RandomId__c")&&(u.randomId=g[r+"RandomId__c"]);if("Free Text"!==g[r+"Type__c"]&&"Image"!==g[r+"Type__c"])switch(g[r+"Indentation__c"]){case"Level One":y="indentOnce";break;case"Level Two":y="indentTwice";break;case"Level Three":y="indentThrice";break;default:y=""}else switch(g[r+"Alignment__c"]){case"Center":k="slds-text-align_center";break;case"Left":k="slds-text-align_left";break;case"Right":k="slds-text-align_right slds-p-right_small";break;default:k="slds-text-align_center"}u.qType=g[r+"Type__c"],o=g[r+"Bold__c"]?"bold":"normal",l=g[r+"Color__c"],c='style="color:'+l+";font-weight:"+o+';"';var E=h.cleanText(g[r+"Label__c"],u.qType),T=' data-question-text="'.concat(E,'" ');if("Space"===u.qType)b+='<div class="control-group text-image-space" data-questionid="'.concat(g.Id,'" data-linkedsectionorder="').concat(a[r+"Linked_Section_Order__c"],'" ').concat(T,'><span class="control-label"></span><div class="controls"><div class="blank_space">&nbsp;</div>');else if("Free Text"===u.qType){var A=d?g[r+"Label__c"]:i("<div/>").html(g[r+"Label__c"]).text(),O=A.includes("<p")&&A.includes("</p>")||A.includes("<ul")&&A.includes("</ul>")||A.includes("<ol")&&A.includes("</ol>");O?(b+='<div class="control-group text-image-space '.concat(x,'" ').concat(T,' data-dependentquestionvals="').concat(u.dependentQuestionVals,'" data-randomid="').concat(g[r+"RandomId__c"],'" data-questionid="').concat(g.Id,'" data-linkedsectionorder="').concat(a[r+"Linked_Section_Order__c"],'" ').concat(L,">"),b+='<span class="free-text-container"><span class="ql-editor">',A=h.trimTrailingStrings(A,["<p><br></p>","<p></p>","<p> </p>"]),b+=d?h.convertToMobileLink(A):A,b+="</span></span>"):(b+='<div class="control-group text-image-space js-plain-free-text '.concat(k," ").concat(x,'" ').concat(c," ").concat(T,' data-dependentquestionvals="').concat(u.dependentQuestionVals,'" data-randomid="').concat(g[r+"RandomId__c"],'" data-questionid="').concat(g.Id,'" data-linkedsectionorder="').concat(a[r+"Linked_Section_Order__c"],'" ').concat(L,">"),g[r+"Label__c"]=A.replace(/\n/g,"<br/>"),b+='<span class="js-plain-text">'.concat(g[r+"Label__c"],"</span>")),b+="".concat(C,'\n\t\t\t\t\t\t\t<div class="controls">')}else if("Image"===u.qType){var D=t.question[r+"Image_Version_ID__c"];if(d){var F;window.templatePhotos&&D&&(F=window.templatePhotos.find(function(t){return t.Id===D}));var M=F?'<img loading="lazy" class="js-template-image" style="display:inline;" src="data:image/jpeg;base64,'.concat(F.data,'"/>'):"";b+='\t<div class="control-group text-image-space '.concat(k," ").concat(x,'" ').concat(c,' data-dependentquestionvals="').concat(u.dependentQuestionVals,'" data-randomid="').concat(g[r+"RandomId__c"],'" data-questionid="').concat(g.Id,'" data-linkedsectionorder="').concat(a[r+"Linked_Section_Order__c"],'" ').concat(L,">\n\t\t\t\t\t\t\t\t").concat(C,"\n\t\t\t\t\t\t\t\t").concat(M,'\n\t\t\t\t\t\t\t<div class="controls js-template-image-controls">')}else{var j="";sfEnv.isPublicSite?j=sfEnv.publicSiteBaseUrl:sfEnv.isCommunityUser&&(j="/"+sfEnv.pathStart),j+="/servlet/servlet.ImageServer?id=".concat(D,"&oid=").concat(sfEnv.orgId),b+='<div class="control-group text-image-space '.concat(k," ").concat(x,'" ').concat(c," ").concat(T,' data-dependentquestionvals="').concat(u.dependentQuestionVals,'" data-randomid="').concat(g[r+"RandomId__c"],'" data-questionid="').concat(g.Id,'" data-linkedsectionorder="').concat(a[r+"Linked_Section_Order__c"],'" ').concat(L,'>\n\t\t\t\t\t\t\t\t\t\t<img loading="lazy" class="js-template-image" style="display:inline;" src="').concat(j,'" data-img-id="').concat(D,'"/>\n\t\t\t\t\t\t\t\t\t\t').concat(C,'\n\t\t\t\t\t\t\t\t\t<div class="controls js-template-image-controls">')}}else{"Radio Button List"!==u.qType&&"Checkbox List"!==u.qType&&"Radio Button List"!==g[r+"FL_Display_As__c"]||(w="controls-table");var P=g["".concat(r,"Compact_Layout__c")]?"compact-layout":"",N=[!0,"true"].includes(g["".concat(r,"Always_Hidden__c")])?"always-hidden":"";b+='<div class="control-group '.concat(y," ").concat(x," ").concat(N,'" ').concat(T,' data-dependentquestionvals="').concat(u.dependentQuestionVals,'" data-randomid="').concat(g["".concat(r,"RandomId__c")],'" ').concat(L,'>\n\t\t\t\t\t\t\t\t\t<span class="control-label"  ').concat(c,'>\n\t\t\t\t\t\t\t\t\t\t<span class="label-width">\n\t\t\t\t\t\t\t\t\t\t').concat(g["".concat(r,"Required__c")]?"* ":"").concat(h.purifyHTML(g["".concat(r,"Label__c")]),"\n\t\t\t\t\t\t\t\t\t\t").concat(C,'\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div class="controls ').concat(w," ").concat(P,'">')}u.regExClass="",u.fieldLengthMin=g[r+"Field_Length_Min__c"]?g[r+"Field_Length_Min__c"]:0,g[r+"Field_Length__c"]?(u.fieldLength=g[r+"Field_Length__c"],g.hasOwnProperty(r+"Decimal_Length__c")&&null!==g[r+"Decimal_Length__c"]&&(u.decimalLength=g[r+"Decimal_Length__c"],q(u,g))):"Long Text"===u.qType||"TEXTAREA"===u.qType?u.fieldLength=g[r+"Field_Length__c"]?g[r+"Field_Length__c"]:32e3:u.fieldLength=255;u.requiredOrNot=g.hasOwnProperty(r+"Required__c")&&g[r+"Required__c"]?" required ":"",u.requiredOrNot+=g.hasOwnProperty(r+"Read_Only__c")&&g[r+"Read_Only__c"]?" disabled ":"",u.photoRequired=!(!g.hasOwnProperty(r+"Required__c")||!g[r+"Required__c"]||"Attachment/Photo"!==g[r+"Type__c"]),u.isFormula=t.isFormula,u.customFormula=g[r+"Custom_Formula__c"],u.customFormulaMetadata=g[r+"Custom_Formula_Metadata__c"]?g[r+"Custom_Formula_Metadata__c"]:"",u.treatBlankAsZero=!!g[r+"Custom_Formula_Treat_Blank_As_Zero__c"],t.smartLookupEnabled&&t.smartLookupFieldset?(u.smartLookupEnabled=!0,u.smartLookupFieldset=JSON.stringify(t.smartLookupFieldset).replace(/\"/g,"&quot;")):(u.smartLookupEnabled=!1,u.smartLookupFieldset=[]);"Field Link"==u.qType&&(u.qType="Long_Text_Answer__c"===g[r+"Link_Answer_Field__c"]||"Geolocation_Answer__c"===g[r+"Link_Answer_Field__c"]?t.fieldLinkParentType:g[r+"Link_Answer_Field__c"],u.fieldLength=g[r+"Field_Length__c"],g.hasOwnProperty(r+"Decimal_Length__c")&&null!==g[r+"Decimal_Length__c"]&&(u.decimalLength=g[r+"Decimal_Length__c"],q(u,g)),!0===t.dbRequired&&(u.requiredOrNot+=" dbrequired "),!0===t.readonly&&(u.requiredOrNot+=" disabled "),u.isFLAsRadioButton="PICKLIST"===u.qType&&"Radio Button List"===g[r+"FL_Display_As__c"]);b+=v(u,g,a),R(b+='</div>\n\t\t\t\t\t\t\t\t<br class="clear-float"></div>',g[r+"Column__c"])}(e)}catch(t){var a=e.hasOwnProperty("question")&&e.question[r+"Column__c"]||1;R('\n\t\t\t\t<div class="slds-box slds-box_small slds-theme_error slds-theme_alert-texture slds-m-right_small slds-m-bottom_large">\n\t\t\t\t\t<div>This question failed to load, please notify your System Administrator.</div>\n\t\t\t\t\t<div class="'.concat(e.question.Id||e.question[r+"Label__c"]?"":"slds-hide",'">\n\t\t\t\t\t\t<span class="').concat(e.question.Id?"":"slds-hide",'">Question ID: ').concat(e.question.Id,'</span>\n\t\t\t\t\t\t<span class="').concat(e.question.Id&&e.question[r+"Label__c"]?"":"slds-hide",'">,</span>\n\t\t\t\t\t\t<span class="').concat(e.question[r+"Label__c"]?"":"slds-hide",'">Question Label: ').concat(e.question[r+"Label__c"],"</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>Error: ").concat(t,"</div>\n\t\t\t\t</div>\n\t\t\t</div>"),a)}}),F===D&&"2"!==t.numberOfColumns&&(E=E.replace('class="answerColumn"',"")),M+=E+"</div>",(F!==D||"2"===t.numberOfColumns&&F===D)&&(M+=F+"</div>"),!0===a&&(M+=S),M+="</div>",t.usesLSCard&&sfEnv.isMobileiOS&&(M+="</ion-scroll>"),M+='<div class="slds-card__footer OR-card__footer '.concat(w,'">'),M+=t.usesLSCard&&!c?I:'<div class="slds-m-top_small"></div>',M+="</div>\n\t\t\t\t\t</div>";function R(t,e){2==e?F+=t:E+=t}}function M(t){setTimeout(function(t){t.addClass("ls-modal"),R(t),hideLoading()},333,t)}function R(t){var e,n,a;if(void 0===t&&(t=i(".js-uses-ls-card.ls-modal")),d){var s=window.$ionicScrollDelegateGetScrollPosition(),o=t.closest("ion-view").height()-50,r=i(".form-nav .tabs:visible").outerHeight()||0,c=t.find(".slds-card__header").outerHeight()+t.find(".slds-card__footer").outerHeight()+4,u=sfEnv.isMobileAndroid?6:0;e="".concat(s.top,"px"),n="".concat(o-r+u,"px"),a="".concat(o-r-c,"px")}else if(l)e="0px",n="100%";else{var f=sfEnv.isPreview?62:104,m=sfEnv.isPreview?i("#previewStatus").height():window.innerHeight;e="".concat(document.documentElement.scrollTop+f,"px"),n="".concat(m-f,"px")}sfEnv.isMobileiOS?(t.css({height:n,top:e,"max-height":n}),t.find("ion-scroll").css({height:a,"max-height":a})):t.css({height:n,top:e,"max-height":n}),d&&window.setLSHeight()}function j(t){void 0===t&&(t=i(".form-section.js-uses-ls-card.ls-modal .js-close-linked-section")),sfEnv.isMobileiOS?(t.find(".form-section").css({height:"auto",top:"auto","max-height":"auto"}),t.find("ion-scroll").css({height:"auto","max-height":"auto"}),$ionicScrollDelegateScrollTop("section-scroll"),$ionicScrollDelegateFreezeScroll("form-scroll",!1),$ionicScrollDelegateFreezeScroll("section-scroll",!0)):d?(i('ion-content.scroll-content[delegate-handle="form-scroll"]').css({"overflow-y":"scroll"}),t.closest(".slds-card__body").css({"overflow-y":"hidden"})):(document.body.style.overflow="scroll",l||i(".js-buttons-backdrop").addClass("slds-backdrop_closed").removeClass("slds-backdrop_open")),t.closest(".js-uses-ls-card").removeClass("ls-modal"),i("body").removeClass("ls-modal-open")}function q(t,e){var n=t.fieldLength,a=e[r+"Decimal_Length__c"];t.regExClass="".concat(n,"-").concat(a),m.regExRules.push([n,a]),t.fieldLength=0===n?1+a+1:0===a?n:n+a+1}d?(k='\n\t<div class="js-remove-linked-section remove-linked-section slds-p-top_xx-small">\n\t\t<i class="icon ion-ios-trash slds-button__icon slds-icon_large"></i>\n\t</div>',x='\n\t<div class="js-inherited-remove-linked-section remove-linked-section">\n\t\t<i class="icon ion-ios-trash slds-button__icon slds-icon_large"></i>\n\t</div>',S='\n\t<button type="button" class="slds-button slds-button_neutral add-linked-section slds-m-bottom_small">Add\n\t\t<i class="icon ion-plus-round"></i>\n\t</button>',I='\n\t<button type="button" class="slds-button slds-button_neutral js-close-linked-section close-linked-section slds-m-bottom_small">\n\t\tDone\n\t</button>',C='\n\t<svg aria-hidden="true" class="slds-button__icon edit-linked-section">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#expand_alt",'"></use>\n\t</svg>'),E='\n\t<button type="button" class="slds-button slds-button_neutral add-linked-section-card js-add-linked-section-card">Add\n\t\t<i class="icon ion-edit"></i>\n\t</button>'):c||(k='\n\t<svg aria-hidden="true" class="slds-button__icon js-remove-linked-section remove-linked-section">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#delete",'"></use>\n\t</svg>'),x='\n\t<svg aria-hidden="true" class="slds-button__icon js-inherited-remove-linked-section remove-linked-section">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#delete",'"></use>\n\t</svg>'),S='\n\t<button type="button" class="slds-button slds-button_neutral add-linked-section slds-m-bottom_small">Add\n\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#add",'"></use>\n\t\t</svg>\n\t</button>'),I='\n\t\t<button type="button" class="slds-button slds-button_brand js-close-linked-section close-linked-section slds-m-bottom_small">Done\n\t\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#contract_alt",'"></use>\n\t\t\t</svg>\n\t\t</button>'),C='\n\t\t<svg aria-hidden="true" class="slds-button__icon edit-linked-section">\n\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#expand_alt",'"></use>\n\t\t</svg>'),E='\n\t<button type="button" class="slds-button slds-button_neutral add-linked-section-card js-add-linked-section-card">Add\n\t\t<svg aria-hidden="true" class="slds-button__icon">\n\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'.concat(f+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#add",'"></use>\n\t\t</svg>\n\t</button>')),window.closeLSCardModal=j,e.exports=o},{"./answer":2,"./customFormulas":4,"./customFormulasMSP":5,"./dataStore":6,"./dependency":7,"./form":8,"./question.js":14,"./util":16,"./validation":17}],16:[function(t,e,n){"use strict";function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,s=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var c=function(t){var e=[],n=[],a=[],s=[];t.forEach(function(t){e.push(t+"Country"),n.push(t+"State"),a.push(t+"CountryCode"),s.push(t+"StateCode")});var o=[].concat(n,e),i=[].concat(s,a);return{allCountryStateTexts:o,allCountryStateCodes:i,allCountryCodes:a,allStateCodes:s}}(["Billing","Shipping","Mailing","Other","","QuoteTo","Additional"]),d=c.allCountryStateTexts,u=c.allCountryStateCodes,f=c.allCountryCodes,m=c.allStateCodes;sfEnv&&sfEnv.isMobileApp&&(sfEnv.stateCountryFields={allTexts:d,allCodes:u});var p={TYPE_AHEAD:{NO_RESULTS:"No results found.",CONTINUE_TYPING:"Please Continue Typing",ERROR:"An error has occurred, unable to find any results."},DATE_TIME_FORMAT:"MM/DD/YYYY h:mm a",DATE_TIME_FORMAT_DMY:"DD/MM/YYYY h:mm a",DATE_FORMAT:"MM/DD/YYYY",DATE_FORMAT_DMY:"DD/MM/YYYY",THOUSANDS_SEPARATOR:",",LOOKUP_TYPE:{SEARCH:"Search",IN_FORM:"In Form",BOTH:"Both"},WRAP_TYPE:{VALUE:"VALUE",LABEL:"LABEL"},WEB_SUBMIT:{FORM_DETAIL:"Form Detail",RELATED_RECORD:"Related Record",VF:"Visualforce Page",URL:"URL",FLOW:"Flow"},MOBILE_SUBMIT:{FORMS_LIST:"Forms List",SF_MOBILE:"Salesforce Mobile",FSL:"Field Service Mobile",URL:"URL"},CLOSE:{SAVE_CLOSE:"SAVE_CLOSE",SUBMIT:"SUBMIT"},ESIG:{WIDTH:575,HEIGHT:144,FORMAT:"jpeg"},GEOLOCATION:{OBTAINING:"Obtaining Geolocation",ERROR:"Geolocation Error",PERMISSION_DENIED:"Please enable location services.",POSITION_UNAVAILABLE:"Location information is unavailable.",TIMEOUT:"The request to get user location timed out. Please verify this device has location services is enabled.",UNKNOWN_ERROR:"An unknown error occurred."}},v=window.location.href.split("/"),_=sfEnv.isMobileApp?"":v[0]+"//"+v[2],h={contextualSpinnerText:function(t){var e=y[t];$("#savingStatus").find(".saveText").html(e)},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getUTCDate(),a=t.getUTCMonth()+1,s=t.getUTCFullYear();return k(e,n,a,s)},formatDateOnSelection:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return k(e,n,a,s)},formatDateAnswerValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===t||""===t)return" ";var n=e?p.DATE_FORMAT_DMY:p.DATE_FORMAT,a=moment(x(t)).format(n);return"Invalid date"==a||"Invalid Date"==a||null===a||""===a?" ":a},formatDateTimeOnSelection:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getHours(),a=t.getMinutes(),s=n>=12?"pm":"am";n=(n%=12)?n:12,a=a<10?"0".concat(a):a;var o="".concat(n,":").concat(a," ").concat(s),i=t.getDate(),r=t.getMonth()+1,l=t.getFullYear();return k(e,i,r,l,o)},formatDateTimeAnswerValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===t||""===t)return" ";var n=e?p.DATE_TIME_FORMAT_DMY:p.DATE_TIME_FORMAT;return moment(t).format(n)},randomString:function(t,e){var n="";e.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz");e.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ");e.indexOf("#")>-1&&(n+="0123456789");e.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var a="",s=t;s>0;--s)a+=n[Math.round(Math.random()*(n.length-1))];return a},convertDateFromHTML5:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return"";var n=e?p.DATE_FORMAT_DMY:p.DATE_FORMAT,a=moment(t,n).toDate(),s=moment.utc([a.getFullYear(),a.getMonth(),a.getDate()]);return g?s.toJSON().slice(0,10):s.valueOf()},convertDateTimeFromHTML5:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return"";var n=e?p.DATE_TIME_FORMAT_DMY:p.DATE_TIME_FORMAT,a=moment(t,n).toDate(),s=moment.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()]);return g?s.toJSON():s.valueOf()},convertDateForHTML5:x,convertDateTimeForHTML5:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&sfEnv.isMobileApp&&!t.includes("Z")&&sfEnv.userTimezone?t=moment.utc(t).tz(sfEnv.userTimezone).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS):t&&(t=moment.utc(t).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS));return t},allCountryStateTexts:d,allCountryStateCodes:u,allCountryCodes:f,allStateCodes:m,returnToDetailPage:function(){if(!sfEnv.isSF1&&!sfEnv.isConsole&&""!==sfEnv.retURL)return void(w?sforce.one.navigateToURL(sfEnv.retURL):sfEnv.retURL.indexOf("http")>-1?window.location.href=sfEnv.retURL:sfEnv.isCommunityUser?window.location.href="".concat(sfEnv.originPath,"/").concat(sfEnv.pathStart?sfEnv.pathStart+"/":"").concat(sfEnv.retURL):window.location.href="/"===sfEnv.retURL[0]?"".concat(sfEnv.retURL):"/".concat(sfEnv.retURL));var t;t=sfEnv.isLWC&&sfEnv.isCommunityUser&&sfEnv.pathStart?"/".concat(sfEnv.namespace,"FormDetail?id=").concat(sfEnv.thisForm.Id,"&isLWC=true&lwcComPath=").concat(sfEnv.pathStart):sfEnv.isLWC?"/apex/".concat(sfEnv.namespace,"FormDetail?id=").concat(sfEnv.thisForm.Id,"&isLWC=true"):"/".concat(sfEnv.thisForm.Id);var e=window.location.href.indexOf("&closeaftersave=true")>-1;sfEnv.isSF1&&sfEnv.sf1RedirectId?15!==sfEnv.sf1RedirectId.length&&18!==sfEnv.sf1RedirectId.length||-1!==sfEnv.sf1RedirectId.indexOf("/")?(sfEnv.sf1RedirectId="apex"===sfEnv.sf1RedirectId.substr(0,4)?"/"+sfEnv.sf1RedirectId:sfEnv.sf1RedirectId,sforce.one.navigateToURL(sfEnv.sf1RedirectId)):sforce.one.navigateToSObject(sfEnv.sf1RedirectId):sfEnv.isConsole?S(t,"".concat(sfEnv.thisForm[sfEnv.namespace+"Form_Template__r"].Name," - ").concat(sfEnv.thisForm.Name)):w?sforce.one.navigateToSObject(sfEnv.thisForm.Id):e?window.close():sfEnv.pathStart.indexOf("apex")>-1?window.location.href=t+"".concat(sfEnv.isLWC?"&isLWC=true":""):window.location.href="".concat(sfEnv.originPath,"/").concat(sfEnv.pathStart?sfEnv.pathStart:"").concat(t)},sforceBack:function(t){t&&"boolean"==typeof t||(t=!1);sforce.one.back(t)},buildFilePreviewHTML:function(t,e,n,a,s,o){var i=s?"":"-inverse",r=a||"",l=s||"",c=o||"";return'\n        <div class="slds-grid slds-m-top_small file-preview '.concat(s||b?"":"file-preview_unsaved",' js-file-preview" data-input-index="').concat(n,'" data-externalid="').concat(r,'" data-inputname="').concat(c,'">\n            <div class="slds-col slds-size_2-of-12 flex-center">\n                <svg class="slds-icon slds-icon_small" aria-hidden="true">\n                  <use xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/doctype-sprite/svg/symbols.svg#attachment",'"></use>\n                </svg>\n            </div>\n            <div class="slds-col slds-size_6-of-12 file-name-align">\n                <p class="slds-truncate slds-text-align_left js-file-name">').concat(t,'</p>\n            </div>\n            <div class="slds-col slds-size_2-of-12 flex-center">\n                <span class="js-file-size">').concat(e,'</span>\n            </div>\n            <div class="slds-col slds-size_2-of-12 flex-center">\n                <button class="slds-button slds-button__icon').concat(i,' js-remove-file" data-sfid="').concat(l,'" type="button">\n                    <svg aria-hidden="true" class="slds-button__icon">\n                        <use xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#close",'"></use>\n                    </svg>\n                    <span class="slds-assistive-text">Remove File</span>\n                </button>\n            </div>\n        </div>\n    ')},getFileSize:function(t){var e;if("number"!=typeof t){var n=1;t.indexOf("KB")>-1?n=1024:t.indexOf("MB")>-1?n=1048576:t.indexOf("GB")>-1&&(n=1073741824),t=parseInt(t)*n}e=t<1024?"< 1 KB":t<1048576?"".concat((t/1024).toFixed(0)," KB"):t<1073741824?"".concat((t/1048576).toFixed(1)," MB"):"".concat((t/1073741824).toFixed(1)," GB");return e},updateBadgeCount:function(t,e){var n=(t.html()?parseInt(t.html(),10):0)+e;0===n?t.addClass("slds-hide").html(""):t.html("".concat(n," Unsaved Attachment").concat(n>1?"s":"")).removeClass("slds-hide")},updateMobileAvailableActions:function(){!0===sfEnv.thisForm[sfEnv.namespace+"Mobile_Available__c"]?($("#enableMobileBtn").hide(),$("#disableMobileBtn").show()):($("#enableMobileBtn").show(),$("#disableMobileBtn").hide())},handleConsoleNav:S,handleConsoleClose:function(t){function e(e){t&&sforce.console.refreshNavigationTab(),sforce.console.closeTab(e.id)}sforce.console.getEnclosingPrimaryTabId(e)},openDeepLink:function(t){var e="https://yourekaapp.app.link/LseujdfKMK?formID=".concat(t);sfEnv.isSF1?sforce.one.navigateToURL(e):window.location.href=e},getInstanceUrl:function(t){var e=window.location.href,n=e.indexOf("/apex"),a="/"+sfEnv.namespace+t,s=n>-1?e.indexOf(a)-5:e.indexOf(a);return e.substring(0,s)},precisionRound:function(t,e){if(t){var n=Math.pow(10,e);return Math.round(t*n)/n}return t},withCommaSeparators:function(t){if(t){for(var e=t.toString().split("."),n=e.length>1?"."+e[1]:null,a=e[0],s=t<0?2:1,o=Math.floor((a.length-s)/3),i=1;i<=o;i++)s=a.length-(3*i+i-1),a=a.slice(0,s)+","+a.slice(s);return n?a+n:a}return t},withoutCommaSeparators:function(t){t&&"string"==typeof t&&(t=t.replace(/,/g,""));return t},withoutDoubleQuote:function(t,e){t&&(t=e?t.replace(/"/g,"$dquot"):t.replace(/\$dquot/g,'"'));return t},withoutQuote:function(t,e){t&&(t=e?t.replace(/'/g,"&quot;"):t.replace(/\&quot;/g,"'"));return t},parseLSGroupFromIndex:function(t){var e=null;if(void 0!==t){var n=t.toString();e=n.indexOf(".")>-1?n.split(".")[1]:null}return null!==e?Number(e):e},makeSectionIndexFromLSOrder:function(t,e,n){return n&&e&&Number.isInteger(t)?t+e/1e4:t},cleanText:function(t,e){return"string"!=typeof t?"":"Free Text"===e?"Rich-Free-Text":I(t,20)},replaceReserveChars:I,isNotIE:function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(e)&&(t=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var a=navigator.userAgent,s=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=s.exec(a)&&(t=parseFloat(RegExp.$1))}return-1===t},formatLSCardValues:function(t,e){O(e,!0)&&(t="URL");switch(t){case"E-Signature":return e?"SIGNED":"UNSIGNED";case"BOOLEAN":return e?"CHECKED":"UNCHECKED";case"URL":return $("<div/>").html(e).text();default:return[null,void 0].includes(e)?"":e}},timeFilter:function(t){if("string"==typeof t&&t.includes("-")&&t.indexOf("-")!==t.lastIndexOf("-"))moment(t,"YYYY-MM-DDTHH:mm:ss.SSSZ",!0).isValid()?t=moment(t).format("MM/DD/YYYY h:mm A"):moment(t,"YYYY-MM-DD",!0).isValid()&&(t=moment(t).format("MM/DD/YYYY"));else if("number"==typeof t&&moment(t).isValid()){var e=moment(t).format("MM/DD/YYYY h:mm:ss A");t=e.includes("12:00:00 AM")?moment(t).format(dateFormat):moment(t).format("MM/DD/YYYY h:mm A")}return t},trimTrailingStrings:function t(e,n){if(""===e||void 0===e)return e;var a=e;if(Array.isArray(n)){var s,o=n,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}(o);try{for(i.s();!(s=i.n()).done;){var l=s.value,c=new RegExp(l+"+$");if((e=a.replace(c,""))!==a)return t(e,o)}}catch(t){i.e(t)}finally{i.f()}return e}var d=new RegExp(n+"+$");return e.replace(d,"")},debounce:function(t,e){var n;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];clearTimeout(n),n=setTimeout(function(){n=null,t.apply(void 0,s)},e)}},saveMsgOff:function(){$completeForm.find("#savingStatus").hide(),$completeForm.find("div.js-page-backdrop.slds-backdrop").removeClass("slds-backdrop_open").addClass("slds-backdrop_closed")},allowFormulaValidation:T,CONSTANTS:p,getInFormLookupRecords:function(t){var e=[];return $('.form-section:not(.js-section-delete) div.control-group[data-randomid="'.concat(t,'"]')).each(function(){var t,n=$(this).closest(".slds-card__body"),a=n.data("sectionobject"),s=n.data("linkedsectionrecordid"),o=n.data("sectionindex"),r=L(s)||"".concat(a).concat(o),l=$(this).find(".answerValue").data("questionid"),c=C($(this));e.push((i(t={Id:r},E(a),c),i(t,"attributes",{type:a}),i(t,"questionId",l),i(t,"sectionIndex",o),t))}),e},getValueFromAnswerInput:C,setAsInFormLUParent:function(t,e,n){if(e&&t&&t.includes(e)&&n){var a=t.split(e)[1];$('.slds-card__body[data-sectionindex="'.concat(a,'"][data-sectionobject="').concat(e,'"] .control-group[data-randomid="').concat(n,'"]')).addClass("in-form-lookup-parent")}},returnNameFieldForObject:E,notNullish:L,purifyHTML:A,sendMsgToLWC:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(sfEnv.isLWC){var n=JSON.stringify(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({type:t,Id:sfEnv.thisForm.Id,Name:sfEnv.thisForm.Name},e));window.top.postMessage(n,"*")}},logicStrComparison:function(t,e,n){switch(e){case">":return t>n;case">=":return t>=n;case"=":return t===n;case"!=":return t!==n;case"<":return t<n;case"<=":return t<=n}},prependHTTPS:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof t?"":t.includes("://")?t:"https://".concat(t)},arrayBufferToBase64:function(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,s=0;s<a;s++)e+=String.fromCharCode(n[s]);return window.btoa(e)},fileSizeOverLimit:function(t,e){if(!t||"string"!=typeof t||!e)return!0;var n=s(t.split(" "),2),a=n[0],o="kb"===n[1].toLowerCase()?1e3:1e6,i=Number(a)*o;return e<=i},convertToMobileLink:function(t){return"string"==typeof t?t.replace(new RegExp("href=","g"),"data-href="):""},checkIfLink:O,roundNumber:function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},setLSGroupChangedInput:function(t){var e=t.hasClass("form-section")?t:t.closest(".form-section");if(e.hasClass("is-linked-section")){var n=e.data("randomid");$('.form-section[data-randomid="'.concat(n,'"]')).addClass("ls-group-changed-input"),e.hasClass("js-uses-ls-card")&&(e.prev(".ls-card").addClass("ls-group-changed-input"),e.prevAll('[data-randomid="'.concat(n,'"].ls-card-header')).addClass("ls-group-changed-input"),e.nextAll('[data-randomid="'.concat(n,'"].ls-card-add-container')).addClass("ls-group-changed-input"))}},sortElementsByDOM:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(t).sort(function(t,n){var a=e?t[e][0]:t[0],s=e?n[e][0]:n[0];return a===s?0:a.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_PRECEDING?1:-1})},svgString2Image:function(t,e,n,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(o,i){if(null==t||null==t||""===t)i("No SVG String");else{a=a||"png";var r=t,l=document.createElement("canvas"),c=l.getContext("2d");l.width=e,l.height=n,c.fillStyle="white",c.fillRect(0,0,e,n);var d=new Image;d.onload=function(){var t=e/2-d.width/2,i=n/2-d.height/2;if(c.drawImage(d,t,i,d.width,d.height),s)l.toBlob(function(t){o(t)},"image/".concat(a));else{var r=l.toDataURL("image/".concat(a));o(r)}},d.src=r}})},previewDateFormatter:function(t,e){var n,a=e.toUpperCase();if(a.includes("TODAY")||a.includes("NOW")){a="date"===t?a.replace("TODAY",""):a.replace("NOW","");var s=parseInt(a),o=new Date,i=-sfEnv.gmtOffsetInSeconds/60;o=new Date(o.getTime()-60*i*1e3),o="date"===t?new Date(o.setDate(o.getDate()+s)):new Date(o.setMinutes(o.getMinutes()+s)),n="date"===t?o.toISOString().split("T")[0]:o.toISOString().split(".")[0]}else{var r=new Date(e),l=r.getTimezoneOffset();r=new Date(r.getTime()-60*l*1e3),n="date"===t?r.toISOString().split("T")[0]:r.toISOString().split(".")[0]}return n},absUrl:_,createRBListElement:function(t,e,n,a,s,o,i,r,l,c){var d=l?'checked="checked"':"";return'<span class="slds-radio radio-list">\n                <input \n                    tabindex="-1"\n                    type="radio"\n                    class="js-trigger-custom-formula" \n                    '.concat(o,"\n                    ").concat(d,'\n                    onClick="return false;"\n                    value="').concat(t,'"\n                    name="').concat(e,'"\n                    id="').concat(n,'"\n                    data-questionid="').concat(a,'"\n                    data-linkedsectionorder="').concat(s,'"\n                />\n                <label class="slds-radio__label OR-radio-flex" ').concat(sfEnv.isMobileApp?"":'for="'.concat(n,'"'),'>\n                    <span class="slds-radio_icon">\n                        <svg aria-hidden="true" class="slds-button__icon slds-icon_small ').concat(c,'">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="').concat(_+sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#"+i,'"></use>\n                        </svg>\n                    </span>\n                    ').concat(r,"\n                </label>\n            </span>")},regexNumeric:function(t){if("e"===t.charAt(t.length-1))return!1;if(""===t)return!0;return/^[+-]?([0-9]+[\.e]?[0-9]*|[0-9]+[\.e]?[0-9]*e?[0-9]*|[0-9]+[\.e]?[0-9]*e[+-]?[0-9]+|\.[0-9]+|\.[0-9]+e?[0-9]*|\.[0-9]+e[+-]?[0-9]+)$/.test(t)}},g=sfEnv.isMobileApp,b=sfEnv.isFormDetail,w=sfEnv.isLightningExpOrSF1App,y={};function k(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=t?"".concat(e,"/").concat(n):"".concat(n,"/").concat(e),i=s?"  ".concat(s):"";return"".concat(o,"/").concat(a).concat(i)}function x(t){var e="string"==typeof t;return"number"==typeof t||e&&!t.includes("-")?moment.utc(parseInt(t,10)).format("YYYY-MM-DD"):e&&t.includes("-")?t:""}function S(t,e){var n,a;function s(s){s.success&&(a=s.id),function(){n&&sforce.console.focusPrimaryTabById(n,t,!0,e);a&&sforce.console.closeTab(a)}()}sforce.console.getEnclosingPrimaryTabId(function(t){t.success&&(n=t.id);sforce.console.getFocusedSubtabId(s)})}function I(t,e){return t.replace(/\&amp\;/g,"").replace(/[&<>,`=#$*()^@!+~?%;\[\]\\\/."']/g,"").replace(/ /g,"-").substring(0,e)}function C(t){var e=t.find(".answerValue");return e.find(".slds-radio.radio-list").length?e.find("input:checked").val():e.find(".slds-checkbox").length>1?e.find(":checked").map(function(){return this.value}).get().join(";"):1===e.find(".slds-checkbox").length?e.find(":checked").length:e.find(".mspicklist-item").length?e.find(".mspicklist-item.ui-selected").map(function(){return $(this).data("option-value")}).get().join(";"):e.val()}function E(t){switch(t){case"Case":return"CaseNumber";case"Order":return"OrderNumber";case"Idea":return"Title";case"QuoteLineItem":return"LineNumber";case"Solution":return"SolutionName";case"OrderItem":return"OrderItemNumber";case"Contract":return"ContractNumber";case"EmailMessage":return"Subject";case"WorkOrder":return"WorkOrderNumber";case"ServiceAppointment":return"AppointmentNumber";case"Task":return"Subject";case"WorkOrderLineItem":return"LineItemNumber";case"ProductRequest":return"ProductRequestNumber";case"ProductItem":return"ProductName";case"Timesheet":return"TimeSheetNumber";default:return"Name"}}function L(t){return!(!(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||""!==t)||null===t||"undefined"===t||void 0===t)&&t}function T(t){$(".js-custom-formula.js-num-greater-than, .js-custom-formula.js-num-less-than, .js-custom-formula.js-num-greater-than-or-equals, .js-custom-formula.js-num-less-than-or-equals").prop("disabled",!t)}function A(t){if(!t)return t;var e=DOMPurify.sanitize(t,{SAFE_FOR_JQUERY:!0});return $("<div/>").html(e).text().length||e.includes("<img")?e:"(Invalid Value)"}function O(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=sfEnv.isMobileApp||e?"<a href=":"&lt;a href=&quot;",a=sfEnv.isMobileApp||e?"</a>":"&lt;/a&gt;";return"string"==typeof t&&t.includes(n)&&t.includes(a)}y.clear="",y.clearSoups="Clearing Stored Data...",y.runQueryExistingContacts="Querying Contacts...",y.runQueryForms="Querying Forms...",y.runQueryContactSoup="Displaying Queried Data...",y.syncForms="Syncing Form Data...",y.downloadedForms="Loading All Forms...",y.saveForm="Saving Form...",y.saveContact="Saving Contact Data...",y.createForm="Creating New Form...",y.onOnline="Saving Offline Data...",y.sf1Photo="Saving Photo...",y.createPDF="Generating PDF...",y.loading="Loading...",y.geolocation=p.GEOLOCATION.OBTAINING,window.returnNameFieldForObject=E,window.allowFormulaValidation=T,window.purifyHTML=A,e.exports=h},{}],17:[function(t,e,n){"use strict";var a={setupValidationRules:function(){s.validator.addMethod("cRequired",s.validator.methods.required,"This question is required."),s.validator.addMethod("emailPattern",function(t,e,n){return this.optional(e)||n.test(t)},"Invalid email format."),s.validator.addMethod("date",E,L),s.validator.addMethod("dateTime",E,L),s.validator.addMethod("lessThanNum",x,T),s.validator.addMethod("lessThanOrEqualsNum",S,T),s.validator.addMethod("greaterThanNum",y,T),s.validator.addMethod("greaterThanOrEqualsNum",k,T),s.validator.addMethod("regexText",I,T),s.validator.addMethod("equalsText",w,T),s.validator.addMethod("js-numeric",function(t){return!!c.regexNumeric(t)},"Value must be a number."),s.validator.methods.url=function(t,e){return this.optional(e)||!0};for(var t=0;t<l.regExRules.length;t++){var e=void 0,n=void 0,a={},o=l.regExRules[t];e=0===o[0]?new RegExp("^[0]\\.\\d{1,"+o[1]+"}?$"):0===o[1]?new RegExp("^-?\\d{0,"+o[0]+"}$"):new RegExp("^-?\\d{0,"+o[0]+"}(\\.\\d{1,"+o[1]+"})?$"),n=o[0]+"-"+o[1],(a={})["pattern"+t]=e,s.validator.addClassRules(n,a),s.validator.addMethod("pattern".concat(t),function(t,e,n){return"string"==typeof t&&t.includes(c.CONSTANTS.THOUSANDS_SEPARATOR)&&(t=t.replace(_,"")),this.optional(e)||n.test(Math.abs(t))},"Max ".concat(o[0]," digits left of decimal, ").concat(o[1]," to right."))}s.validator.addClassRules("js-num-type-input",{number:!0}),s.validator.addMethod("number",function(t){return!1!==t},"Value must be a number."),s.validator.addMethod("min",function(t,e,n){var a=C(t),s=a?Number(t.replace(_,"")):null,o=a?String(t.replace(_,"")):null;return null===s&&null===o||(s>=n||o==n)},"Value must be greater than its maximum value."),s.validator.addMethod("max",function(t,e,n){var a=C(t),s=a?Number(t.replace(_,"")):null,o=a?String(t.replace(_,"")):null;return null===s&&null===o||(s<=n||o==n)},"Value must be less than its maximum value."),s.validator.addClassRules("date",{date:/\\./}),s.validator.addClassRules("dateTime",{dateTime:/\\./}),s.validator.addClassRules("js-num-less-than",{lessThanNum:/\\./}),s.validator.addClassRules("js-num-less-than-or-equals",{lessThanOrEqualsNum:/\\./}),s.validator.addClassRules("js-num-greater-than",{greaterThanNum:/\\./}),s.validator.addClassRules("js-num-greater-than-or-equals",{greaterThanOrEqualsNum:/\\./}),s.validator.addClassRules("js-text-regex",{regexText:/\\./}),s.validator.addClassRules("js-text-equals",{equalsText:/\\./}),s.validator.addClassRules("email",{emailPattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/})},setupFormValidation:function(e){var n=t("./app"),a=[],i=0;function r(){return s(".selectable-multiselect").parent().removeClass("slds-has-error").find(".slds-form-element__help").removeClass("slds-show").addClass("slds-hide"),s(".selectable-multiselect[required]:not(.ignore)").each(function(){if(!s(this).closest(".control-group").not().hasClass("hiddenByDep")){var t=s(this).find(".ui-selected");0===t.length&&(u(s(this)),s(this).parent().addClass("slds-has-error").find(".slds-form-element__help").removeClass("slds-hide").addClass("slds-show"),i++)}}),i>0}function l(){h=c.sortElementsByDOM(h,"element");var t="\n        This form has ".concat(i,' error(s). <span class="cf-errors-buttons-message">Click \'Prev\' or \'Next\' to resolve.</span>\n        <div class="cf-errors-buttons">\n            <button class="slds-button slds-button_neutral js-cf-errors-previous">\n                <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">\n                    <use xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#chevronleft",'"></use>\n                </svg>\n                Prev\n            </button>\n            <button class="slds-button slds-button_neutral js-cf-errors-next">\n                Next\n                <svg class="slds-button__icon slds-button__icon_right" aria-hidden="true">\n                    <use xlink:href="').concat(sfEnv.SLDS_PATH+"/assets/icons/utility-sprite/svg/symbols.svg#chevronright",'"></use>\n                </svg>\n            </button>\n        </div>');o&&(window.hideLoading(),window.SaveEvent.status=!1),s("div.errorSummary span").html(t),s("div.errorSummary").show(),s("body").addClass("has-errors"),n.saveMsgOff()}function d(){a=[],i=0}function u(t){var e=t.closest(".pageContent").prop("class"),n="1";return null!=e&&(n=e.match(/\d+/)[0]),a.includes(n)||a.push(n),a.sort(),h.push({element:t,pageNumber:n}),a}h=[],g=-1,s("#mainForm").validate({ignore:".ignore, .tt-hint, .hiddenByDep:not(.ls-group-changed-input) input, .hiddenByDep:not(.ls-group-changed-input) textarea, .hiddenByDep:not(.ls-group-changed-input) select",debug:!0,focusInvalid:!o,errorPlacement:function(t,e){var n=s(e[0]);n.is("select")&&n.attr("multiple")&&t.insertAfter(e)},submitHandler:function(){var t=r(),n=!0!==sfEnv.wasQuickSave&&(s('.form-section:not(.js-section-delete, .hiddenByDep)[data-section-required="true"], .form-section.hiddenByDep.ls-group-changed-input:not(.js-section-delete)[data-section-required="true"]').each(function(t,e){var n,a=s(e);0===a.find(".control-group").length&&(u(a),a.hasClass("js-uses-ls-card")&&(n=a.next(),a=a.prev()),a.addClass("slds-has-error").find(".slds-form-element__help.section-required-msg").removeClass("slds-hide").addClass("slds-show"),n&&n.length&&n.addClass("slds-has-error OR-has-error"),i++)}),i>0);return!1===t&&!1===n?(s("body").removeClass("has-errors"),s("div.errorSummary").hide(),e()):(l(),d(),sfEnv.noNavOnSave=!1),!1},invalidHandler:function(t,e){A(!1),n.saveMsgOff(),i=e.numberOfInvalids(),h=[],sfEnv.noNavOnSave=!1,i?(e.errorList.forEach(function(t){var e=s(t.element);(e.hasClass("email")||e.hasClass("URL")||e.hasClass("date")||e.hasClass("textInput")||e.hasClass("slds-textarea")||e.hasClass("dateTime")||e.hasClass("removeExtraCharacters")||e.hasClass("greaterThanNum")||e.hasClass("greaterThanNum"))&&e.parent().parent().find(".slds-form-element__help").html(t.message),e.closest(".slds-form-element").addClass("slds-has-error").find(".slds-form-element__help").removeClass("slds-hide").addClass("slds-show"),e.closest(".form-section").hasClass("js-uses-ls-card")&&e.closest(".form-section").prev(".ls-card").first().addClass("error"),e.hasClass("slds-file-selector__input")&&(o?e.parent().find(".js-question-camera").addClass("photo-error"):e.parent().find(".slds-file-selector__button").removeClass("slds-button_neutral").addClass("slds-button_destructive")),u(e)}),r(),l(),d(),o&&window.$ionicScrollDelegateScrollTo&&window.$ionicScrollDelegateScrollTo(0,0,!0)):s("div.errorSummary").addClass("slds-hide")},success:function(t,e){A(s(e))}})},removeChangedInputClass:function(){s("#formContent").removeClass("changed-input")},getErrorFields:function(){return{errorFields:h,errorFieldCurrentIndex:g}},setErrorFieldIndex:function(t){g=t},clearErrorMessages:A};t("jquery-validation");var s=jQuery,o=sfEnv.isMobileApp,i=new Date("1/1/1700"),r=new Date("12/31/4000"),l=t("./dataStore"),c=t("./util"),d=c.CONSTANTS,u=d.THOUSANDS_SEPARATOR,f=d.DATE_FORMAT,m=d.DATE_FORMAT_DMY,p=d.DATE_TIME_FORMAT,v=d.DATE_TIME_FORMAT_DMY,_=new RegExp(u,"gi"),h=[],g=-1;function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new Date,s=sfEnv.gmtOffsetInSeconds/60,o=(a=new Date(a.getTime()+60*s*1e3)).getTimezoneOffset();if(a=new Date(a.getTime()+60*o*1e3),t.includes("currentHour")||(!0===e?a.setHours(23,59,59,59):!1===e&&a.setHours(0,0,0,0)),"Yesterday"===t)a.setDate(a.getDate()-1);else if("Tomorrow"===t)a.setDate(a.getDate()+1);else if("Today"===t);else if(t.includes("currentDate"))a.setDate(a.getDate()+parseInt(t.slice("currentDate".length)));else if(t.includes("currentHour")){var i=parseFloat(t.slice("currentHour".length)),r=Math.sign(i),l=Math.abs(i),c=Math.floor(l),d=l-c;a.setHours(a.getHours()+r*c),a.setMinutes(a.getMinutes()+r*d*60)}else try{t.includes("T")?t=moment(t).format(n?v:p):t.includes("-")&&(t=moment(t).format(n?m:f));var u=t.split(" ").filter(function(t){return t});if(2===u.length){var _=u[1].split(":");a.setHours(_[0],_[1],0,0)}else if(3===u.length){var h=u[1].split(":"),g=0;"pm"===u[2].toLowerCase()?g+=12:"12"===h[0]&&(g-=12),a.setHours(parseInt(h[0])+g,h[1],0,0)}var b=u[0].split("/");a.setFullYear(Number(b[2])),n?(a.setMonth(Number(b[1])-1),a.setDate(Number(b[0]))):(a.setMonth(Number(b[0])-1),a.setDate(Number(b[1])))}catch(t){return"Invalid Date"}return a}function w(t,e){var n=C(t)?String(t.replace(_,"")):null;try{var a=C(e.attributes.min.value)?String(e.attributes.min.value.replace(_,"")):null;return null===n||null===a||n==String(a)}catch(t){var s=C(e.min)?String(e.min.replace(_,"")):null;return null===n||null===s||n==String(s)}}function y(t,e){var n=C(t)?Number(t.replace(_,"")):null,a=C(e.min)?Number(e.min.replace(_,"")):null;return null===n||null===a||n>Number(a)}function k(t,e){var n=C(t)?Number(t.replace(_,"")):null,a=C(e.min)?Number(e.min.replace(_,"")):null;return null===n||null===a||n>=Number(a)}function x(t,e){var n=C(t)?Number(t.replace(_,"")):null,a=C(e.max)?Number(e.max.replace(_,"")):null;return null===n||null===a||n<Number(a)}function S(t,e){var n=C(t)?Number(t.replace(_,"")):null,a=C(e.max)?Number(e.max.replace(_,"")):null;return null===n||null===a||n<=Number(a)}function I(t,e){if(!C(t))return!0;var n,a=s(e).attr("data-regex");try{n=new RegExp(a).test(t)}catch(t){n=!1}return n}function C(t){return null!==t&&"undefined"!==t&&"null"!==t&&void 0!==t&&""!==t}function E(t,e){if(0===t.length)return!0;var n,a="true"===s(e).attr("data-compare-dmy-format-min"),o="true"===s(e).attr("data-compare-dmy-format-max"),l=i,c=r;(null!=e.min&&e.min.length>0&&"undefined"!==e.min&&(l=b(e.min,!1,a)),null!=e.max&&e.max.length>0&&"undefined"!==e.max&&(c=b(e.max,!0,o)),("Invalid Date"==l||l<i)&&(l=i),("Invalid Date"==c||c>r)&&(c=r),e&&s(e).hasClass("js-dmy-format"))?n=s(e).hasClass("dateTime")?moment(t,v).toDate():moment(t,m).toDate():n=b(t,!1);return"Invalid Date"!=n&&n>=l&&n<=c}function L(t,e){var n="undefined"!==s(e).data("dateerrmsg")?s(e).data("dateerrmsg"):void 0,a=e&&s(e).hasClass("js-dmy-format"),o=new Date(s(e).val());return!n&&o<i?"Salesforce does not allow dates before 01/01/1700.":!n&&o>r?"Salesforce does not allow dates after ".concat(a?"31/12/4000":"12/31/4000","."):n||"Please enter a valid date."}function T(t,e){return"undefined"!==s(e).data("validation-msg")?s(e).data("validation-msg"):void 0}function A(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?t.closest(".slds-form-element"):s(".slds-form-element"),n=t?t.closest(".form-section"):s(".form-section"),a=t||s(".slds-file-selector__input");e.each(function(){var t=s(this);t.find(".error").addClass("valid").removeClass("error"),t.removeClass("slds-has-error").find(".slds-form-element__help").removeClass("slds-show").addClass("slds-hide")}),n.each(function(){var t=s(this);t.hasClass("js-uses-ls-card")&&0===t.find(".error").length&&t.prev(".ls-card").first().removeClass("error")}),a.each(function(){var t=s(this);t.hasClass("slds-file-selector__input")&&(o?t.parent().find(".js-question-camera").removeClass("photo-error"):t.parent().find(".slds-file-selector__button").removeClass("slds-button_destructive").addClass("slds-button_neutral"))})}e.exports=a},{"./app":3,"./dataStore":6,"./util":16,"jquery-validation":19}],18:[function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s,o={loadPageVFR:function(t){var e=[sfEnv.VFR.queryAllForms,t,function(e,n){null===e||!1===Array.isArray(e)?(r.loadPageCount++,5===r.loadPageCount?$("#loadingMessage").removeClass("slds-theme_info").addClass("slds-theme_error").find("h2").html("The Form could not be loaded. Please refresh and try again."):u(t)):o._loadPageSuccess(e,n)},{buffer:!0,escape:!0,timeout:3e4}];o._apiCall(e)},saveAnswersVFR:function(t,e,n){return new Promise(function(a,s){for(var l=[],c=[],d=0;d<t.length;d++){var u=Object.assign({},t[d]);if(delete u[i+"Question__r"],u.hasOwnProperty("toDelete")&&!0===u.toDelete){var f=u.hasOwnProperty("Id")?u.Id:u[i+"Mobile_ID__c"];delete r[f],u.hasOwnProperty("Id")?(delete u.toDelete,l.push(u),delete answerStore[u.Id]):delete t[d]}else u.hasOwnProperty(i+"Question__r")&&"Attachment/Photo"===u[i+"Question__r"][i+"Type__c"]&&(delete u[i+"File_Count__c"],delete u[i+"Long_Text_Answer__c"]),c.push(u)}var m=[sfEnv.VFR.saveAllAnswers,c,l,e,n,bowser.name+" "+bowser.version,bowser.oSStr,function(t,e){return o._saveAnswersSuccess(t,e,a,s)}];o._apiCall(m)})},saveDocumentsVFR:function(t,e){return new Promise(function(n,a){var i=sfEnv.saveESigAsJPG?$(".js-sig-answer.js-input-changed input").length:0,l=t&&t.length,d=0,u=e?1:0,m=[];if(!(l||i||e))return n();if(!l&&e){var p=e.file,v=e.fileName,_=e.externalId,h=e.formId;b(p,v,_,h,null)}else l&&t.forEach(function(t){for(var e=t.inputId,n=t.answerId,a=t.formId,s=t.externalIds,o=s.split(","),i=$("#".concat(e))[0].files,r=0;r<i.length;r++){u+=1;var l=i[r],c=l.name,d=o[r];sfEnv.isPublicSite?g(l,c,d,a,n):b(l,c,d,a,n)}});function g(t,e,n,a,s){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){var t=i.result.indexOf(",")+1,r=i.result.slice(t),l={docTitle:e,docName:e,externalId:n,answerId:s,formId:a,docData:r};!function(t){var e=[sfEnv.VFR.savePhotosForPublicForms,t.docTitle,t.docName,t.externalId,t.answerId,t.formId,t.docData,function(t,e){var n=JSON.parse($("<div/>").html(t).text());w("success",e,n.externalFileID,n.versionID)},{buffer:!0,escape:!0,timeout:18e4}];o._apiCall(e)}(l)},i.onerror=function(t){console.log("Error: ",t)}}function b(t,e,n,a,i){f(),s.createBlob("ContentVersion",{Origin:"H",PathOnClient:e},e,"VersionData",t,function(t){!function(t,e){var n=e.answerId,a=e.formId,s=e.externalId;if(l&&t.errors.length){var i=$('.js-file-preview[data-externalid="'.concat(s,'"]'));if(i.length){var r=i.find(".js-file-name").html();m.push("".concat(r," - ").concat(t.errors.join(",")))}}else{var c=t.id,d=[sfEnv.VFR.saveDocument,c,s,n,a,function(t,e){w(t,e,s,c)},{buffer:!0,escape:!0,timeout:18e4}];o._apiCall(d)}}(t,{externalId:n,formId:a,answerId:i})},function(t){return console.log("Error: "+JSON.stringify(t))})}function w(t,s,o,i){if(d+=1,!e&&l&&"success"===t){var r=$('.js-file-preview[data-externalid="'.concat(o,'"]'));r.data({externalid:"","input-index":"-1"}).removeClass("slds-theme_info"),r.find(".js-remove-file").removeClass("slds-button__icon-inverse").addClass("slds-button__icon").data("sfid",i);var f=r.data("inputname");r.closest(".controls").find("#".concat(f)).remove();var p=r.closest(".controls").find(".js-attachment-count");c.updateBadgeCount(p,-1)}if(d===u)return m.length?a(sfEnv.VFR.saveDocument,"Error saving files: \n".concat(m.join("\n"))):n()}i&&($(".js-sig-answer.js-input-changed input").each(function(t,e){var n=e.name;n.length>18&&r.esigInputIds.forEach(function(t){t.mobileId===n&&(n=t.answerId)});var a=e.dataset&&"undefined"!==e.dataset.jpgVersionId?e.dataset.jpgVersionId:void 0;if(a){u+=1;var s=[sfEnv.VFR.deleteDocument,a,function(t,e){w(t,e)}];o._apiCall(s)}var i=$(e).closest(".form-section").hasClass("js-section-delete");if(e.value&&!i){var l="".concat(n,".jpg"),d=c.randomString(22,"aA#"),f=c.CONSTANTS.ESIG,m=f.WIDTH,p=f.HEIGHT,v=f.FORMAT;u+=1,c.svgString2Image(e.value,m,p,v,!0).then(function(t){var e=new File([t],l,{type:"image/".concat(v)});b(e,l,d,sfEnv.thisForm.Id,n)}).catch(function(t){console.log("svgString2Image error: ",t),w("failure",{},d,a)})}}),0===u&&n())})},retrieveAnswerFilesVFR:function(t,e){var n=[sfEnv.VFR.retrieveAnswerFiles,t,e];o._apiCall(n)},updateFormMobileAvailableVFR:function(){var t=[sfEnv.VFR.updateFormMobileAvailable,sfEnv.thisForm.Id,sfEnv.thisForm[i+"Mobile_Available__c"],function(t){if("success"!==t){var e={bodyStringArray:["There was an error updating Mobile Availability:",t]};window.openCustomModal(e),sfEnv.thisForm[i+"Mobile_Available__c"]=!sfEnv.thisForm[i+"Mobile_Available__c"]}c.updateMobileAvailableActions()}];o._apiCall(t)},retrieveFieldValuesVFR:function(t){return new Promise(function(e,n){var a=[];for(var s in t)t.hasOwnProperty(s)&&a.push(t[s].getSFData());var i=[sfEnv.VFR.retrieveFieldValues,a,function(a,s){200===s.statusCode?e({allFormulaFieldDatasets:t,updatedFieldInfo:a}):n()}];o._apiCall(i)})},retrieveTemplateImageDataVFR:function(t){return new Promise(function(e,n){var a=[sfEnv.VFR.retrieveTemplateImageData,t,function(a,s){var o={};if(s.status){for(var i=0;i<t.length;i++)o[t[i]]=a[i];e(o)}else n(o)}];o._apiCall(a)})},getLogoForPDFsVFR:function(t){var e=[sfEnv.VFR.getLogoForPDFs,t];o._apiCall(e)},getDocAPICallPromise:function(t){return new Promise(function(e){f();s.getChatterFile("/services/data/v48.0/sobjects/ContentVersion/".concat(t,"/VersionData"),"JPG",function(n){var s=c.arrayBufferToBase64(n),o=new Image;o.onload=function(){var n=a({},t,{width:this.width,height:this.height,docData:s,fileType:"JPG"});e(n)},o.src="data:image/".concat("JPG".toLowerCase(),";base64,").concat(s)},function(n){"string"==typeof n&&n.includes("Error:")?e(a({},t,{error:n})):e(a({},t,{error:"Attachment ".concat(t?"with Id ".concat(t," "):"","could not be displayed.")}))})})},_apiCall:function(t){if(void 0===t||!t.length)throw"No args in api call";Visualforce.remoting.Manager.invokeAction.bind(Visualforce.remoting.Manager).apply(null,t)},_loadPageSuccess:function(e,n){answerStore={};var a,s=t("./form"),o=sfEnv.namespace,l={};if(l.form=sfEnv.thisForm,e[0].hasOwnProperty("errors")&&null!==e[0].errors&&e[0].errors.length){if("empty"===e[0].errors)$("#loadingMessage").hide(),$(".js-no-sections").show();else{var c="There was an error loading this form:";if(sfEnv.isMobileApp)alert("".concat(c," ").concat(e[0].errors));else{var d={bodyStringArray:[c,e[0].errors]};window.openCustomModal(d)}}return}if(!0===n.status){$(".js-no-sections").hide(),l.template=e[0];var u=l.template;sfEnv.isMobileApp||(sfEnv.objRights=u.objRights||{}),sfEnv.useDecimalLSOrder=u.theTemplate[i+"Use_Decimal_Linked_Section_Numbers__c"],r.sectionStore={},r.formID=l.form.Id,$.each(u.sections,function(t,e){e.hasOwnProperty("allQuestions")&&e.allQuestions.length>0&&$.each(e.allQuestions,function(t,n){if(r.sectionStore[e.sectionId]=e,r.questionStore[n.question.Id]=n.question,"Linked"===e.sectionType){var s=n.answers;if(sfEnv.isMobileApp&&(s=n.answers.filter(function(t){return t[i+"Form__c"]===l.form.Id})),s.sort(function(t,e){return t[i+"Linked_Section_Order__c"]-e[i+"Linked_Section_Order__c"]}),sfEnv.useDecimalLSOrder){var c=0;s.forEach(function(t){var e=t[i+"Linked_Section_Order__c"],n=e.toString().split(".")[1];t[i+"Linked_Section_Order__c"]=Number(c+"."+n),++c})}else{var d=0;s.forEach(function(t){t[i+"Linked_Section_Order__c"]=d,++d})}}for(a=0;a<n.answers.length;a++){var u=n.answers[a];u.hasOwnProperty("Id")&&l.form.Id===u[i+"Form__c"]?answerStore[u.Id]=u:u.hasOwnProperty(o+"Mobile_ID__c")&&l.form[i+"Mobile_ID__c"]===u[i+"Form_Mobile_Id__c"]&&(answerStore[u[o+"Mobile_ID__c"]]=u)}})}),s.renderForm(l,s.afterFormRender)}},_saveAnswersSuccess:function(t,e,n,a){var s,o=!1,c=0,u="";if(null===t)e&&e.hasOwnProperty("message")&&v(e.message);else for(var f=0;f<t.dbResults.length;f++){var m=t.dbResults[f];m.hasOwnProperty("errors")&&""!==m.errors&&v(m.errors)}if(o||!0!==sfEnv.wasQuickSave&&!r.attachmentInputIds.length&&!r.esigInputIds.length)if(d&&!o)window.formSaveError=!1,l.removeChangedInputClass(),$(".form-section.js-section-delete:hidden").remove(),p();else{if(o)return window.formSaveError=!0,$("#formContent").addClass("saveError"),p(),s="There ".concat(1===c?"was":"were"," ").concat(c," error").concat(1===c?"":"s"," during the save: \n\n").concat(u,"\n Please report this issue to your System Administrator."),a({type:sfEnv.VFR.saveAllAnswers,msg:s});window.formSaveError=!1,l.removeChangedInputClass()}else window.formSaveError=!1,l.removeChangedInputClass(),$(".form-section.js-section-delete:hidden").remove(),p();return n(t);function p(){t&&t.hasOwnProperty("dbResults")&&t.dbResults.forEach(function(t){var e,n;e=t.hasOwnProperty("clientId")?t.clientId:t.sfId,answerStore.hasOwnProperty(e)&&(n=answerStore[e],t.hasOwnProperty("relatedRecordID")&&null!==t.relatedRecordID&&n.hasOwnProperty(i+"Linked_Section_Order__c")&&null!==n[i+"Linked_Section_Order__c"]&&(n[i+"Linked_Section_Record_ID__c"]=t.relatedRecordID)),""!==t.clientId&&answerStore.hasOwnProperty(t.clientId)&&(void 0===n&&(n=answerStore[t.clientId]),n.Id=t.sfId,answerStore[t.sfId]=n,delete answerStore[t.clientId]),""!==t.clientId&&(r.attachmentInputIds.forEach(function(e){e.answerId===t.clientId&&(e.answerId=t.sfId)}),r.esigInputIds.forEach(function(e){e.answerId===t.clientId&&(e.answerId=t.sfId)}))})}function v(t){o=!0,u+="Error # ".concat(++c,": ").concat(t,"\n")}}},i=sfEnv.namespace,r=t("./dataStore"),l=t("./validation"),c=t("./util"),d=sfEnv.isSF1;function u(t){var e=[sfEnv.VFR.queryAllForms,t,n,{buffer:true,escape:true,timeout:3e4}];o._apiCall(e);function n(e,n){if(e===null||Array.isArray(e)===false){r.loadPageCount++;if(r.loadPageCount===5){$("#loadingMessage").removeClass("slds-theme_info").addClass("slds-theme_error").find("h2").html("The Form could not be loaded. Please refresh and try again.")}else{u(t)}}else{o._loadPageSuccess(e,n)}}}function f(){if(!s)if(s=new forcetk.Client,sfEnv.isCommunityUser){var t=c.getInstanceUrl("CompleteForm");s.proxyUrl=null,s.setSessionToken(sfEnv.apiSessionId,"v48.0",t)}else s.setSessionToken(sfEnv.apiSessionId)}e.exports=o},{"./dataStore":6,"./form":8,"./util":16,"./validation":17}],19:[function(t,e,n){var a;a=function(t){t.extend(t.fn,{validate:function(e){if(this.length){var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(e){function a(){var a,s;return!n.settings.submitHandler||(n.submitButton&&(a=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),s=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&a.remove(),void 0!==s&&s)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,a()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):a():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,n,a;return t(this[0]).is("form")?e=this.validate().form():(a=[],e=!0,n=t(this[0].form).validate(),this.each(function(){e=n.element(this)&&e,a=a.concat(n.errorList)}),n.errorList=a),e},rules:function(e,n){var a,s,o,i,r,l,c=this[0];if(e)switch(s=(a=t.data(c.form,"validator").settings).rules,o=t.validator.staticRules(c),e){case"add":t.extend(o,t.validator.normalizeRule(n)),delete o.messages,s[c.name]=o,n.messages&&(a.messages[c.name]=t.extend(a.messages[c.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(e,n){l[n]=o[n],delete o[n],"required"===n&&t(c).removeAttr("aria-required")}),l):(delete s[c.name],o)}return(i=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c)).required&&(r=i.required,delete i.required,i=t.extend({required:r},i),t(c).attr("aria-required","true")),i.remote&&(r=i.remote,delete i.remote,i=t.extend(i,{remote:r})),i}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){9===n.which&&""===this.elementValue(e)||-1!==t.inArray(n.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,a){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(a):t(e).addClass(n).removeClass(a)},unhighlight:function(e,n,a){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(a):t(e).removeClass(n).addClass(a)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e,n=this.groups={};function a(e){var n=t.data(this.form,"validator"),a="on"+e.type.replace(/^validate/,""),s=n.settings;s[a]&&!t(this).is(s.ignore)&&s[a].call(n,this,e)}t.each(this.settings.groups,function(e,a){"string"==typeof a&&(a=a.split(/\s/)),t.each(a,function(t,a){n[a]=e})}),e=this.settings.rules,t.each(e,function(n,a){e[n]=t.validator.normalizeRule(a)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",a).on("click.validate","select, option, [type='radio'], [type='checkbox']",a),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n=this.clean(e),a=this.validationTargetFor(n),s=!0;return this.lastElement=a,void 0===a?delete this.invalid[n.name]:(this.prepareElement(a),this.currentElements=t(a),(s=!1!==this.check(a))?delete this.invalid[a.name]:this.invalid[a.name]=!0),t(e).attr("aria-invalid",!s),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(e){if(e){for(var n in t.extend(this.errorMap,e),this.errorList=[],e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var e,n=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(e=0;n[e];e++)this.settings.unhighlight.call(this,n[e],this.settings.errorClass,"");else n.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in n||!e.objectLength(t(this).rules()))&&(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,a=t(e),s=e.type;return"radio"===s||"checkbox"===s?this.findByName(e.name).filter(":checked").val():"number"===s&&void 0!==e.validity?!e.validity.badInput&&a.val():"string"==typeof(n=a.val())?n.replace(/\r/g,""):n},check:function(e){e=this.validationTargetFor(this.clean(e));var n,a,s,o=t(e).rules(),i=t.map(o,function(t,e){return e}).length,r=!1,l=this.elementValue(e);for(a in o){s={method:a,parameters:o[a]};try{if("dependency-mismatch"===(n=t.validator.methods[a].call(this,l,e,s.parameters))&&1===i){r=!0;continue}if(r=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,s),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+s.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+s.method+"' method."),t}}if(!r)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var a=this.defaultMessage(e,n.method),s=/\$?\{(\d+)\}/g;"function"==typeof a?a=a.call(this,n.parameters,e):s.test(a)&&(a=t.validator.format(a.replace(s,"{$1}"),n.parameters)),this.errorList.push({message:a,element:e,method:n.method}),this.errorMap[e.name]=a,this.submitted[e.name]=a},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var a,s,o,i=this.errorsFor(e),r=this.idOrName(e),l=t(e).attr("aria-describedby");i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(n)):(a=i=t("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(a=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(a):this.settings.errorPlacement?this.settings.errorPlacement(a,t(e)):a.insertAfter(e),i.is("label")?i.attr("for",r):0===i.parents("label[for='"+r+"']").length&&(o=i.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),l?l.match(new RegExp("\\b"+o+"\\b"))||(l+=" "+o):l=o,t(e).attr("aria-describedby",l),(s=this.groups[e.name])&&t.each(this.groups,function(e,n){n===s&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",i.attr("id"))}))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,e)),this.toShow=this.toShow.add(i)},errorsFor:function(e){var n=this.idOrName(e),a=t(e).attr("aria-describedby"),s="label[for='"+n+"'], label[for='"+n+"'] *";return a&&(s=s+", #"+a.replace(/\s+/g,", #")),this.errors().filter(s)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},a=t(e).attr("class");return a&&t.each(a.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(t,e,n,a){/min|max/.test(n)&&(null===e||/number|range|text/.test(e))&&(a=Number(a),isNaN(a)&&(a=void 0)),a||0===a?t[n]=a:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,a,s={},o=t(e),i=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(""===(a=e.getAttribute(n))&&(a=!0),a=!!a):a=o.attr(n),this.normalizeAttributeRule(s,i,n,a);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(e){var n,a,s={},o=t(e),i=e.getAttribute("type");for(n in t.validator.methods)a=o.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(s,i,n,a);return s},staticRules:function(e){var n={},a=t.data(e.form,"validator");return a.settings.rules&&(n=t.validator.normalizeRule(a.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(a,s){if(!1!==s){if(s.param||s.depends){var o=!0;switch(typeof s.depends){case"string":o=!!t(s.depends,n.form).length;break;case"function":o=s.depends.call(n,n)}o?e[a]=void 0===s.param||s.param:delete e[a]}}else delete e[a]}),t.each(e,function(a,s){e[a]=t.isFunction(s)?s(n):s}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,a){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==a?a:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,a){if(!this.depend(a,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var s=t(n).val();return s&&s.length>0}return this.checkable(n)?this.getLength(e,n)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,a,s=0,o=0,i=!1;if((t=t.replace(/\D/g,"")).length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)a=t.charAt(n),o=parseInt(a,10),i&&(o*=2)>9&&(o-=9),s+=o,i=!i;return s%10==0},minlength:function(e,n,a){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s>=a},maxlength:function(e,n,a){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s<=a},rangelength:function(e,n,a){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s>=a[0]&&s<=a[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,a){var s=t(a);return this.settings.onfocusout&&s.off(".validate-equalTo").on("blur.validate-equalTo",function(){t(n).valid()}),e===s.val()},remote:function(e,n,a){if(this.optional(n))return"dependency-mismatch";var s,o,i=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,a="string"==typeof a&&{url:a}||a,i.old===e?i.valid:(i.old=e,s=this,this.startRequest(n),(o={})[n.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:s.currentForm,success:function(a){var o,r,l,c=!0===a||"true"===a;s.settings.messages[n.name].remote=i.originalMessage,c?(l=s.formSubmitted,s.prepareElement(n),s.formSubmitted=l,s.successList.push(n),delete s.invalid[n.name],s.showErrors()):(o={},r=a||s.defaultMessage(n,"remote"),o[n.name]=i.message=t.isFunction(r)?r(e):r,s.invalid[n.name]=!0,s.showErrors(o)),i.valid=c,s.stopRequest(n,c)}},a)),"pending")}}});var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,a){var s=t.port;"abort"===t.mode&&(n[s]&&n[s].abort(),n[s]=a)}):(e=t.ajax,t.ajax=function(a){var s=("mode"in a?a:t.ajaxSettings).mode,o=("port"in a?a:t.ajaxSettings).port;return"abort"===s?(n[o]&&n[o].abort(),n[o]=e.apply(this,arguments),n[o]):e.apply(this,arguments)})},"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)},{}],20:[function(t,e,n){"use strict";var a=e.exports=function(t){this._options=t||{},this._options.strict=this._options.strict||!1,this._variables=this._options.variables||{}};a.prototype.execute=function(t,e){switch(this._temporaryVariables=e||{},t.constructor){case Array:return this._executeArray(t);case Object:return this._executeObject(t);default:if(this._options.strict)throw new Error("Invalid call to JSONLogic#execute with: "+JSON.stringify(t));return null}},a.prototype._executeArray=function(t){return t.forEach(function(t){this._executeObject(t)}.bind(this)),this._variables},a.prototype._executeObject=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=this._calculate(t[n]));for(var n in e)e.hasOwnProperty(n)&&(this._variables[n]=e[n]);return this._variables},a.prototype._calculate=function(t){var e;switch(t.operation){case"&&":return this._calcAnd(t);case"||":return this._calcOr(t);case">":e=function(t,e){return t>e};break;case"^":e=function(t,e){return!t!=!e};break;case">=":case"=>":e=function(t,e){return t>=e};break;case"<":e=function(t,e){return t<e};break;case"<=":case"=<":e=function(t,e){return t<=e};break;case"==":e=function(t,e){return t===e};break;case"!=":e=function(t,e){return t!==e};break;default:if(!0===t||!1===t)return t;if(t.constructor===String)return this._getVariable(t);throw new Error("Invalid operation to perform: "+JSON.stringify(t))}var n=t.variables[0];n.constructor===Object?n=this._calculate(n):n.constructor===String&&(n=this._getVariable(n));var a=t.variables[1];return a.constructor===Object?a=this._calculate(a):n.constructor===String&&(a=this._getVariable(a)),e(n,a)},a.prototype._calcAnd=function(t){var e=!0;return t.variables.forEach(function(t){if(!this._calculate(t))return e=!1,!1}.bind(this)),e},a.prototype._calcOr=function(t){var e=!1;return t.variables.forEach(function(t){if(this._calculate(t))return e=!0,!1}.bind(this)),e},a.prototype._getVariable=function(t){if(this._temporaryVariables[t])return this._temporaryVariables[t];if(this._variables[t])return this._variables[t];if(this._options.strict)throw new Error("Variable '"+t+"' has not been initalised");return!1}},{}]},{},[1]);